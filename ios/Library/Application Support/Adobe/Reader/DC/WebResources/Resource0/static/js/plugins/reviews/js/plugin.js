/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2012 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2018 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

define("acplugins/reviews/js/ac-review",["plugins-common/ac-plugins"],function(e){e.Reviews||(e.Reviews={});var i=e.Reviews.Home;return i||(i=e.Reviews.Home={}),i.CachedData={},i.PLUGIN_ID||(i.PLUGIN_ID="reviews"),i}),define("acplugins/reviews/js/models/ui/collections-ui-model",["core/ac-core","acplugins/reviews/js/ac-review","core/models/workflow-status-strings","core/models/ui/ui-model"],function(e,i){var t="list",s="thumbnail";return i.CollectionsUiModel=e.UiModel.extend({recognized:{checkbox:{type:"boolean",optional:!1},data_render_delay:{type:"number",optional:!1},scroll_duration:{type:"number",optional:!1},scroll_id_into_view:{type:"string",optional:!0},scroll_render_delay:{type:"number",optional:!1},scroll_listen_delay:{type:"number",optional:!1},view:{type:"string",optional:!1,choices:[t,s]},folders_only:{type:"boolean",optional:!1},filter_by_extension:{type:"array",optional:!1},mode:{type:"string",optional:!1,choices:["desktop","web"]},itemClickAction:{type:"string",optional:!1,choices:["open","select"]},itemDblClickAction:{type:"string",optional:!1,choices:["preview","open"]},show_empty:{type:"boolean",optional:!1},index_last_selected:{type:"number",optional:!1},sort_key:{type:"string",optional:!1},sort_order:{type:"string",optional:!1}},defaults:{checkbox:!0,data_render_delay:10,scroll_duration:250,scroll_render_delay:250,scroll_listen_delay:250,view:t,folders_only:!1,filter_by_extension:[],mode:"web",itemClickAction:"select",itemDblClickAction:"open",show_empty:!1,index_last_selected:-1,sort_key:"",sort_order:""},initializeFromCohorts:function(e){e&&e["ts-a12-ui"]&&this.set({mode:"enabled"===e["ts-a12-ui"]?"desktop":"web"})},isListView:function(){return this.get("view")===t},isThumbnailView:function(){return this.get("view")===s}},{VIEW_LIST:t,VIEW_THUMBNAIL:s}),i.CollectionsUiModel}),define("acplugins/reviews/js/ops/plugin/listening-for-parcel-updates-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op","core/views/view-events"],function(e,i){i.ListeningForParcelUpdatesOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this)},run:function(){return this.options.appApi.notificationApi.addFolderNotificationCallback(this._getFolder(),_.bind(function(e){e.fetch()},this,this.options.parcelCollection)),this._getResolvedPromise()},_getFolder:function(){return this.options.parcelCollection.folder}})}),define("acplugins/reviews/js/ops/plugin/starting-plugin-op",["core/ac-core","files/ac-files","acplugins/reviews/js/ac-review","acplugins/reviews/js/models/ui/collections-ui-model","core/collections/parcel-collection","acplugins/reviews/js/ops/plugin/listening-for-parcel-updates-op","core/ops/op"],function(e,i,t){var s;t.StartingPluginOp=e.Op.extend({run:function(){void 0===s&&(s=!0);{var i,o,n,r,l,a=this.options;e.modelFactory,e.uiModelFactory}return i=t.opFactory,n=i.create("GettingParcelsOp",a),l=i.create("ListeningForParcelUpdatesOp",a),s===!0&&(s=!1,r=t.opFactory.create("ListeningForViewEventsOp",a),$.when(r.run())),o=i.create("ShowingSignInOp",a),o.run().then(function(){return n.run()},function(){})}})}),define("acplugins/reviews/js/views/view-events",["acplugins/reviews/js/ac-review"],function(e){e.ViewEvents={DELETE:"ts:delete",DOWNLOAD_PARCEL_ASSETS:"ts:download",UNSHARE:"ts:unshare",TRACK:"ts:track",OPENBROWSER:"ts:openbrowser",SHOW_SINGLE_ASSET:"ts:show_single_asset",FORWARD:"ts:forward",SAVEAS_SINGLE_ASSET:"ts:saveas_single_asset",GET_RHP_PREVIEW_METADATA:"ts:get_rhp_preview_metadata"}}),define("acplugins/reviews/js/ops/plugin/listening-for-view-events-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op","acplugins/reviews/js/views/view-events","core/views/view-events"],function(e,i){i.ListeningForViewEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this),this._initEventMap()},run:function(){return this.options.rootView.on("all",this._onViewEvent),this._deferred=$.Deferred(),this._deferred.promise()},_onViewEvent:function(e,i){var t,s,o,n;t=this._eventMap[e],t&&(s=t[0].create(t[1],i)),s&&(o=s.options,o&&(n=o.parentDeferred),s.run().then(function(){n&&n.resolve()},function(){n&&n.reject()}))},_mapEvent:function(e,i,t,s,o){e[i]=[t,s,o]},_initEventMap:function(){var t,s,o,n,r,l;t=this._eventMap={},s=this._mapEvent,o=e.opFactory,n=i.opFactory,r=e.ViewEvents,l=i.ViewEvents,s(t,r.SELECT_ITEM,n,"SelectingCollectionItemOp"),s(t,r.CLEAR_SELECTION,o,"ClearingSelectionOp"),s(t,l.DELETE,n,"DeletingParcelIfConfirmedOp"),s(t,l.DOWNLOAD_PARCEL_ASSETS,n,"DownloadingParcelAssetsOp"),s(t,r.DOWNLOAD,o,"DownloadingAssetIfExistsOp"),s(t,l.UNSHARE,n,"UnsharingParcelIfConfirmedOp"),s(t,l.TRACK,n,"ShowingParcelPreviewOp"),s(t,l.OPENBROWSER,n,"DesktopShowInBrowserOp"),s(t,l.SHOW_SINGLE_ASSET,n,"ShowingSingleAssetOp"),s(t,l.FORWARD,n,"ForwardingParcelOp"),s(t,l.SAVEAS_SINGLE_ASSET,n,"SaveAsSingleAssetOp"),s(t,l.GET_RHP_PREVIEW_METADATA,n,"GettingRhpPreviewMetadataOp")}})}),define("acplugins/reviews/js/ops/getting/getting-parcels-op",["core/ac-core","acplugins/reviews/js/ac-review","core/collections/parcel-collection","core/ops/op"],function(e,i){i.GettingParcelsOp=e.Op.extend({run:function(){var e,i,t=this.options;return e=t.parcelCollection,i=e.fetch()}})}),define("acplugins/reviews/js/ops/getting/getting-rhp-preview-metadata-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op"],function(e,i){return i.GettingRhpPreviewMetadataOp=e.Op.extend({run:function(){function i(){var e=c.get("item_model");return e?e.getSingleFileId():void 0}function t(){return n===i()}function s(e){return a.getConnectorsUiHelpers(a.getConnectorName(e))}function o(e){return d.create("GettingFolderPathOp",l).run(e).then(function(e){t()&&(r=e.path,c.set("file_path",r),c.set("connector_info",s(r[0].id)))})}var n,r,l=this.options,a=l.appApi.connectorsApi,c=l.rhpPreviewUiModel,d=e.opFactory;return n=i(),n?d.create("GettingAssetMetadataOp",l).run(n).then(function(e){return t()?(c.set({item_info:e,page_count:e.page_count}),o(e.parent_id)):void 0},function(e){404===e.status&&c.set("item_not_found",!0)}):this._getRejectedPromise()}}),i.GettingRhpPreviewMetadataOp}),define("acplugins/reviews/js/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0,"da-dk":!0,"fi-fi":!0,"nb-no":!0,"nl-nl":!0,"pt-br":!0,"sv-se":!0,"zh-cn":!0,"zh-tw":!0,"ko-kr":!0,"cs-cz":!0,"hu-hu":!0,"pl-pl":!0,"ru-ru":!0,"uk-ua":!0,"tr-tr":!0,"sk-sk":!0,"sl-si":!0,"bg-bg":!0}),define("acplugins/reviews/js/nls/root/ui-strings",{SELECTOR_LABEL:"For Review",SELECTOR_LABEL_WEB:"Sent",TOOL_LABEL:"Send",SEND_TRACK_LABEL:"Send & Track",REVIEW_WORKFLOW_NAME:"Shared For Review",TYPE:"Type",ADDED_DATE:"Added",MODIFIED_DATE:"Modified",PAGES:"Pages",SIZE:"Size",SENDER_NAME:"Sent By",SENT_DATE:"Date Sent",REPORT_ABUSE:"Report Abuse",UNKNOWN:"Unknown",EXTENSION:"(.<%- ext %>)",DOWNLOAD:"Download",DOWNLOAD_ALL:"Download All",REPLY:"Reply",FORWARD:"Forward",NOTIFY_ME_WHEN_VIEWED:"Notify when recipients viewed",UNSHARE:"Unshare",VIEWED_BY:"Viewed By",VIEW_FULL_ACTIVITY:"View Full Activity",EMAIL_REPLY_FORMAT:"Re: <%= emailSubject %>",OPEN:"Open",SAVEAS:"Save As",TRACK:"Track Online",OPEN_LINK:"(Open Link)",MESSAGE_HEADING:"Message",REMOVE:"Remove",SHARED_FILES:"Sent Files",SUBJECT:"Subject",SENT_TO:"Sent To",DATE_SENT:"Date Sent",VIEWS:"Views",PARCEL_PUBLIC_SHARING:"Anonymous",EXPAND:"Expand",COLLAPSE:"Collapse",SELECT_ALL:"Select All",NUMBER_OF_VIEWS:"Number of Views",GO_TO_ADOBE_SEND_WEBSITE:"Go To Adobe Send Website",GO_TO_ADOBE_S_T_WEBSITE:"Manage Documents Sent for Signature",DATE_VIEWED:"Date Viewed",CONFIRM_UNSHARE_TITLE:"Unshare",CONFIRM_UNSHARE_MSG_ONE_ITEM:"Your files will not longer be viewable to your recipients. Are you sure you want to unshare?",CONFIRM_UNSHARE_MSG_N_ITEMS:"Your files will not longer be viewable to your recipients. Are you sure you want to unshare?",CONFIRM_REMOVE_TITLE:"Remove",CONFIRM_REMOVE_MSG_ONE_ITEM:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",CONFIRM_REMOVE_MSG_N_ITEMS:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",NO_FILES_TITLE:"No Files",NO_FILES_MESSAGE:"There are no files available to download. The files may have been deleted.",SHARE_TITLE:"Send Files",SHARE_WELCOME:"Send and track large files online.",SHARE_WELCOME_DESKTOP:"The fast, easy way to share and monitor files.",SHARE_SELECT_FILES:"Select Files to Send",SHARE_VIEW_SHARED_FILES:"View All Sent Files",READER_FILESELECT_WINDOW_TITLE:"Select Files",READER_FILESELECT_CONTINUE_BUTTON:"Continue",ALL_SUPPORTED_FILES:"All supported files",CHOOSE_FILES:"Choose Files",ALL_SUPPORTED_FILES:"All supported files",FILE:"file",FILES:"files",UPLOADING_TO_SEND:"Uploading to Adobe Document Cloud...",SELECTED_FILES:"Selected Files",ADD_MORE_FILES:"Add Files",SHARE_WITH_HEADING:"Send To",SHARE_ADDRESS_BOOK:"Address Book",SHARE_CHOICE_WORLD:"Create Anonymous Link",SHARE_CHIOCE_WORLD_EXPLAIN:"(with basic usage information)",SHARE_CHOICE_INDIVIDUAL:"Send Personalized Invitations",SHARE_CHOICE_INDIVIDUAL_EXPLAIN:"(with detailed tracking)",SHARE_CHOICE_ALLOW_COMMENTS:"Allow Comments",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE:"Add Your Logo & Color",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE_EDIT:"Edit",SHARE_ADDRESS_HEADING:"Recipient Email Addresses",SHARE_ADDRESS_PROMPT:"Enter recipient email addresses",SHARE_SUBJECT_MSG_HEADING:"Subject & Message",SHARE_INITIAL_SUBJECT:"Shared Files",SHARE_AV_ERROR:"Audio/video files are not supported for sending, and have been omitted from your selection.",SHARE_AV_UPGRADE_MESSAGE:" Upgrade to be able to send audio/video files.",SHARE_FORMS_ERROR:"Form files are not currently supported for sending. Go to Fill & Sign to find and download the form.",SHARE_FORMS_ERROR_DESKTOP:"This file type is currently not supported and has been omitted from your selection.",SHARE_AV_FORMS_ERROR:"Audio/video and form files are not supported for sending, and have been omitted from your selection.",SHARE_OVER_LIMIT_APPEND_ERROR:"<br/><br/>Additionally, you selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_ERROR:"You selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_TITLE:"Too many files.",SHARE_NON_NATIVE_APPEND_ERROR:"<br/><br/>Additionally, your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR:"Send & Track is currently not supported for files stored in <%= connectorLabel %>. To send files from <%= connectorLabel %>, save them to your computer first.",SHARE_NON_NATIVE_ERROR_DEFAULT:"Your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR_HEADING:"Unsupported File Storage",SHARE_MESSAGE_HEADING:"Message",SHARE_MESSAGE_PROMPT:"I have shared some files with you. Please click on the link to view and download them.",SHARE_BUTTON:"Send",SHARE_BUTTON_LINK:"Create Link",SHARE_CANCEL:"Cancel",SHARE_EMAIL_INVALID_PLURAL:"The following email addresses are invalid:",SHARE_EMAIL_INVALID_SINGULAR:"The following email address is invalid:",SHARE_ERROR_SEND_LIMIT_EXCEEDED_TITLE:"Not sent",SHARE_ERROR_SEND_LIMIT_EXCEEDED:"The number of recipients you have selected exceeds your recent limit. Reduce the number of recipients, or wait until later to try again.",SHARE_ERROR_UNSUPPORTED_SHARING_MIME_TYPE:"Audio/video files aren't supported.",SHARE_ERROR_RECIPIENTS_NOT_ALLOWED:"Please upgrade to send to individuals.",SHARE_ERROR_CANNOT_CONVERT_FORM:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_RESTRICTION:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_TIMEOUT:"Files could not be sent because the form file conversion to PDF timed out.",SHARE_INDIVIDUAL_HELP_WEB:"Note: Personalized links are unique to each recipient, but anyone the recipient shares those links with can access the documents.",SHARE_INDIVIDUAL_HELP:"Note: Personalized invitations are unique to each recipient, but anyone the recipient shares those invitations with can access the documents.",SHARE_UPLOAD_ERROR_TITLE:"Error uploading files",SHARE_UPLOAD_ERROR_MSG:"One or more files could not be uploaded. Please try again.",SHARE_NO_FILES_SELECTED:"There are currently no files selected.",SHARE_CLICK_TO_ADD_FILES:"Click the Add Files button to get started.",SHARE_RECIPIENT_PAGE_HEADLINE:"Recipient Page",SHARE_CHOICE_INCLUDE_MESSAGE:"Include Message Text",SHARE_CHOICE_RESPOND_BACK:"Include Reply-To",SHARE_REMOVE:"Remove",ADD_FILES_REJECTED_TITLE:"Invalid Filename Format",ADD_FILES_REJECTED_MESSAGE:"Files must have a file name extension or be a known file type to be sent. Please ensure that your filename includes a valid file extension.",SHARE_PUBLIC_LINK_HEADING_DESKTOP:"Distribute the anonymous link by:",SHARE_COPY_LINK_BUTTON:"Copy Link",SHARE_SUCCESS_SENT_LINK:"Go to Sent Files",SHARE_SUCCESS_SENT_LINK_FOOTER:"to view all previously sent files",READER_GO_URL:"http://www.adobe.com/go/sendpluginrdr_12_0_0",ACROBAT_GO_URL:"http://www.adobe.com/go/sendpluginacro_12_0_0",SEND_UPSELL_HEADLINE:"Upgrade To",SEND_UPSELL_HEADLINE_OLD:"Upgrade to:",SEND_UPSELL_POINT_1:"• Send large files, including documents and videos",SEND_UPSELL_POINT_2:"• Receive an email when files are viewed",SEND_UPSELL_POINT_3:"• Track downloads using an online dashboard",SEND_UPSELL_LATER:"Later",SEND_UPSELL_NOW:"Upgrade Now",SEND_UPSELL_LEARN_MORE:"Learn More",SEND_UPSELL_UPGRADE_REQUIRED:"Unsupported Files",SHARE_TOO_MANY_DLG_TITLE:"Too many email addresses",SHARE_TOO_MANU_DLG_MESSAGE:"You've entered <%=numRecipients%> email addresses, but you can only send to <%=maxRecipients%> at a time. Delete some addresses and try again.",SHARE_SUCCESS_DLG_TITLE:"Files Shared",SHARE_PUBLIC_LINK_HEADING:"Anonymous Link Generated",SHARE_EMAIL_LINK_BUTTON:"Email Link",SHARE_PUBLIC_LINK_MESSAGE:"Anyone with the link will access the files anonymously.",SHARE_PUBLIC_LINK_NO_COPY_OR_EMAIL_WARNING:"You have not yet copied or emailed the link. Are you sure you want to continue?",SHARE_PUBLIC_LINK_INSTRUCTIONS:"Copy the link below to email or share it with others. Anyone who uses the link will be able to access the files.",SHARE_INVITATIONS_HEADING:"Invitations Sent",SHARE_INVITATIONS_MESSAGE:"Each recipient will receive a link by email, and you will be notified when they follow the link.",SHARE_SUCCESS_CLOSE:"Close",SHARE_SUCCESS_CONTINUE:"Continue",SHARE_FILE_EMAIL_BODY:"I'm using Adobe Send. You can view my file by clicking on the link below:",SHARE_FILES_EMAIL_BODY:"I'm using Adobe Send. You can view my files by clicking on the link below:",S_T_FILE_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my file in Adobe Document Cloud by clicking on the link below:",S_T_FILES_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my files in Adobe Document Cloud by clicking on the link below:",SHARE_CLIPBOARD_MESSAGE:"Tip: Use Ctrl + C to copy",SHARE_CLIPBOARD_MESSAGE_MAC:"Tip: Use Cmd + C to copy",SHARE_CLIPBOARD_COPIED:"link is copied to clipboard",PARCEL_ACTIVITY_DOWNLOADED:"downloaded",PARCEL_ACTIVITY_PREVIEWED:"previewed",PARCEL_ACTIVITY_PUBLIC_VISITOR:"public link visitor",PARCEL_ACTIVITY_ALL_FILES:"All Files",PARCEL_ACTIVITY_ALL_FILES_PREVIEW:"All Files Preview Page",PARCEL_ACTIVITY_HEADING:"Activity for “<%= emailSubject %>”",PARCEL_ACTIVITY_RECIPIENT:"Recipient",PARCEL_ACTIVITY_ACTIVITY:"Activity",PARCEL_ACTIVITY_ITEM:"Item",PARCEL_ACTIVITY_DATE_VIEWED:"Date Viewed",PARCEL_ACTIVITY_CLOSE:"Close",CURRENTLY_SHARED_IN:"Sent To",SHARE_THIS_FILE:"Send this File",SHARE_THIS_FILE_AGAIN:"Send this File Again",SENT_FILES_HEADER_SEARCH_CONTROLS:"Search Controls",SENT_FILES_HEADER_REFRESH:"Refresh",SENT_FILES_NUM_FILES:"<%= numFiles %> files",NO_PARCELS_REVIEW_PROMPT:"There aren't any files here yet.",NO_REVIEWS_PROMPT:"No Review Files",NO_PARCELS_REVIEW_SUBPROMPT:"Files you've sent or received for review will appear here.",NO_PARCELS_SEND_BTN:"Adobe Send",NO_PARCELS_REVIEW_BTN:"Send File for Review",ON_REVIEWS_SIGN_OUT_PROMPT:"Sign in to access shared files.",ON_REVIEWS_SIGN_OUT_SUBPROMPT:"See and manage files you've sent or received for review.",REVIEWS_SIGN_IN_BUTTON:"Sign In",COULD_NOT_SEND:"Could not send",ENTERPRISE_USERS_ACCESS_ERROR:"You do not have access to this service. Please contact your IT Administrator to gain access, or try to sign in with an Adobe ID.",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_NOT_AVAILABLE:"Continue at Adobe Document Cloud",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your Color and Logo are currently only available online at the Adobe Send web site. Click "<%= buttonName %>" to go there now.',S_T_CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your logo and color are currently only available at Adobe Document Cloud. Click "<%= buttonName %>" to go there now.',CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_OK:"Continue",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_TITLE:"Add Your Logo & Color",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_DESCRIPTION:"Add your logo and choose a color to display on emails and recipient page.",CUSTOMIZE_RECIPIENT_PAGE_ADD_LOGO:"Add Logo",CUSTOMIZE_RECIPIENT_PAGE_REMOVE_LOGO:"Remove Logo",CUSTOMIZE_RECIPIENT_PAGE_CHOOSE_COLOR:"Choose Color",CUSTOMIZE_RECIPIENT_PAGE_SAVE:"Save",CUSTOMIZE_RECIPIENT_PAGE_CLOSE:"Cancel",CUSTOMIZE_RECIPIENT_PAGE_FILE_FILTERING_LABEL:"File Type is an image",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_TITLE:"Error",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_FORMAT:"The file you have chosen cannot be used as a logo. Please select another file. ",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_COLOR_FORMAT:"The color you have entered is invalid. Please enter a hex value like #FFFFFF or #FFF.",SURVEY_TITLE:"We are interested in your Feedback",SURVEY_LINK:"Tell Us What You Think",SURVEY_QUESTION_ONE:"Why are you using Send & Track today?",SURVEY_QUESTION_TWO:"Does it work well for you?",SURVEY_QUESTION_THREE:"Is it missing something you wanted?",SURVEY_SEND:"Send",SURVEY_CLOSE:"No Thanks",SURVEY_TEXTAREA_LIMITATION_LABEL:"characters remaining",INVALID_PARAMETER_SURVEY_MESSAGE:"Answer type not allowed",INVALID_PARAMETER_SURVEY_TITLE:"Invalid Parameter",SEND_RHP_TITLE:"Sent To",GENERIC_ARIA_LABEL_STRING:"<%= prefix %>. <%= suffix %>",ENTERPRISE_RESTRICTIONS_ENFORCED:"Enterprise Sharing Restrictions Enabled",ENTERPRISE_USERS_SHARING_ACCESS:"This feature isn't enabled because your organization has enabled sharing restrictions. ",OPEN:"Open",CLOSED:"Closed",NAME:"NAME",LAST_ACTIVITY:"LAST ACTIVITY",DEADLINE:"DEADLINE",STATUS:"STATUS",INITIATOR:"OWNER",LAST_COMMENTED:"Last commented",GUEST:"GUEST",REVIEWS:"Reviews",DELETE_REVIEW_MESSAGE:"Deleting this shared file will permanently remove it and all associated comments from Document Cloud for all participants. This can't be undone.",DELETE_ACTION_BUTTON:"Delete File",CANCEL_ACTION_BUTTON:"Cancel",UNSHARE_REVIEW_MESSAGE:"Are you sure? People will not be able to access this document anymore.",UNSHARE_ACTION_BUTTON:"Unshare File",OWNER:"OWNER",REVIEWED:"Reviewed",NUM_OF_TOTAL_REVIEWED:"<%= num %> of <%= total %>",YOU:"You",OWNER:"OWNER",REVIEWED:"Reviewed",NUM_OF_TOTAL_REVIEWED:"<%= num %> of <%= total %>",NUM_OF_TOTAL_COMMENTED:"<%= num %> of <%= total %> commented",YOU:"You",REMOVEME_REVIEW_MESSAGE:"Are you sure you want to remove yourself? If you continue, the document will be removed from the list of items shared with you.",REMOVEME_ACTION_BUTTON:"Remove Me",DELETED_STRING:"Deleted",UNSHARED_STRING:"Unshared",REMOVEME_STRING:"Removed",REMOVE_ME_TITLE:"Remove Me",REMOVE_ME_MESSAGE:"If you remove yourself, this file will be removed from the list of files shared with you.",ASCENDING:"Ascending",DESCENDING:"Descending",FINISHED:"Finished",COMMENTED:"Commented",SORT_BY_DROPDOWN:"Sort By Dropdown"}),define("acplugins/reviews/js/ops/downloading/downloading-parcel-assets-op",["core/ac-core","acplugins/reviews/js/ac-review","i18n!core/nls/ui-strings","i18n!acplugins/reviews/js/nls/ui-strings","core/utils/http-util","core/ops/op"],function(e,i,t,s,o){return i.DownloadingParcelAssetsOp=e.Op.extend({run:function(){var e,i,n,r,l,a,c,d,h,p=this.options,u=$.Deferred(),v=p.appApi.baseFilesUrisApi.getDownloadUri(),w=p.appApi.dialogApi;return e=p.selectionUiModel,i=e.getSingleSelectedItemModel(),r=e.get("selected_item_ui_models"),i&&(l=i.id,n=r[l],d="GET",a=o.getRequestHeaders(d),n.set("masked",!0),h=i.url()+"/assets",$.ajax(h,{type:d,headers:a,dataType:"JSON"}).then(function(e){var i=e.assets,o=_.pluck(i,"id").join(";");o?p.appApi.downloadApi.getDownloadTicket(o).done(function(e){h=v+"archive/zip/"+o+"?dlticket="+e.download_ticket,c=p.iframe,c?c.attr("src",h):window.open(h,"_self"),n.set("masked",!1)}):w.displayTextAlert(w.SEVERITY_ERROR,s.NO_FILES_TITLE,s.NO_FILES_MESSAGE,t.CLOSE)},function(){n.set("masked",!1)})),u.promise()}}),i.DownloadingParcelAssetsOp}),define("acplugins/reviews/js/ops/downloading/saveas-single-asset-op",["core/ac-core","acplugins/reviews/js/ac-review","core/models/rna/rna-notification-model","i18n!acplugins/reviews/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i,t,s,o){var n="binder.zip";i.SaveAsSingleAssetOp=e.Op.extend({run:function(){var i,o,r,l=this.options,a=e.opFactory,c=l.idToSaveAs,d=l.nameToSaveAs,h={notificationHeading:s.SHARED_FILES};return c&&d||(i=l.selectionUiModel,o=i.getSingleSelectedItemModel(),o&&(r=o.get("resources"),r&&1===r.length&&(c=r[0].id,d=r[0].name))),h.fileName=n,h.fileExtn=e.Util.getExtension(n),h.showDownloadAll=!1,a.create("GettingAssetMetadataOp",l).run(c).done(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.notificationAPI.createNotification({operationType:t.NOTIFICATION_OPERATIONS.PROCESS,state:t.NOTIFICATION_STATES.IN_PROGRESS,userData:JSON.stringify(h),progress:0,description:"sent"}).done(_.bind(function(i){e.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0),this._downloadSingleFileAsZip(c,i).then(_.bind(function(e){this._onDownloadCompletion(i,e)},this),_.bind(function(e){this._onDownloadFailed(i,e)},this))},this))},this))},this)),this._getResolvedPromise()},_downloadSingleFileAsZip:function(i,t){var s=this.options,o=e.opFactory;return o.create("DownloadingZipStartOp",_.extend({},s,{id_list:i,numForms:0,fileName:n,notificationObj:t})).run()},_onDownloadCompletion:function(e,i){var s=e.get("userData"),o={};try{o=JSON.parse(s)}catch(n){}i.downloadedFileSys&&(o.downloadedFileSys=i.downloadedFileSys),i.downloadedFilePath&&(o.downloadedFilePath=i.downloadedFilePath),e.invoke("setProperty",{operationType:"",userData:JSON.stringify(o),state:t.NOTIFICATION_STATES.DOWNLOADED})},_onDownloadFailed:function(e,i){if(7!==i){var s={errorTitle:o.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!1};e.invoke("setProperty",{operationType:"",state:t.NOTIFICATION_STATES.FAILED,error:JSON.stringify(s)})}}})}),define("acplugins/reviews/js/ops/manipulation/deleting-parcel-if-confirmed-op",["core/ac-core","acplugins/reviews/js/ac-review","i18n!core/nls/ui-strings","i18n!acplugins/reviews/js/nls/ui-strings","core/ops/op"],function(e,i,t,s){i.DeletingParcelIfConfirmedOp=e.Op.extend({run:function(){var e,o,n,r,l=this.options,a=l.appApi.dialogApi;e=l.selectionUiModel;var c=l.searchUiModel;return o=e.getNumSelectedItems(),n=1===o?s.CONFIRM_REMOVE_MSG_ONE_ITEM:s.CONFIRM_REMOVE_MSG_N_ITEMS,r=s.CONFIRM_REMOVE_TITLE,a.displayTextAlert(a.SEVERITY_WARNING,r,n,s.REMOVE,t.CANCEL).then(function(){return i.opFactory.create("DeletingParcelOp",l).run().done(function(){e.clearSelection(),c.invalidate()})})}})}),define("acplugins/reviews/js/ops/manipulation/deleting-parcel-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op"],function(e,i){i.DeletingParcelOp=e.Op.extend({run:function(){var e,i,t,s=this.options,o=[];return e=s.selectionUiModel,i=e.get("selected_item_models"),t=e.get("selected_item_ui_models"),_.each(i,function(i){var s,n=i.id,r=t[n];r.set("masked",!0),s=i.destroy({wait:!0}).then(function(){e.deselectItem(n,!0)},function(){r.set("masked",!1)}),o.push(s)}),$.when.apply($,o)}})}),define("acplugins/reviews/js/ops/manipulation/forwarding-parcel-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op"],function(e,i){i.ForwardingParcelOp=e.Op.extend({run:function(){var i,t,s,o=this.options,n={};return i=o.selectionUiModel,t=i.getSingleSelectedItemModel(),s="/send/parcel/"+t.id,e.Util.isCEF()?this.options.appApi.rnaApi.done(_.bind(function(e){n.selectedParcelId=t.id,n.selectedAssetIds=[],n.selectedModels=[],e.stApi.launchSendTrackApp(n)},this)):(o.appApi.routerApi.navigate(s,{trigger:!0}),i.clearSelection()),this._getResolvedPromise()}})}),define("acplugins/reviews/js/ops/manipulation/setting-delivery-receipts-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/ops/op"],function(e,i,t){i.SettingDeliveryReceiptsOp=e.Op.extend({run:function(){var e,i,s,o,n,r=this.options,l=this.options.parcelModel;return e=l.url(),i=e+"/delivery_receipts",s="PUT",o={value:r.deliveryReceipts},n=t.getRequestHeaders(s),n["Content-Type"]="application/json",$.ajax(i,{type:s,headers:n,data:JSON.stringify(o),dataType:"json"}).then(function(){r.parcelModel.set({delivery_receipts:r.deliveryReceipts})})}})}),define("acplugins/reviews/js/ops/manipulation/unsharing-parcel-if-confirmed-op",["core/ac-core","acplugins/reviews/js/ac-review","i18n!acplugins/reviews/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i,t,s){i.UnsharingParcelIfConfirmedOp=e.Op.extend({run:function(){var e,o,n,r,l=this.options,a=l.appApi.dialogApi;return e=l.selectionUiModel,o=e.getNumSelectedItems(),n=1===o?t.CONFIRM_UNSHARE_MSG_ONE_ITEM:_.template(t.CONFIRM_UNSHARE_MSG_N_ITEMS,{numItems:o}),r=t.CONFIRM_UNSHARE_TITLE,a.displayTextAlert(a.SEVERITY_WARNING,r,n,t.UNSHARE,s.CANCEL).then(function(){return i.opFactory.create("UnsharingParcelOp",l).run().done(function(){e.clearSelection()})})}})}),define("acplugins/reviews/js/ops/manipulation/unshare-one-parcel-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/ops/op"],function(e,i,t){return i.UnshareOneParcelOp=e.Op.extend({run:function(){var e,i,s,o,n,r=this.options,l="PUT";return e=r.itemModel,i=e.url()+"/is_active",s=JSON.stringify({value:!1}),o=t.getRequestHeaders(l),o["Content-Type"]="application/json",n=$.ajax(i,{type:l,headers:o,data:s,dataType:"json"}).then(function(){e.set({is_active:!1})})}}),i.UnshareParcelOp}),define("acplugins/reviews/js/ops/manipulation/unsharing-parcel-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op","acplugins/reviews/js/ops/manipulation/unshare-one-parcel-op"],function(e,i){i.UnsharingParcelOp=e.Op.extend({run:function(){var e,t,s,o=this.options,n=[];return e=o.selectionUiModel,t=e.get("selected_item_models"),s=e.get("selected_item_ui_models"),_.each(t,function(t){var r,l,a=t.id,c=s[a];c.set("masked",!0),l=new i.UnshareOneParcelOp({itemModel:t}),r=l.run().then(function(){e.clearSelection(),t.set({is_active:!1}),c.set("masked",!1),o.rootView._sendDataModelRefreshCommand()},function(){c.set("masked",!1)}),n.push(r)}),$.when.apply($,n)}})}),define("acplugins/reviews/js/ops/manipulation/deleting-review-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/ops/op"],function(e,i,t){return i.DeletingReviewOp=e.Op.extend({run:function(e){var i,s=(this.options,"DELETE"),o={},n=$.Deferred();i=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"parcels/"+e;var r=t.getRequestHeaders(s);return o["Content-Type"]="application/json",o.Accept="application/vnd.adobe.skybox+json;version=1",o.Authorization=r.Authorization,o["x-api-client-id"]=r["x-api-client-id"],$.ajax(i,{type:s,headers:o,dataType:"json",global:!0,success:_.bind(function(e){n.resolve(e)},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),n.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),n}}),i.DeletingReviewOp}),define("acplugins/reviews/js/ops/manipulation/fetching-review-participants-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/ops/op"],function(e,i,t){return i.FetchingReviewParticipantOp=e.Op.extend({run:function(e){var i,s,o=this.options,n="GET",r=$.Deferred(),s={};i=e+"/participants";var l=t.getRequestHeaders(n);s["x-api-key"]="AdobeAcrobat5",s["x-api-client-id"]=l["x-api-client-id"];var a=o.appApi.sessionApi.getPrimaryToken();return _.isUndefined(a)||(s["x-user-auth"]=a),s["Content-Type"]="application/json",$.ajax(i,{type:n,headers:s,dataType:"json",global:!1,success:_.bind(function(e){r.resolve(e)},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),r.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),r}}),i.FetchingReviewParticipantOp}),define("acplugins/reviews/js/ops/manipulation/fetching-thumbnail-for-review-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/utils/thumbnail-util","core/ops/op"],function(e,i,t,s){return i.FetchingThumbnailForReviewOp=e.Op.extend({run:function(i,o,n,r,l,a){var c=(this.options,"GET"),d={},h=$.Deferred(),p=t.getRequestHeaders(c);d.Authorization=p.Authorization;var u=s.getThumnailRequestParams(e.getBaseFilesUrl(),i,o,n,r);return this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaTasksAPI.invokeMethod(u).then(_.bind(function(e){e.has_cached_icon._value?h.resolve(l===!0?{ImageURL:e.icon_url._value,ItemID:a}:e.icon_url._value):e._addEventListener("custom:urlImageBitmap",_.bind(function(e,i){var t=i.params;void 0!=t.url&&h.resolve(l===!0?{ImageURL:t.url,ItemID:a}:t.url)},this))},this))},this)),h.promise()}}),i.FetchingThumbnailForReviewOp}),define("acplugins/reviews/js/ops/manipulation/fetching-review-intro-message-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/ops/op"],function(e,i,t){return i.FetchIntroMessageOp=e.Op.extend({run:function(s){var o,n=(this.options,"GET"),r={},l=$.Deferred();if("dummyId"===s||""===s)return l.reject({httpRespCode:404,httpRespBody:"The resource is no longer accessible"}),l;if(this.invitationId=s,this.dataMap=i.CachedData,void 0!=this.dataMap[s])return l.resolve(this.dataMap[s]),l;var a=t.getRequestHeaders(n);return r.Authorization="Bearer "+this.options.appApi.sessionApi.getPrimaryToken(),r["x-api-client-id"]=a["x-api-client-id"],o=e.getBaseFilesUrl()+"a/preview/"+s+"/bootstrap",$.ajax(o,{type:n,headers:r,global:!1,dataType:"json",success:_.bind(function(e,i,t){void 0===e||void 0===e.parcel_data||void 0===e.parcel_data.email_message?l.reject({httpRespCode:t.status,httpRespBody:t.responseText}):(this.dataMap[this.invitationId]=e.parcel_data.email_message,l.resolve(e.parcel_data.email_message))},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),l.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),l}}),i.FetchIntroMessage}),define("acplugins/reviews/js/ops/manipulation/unshare-review-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/ops/op"],function(e,i,t){return i.UnshareReviewOp=e.Op.extend({run:function(e){return this.options.unshareReviewOpPromise=$.Deferred(),"undefined"!=typeof this.options.commenting_uri&&null!==this.options.commenting_uri&&"false"!==this.options.commenting_uri?(this.options.parcelIDForUnshare=e,this._performMergeAnnotsAndUnshare(e)):this._performUnshare(e,!1),this.options.unshareReviewOpPromise
},_performMergeAnnotsAndUnshare:function(e){var i,s,o="POST",n="";i=this.options.commenting_uri+"?operation=mergeannots",s=t.getRequestHeaders(o),s.Connection="keep-alive",s["Content-Length"]="0",s["Content-Type"]="application/vnd.adobe.dc+json;version=1",s.Accept="application/vnd.adobe.dc+json;version=1",s["x-api-client-id"]=t.REQUEST_HEADER_CLIENT_ID,s["x-api-app-info"]=s["x-api-client-id"],s["x-api-key"]="AdobeAcrobat5",$.ajax(i,{type:o,headers:s,data:n,dataType:"json",global:!1,success:_.bind(function(i){if("done"===i.status)this._performUnshare(e,!0);else if("in progress"===i.status){this.options.pollCountForMergeAnnots=1,this.options.MAX_POLL_COUNT_FOR_MERGE_ANNOTS=10;var t=2e3;i.retry_interval>0&&(t=i.retry_interval),setTimeout(_.bind(this._pollMergeAnnots,this),t)}},this),error:_.bind(function(e){this.options.code="Unknown";try{var i=JSON.parse(e.responseText);void 0!==i&&(this.options.code=i.error.code)}catch(t){}this.options.unshareReviewOpPromise.reject(this.options)},this)})},_pollMergeAnnots:function(){var e,i,s="POST",o="";e=this.options.commenting_uri+"?operation=mergeannots",i=t.getRequestHeaders(s),i.Connection="keep-alive",i["Content-Length"]="0",i["Content-Type"]="application/vnd.adobe.dc+json;version=1",i.Accept="application/vnd.adobe.dc+json;version=1",i["x-api-client-id"]=t.REQUEST_HEADER_CLIENT_ID,i["x-api-app-info"]=i["x-api-client-id"],i["x-api-key"]="AdobeAcrobat5",$.ajax(e,{type:s,headers:i,data:o,dataType:"json",global:!1,success:_.bind(function(e){if("done"===e.status){if(this._performUnshare(this.options.parcelIDForUnshare,!0),this.options.pollCountForMergeAnnots>=2){var i=this.options.appApi.rnaApi;_.isUndefined(i)||i.done(_.bind(function(e){var i={};i.Progress="Stop",e._reviewAPI.invoke("EurekaUnshareProgress",i)}),this)}}else if("in progress"===e.status){if(this.options.pollCountForMergeAnnots++,2==this.options.pollCountForMergeAnnots){var i=this.options.appApi.rnaApi;_.isUndefined(i)||i.done(_.bind(function(e){var i={};i.Progress="Start",e._reviewAPI.invoke("EurekaUnshareProgress",i)}),this)}if(this.options.pollCountForMergeAnnots>this.options.MAX_POLL_COUNT_FOR_MERGE_ANNOTS){var i=this.options.appApi.rnaApi;_.isUndefined(i)||i.done(_.bind(function(e){var i={};i.Progress="Stop",i.Error="true",e._reviewAPI.invoke("EurekaUnshareProgress",i)}),this)}else{var t=2e3;e.retry_interval>0&&(t=e.retry_interval),setTimeout(_.bind(this._pollMergeAnnots,this),t)}}else{var i=this.options.appApi.rnaApi;_.isUndefined(i)||i.done(_.bind(function(e){var i={};i.Progress="Stop",i.Error="true",e._reviewAPI.invoke("EurekaUnshareProgress",i)}),this)}},this),error:_.bind(function(){var e=this.options.appApi.rnaApi;_.isUndefined(e)||e.done(_.bind(function(e){var i={};i.Progress="Stop",i.Error="true",e._reviewAPI.invoke("EurekaUnshareProgress",i)}),this),this.options.code="Unknown",this.options.unshareReviewOpPromise.reject(this.options)},this)})},_performUnshare:function(e,i){var s,o,n,r,l="PUT";r=i===!0?"?deleteAnnots=true":"",s=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"parcels/"+e+"/is_active"+r,o=JSON.stringify({value:!1}),n=t.getRequestHeaders(l),n["Content-Type"]="application/json",$.ajax(s,{type:l,headers:n,data:o,dataType:"json",global:!0,success:_.bind(function(e){this.options.unshareReviewOpPromise.resolve(e)},this),error:_.bind(function(e){this.options.unshareReviewOpPromise.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)})}}),i.UnshareReviewOp}),define("acplugins/reviews/js/ops/manipulation/remove-me-op",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/http-util","core/ops/op"],function(e,i,t){return i.RemoveMeOp=e.Op.extend({run:function(e){var i,s,o,n,r=this.options,l="DELETE",a=$.Deferred();return i=r.itemModel,s=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"invitation/"+e+"/consent",o=JSON.stringify({value:!1}),n=t.getRequestHeaders(l),n["Content-Type"]="application/json",$.ajax(s,{type:l,headers:n,data:o,dataType:"json",global:!0,success:_.bind(function(e){a.resolve(e)},this),error:_.bind(function(e){423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),a.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),a}}),i.RemoveMeOp}),define("acplugins/reviews/js/ops/selection/selecting-collection-item-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op"],function(e,i){return i.SelectingCollectionItemOp=e.Op.extend({run:function(){var i,t=this.options,s=t.itemView,o=this._multipleSelection();switch(this.options.selectType){case e.SelectionUiModel.SELECT_ALL:i=this._selectAll(!0);break;case e.SelectionUiModel.SELECT_NONE:i=this._selectAll(!1);break;case e.SelectionUiModel.SELECT_DESELECT:i=this._selectItem(s,!1);break;case e.SelectionUiModel.SELECT_EXTEND:i=this._extendSelectItem(s);break;case e.SelectionUiModel.SELECT_SELECT:i=this._selectItem(s);break;case e.SelectionUiModel.SELECT_TOGGLE:i=this._toggleSelectItem(s);break;case e.SelectionUiModel.SELECT_NEXT:i=this._selectNext();break;case e.SelectionUiModel.SELECT_PREVIOUS:i=this._selectPrevious();break;case e.SelectionUiModel.EXTEND_SELECT_NEXT:i=this._selectNext(o);break;case e.SelectionUiModel.EXTEND_SELECT_PREVIOUS:i=this._selectPrevious(o)}return i&&t.selectionUiModel.triggerSelectionChange(),this._getResolvedPromise()},_selectItemView:function(e,i){var t,s=this.options,o=e.model;return t=s.noFolderSelection&&o.isFolder(),s.selectionUiModel.selectItem(o,e.options.itemUiModel,t?!1:i)},_selectAll:function(i){var t,s=this.options.collectionItemsView.getChildViews();if(!(i&&s.length>1)||this._multipleSelection())return i?(_.each(s,_.bind(function(e){this._selectItemView(e,i)&&(t=!0)},this)),t):(e.opFactory.create("ClearingSelectionOp",this.options).run(),t=!0)},_deselectAll:function(){return this.options.selectionUiModel.getNumSelectedItems()>0?(this._selectAll(!1),!0):!1},_selectNext:function(e){var i=this._getSelectionEnd(),t=this._getNextSelectable(i,!1);if(e||this._deselectAll())return t>=0&&(i=t),this._selectChildAt(i)},_selectPrevious:function(e){var i=this._getSelectionStart(),t=this._getNextSelectable(i,!0);if(e||this._deselectAll())return t>=0&&(i=t),this._selectChildAt(i)},_extendSelectItem:function(e){var i,t,s,o;return this._multipleSelection()||this._selectAll(!1)&&(o=!0),this._selectItemView(e,!0)&&(o=!0),i=this._getTargetIndex(),t=this._getClosestSelectedIndex(i,!1),t>0?(this._selectRange(!0,i,t)&&(o=!0),this._selectRange(!1,0,i-1)&&(o=!0)):(s=this._getClosestSelectedIndex(i,!0),s>=0?this._selectRange(!0,s,i)&&(o=!0):this._selectItem(e)&&(o=!0)),o},_selectItem:function(e){var i;return this._selectAll(!1)&&(i=!0),this._selectItemView(e,!0)&&(i=!0),i},_toggleSelectItem:function(e){var i,t=e.options.itemUiModel.get("selected");return this._multipleSelection()||this._selectAll(!1)&&(i=!0),this._selectItemView(e,!t)&&(i=!0),i},_multipleSelection:function(){return this.options.selectionUiModel.get("multiple_selection")},_getSelectionIndex:function(e){function i(e){return s=t.eq(e),a.isItemSelected(s.data("id"))}var t,s,o,n,r,l=this.options,a=l.selectionUiModel;if(t=this._getChildren(),o=t.length,r=-1,e){for(n=0;o>n;n+=1)if(i(n)){r=n;break}}else for(n=o-1;n>=0;n-=1)if(i(n)){r=n;break}return r},_getSelectionStart:function(){return this._getSelectionIndex(!0)},_getSelectionEnd:function(){return this._getSelectionIndex(!1)},_getTargetId:function(){var e,i,t=this.options.itemView;return t&&(e=t.model,e&&(i=e.id)),i},_getTargetIndex:function(){var e,i,t;return i=this._getTargetId(),t=this.options.collectionItemsView.$el.children(),t.each(function(t,s){return $(s).data("id")===i?(e=t,!1):void 0}),e},_getClosestSelectedIndex:function(e,i){var t,s,o,n,r,l;if(t=this.options.collectionItemsView,s=t.$el.children(),o=s.length,n=-1,l=_.bind(function(e){var i=this._getItemUiModelAt(t,s,e);return i.get("selected")},this),i){for(r=e-1;r>=0;r-=1)if(l(r)){n=r;break}}else for(r=e+1;o>r;r+=1)if(l(r)){n=r;break}return n},_selectRange:function(e,i,t){var s,o,n,r,l;for(s=this.options.collectionItemsView,n=s.$el.children(),r=i;t>=r;r+=1)o=this._getItemViewAt(s,n,r),this._selectItemView(o,e)&&(l=!0);return l},_isChildAtSelectable:function(e){return this._isChildSelectable(this._getChildAt(e))},_isChildSelectable:function(e){var i=e.data("model");return!this.options.noFolderSelection||!i.isFolder()},_selectChild:function(e,i,t){var s,o,n,r=this.options,l=!1;if(e)return e=$(e),n=this.options.collectionItemsView.getChildViewById(e.data("id")),s=n.model,o=n.options.itemUiModel,t&&(l=t.scrollIntoView),l&&this._scrollItemIntoView(e),r.selectionUiModel.selectItem(s,o,this._isChildSelectable(e)?i:!1,!0)},_selectChildAndScroll:function(e,i){return this._selectChild(e,i,{scrollIntoView:!0})},_selectChildAt:function(e,i,t){return _.isUndefined(i)&&(i=!0),this._selectChildAndScroll(this._getChildAt(e),i,t)},_getItemViewAt:function(e,i,t){var s=i.eq(t),o=$(s).data("id");return e.getChildViewById(o)},_getChildren:function(){return this.options.collectionItemsView.$el.children()},_getChildCount:function(){return this._getChildren().length},_getChildAt:function(e){var i=this._getChildren();return 0>e||e>=i.length?void 0:i.eq(e)},_getNextSelectable:function(e,i){return i?Math.max(e-1,0):Math.min(this._getChildCount()-1,e+1)},_scrollItemIntoView:function(e){var i=e.position().top,t=e.height(),s=$(this.options.collectionItemsView.el).height();if(0>i||i+t>s){var o=$(this.options.collectionItemsView.el).scrollTop(),n=i-(s-t)/2;$(this.options.collectionItemsView.el).scrollTop(Math.max(o+n,0))}},_getItemUiModelAt:function(e,i,t){var s=this._getItemViewAt(e,i,t);return s.options.itemUiModel}}),i.SelectingCollectionItemOp}),define("acplugins/reviews/js/ops/showing/showing-parcel-preview-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op"],function(e,i){i.ShowingParcelPreviewOp=e.Op.extend({run:function(){var e,i,t,s,o=this.options;return e=o.appApi,t=o.parcelModel,t||(i=o.selectionUiModel,t=i.getSingleSelectedItemModel()),t&&(s=t.id),s&&e.routerApi.navigate("/sentfiles/"+s,{trigger:!0}),this._getResolvedPromise()}})}),define("acplugins/reviews/js/ops/showing/showing-sign-in-op",["core/ac-core","acplugins/reviews/js/ac-review","i18n!acplugins/reviews/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i){i.ShowingSignInOp=e.Op.extend({run:function(){return this._getResolvedPromise()}})}),define("acplugins/reviews/js/ops/showing/showing-single-asset-op",["core/ac-core","acplugins/reviews/js/ac-review","i18n!acplugins/reviews/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i){i.ShowingSingleAssetOp=e.Op.extend({run:function(){var i,t,s,o=this.options,n=o.idToShow,r=[];return n||(i=o.selectionUiModel,t=i.getSingleSelectedItemModel(),t&&(s=t.get("resources"),s&&1===s.length&&(n=s[0].id))),e.Util.isCEF()?e.opFactory.create("GettingAssetMetadataOp",o).run(n).done(_.bind(function(e){this.options.appApi.rnaApi.done(function(i){r.push(e.parent_id),i.assetApi({methodName:"openFile",methodArgs:[n,r]})})},this)):n&&o.appApi.routerApi.navigate("/file/"+n,{trigger:!0}),this._getResolvedPromise()}})}),define("acplugins/reviews/js/ops/showing/desktop-show-in-browser-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op"],function(e,i){i.DesktopShowInBrowserOp=e.Op.extend({run:function(){var t=i.opFactory;if("trackObject"===this.options.eventName)var s=e.getBaseCloudUrl(),o="sentfiles/",n=this.options.selectionUiModel.getSingleSelectedItemModel().id,r=s+o+n;else if("adobeSendWebsite"===this.options.eventName)var r="/send";var l={url:r},a=t.create("JumpToBrowserApiCallOp",this.options),c=a.run(l).done(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.ipmApi({methodName:"executeURI",methodArgs:JSON.parse(c.responseText).uri})},this))},this));return c.promise()}})}),define("acplugins/reviews/js/ops/showing/jump-to-browser-api-call-op",["core/ac-core","core/utils/http-util","acplugins/reviews/js/ac-review","core/ops/op"],function(e,i,t){var s="reader/jump_to_browser_url";t.JumpToBrowserApiCallOp=e.Op.extend({run:function(e){var t,o,n=this.options,r=Ac.baseFilesUrisModel.getSendApiUri();return _.isEmpty(r)?this._getRejectedPromise():(t="POST",o=_.extend({},i.getRequestHeaders(t,n,!1),{"Content-Type":"application/json"}),r+=s,n.appApi.networkApi.throttledAjax(r,{type:t,headers:o,data:JSON.stringify(e),dataType:"json",global:!1}))}})}),define("acplugins/reviews/js/ops/op-factory",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/selection/clearing-selection-op","core/ops/selection/selecting-collection-item-op","acplugins/reviews/js/ops/plugin/starting-plugin-op","acplugins/reviews/js/ops/plugin/listening-for-view-events-op","acplugins/reviews/js/ops/getting/getting-parcels-op","acplugins/reviews/js/ops/getting/getting-rhp-preview-metadata-op","acplugins/reviews/js/ops/downloading/downloading-parcel-assets-op","acplugins/reviews/js/ops/downloading/saveas-single-asset-op","acplugins/reviews/js/ops/manipulation/deleting-parcel-if-confirmed-op","acplugins/reviews/js/ops/manipulation/deleting-parcel-op","acplugins/reviews/js/ops/manipulation/forwarding-parcel-op","acplugins/reviews/js/ops/manipulation/setting-delivery-receipts-op","acplugins/reviews/js/ops/manipulation/unsharing-parcel-if-confirmed-op","acplugins/reviews/js/ops/manipulation/unsharing-parcel-op","acplugins/reviews/js/ops/manipulation/deleting-review-op","acplugins/reviews/js/ops/manipulation/fetching-review-participants-op","acplugins/reviews/js/ops/manipulation/fetching-thumbnail-for-review-op","acplugins/reviews/js/ops/manipulation/fetching-review-intro-message-op","acplugins/reviews/js/ops/manipulation/unshare-review-op","acplugins/reviews/js/ops/manipulation/remove-me-op","acplugins/reviews/js/ops/selection/selecting-collection-item-op","acplugins/reviews/js/ops/showing/showing-parcel-preview-op","acplugins/reviews/js/ops/showing/showing-sign-in-op","acplugins/reviews/js/ops/showing/showing-single-asset-op","acplugins/reviews/js/ops/showing/desktop-show-in-browser-op","acplugins/reviews/js/ops/showing/jump-to-browser-api-call-op"],function(e,i){i.OpFactory=e.Op.extend({create:function(e,t){var s=i[e];return s?new s(t):void LOG(0,"AcReviews.OpFactory.create: Unrecognized class: "+e)}})}),define("acplugins/reviews/js/utils/sc-constants",["plugins-common/ac-plugins"],function(e){e.Reviews||(e.Reviews={});var i=e.Reviews;return i.ScConstants={ACTION:"Action",ACTIONS:"Actions",ADD_FILES_TO_SHARE:"AddFilesToShare",ADDRESS_BOOK:"AddressBook",ATTEMPTED_TO_SHARE_FORM:"AttemptedToShareForm",AUTOCOMPLETE:"Autocomplete",AVOIDED:"Avoided",BROWSER_CLOSE:"BrowserClosed",BRANDING:"Branding",CANCEL:"Cancel",CHECKED:"Checked",CHICKLET_ADDED:"ChickletAdded",CLICKED:"Clicked",CLICK_BRANDING:"ClickBranding",CLICK_BRANDING_IN_READER:"ClickBrandingInReader",CLICK_BRANDING_IN_ACROBAT:"ClickBrandingInAcrobat",CLOSE:"Close",COLOR_INPUT:"ColorInput",COLOR_MENU_BUTTON:"ColorMenuButton",COLOR_WELL:"ColorWell",CONTINUE:"Continue",DATE_VIEWED:"DateViewed",DEFAULT:"Default",DIALOG:"Dialog",DISABLED:"Disabled",DISALLOWED:"Disallowed",DOWNLOAD:"Download",DOWNLOAD_ALL:"DownloadAll",DOWNLOAD_ONE:"DownloadOne",DRAG_FILES:"DragFiles",DURATION:"Duration",EDIT_BRANDING_ONLINE:"ContinueOnline",EMAIL:"Email",EMAIL_LINK:"EmailLink",ENABLED:"Enabled",ENTERED:"Entered",EVENTUAL_CLICK:"EventualClick",FILE:"File",FILE_LIST:"FileList",FILE_NAME:"FileName",FILES_SHARED_DLG:"FilesSharedDlg",FORWARD:"Forward",FULL_ACTIVITY:"FullActivity",HIDDEN:"Hidden",IMMEDIATE_CLICK:"ImmediateClick",INCLUDE_MESSAGE_TEXT:"IncludeMessageText",INCLUDE_REPLY_TO:"IncludeReplyTo",IPM:"IPM",LATER:"Later",LOGO_BUTTON:"LogoButton",LOGO_CANCEL:"LogoCancel",LOGO_SAVE:"LogoSave",MESSAGE:"Message",MULTI:"Multi",NO_PARCELS:"NoParcels",NOTIFY_WHEN_VIEWED:"NotifyWhenViewed",NUM_FILES_CHECKED:"NumFilesChecked",PERSONAL:"Personal",PERSONAL_AND_PUBLIC:"PersonalANDPublic",PREVIEW:"Preview",PUBLIC:"Public",PUBLIC_LINK:"PublicLink",RECVIEW:"RecView",REPLY:"Reply",REMOVE:"Remove",REPORT_ABUSE:"ReportAbuse",RHP:"RHP",SCROLL:"Scroll",SAVE_AS:"SaveAs",SELECT_ALL:"SelectAll",SELECT_FILES:"SelectFiles",SENT_FILES:"SentFiles",SHARE:"Share",SHARE_BUTTON:"ShareButton",SHARE_FILE_BUTTON:"ShareFileButton",SHARE_ICON:"ShareIcon",SHARE_WITH:"ShareWith",SHARED:"Shared",SHOWN:"Shown",SINGLE:"Single",SORT:"Sort",SUBJECT:"Subject",SUCCESS:"Success",SURVEY:"Survey",SURVEY_CANCEL:"SurveyCancel",SURVEY_FIELD_FOCUS:"SurveyFieldFocus",SURVEY_LINK:"SurveyLink",SURVEY_SEND:"SurveySend",TOOLS:"Tools",TRACK:"Track",TRASH:"Trash",TURN_OFF_BRANDING:"TurnOffBranding",TURN_ON_BRANDING:"TurnOnBranding",UNCHECKED:"Unchecked",UNSHARE:"Unshare",UPGRADE:"Upgrade",URL_HIGHLIGHT:"UrlHighlight",URL_KEY_COPY:"UrlKeyCopy",VIEW:"View",VIEW_ALL_SHARED_FILES:"ViewAllSharedFiles",VIEW_FULL_ACTIVITY:"ViewFullActivity",WARNED_BEFORE_CLOSING:"WarnB4Close",WARNING:"Warning",WITH_REPLY:"wReply",1:"1","2_TO_5":"2to5","6_TO_10":"6to10","11_OR_MORE":"11orMore","11_TO_20":"11to20","21_TO_40":"21to40","41_TO_120":"41to120","121_OR_MORE":"121orMore",FSS:"FSS",FORM:"Form",OUTPUT:"Output",SAVE_TO_PDF:"SaveToPDF","1_STARTED":"1-Started","2_COMPLETED":"2-Completed",ERROR:"Error",SEND_TAB:"SendTab",COMPLETED:"Completed"},i.ScConstants}),define("acplugins/reviews/js/templates/tracked-send-template.html",[],function(){return'<div class="on-signed-in ui-theme theme-container"></div>    <div class="on-signed-out ui-theme theme-container "></div>    <div class="files-offline-view ui-theme theme-container"></div>	 <div class="files-no-access-view ui-theme theme-container"></div>    <div class="context-board-view context-board-rhp cb-active-background-theme"></div>'}),define("acplugins/reviews/js/utils/sharing",[],function(){var e={Connector:{kind:"value",values:["DOCCLD","CCLOUD","ONEDRV"]},CountValue2:{kind:"value",values:["2to5","6to10","11orMore"]},CountValue1:{kind:"value",values:["1","2to5","6to10","11orMore"]},CountValue0:{kind:"value",values:["0","1","2to5","6to10","11orMore"]}},i=[{pageName:"FileList:SentFiles:Clicked",selector:""},{pageName:"FileList:SentFiles:Action:Unshare",selector:""},{pageName:"FileList:SentFiles:Action:Forward",selector:""},{pageName:"FileList:SentFiles:Action:Download",selector:""},{pageName:"FileList:SentFiles:Action:Trash",selector:""},{pageName:"FileList:SentFiles:Action:SelectAll",selector:""},{pageName:"FileList:SentFiles:FileName:Checked",selector:""},{pageName:"FileList:SentFiles:FileName:Unchecked",selector:""},{pageName:"FileList:SentFiles:NumFilesChecked:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Preview:Shared:Single:Shown",selector:""},{pageName:"Preview:Shared:Multi:Shown",selector:""},{pageName:"Preview:Shared:Single:NotifyWhenViewed:Checked",selector:""},{pageName:"Preview:Shared:Multi:NotifyWhenViewed:Checked",selector:""},{pageName:"Preview:Shared:Single:NotifyWhenViewed:Unchecked",selector:""},{pageName:"Preview:Shared:Multi:NotifyWhenViewed:Unchecked",selector:""},{pageName:"Preview:Shared:Single:ViewFullActivity",selector:""},{pageName:"Preview:Shared:Multi:ViewFullActivity",selector:""},{pageName:"Preview:Shared:Multi:PreviewFile:SendFileAgain",selector:""},{pageName:"Preview:Shared:Single:Unshare",selector:""},{pageName:"Preview:Shared:Multi:Unshare",selector:""},{pageName:"Preview:Shared:Single:PublicLink",selector:""},{pageName:"Preview:Shared:Multi:PublicLink",selector:""},{pageName:"Preview:Shared:Multi:Forward",selector:""},{pageName:"Preview:Shared:Multi:File:NextPg",selector:""},{pageName:"Preview:Shared:Multi:File:PrevPg",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Shown",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Unshare:Clicked",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Unshare:Cancel",selector:""},{pageName:"Preview:Shared:Single:FullActivity:Shown",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Shown",selector:""},{pageName:"Preview:Shared:Single:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:All",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Recipient",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Activity",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Item",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:ViewedBy",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:DateViewed",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:File",selector:""},{pageName:"Preview:Shared:Multi:Preview:RHP:ShareFileButton",selector:""},{pageName:"RecView:Multi:Shown",selector:""},{pageName:"RecView:Multi:Shown:wReply",selector:""},{pageName:"RecView:Multi:SaveToAcrobat",selector:""},{pageName:"RecView:Multi:File:NextPg",selector:""},{pageName:"RecView:Multi:File:PrevPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:FitPgFull",selector:""},{pageName:"RecView:Preview:BottomNavBar:FitPgWidth",selector:""},{pageName:"RecView:Preview:BottomNavBar:FullScreen",selector:""},{pageName:"RecView:Preview:BottomNavBar:HideRHP",selector:""},{pageName:"RecView:Preview:BottomNavBar:NextPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:PrevPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:Scroll",selector:""},{pageName:"RecView:Preview:BottomNavBar:Close",selector:""},{pageName:"RecView:Multi:Preview:Shown",selector:""},{pageName:"RecView:Multi:Preview:ReportAbuse",selector:""},{pageName:"RecView:Multi:Preview:Download",selector:""},{pageName:"RecView:Multi:downloadOne",selector:""},{pageName:"RecView:Multi:downloadAll",selector:""},{pageName:"RecView:Multi:Preview:BackButton",selector:""},{pageName:"RecView:Multi:Preview:Reply",selector:""},{pageName:"RecView:Single:Shown",selector:""},{pageName:"RecView:Single:Shown:wReply",selector:""},{pageName:"RecView:Single:ReportAbuse",selector:""},{pageName:"RecView:Single:Download",selector:""},{pageName:"RecView:Single:Reply",selector:""},{pageName:"Preview:Toolbar:Share:Clicked",selector:""},{pageName:"Tools:Share:Clicked",selector:""},{pageName:"Tools:Share:Shown",selector:""},{pageName:"Tools:Share:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:ts-direct-to-workflow-view:<cohort-name>",selector:""},{pageName:"Tools:Share:welcome:Shown",selector:""},{pageName:"Tools:Share:workflow:Shown",selector:""},{pageName:"Tools:Share:success:Shown",selector:""},{pageName:"Tools:Share:welcome:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:workflow:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:success:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:welcome:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:workflow:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:success:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:SelectFiles:Clicked",selector:""},{pageName:"Tools:Share:ViewAllSharedFiles:Clicked",selector:""},{pageName:"Tools:Share:AddFilesToShare",selector:""},{pageName:"Tools:Share:ShareWith:Public",selector:""},{pageName:"Tools:Share:ShareWith:Public:Checked",selector:""},{pageName:"Tools:Share:ShareWith:Public:Unchecked",selector:""},{pageName:"Tools:Share:ShareWith:Personal",selector:""},{pageName:"Tools:Share:ShareWith:Personal:Checked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:Unchecked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:Email:Disabled:Clicked",selector:""},{pageName:"Tools:Share:Subject:Entered",selector:""},{pageName:"Tools:Share:Message:Entered",selector:""},{pageName:"Tools:Share:Subject:Default",selector:""},{pageName:"Tools:Share:Message:Default",selector:""},{pageName:"Tools:Share:IncludeMessageText:Unchecked",selector:""},{pageName:"Tools:Share:IncludeMessageText:Checked",selector:""},{pageName:"Tools:Share:IncludeReplyTo:Unchecked",selector:""},{pageName:"Tools:Share:IncludeReplyTo:Checked",selector:""},{pageName:"Tools:Share:AttemptedToShareForm",selector:""},{pageName:"Tools:Share:ShareButton",selector:""},{pageName:"Tools:Share:ShareButton:Clicked",selector:""},{pageName:"Tools:Share:ShareButton:Disabled",selector:""},{pageName:"Tools:Share:Cancel",selector:""},{pageName:"Tools:Share:AddressBook:Clicked",selector:""},{pageName:"Tools:Share:AddressBook:Shown",selector:""},{pageName:"Tools:Share:AddressBook:Success",selector:""},{pageName:"Tools:Share:AddressBook:Cancel",selector:""},{pageName:"Tools:Share:AddressBook:IPM",selector:""},{pageName:"Tools:Share:AddressBook:Enabled",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Personal:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Public:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Personal:ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Public:ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic::ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:EmailLink",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:UrlHighlight",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:EmailLink",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:UrlHighlight",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:UrlKeyCopy",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:UrlKeyCopy",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Close",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Shown",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:ChooseFilesButton:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:DragFiles:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:AddSelected:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Shown",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:ChooseFiles:Clicked",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:AddSelected:<CountValue1>",selector:"",variables:{Connector:e.Connector,CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Cancel",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:RecentFiles:Clicked",selector:""},{pageName:"Tools:Share:Branding:ColorMenuButton",selector:"",prop49:"Clicked on the color menu button in the customize branding dialog"},{pageName:"Tools:Share:Branding:LogoButton",selector:"",prop49:"Clicked to change logo in customize branding dialog"},{pageName:"Tools:Share:Branding:ClickBrandingInReader",selector:"",prop49:"Clicked to edit their branding settings while in the In Reader Browser"},{pageName:"Tools:Share:Branding:ClickBranding",selector:""},{pageName:"Tools:Share:Branding:LogoCancel",selector:""},{pageName:"Tools:Share:Branding:LogoSave",selector:""},{pageName:"Tools:Share:Branding:TurnOffBranding",selector:""},{pageName:"Tools:Share:Branding:TurnOnBranding",selector:""},{pageName:"Tools:Share:Branding:ColorWell",selector:""},{pageName:"Tools:Share:Branding:ColorInput",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline:Continue",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline:Cancel",selector:""},{pageName:"RecView:ReportAbuse:Dialog:ReportAbuse:Success",selector:""},{pageName:"RecView:ReportAbuse:Dialog:ReportAbuse:Cancel",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Shown",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:<cohort-name>",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Later:Clicked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Upgrade:Clicked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Disallowed:Warning:Shown",selector:""},{pageName:"Preview:FileInfo:Clicked",selector:""},{pageName:"Preview:ShareIcon:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Clicked",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:Continue",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:1",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:2",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:3",selector:""},{pageName:"FileList:Shared:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:Shown",selector:""},{pageName:"FileList:ShareFileDlg:MakePrivate",selector:""},{pageName:"FileList:ShareFileDlg:MakePublic",selector:""},{pageName:"FileList:ShareFileDlg:EmailLink:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:Cancel",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:Shown",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:MakePrivate",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:MakePublic",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:EmailLink:Clicked",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:Cancel",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:Shown",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:MakePrivate",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:MakePublic",selector:""},{pageName:"sent",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:Cancel",selector:""},{pageName:"FileList:DupFileNameDlg:DeleteUploaded:Success",selector:""},{pageName:"Tools:Survey:SurveyLink",selector:""},{pageName:"Tools:Survey:Cancel",selector:""},{pageName:"Tools:Survey:Send",selector:""},{pageName:"Tools:Survey:SurveyFieldFocus",selector:""}];return{variables:e,pages:i}}),define("acplugins/reviews/js/utils/ts-utils",[],function(){var e={extractRootUrl:function(e){var i=document.createElement("a");return i.href=e,i.protocol+"//"+i.host}};return e}),define("acplugins/reviews/js/models/ui/parcel-preview-ui-model",["core/ac-core","acplugins/reviews/js/ac-review","core/models/ui/ui-model"],function(e,i){return i.ParcelPreviewUiModel=e.UiModel.extend({recognized:{parcelPreview:{type:"object",optional:!0},deferred:{type:"object",optional:!0},onHistoryChange:{type:"object",optional:!0}},defaults:{parcelPreview:void 0,deferred:void 0,onHistoryChange:void 0}}),i.ParcelPreviewUiModel
}),define("viewer/ac-viewer",[],function(){var e,i,t;return e="dev",i=Ac.Viewer,i||(i=Ac.Viewer={}),t=i[e],t||(t=i[e]={}),t.VERSION=e,t.ID||(t.APP_ID="viewer"),t}),define("viewer/models/parcel-asset-model",["core/ac-core","viewer/ac-viewer","core/models/collection-item-model"],function(e,i){i.ParcelAssetModel=e.CollectionItemModel.extend({initialize:function(i,t){e.CollectionItemModel.prototype.initialize.call(this,i,t),t.collection&&(this.rootUrl=t.collection.rootUrl),t.rootUrl&&(this.rootUrl=t.rootUrl)},getRenditionUrl:function(i,t){var s,o,n;return s=this.collection.parcel,n=s.get("invitation"),n?(o=this.rootUrl+"a/invitation/"+encodeURIComponent(n)+"/asset/"+encodeURIComponent(this.get("id"))+"/"+i,t&&(o+="?page="+t),o):e.CollectionItemModel.prototype.getRenditionUrl.call(this,i,t)}})}),define("viewer/collections/parcel-asset-collection",["viewer/ac-viewer","core/utils/http-util","viewer/models/parcel-asset-model"],function(e,i){e.ParcelAssetCollection=Backbone.Collection.extend({model:e.ParcelAssetModel,initialize:function(e,i){Backbone.Collection.prototype.initialize.call(this,e,i),this.rootUrl=i.rootUrl,this.parcel_id=i.parcel_id,this.parcel=i.parcelModel,this.sortAscending=!0,this.sortField="name"},comparator:function(e,i){var t,s,o,n=e.get(this.sortField),r=i.get(this.sortField);return t=this.sortAscending?n:r,s=this.sortAscending?r:n,o=t===s?0:s>t?-1:1},url:function(){return this.rootUrl+"/a/api/parcels/"+this.parcel_id+"/assets"},fetch:function(e){return e=i.customizeOptions("GET",e),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){return e.assets}})}),define("acplugins/reviews/js/ops/showing/parcel-preview-op",["core/ac-core","acplugins/reviews/js/ac-review","viewer/ac-viewer","acplugins/reviews/js/utils/sc-constants","acplugins/reviews/js/utils/ts-utils","viewer/collections/parcel-asset-collection","core/ops/op"],function(e,i,t,s,o){return i.ParcelPreviewOp=e.Op.extend({run:function(){var e,n,r,l,a,c,d=this.options,h=this.options.parcelModel,p=this.options.parcelPreviewUiModel,u=this.options.appApi;e=u.displayApi.showFullOverlay(!0),n=this.options.appApi.baseFilesUrisApi.getSendApiUri(),n=o.extractRootUrl(n),d.parcelAssetsCollection=new t.ParcelAssetCollection([],{rootUrl:n,parcel_id:h.id,parcelModel:h}),r=p.get("parcelPreview"),r&&r.off(),a=p.get("deferred"),a||(a=$.Deferred(),p.set({deferred:a})),c=p.get("onHistoryChange"),c&&u.routerApi.removeHistoryChangeCallback(c),c=this._onHistoryChange,u.routerApi.addHistoryChangeCallback(c),p.set({onHistoryChange:c}),l=_.extend({},d,{el:e,parcelModel:h}),r=new i.ParcelPreviewView(l),p.set({parcelPreview:r}),this.parcelPreview=r,r.on("all",d.rootView._onViewEvent,d.rootView),r.on("ParcelPreview_Close",this._onParcelPreviewClose,this);var v=i.opFactory.create("GettingAssetsOp",d);return v.run().then(_.bind(function(){var e;e=d.parcelAssetsCollection&&d.parcelAssetsCollection.length>1?s.MULTI:s.SINGLE,u.siteCatalystApi.logScEvent([s.PREVIEW,s.SHARED,e,s.SHOWN]),this.render()},r)),a.promise()},_onParcelPreviewClose:function(){var e,i=this.options.parcelPreviewUiModel;e=i.get("parcelPreview"),e&&(i.unset("parcelPreview"),e.off(),_.defer(_.bind(function(){var t=i.get("deferred");t.resolve(),i.unset("deferred"),this.options.appApi.routerApi.removeHistoryChangeCallback(this._onHistoryChange),this.options.appApi.displayApi.showFullOverlay(!1),e.$el.empty()},this)))},_onHistoryChange:function(){this._onParcelPreviewClose()}}),i.ParcelPreviewOp}),define("acplugins/reviews/js/templates/on-signed-in-template.html",[],function(){return'<div class="review-files-header"></div><div class="review-files-body shared-workflow-files-body"></div><div class="review-files-rhp shared-files-rhp hidden invisible"></div><div class="sent-files-footer ui-theme theme-container-prominent theme-border"></div>'}),define("acplugins/reviews/js/templates/sent-files-header-template.html",[],function(){return'<div class="review-files-main-header shared-files-main-header theme-file-list-row-border"><div class="review-workflow-name shared-workflow-heading theme-page-header" title="<%= workflowName %>" ><%= workflowName %></div><div class="review-files-header-item shared-header-listing-btns"><div class="shared-header-btn-listView shared-workflow-header-btn-cn" role="button"><div class="shared-header-btn shared-workflow-header-btn listView" title="<%= listView%>"  aria-label="<%= listView%>" tabindex="0" ></div></div><div class="shared-header-btn-thumbnailView shared-workflow-header-btn-cn" role="button"><div class="shared-header-btn shared-workflow-header-btn thumbnailView" title="<%= thumbnailView %>" aria-label="<%= thumbnailView %>" tabindex="0"></div></div></div></div>'}),define("acplugins/reviews/js/views/sent-files-header-view",["core/ac-core","acplugins/reviews/js/ac-review","i18n!acplugins/reviews/js/nls/ui-strings","i18n!files/nls/ui-strings","acplugins/reviews/js/templates/sent-files-header-template.html"],function(e,i,t,s,o){i.SentFilesHeaderView=e.View.extend({events:{"click .shared-header-btn-listView":"_onListViewButtonClick","click .shared-header-btn-thumbnailView":"_onThumbnailViewButtonClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(o),this._addUiModelEventListeners(),this._addKeyEventListener(),this._addFocusEventListener()},render:function(){if(e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({workflowName:t.REVIEW_WORKFLOW_NAME,listView:s.VIRGO_LIST_VIEW,thumbnailView:s.VIRGO_THUMBNAIL_VIEW})),this._initWrappers()),this.options.isInSearchResultsView){var i=this.options,o=i.searchModel.get("total_hits");if(_.isUndefined(o))this.$headerName.text(t.REVIEW_WORKFLOW_NAME);else{var n=_.template(s.SEARCH_HEADER,{label:t.REVIEW_WORKFLOW_NAME,count:o});this.$headerName.text(n),this.$headerName.attr("title",n),this.$headerName.attr("aria-label",_.template(i.searchUiModel.getHeaderAriaLabel(),{category:t.REVIEW_WORKFLOW_NAME,count:o}))}}return this._updateButtonSelectionState(),this},_initWrappers:function(){this.$listViewBtn=this.$(".shared-workflow-header-btn.listView"),this.$thumbnailViewBtn=this.$(".shared-workflow-header-btn.thumbnailView"),this.$listingToggleButtons=this.$(".review-files-header-item.shared-header-listing-btns"),this.$mainHeader=this.$(".review-files-main-header"),this.$headerName=this.$(".review-workflow-name"),this.$listViewBtn.attr("title",s.VIRGO_LIST_VIEW),this.$thumbnailViewBtn.attr("title",s.VIRGO_THUMBNAIL_VIEW),this.options.isInSearchResultsView&&(this.$mainHeader.addClass("uss-search-active"),this.$thumbnailViewBtn.hide(),this.$listViewBtn.hide(),this.$listingToggleButtons.hide())},_addUiModelEventListeners:function(){var e=this.options,i=e.appApi.pluginsApi.getPluginsUiModel(e.pluginId);this.listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange),e.isInSearchResultsView&&(this.listenTo(e.searchModel,"change:total_hits",this.render),this.listenTo(i,"change:selected_searched_plugin_id",this._searchPluginChanged))},_searchPluginChanged:function(e,i){"search_summary"===i?this.$el.show():this.$el.hide()},_onListViewButtonClick:function(){this.$thumbnailViewBtn.removeClass("button-selected"),this.$listViewBtn.addClass("button-selected"),this.options.collectionsUiModel.set("view","list")},_onThumbnailViewButtonClick:function(){this.$thumbnailViewBtn.addClass("button-selected"),this.$listViewBtn.removeClass("button-selected"),this.options.collectionsUiModel.set("view","thumbnail")},_onSelectedItemModelsChange:function(e){var i=this.options,t=(this.$header,this.$body,this.$rhp,i.appApi);i.noSelectionActions||t.acrobatApi.isInAcrobat()||(e.isItemSelected()?this.$mainHeader.addClass("with-rhp"):this.$mainHeader.removeClass("with-rhp"))},_onKeyDown:function(e){var i=$(e.target),t=e.which,s=!1;if(!i.hasClass("shared-workflow-header-btn")||0==i.closest(".review-files-header").length)return s;switch(t){case 32:case 13:i.hasClass("listView")?(this._onListViewButtonClick(),s=!0):i.hasClass("thumbnailView")&&(this._onThumbnailViewButtonClick(),s=!0)}return s},_updateButtonSelectionState:function(){this.options.parcelCollection&&(0==this.options.parcelCollection.length?this.$listingToggleButtons.hide():this.$listingToggleButtons.show());var e=this.options.collectionsUiModel.get("view");"list"==e?(this.$thumbnailViewBtn.removeClass("button-selected"),this.$listViewBtn.addClass("button-selected")):"thumbnail"==e&&(this.$thumbnailViewBtn.addClass("button-selected"),this.$listViewBtn.removeClass("button-selected"))}})}),define("acplugins/reviews/js/templates/sent-files-body-template.html",[],function(){return'<div class="parcels"></div>    <div class="parcels-search-results"></div>    <div class="parcel-hover-details"></div>'}),define("acplugins/reviews/js/templates/parcels-template.html",[],function(){return'<div class="parcels-content ui-theme theme-container"></div>    <div class="parcels-no-content"></div>'}),define("acplugins/reviews/js/templates/parcels-collection-template.html",[],function(){return'<div role="toolbar" class="selection-actions ui-theme theme-container"></div><div role="group"     aria-labelledby="<%= pluginSelectorId %>"     aria-multiselectable="true">    <div role="row" class="reviews-header shared-workflow-files-header ui-theme theme-container theme-file-list-row-border"></div>    <div role="presentation"         class="review-collection-items shared-collection-items with-header">    </div>    <div role="presentation" class="collection-footer"></div></div>'}),define("acplugins/reviews/js/models/ui/parcels-list-item-ui-model",["core/ac-core","acplugins/reviews/js/ac-review","core/models/ui/ui-model"],function(e,i){i.ParcelsListItemUiModel=e.CollectionItemUiModel.extend({recognized:{expanded:{type:"boolean",optional:!1},masked:{type:"boolean",optional:!1},selected:{type:"boolean",optional:!1}},defaults:{expanded:!1,masked:!1,selected:!1}})}),define("acplugins/reviews/js/templates/parcels-list-file-template.html",[],function(){return'<div role="row" class="review-list-item-file" data-id="<%= fileId %>"        aria-selected="false" aria-level="2">    <div role="gridcell"></div>    <div role="gridcell">        <div role="img"             aria-label="<%= iconDesc %>"             class="collection-item-thumb <%= iconCls %> review-list-item-file-icon"></div>        <a class="review-list-item-file-name theme-list-item-text"           tabindex="-1"><%- filename %></a>    </div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div></div>'}),define("acplugins/reviews/js/templates/parcels-list-item-template.html",[],function(){return'<div role="<%= itemRole %>" class="review-list-item shared-workflow-list-item theme-list-item-row theme-file-list-row-border shared-file-list-text-color">    <div role="row" class="shared-list-item-row shared-theme-list-item-row" aria-selected="false">        <div role="gridcell">            <div class="review-list-item-checkbox" style="display:none;"                 tabindex="-1"                 aria-checked="false"                 aria-labelledby="review-list-item-filename-<%= viewId %>" id="review-list-item-checkbox-<%= viewId %>">            </div>        </div>        <div role="presentation"             class="review-list-item-info-container shared-list-item-info-container">            <div role="rowheader">                <div class="review-list-preview-img-cn shared-list-preview-img-cn theme-file-list-row-border" id="review-list-preview-img-cn-<%= viewId %>">                    <div role="img" aria-label="<%= iconDesc %>"                       aria-hidden="true"                       class="collection-item-thumb <%= iconCls %>                               review-list-item-icon shared-list-item-icon" id="review-list-item-icon-<%= viewId %>"></div>                <img class="review-list-preview-image shared-list-preview-image file-list-thumbnail-border centered-vertically" id="review-list-preview-image-<%= viewId %>" style="display: none;" src=""/>               </div>                <div class="review-list-item-filename"                     id="review-list-item-filename-<%= viewId %>"                     >                    <%- files %></div>                <div class="review-grid-item-info theme-virgo-basic-text cb-shaded-text-theme"                     id="review-grid-item-info-<%= viewId %>"                     >                    <%- gridInfo %></div>            </div>            <div role="gridcell" class="review-list-item-last-activity"                 id="review-list-item-last-activity-<%= viewId %>">               <%= lastActivity %></div>            <div role="gridcell" class="review-list-item-owner"                 id="review-list-item-owner-<%= viewId %>">               <%= owner %></div>            <div role="gridcell" class="review-list-item-status"                 id="review-list-item-status-<%= viewId %>">               <%= status %></div>            <div role="gridcell" class="review-list-item-triple-dot shared-list-item-triple-dot"                 id="review-list-item-triple-dot-<%= viewId %>">             </div>        </div>    </div>    <div role="presentation" class="review-list-item-files"></div>    <div role="presentation" class="review-list-item-mask"></div></div>'}),define("acplugins/reviews/js/views/parcels-list-item-view",["core/ac-core","acplugins/reviews/js/ac-review","core/utils/view-util","core/utils/css-util","core/utils/date-util","core/utils/file-types","core/utils/truncate","acplugins/reviews/js/templates/parcels-list-file-template.html","acplugins/reviews/js/templates/parcels-list-item-template.html","i18n!acplugins/reviews/js/nls/ui-strings","core/models/workflow-status-strings","i18n!core/nls/ui-strings","core/constants/thumbnail-constants"],function(e,i,t,s,o,n,r,l,a,c,d,h,p){i.ParcelsListItemView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(a),this._fileTemplate=_.template(l),this._addUiModelEventListeners()},render:function(i,t){var s,o,n,r,l,a=this.model.getSingleResource(),c=this.model.getId();return e.View.prototype.render.call(this),this.$item?(i?i.data("id")!==c&&(this.$item=this.$item.clone(),i.replaceWith(this.$item.get(0)),this._initWrappers()):this.$el.append(this.$item.get(0)),this.invalidate()):(1===a.length?(s=this._getIconClass(a[0]),o=this._getIconDesc(a[0]),n="presentation"):(s="file-icon-multifile review-list-item-icon-hitarea",o="",n="rowgroup"),r=c,l=$(this._template({iconCls:s,iconDesc:o,files:this._getFiles(),gridInfo:this._getGridInfo(!1),lastActivity:this._getLastActivityDate(),owner:this._localizedOwner(),status:this._getStatus(),viewId:r,modelId:c,itemRole:n})),e.Util.isCEF()?1===a.length?l.find("[role='row']:first").addClass("review-list-item-row").attr({"aria-label":this._getFiles()+", "+this._getLastActivityDate()+", "+this._localizedOwner()+", "+this._getStatus(),tabindex:"-1"}):l.addClass("review-list-item-row").attr({"aria-expanded":"false","aria-label":this._getParcelAriaLabel(a.length)+", "+this._getLastActivityDate()+", "+this._localizedOwner()+", "+this._getStatus(),"aria-level":"1","aria-selected":"false",tabindex:"-1"}):1===a.length?l.find("[role='row']:first").addClass("review-list-item-row").attr({"aria-labelledby":"review-list-item-filename-"+r,tabindex:"-1"}):l.addClass("review-list-item-row").attr({"aria-expanded":"false","aria-labelledby":"review-list-item-filename-"+r+" review-list-item-last-activity-"+r,"aria-level":"1","aria-selected":"false",tabindex:"-1"}),o.length&&l.find(".collection-item-thumb:first").removeAttr("aria-hidden"),i?i.replaceWith(l):this.$el.append(l),this.$item=this.$el.children().eq(t),this._initWrappers()),this.$item.data("id",c),e.Util.isCEF()&&(this.$item.find(".review-list-item-last-activity").addClass("desktop"),this.$item.find(".review-list-item-owner").addClass("desktop"),this.$item.find(".review-list-item-file-name").addClass("desktop")),this._initWrappers(),this._updateFields(),this._onViewChange(),e.Util.isCEF()&&this._updateForVerticalScrollBar(),this},_getParcelAriaLabel:function(e){return _.template(c.GENERIC_ARIA_LABEL_STRING,{prefix:e,suffix:c.FILES})},_updateForVerticalScrollBar:function(){setTimeout(_.bind(function(){this.$el.length&&this.options.collectionUiModel.set("has_vertical_scrollbar",t.isVerticalScrollBarPresent(this.$el))},this),150)},remove:function(){this.$item.remove()},getViewElement:function(){return this.$item},invalidate:function(){e.View.prototype.invalidate.call(this)},expand:function(){this.options.itemUiModel.set("expanded",!0)},collapse:function(){this.options.itemUiModel.set("expanded",!1)},isExpanded:function(){return this.options.itemUiModel.get("expanded")},stopListening:function(i,t,s){e.View.prototype.stopListening.call(this,i,t,s)},_initWrappers:function(){this.$iconHitArea=this.$item.find(".review-list-item-icon-hitarea"),this.$infoContainer=this.$item.find(".review-list-item-info-container"),this.$files=this.$item.find(".review-list-item-files"),this.$checkbox=this.$item.find("#review-list-item-checkbox-"+this.model.getId()),this.$fileName=this.$item.find("#review-list-item-file-name-"+this.model.getId()),this.$numFiles=this.$item.find("#review-list-item-filename-"+this.model.getId()),this.$gridInfo=this.$item.find("#review-grid-item-info-"+this.model.getId()),this.$lastActivity=this.$item.find("#review-list-item-last-activity-"+this.model.getId()),this.$owner=this.$item.find("#review-list-item-owner-"+this.model.getId()),this.$status=this.$item.find("#review-list-item-status-"+this.model.getId()),this.$itemRow=this.$item.find(".review-list-item-row"),this.$parcelItemIcon=this.$item.find("#review-list-item-icon-"+this.model.getId()),this.$multiFileIcon=this.$item.find(".file-icon-multifile"),this.$preview=this.$("#review-list-preview-image-"+this.model.getId()),this.$previewCn=this.$("#review-list-preview-img-cn-"+this.model.getId()),this.$tripleDot=this.$("#review-list-item-triple-dot-"+this.model.getId()),this.$preview.on("error",this._onThumbnailError)},_onThumbnailError:function(){this._showThumbnail(null,!1)},_getFiles:function(){var e,i=this.model.get("review_info");if(i.intro_subject&&(e=i.intro_subject),!e||""===e){var t=this.model.getSingleResource();e=t?1===t.length?t[0].name:_.template(c.SENT_FILES_NUM_FILES,{numFiles:t.length}):0}return e},_getGridInfo:function(e){var i,t=this.options.appApi.usersMeApi.options.usersMeIdentityModel,s=this.model.getPartcipantDetails(t);return i=s&&s.role==d.REVIEW_CREATOR?e?this._getStatus()+" ● "+this._getLastActivityDate():this._getStatus()+"<span class='review-grid-item-info-separator'>●</span>"+this._getLastActivityDate():e?this._getGridOwnerInfo()+" ● "+this._getLastActivityDate():this._getGridOwnerInfo()+"<span class='review-grid-item-info-separator'>●</span>"+this._getLastActivityDate()},_getGridOwnerInfo:function(){var e,i,t=this.options.appApi.usersMeApi.options.usersMeIdentityModel,s=this.model.getPartcipantDetails(t);if(s&&s.role==d.REVIEW_CREATOR)e=c.YOU;else{var o=this.model.getSenderName()?this.model.getSenderName():this.model.getSenderEmail();e=void 0!=o?o:"-"}return i=c.SENDER_NAME+" "+e},_getLastActivityDate:function(){var e=this.model.get("modify_date"),i=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,i,!1):"-"},_getDeadline:function(){var e=this.model.getDeadline(),i=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,i):"-"},_getOwner:function(){var e=this.options.appApi.usersMeApi.options.usersMeIdentityModel,i=this.model.getPartcipantDetails(e);if(i&&i.role==d.REVIEW_CREATOR)return d.YOU;var t=this.model.getSenderName()?this.model.getSenderName():this.model.getSenderEmail();return t?t:"-"},_getStatus:function(){{var e=0,i=0,t=0,s="",o=this.options.appApi.usersMeApi.options.usersMeIdentityModel;this.model.getPartcipantDetails(o)}if(_.each(this.options.model.get("participants"),function(o){this.model.getWorkflowStatus().toUpperCase()==d.UNSHARED_STRING.toUpperCase()&&(s=h.UNSHARED_STRING),e++,o.status.toUpperCase()==d.FINISHED.toUpperCase()&&i++,(o.status.toUpperCase()==d.COMMENTED.toUpperCase()||o.hasCommented)&&t++},this),""!=s)return s;if(this._getOwner()==d.YOU)s=_.template(c.NUM_OF_TOTAL_COMMENTED,{num:t,total:e});else{var n,r=this.model.getInfo();_.isUndefined(r)||(n=r.user_status),s=_.isUndefined(n)||n.toUpperCase()!=d.FINISHED.toUpperCase()?_.isUndefined(n)||n.toUpperCase()!=d.COMMENTED.toUpperCase()?h.WAITING_FOR_YOU:c.COMMENTED:c.FINISHED}return s},_isReveiwComplete:function(){var e=0,i=0,t=!1,s=0;return _.each(this.options.model.get("participants"),function(o){e++,o.status.toUpperCase()==d.FINISHED.toUpperCase()&&i++,(o.status.toUpperCase()==d.COMMENTED.toUpperCase()||o.hasCommented)&&s++,o.role.toUpperCase()==d.INITIATOR.toUpperCase()&&o.status.toUpperCase()==d.UNSHARED_STRING.toUpperCase()&&(t=!0)},this),e!=i&&e!=s||this._getOwner()!=d.YOU||t?!1:!0},_localizedOwner:function(){var e=this._getOwner();return e==d.YOU?c.YOU:e},_getIconClass:function(e){{var i;n.getFileInfo(e.content_type||"",e.name)}return i="file-icon-pdf"},_getIconDesc:function(e){var i,t=n.getFileInfo(e.content_type||"",e.name);return i=t.desc||""},_updateFields:function(){var i=(this.model.getId(),this.$numFiles),t=this.$infoContainer;this.model.isActive()?t.removeClass("disabled"):t.addClass("disabled"),e.Util.isCEF()&&this.$fileName.addClass("desktop");var s=this._getFiles();if(this.options.isInSearchResultsView){var o=this.options.searchUiModel.get("mru_query_regex");s=s.replace(o,function(e){return"<b>"+e+"</b>"}),i.html(s)}else i.text(s);i.attr("title",this._getFiles()),this.$gridInfo.html(this._getGridInfo(!1)),this.$gridInfo.attr("title",this._getGridInfo(!0)),this.$lastActivity.text(this._getLastActivityDate()),this.$owner.text(this._localizedOwner()),this._isReveiwComplete()?this.$status.html(this._getStatus().italics()):this.$status.text(this._getStatus()),this.$lastActivity.attr("title",this._getLastActivityDate()),this.$owner.attr("title",this._localizedOwner()),this.$status.attr("title",this._getStatus())},_addUiModelEventListeners:function(){var e=this.options.itemUiModel;this.listenTo(e,"change:selected",this._onUiModelSelectedChange).listenTo(this.options.collectionsUiModel,"change:view",this._onViewChange).listenTo(this.options.collectionsUiModel,"change:rhpShown",this._adjustLayout).listenTo(this.options.collectionUiModel,"change:has_vertical_scrollbar",this._adjustLayout),this.options.appApi.windowApi.addWindowResizeCallback(_.bind(this._adjustLayout))},_onUiModelSelectedChange:function(){this._updateSelectionStatus()},_showFileList:function(e){this.render(this.$item),e?this.$files.slideDown("fast"):this.$files.slideUp("fast")},_updateSelectionStatus:function(){var i=this.$item,o=this.$checkbox,n=this.$tripleDot,r=this.$previewCn,l=this.model.getSingleResource().length>1,a=l?i:this.$itemRow,c=a.find("[aria-selected]").addBack();this.options.itemUiModel.get("selected")?(s.addClass(i,"selected"),s.addClass(o,"selected"),s.addClass(n,"selected"),s.addClass(r,"selected"),c.attr("aria-selected",!0),o.attr("aria-checked",!0)):(s.removeClass(i,"selected"),s.removeClass(o,"selected"),s.removeClass(n,"selected"),s.removeClass(r,"selected"),c.attr("aria-selected",!1),o.attr("aria-checked",!1)),e.Util.isIE8()&&t.detachAndReattachElement(o)},_loadThumbnail:function(){if(this.model){var e=null;if(this.model.get("thumbnailUrl"))e=this.model.get("thumbnailUrl"),this._showThumbnail(e,!0);else if(0==this.model.get("thumbFetchSucces",!1))this._showThumbnail(e,!1);else{var t=i.opFactory.create("FetchingThumbnailForReviewOp",this.options).run(this.model.getSingleFileInfo().id,"asset-0",0,p.THUMBNAIL);t.then(_.bind(function(i){i?(e=i,e?this._showThumbnail(e,!0):this._showThumbnail(e,!1),this.model.set("thumbnailUrl",e),this.model.set("thumbFetchSucces",!0)):(this._showThumbnail(e,!1),this.model.set("thumbFetchSucces",!1))},this),function(){}),this._showThumbnail(e,!1)}}},_showThumbnail:function(e,i){var t="#review-list-preview-image-"+this.model.getId(),s=this.$(t),o="#review-list-item-icon-"+this.model.getId(),n=this.$(o);i?(s.show(),n.hide(),s.attr("src",e)):(s.hide(),n.show())},_onViewChange:function(e){var i=this.options.collectionsUiModel.get("view");"list"==i?(this.$lastActivity.removeClass("shared-thumb-view"),this.$owner.removeClass("shared-thumb-view"),this.$status.removeClass("shared-thumb-view"),this.$preview.removeClass("shared-thumb-view"),this.$item.removeClass("shared-thumb-view"),this.$item.addClass("theme-list-item-row theme-file-list-row-border"),this.$previewCn.removeClass("shared-thumb-view theme-file-preview-background theme-grid-view-border"),this.$numFiles.removeClass("shared-thumb-view"),this.$gridInfo.removeClass("shared-thumb-view"),this.$tripleDot.removeClass("shared-thumb-view"),this.$numFiles.removeClass("cb-text-theme"),this.$gridInfo.removeClass("cb-text-theme"),this.$tripleDot.removeClass("cb-text-theme")):"thumbnail"==i&&(this.$lastActivity.addClass("shared-thumb-view"),this.$owner.addClass("shared-thumb-view"),this.$status.addClass("shared-thumb-view"),this.$preview.addClass("shared-thumb-view"),this.$item.addClass("shared-thumb-view"),this.$item.removeClass("theme-list-item-row theme-file-list-row-border"),this.$previewCn.addClass("shared-thumb-view theme-file-preview-background theme-grid-view-border"),this.$numFiles.addClass("shared-thumb-view"),this.$gridInfo.addClass("shared-thumb-view"),this.$tripleDot.addClass("shared-thumb-view"),this.$numFiles.addClass("cb-text-theme"),this.$gridInfo.addClass("cb-text-theme"),this.$tripleDot.addClass("cb-text-theme"),this.$numFiles.show(),this.$gridInfo.show(),this.$tripleDot.show()),this.$item.hasClass("selected")&&e&&(this.options.rootView.bringSelectedItemInView=!0,this.options.collectionsUiModel.trigger("scrollSelectedItemIntoViewEvent")),this._adjustLayout()},_updateVisibilityOfColumns:function(e,i){var t=i.colMargin,s=this.$numFiles.position().left,o=i.totalVisibleCols,n=e-s,r=n-t*o,l=i.totalFluidCols,a=r/l;if(1==i.fileName.visibility){var c=i.fileName.end-i.fileName.start+1;this.$numFiles.css("width",a*c+"px"),this.$numFiles.css("margin-right",t+"px"),this.$numFiles.show()}else this.$numFiles.hide();if(1==i.lastActivity.visibility){var c=i.lastActivity.end-i.lastActivity.start+1,d=i.lastActivity.colNumber;this.$lastActivity.css("left",s+a*(i.lastActivity.start-1)+t*d+"px"),this.$lastActivity.css("width",a*c+"px"),this.$lastActivity.css("margin-right",t+"px"),this.$lastActivity.show()}else this.$lastActivity.hide();if(1==i.owner.visibility){var c=i.owner.end-i.owner.start+1,d=i.owner.colNumber;this.$owner.css("left",s+a*(i.owner.start-1)+t*d+"px"),this.$owner.css("width",a*c+"px"),this.$owner.css("margin-right",t+"px"),this.$owner.show()}else this.$owner.hide();if(1==i.status.visibility){var c=i.status.end-i.status.start+1,d=i.status.colNumber;this.$status.css("left",s+a*(i.status.start-1)+t*d+"px"),this.$status.css("width",a*c+"px"),this.$status.css("margin-right",t+"px"),this.$status.show()}else this.$status.hide()},_adjustLayout:function(){var e=this.options.collectionsUiModel.get("view");if(this.$numFiles.removeAttr("style"),this.$gridInfo.removeAttr("style"),this.$lastActivity.removeAttr("style"),this.$owner.removeAttr("style"),this.$status.removeAttr("style"),this.$tripleDot.removeAttr("style"),this.$tripleDot.hide(),"list"==e){var i=this.$item.width();i&&(100>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!1},lastActivity:{visibility:!1},owner:{visibility:!1},status:{visibility:!1},totalFluidCols:0,totalVisibleCols:0,colMargin:24}):i>100&&300>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:1},lastActivity:{visibility:!1},owner:{visibility:!1},status:{visibility:!1},totalFluidCols:1,totalVisibleCols:1,colMargin:24}):i>300&&500>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:3},lastActivity:{visibility:!1},owner:{visibility:!1},status:{visibility:!0,colNumber:1,start:4,end:5},totalFluidCols:5,totalVisibleCols:2,colMargin:24}):i>500&&700>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:3},lastActivity:{visibility:!1},owner:{visibility:!0,colNumber:1,start:4,end:5},status:{visibility:!0,colNumber:2,start:6,end:7},totalFluidCols:7,totalVisibleCols:3,colMargin:32}):this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:3},lastActivity:{visibility:!0,colNumber:1,start:4,end:5},owner:{visibility:!0,colNumber:2,start:6,end:7},status:{visibility:!0,colNumber:3,start:8,end:9},totalFluidCols:9,totalVisibleCols:4,colMargin:32}))}else if("thumbnail"==e){var i=this.$el.width();if(i){var t=parseInt($(".shared-workflow-files-body").css("marginLeft")),s=$(".shared-thumb-view .shared-workflow-list-item").width(),o=24,n=Math.floor((i-t)/(s+o)),r=(i-t-s*n)/n;$(".shared-thumb-view .shared-workflow-list-item").css("marginRight",r+"px")}}}})}),define("acplugins/reviews/js/ops/manipulation/unshare-one-if-confirmed-op",["core/ac-core","acplugins/reviews/js/ac-review","i18n!acplugins/reviews/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,i,t,s){i.UnshareOneIfConfirmedOp=e.Op.extend({run:function(){var e,o,n,r=this.options,l=r.appApi.dialogApi;return e=t.CONFIRM_UNSHARE_MSG_ONE_ITEM,o=t.CONFIRM_UNSHARE_TITLE,l.displayTextAlert(l.SEVERITY_WARNING,o,e,t.UNSHARE,s.CANCEL).then(function(){n=new i.UnshareOneParcelOp(r),n.run()})}})}),define("acplugins/reviews/js/templates/parcel-activity-template.html",[],function(){return'<div role="dialog" tabindex="-1" aria-label="<%- header %>" class="parcel-activity-dlg generic-dialog">        <div role="presentation" class="parcel-activity-dlg-content">            <div role="presentation" class="dialog-title-bar">                <div role="heading" class="dialog-title">                    <%= header %>                </div>            </div>            <div role="grid" class="parcel-table-container">                <div role="row" class="parcel-activity-table-header collection-header">                    <div role="columnheader" class="collection-header-column-title parcel-recipient-col parcel-activity-nosort"><%= recipient %></div>                    <div role="columnheader" class="collection-header-column-title parcel-activity-col parcel-activity-nosort"><%= activity %></div>                    <div role="columnheader" class="collection-header-column-title parcel-item-col parcel-activity-nosort"><%= item %></div>                    <button role="columnheader" tabindex="0" aria-sort="descending" class="collection-header-column-title parcel-date-col parcel-date-col-header"><%= dateViewed %>                    <div class="collection-header-column-sort descending parcel-activity-sort-btn" data-test-name="parcel-activity-date-sort"></div>                    </button>                </div>                <div role="presentation" class="parcel-activity-body"></div>            </div>            <button class="parcel-activity-close-btn control-button ui-theme theme-text button-grey"><%= close %></button>        </div>    </div>'}),define("acplugins/reviews/js/templates/parcel-activity-item-template.html",[],function(){return'<div role="row" class="parcel-activity-item-row collection-item">        <div role="gridcell" class="parcel-activity-item-recipient parcel-recipient-col"><%= email %></div>            <div role="gridcell" class="parcel-activity-item-what parcel-activity-col"><%= what %></div>        <div role="gridcell" class="parcel-activity-item-item parcel-item-col">            <div role="img" aria-label="<%= iconDesc %>"<% if (!iconDesc.length) { %>                 aria-hidden="true"<% } %>                 class="collection-item-thumb <%= iconCls %>"></div>            <div class="parcel-activity-item-filename"><%= filename %></div>        </div>        <div role="gridcell" class="parcel-activity-item-date parcel-date-col"><%= date %></div>    </div>'
}),define("acplugins/tracked-send/js/utils/sc-constants",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var i=e.TrackedSend;return i.ScConstants={ACTION:"Action",ACTIONS:"Actions",ADD_FILES_TO_SHARE:"AddFilesToShare",ADDRESS_BOOK:"AddressBook",ATTEMPTED_TO_SHARE_FORM:"AttemptedToShareForm",AUTOCOMPLETE:"Autocomplete",AVOIDED:"Avoided",BROWSER_CLOSE:"BrowserClosed",BRANDING:"Branding",CANCEL:"Cancel",CHECKED:"Checked",CHICKLET_ADDED:"ChickletAdded",CLICKED:"Clicked",CLICK_BRANDING:"ClickBranding",CLICK_BRANDING_IN_READER:"ClickBrandingInReader",CLICK_BRANDING_IN_ACROBAT:"ClickBrandingInAcrobat",CLOSE:"Close",COLOR_INPUT:"ColorInput",COLOR_MENU_BUTTON:"ColorMenuButton",COLOR_WELL:"ColorWell",CONTINUE:"Continue",DATE_VIEWED:"DateViewed",DEFAULT:"Default",DIALOG:"Dialog",DISABLED:"Disabled",DISALLOWED:"Disallowed",DOWNLOAD:"Download",DOWNLOAD_ALL:"DownloadAll",DOWNLOAD_ONE:"DownloadOne",DRAG_FILES:"DragFiles",DURATION:"Duration",EDIT_BRANDING_ONLINE:"ContinueOnline",EMAIL:"Email",EMAIL_LINK:"EmailLink",ENABLED:"Enabled",ENTERED:"Entered",EVENTUAL_CLICK:"EventualClick",FILE:"File",FILE_LIST:"FileList",FILE_NAME:"FileName",FILES_SHARED_DLG:"FilesSharedDlg",FORWARD:"Forward",FULL_ACTIVITY:"FullActivity",HIDDEN:"Hidden",IMMEDIATE_CLICK:"ImmediateClick",INCLUDE_MESSAGE_TEXT:"IncludeMessageText",INCLUDE_REPLY_TO:"IncludeReplyTo",IPM:"IPM",LATER:"Later",LOGO_BUTTON:"LogoButton",LOGO_CANCEL:"LogoCancel",LOGO_SAVE:"LogoSave",MESSAGE:"Message",MULTI:"Multi",NO_PARCELS:"NoParcels",NOTIFY_WHEN_VIEWED:"NotifyWhenViewed",NUM_FILES_CHECKED:"NumFilesChecked",PERSONAL:"Personal",PERSONAL_AND_PUBLIC:"PersonalANDPublic",PREVIEW:"Preview",PUBLIC:"Public",PUBLIC_LINK:"PublicLink",RECVIEW:"RecView",REPLY:"Reply",REMOVE:"Remove",REPORT_ABUSE:"ReportAbuse",RHP:"RHP",SCROLL:"Scroll",SAVE_AS:"SaveAs",SELECT_ALL:"SelectAll",SELECT_FILES:"SelectFiles",SENT_FILES:"SentFiles",SHARE:"Share",SHARE_BUTTON:"ShareButton",SHARE_FILE_BUTTON:"ShareFileButton",SHARE_ICON:"ShareIcon",SHARE_WITH:"ShareWith",SHARED:"Shared",SHOWN:"Shown",SINGLE:"Single",SORT:"Sort",SUBJECT:"Subject",SUCCESS:"Success",SURVEY:"Survey",SURVEY_CANCEL:"SurveyCancel",SURVEY_FIELD_FOCUS:"SurveyFieldFocus",SURVEY_LINK:"SurveyLink",SURVEY_SEND:"SurveySend",TOOLS:"Tools",TRACK:"Track",TRASH:"Trash",TURN_OFF_BRANDING:"TurnOffBranding",TURN_ON_BRANDING:"TurnOnBranding",UNCHECKED:"Unchecked",UNSHARE:"Unshare",UPGRADE:"Upgrade",URL_HIGHLIGHT:"UrlHighlight",URL_KEY_COPY:"UrlKeyCopy",VIEW:"View",VIEW_ALL_SHARED_FILES:"ViewAllSharedFiles",VIEW_FULL_ACTIVITY:"ViewFullActivity",WARNED_BEFORE_CLOSING:"WarnB4Close",WARNING:"Warning",WITH_REPLY:"wReply",1:"1","2_TO_5":"2to5","6_TO_10":"6to10","11_OR_MORE":"11orMore","11_TO_20":"11to20","21_TO_40":"21to40","41_TO_120":"41to120","121_OR_MORE":"121orMore",FSS:"FSS",FORM:"Form",OUTPUT:"Output",SAVE_TO_PDF:"SaveToPDF","1_STARTED":"1-Started","2_COMPLETED":"2-Completed",ERROR:"Error",SEND_TAB:"SendTab",COMPLETED:"Completed",SHARED_BY_YOU:"SharedByYou",SHARED_BY_OTHERS:"SharedByOthers",VIEW_FILES:"ViewFiles ",REVIEW_FILES:"ReviewFiles "},i.ScConstants}),define("acplugins/tracked-send/js/utils/ts-utils",[],function(){var e={extractRootUrl:function(e){var i=document.createElement("a");return i.href=e,i.protocol+"//"+i.host}};return e}),define("acplugins/tracked-send/js/home-view/ac-tracked-send",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var i=e.TrackedSend.Home;return i||(i=e.TrackedSend.Home={}),i.CachedData={},i.PLUGIN_ID||(i.PLUGIN_ID="sentfiles"),i}),define("acplugins/tracked-send/js/home-view/collections/fileviewevent-collection",["acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util"],function(e,i){e.FileViewEventCollection=Backbone.Collection.extend({initialize:function(e,i){Backbone.Collection.prototype.initialize.call(this,e,i),this.parcel_id=i.parcel_id,this.rootUrl=i.rootUrl},url:function(){return this.rootUrl+"/a/api/parcels/"+this.parcel_id+"/file_view_events"},fetch:function(e){return e=e||{},e=i.customizeOptions("GET",e),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){return e.events}})}),define("acplugins/reviews/js/views/parcel-activity-dlg",["core/ac-core","core/utils/date-util","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/parcel-activity-template.html","acplugins/reviews/js/templates/parcel-activity-item-template.html","core/utils/file-types","core/utils/truncate","i18n!acplugins/reviews/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/utils/ts-utils","core/utils/util","acplugins/tracked-send/js/home-view/collections/fileviewevent-collection"],function(e,i,t,s,o,n,r,l,a,c,d){t.ParcelActivityDlg=e.DialogView.extend({PAGE_SIZE:25,_page_num:0,_sort_order:"desc",_no_more_events:!1,_prev_scrolltop:0,_what_map:{parcel_view:l.PARCEL_ACTIVITY_PREVIEWED,download:l.PARCEL_ACTIVITY_DOWNLOADED},events:{"click .parcel-activity-close-btn":"_onCloseBtnClick","click .parcel-date-col-header":"_onSortClick"},initialize:function(){var i=this.options.parcelModel.id,t=i.split(":");t.length&&(i=t[t.length-1]);var n,r,d,h=this.options,p=i,u={},v={};r=this.options.appApi.baseFilesUrisApi.getSendApiUri(),r=c.extractRootUrl(r),n={parcel_id:p,comparator:!1,rootUrl:r},e.DialogView.prototype.initialize.call(this),this._fileviewevent_collection=new AcTrackedSend.FileViewEventCollection([],n),h.parcelModel.set("fileviewevents",this._fileviewevent_collection),this._template=_.template(s),this._itemTemplate=_.template(o),e.View.prototype.initialize.call(this),_.each(h.parcelModel.get("participants"),function(e){u[this._getLegacyId(e.id)]=""===e.email?l.PARCEL_ACTIVITY_PUBLIC_VISITOR:_.escape(e.email)},this),this._inv_emails=u,_.each(h.parcelModel.get("resources"),function(e){e.icon_class=this._getIconClass(e),e.icon_desc=this._getIconDesc(e),v[this._getLegacyId(e.asset_id)]=e},this),this._files_by_id=v,d=h.parcelAssetsCollection&&h.parcelAssetsCollection.length>1?a.MULTI:a.SINGLE,h.appApi.siteCatalystApi.logScEvent([a.PREVIEW,a.SHARED,d,a.FULL_ACTIVITY,a.SHOWN])},render:function(){e.DialogView.prototype.render.call(this),this.$el.html(this._template({header:_.template(l.PARCEL_ACTIVITY_HEADING,{emailSubject:_.escape(this.options.parcelModel.get("send_track_info").intro_subject)}),recipient:l.PARCEL_ACTIVITY_RECIPIENT,activity:l.PARCEL_ACTIVITY_ACTIVITY,item:l.PARCEL_ACTIVITY_ITEM,dateViewed:l.PARCEL_ACTIVITY_DATE_VIEWED,close:l.PARCEL_ACTIVITY_CLOSE})),this.$body=this.$(".parcel-activity-body"),this.loadEvents(_.bind(function(e){this._checkLimit(e.length),this.displayEvents(e),this.$body.scrollTop(0)},this),!1),this.$body.scroll(_.bind(function(){this._checkScroll()},this)),this._initWrappers(),this._invalidateSize(),this._initTabLimits(),this.$el.find(":focusable:first").focus()},loadEvents:function(e,i){this.isLoading=!0,this._fileviewevent_collection.fetch({data:{sort:"created!"+this._sort_order,page:this._page_num,max:this.PAGE_SIZE},reset:i,success:e})},displayEvents:function(e){_.each(e.models,function(e){var t,s,o,n,r=e.get("event_type"),a=e.get("file_id"),c="hidden",d="";"parcel_view"===r?(o=this.options.parcelModel.get("resources"),1===o.length?(s=this._files_by_id[this._getLegacyId(o[0].asset_id)],n=s.name,c=s.icon_class,d=s.icon_desc):(n=l.PARCEL_ACTIVITY_ALL_FILES_PREVIEW,c="file-icon-multifile")):"all"===a?(n=l.PARCEL_ACTIVITY_ALL_FILES,c="file-icon-multifile"):(s=this._files_by_id[a],n=s?s.name:"",c=s?s.icon_class:"hidden",d=s?s.icon_desc:""),t=this._itemTemplate({filename:n,iconCls:c,iconDesc:d,what:this._what_map[r],email:this._inv_emails[e.get("invitation_id")],date:i.formatDate(e.get("created"))}),this.$body.append(t)},this),_.each(this.$(".parcel-recipient-col"),function(e){var i=$(e);r.truncateElementText(i)}),_.each(this.$(".parcel-activity-item-filename"),function(e){var i=$(e);r.truncateElementText(i)}),this.isLoading=!1},close:function(i,t){var s;s=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?a.MULTI:a.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([a.PREVIEW,a.SHARED,s,a.FULL_ACTIVITY,a.CLOSE]),e.DialogView.prototype.close.call(this,i,t)},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$body=this.$(".parcel-activity-body")},_onSortClick:function(){var e,i=this.options;this._sort_order="asc"===this._sort_order?"desc":"asc",this._page_num=0,this._no_more_events=!1,this.loadEvents(_.bind(function(e){var i=this.$(".parcel-activity-sort-btn"),t=this.$(".parcel-date-col-header");this.$body.empty(),this._checkLimit(e.length),this.displayEvents(e),this.$body.scrollTop(0),"asc"===this._sort_order?(i.removeClass("descending"),t.attr("aria-sort","ascending")):(i.addClass("descending"),t.attr("aria-sort","descending"))},this),!0),e=i.parcelAssetsCollection&&i.parcelAssetsCollection.length>1?a.MULTI:a.SINGLE,i.appApi.siteCatalystApi.logScEvent([a.PREVIEW,a.SHARED,e,a.FULL_ACTIVITY,a.SORT,a.DATE_VIEWED])},_checkLimit:function(e){e<this.PAGE_SIZE&&(this._no_more_events=!0)},_getLegacyId:function(e){return e},_checkScroll:function(){var e=100,i=this.$body.height(),t=this.$body.get(0).scrollHeight,s=this.$body.scrollTop(),o=this._prev_scrolltop;this._prev_scrolltop=s,!this._no_more_events&&s>o&&!this.isLoading&&+s+i+e>t&&(this._page_num+=1,this.loadEvents(_.bind(function(e){this._checkLimit(e.length),this.displayEvents(e)},this),!1))},_getIconClass:function(e){var i,t=n.getFileInfo(e.content_type||"",e.name);return i=t.iconCls||""},_getIconDesc:function(e){var i,t=n.getFileInfo(e.content_type||"",e.name);return i=t.desc||""},_setupSizedElement:function(e){var i=this.$(e);i.attr("data-title")?i.text(i.attr("data-title")):i.attr({"data-title":i.text()}),r.truncateElementText(i)},_invalidateSize:function(){this._setupSizedElement(".dialog-title"),this._center(),this._showModalMask(!0)},_addAppApiCallbacks:function(){e.DialogView.prototype._addAppApiCallbacks.call(this),d.isIE8()||this.options.appApi.windowApi.addWindowResizeCallback(this._onWindowResize)},_removeAppApiCallbacks:function(){e.DialogView.prototype._removeAppApiCallbacks.call(this),d.isIE8()||this.options.appApi.windowApi.removeWindowResizeCallback(this._onWindowResize)},_onWindowResize:function(){this.render()}})}),define("acplugins/tracked-send/js/tool/ac-tracked-send",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var i=e.TrackedSend.Tool;return i||(i=e.TrackedSend.Tool={}),i.PLUGIN_ID||(i.PLUGIN_ID="send"),i}),define("viewer/templates/viewer-page-template.html",[],function(){return'<div class="page-main-container">        <div class="page-error error"></div>        <div class="page-body-container parcel-container">            <div class="page-body thumbnails">                <div class="parcel-body-header">                    <div class="full-preview-home-btn-wrapper">                        <button class="full-preview-home-btn parcel-preview-home-btn"                                id="full-preview-header-home-btn"                                title="<%= back %>">                            <span class="hidden-accessible"><%= back %></span>                        </button>                        <div class="full-preview-home-btn-separator"></div>                        <div class="toolbar-item plugin-selector">                            <div class="toolbar-item-icon-container">                                <div class="toolbar-item-icon back-toolbar-icon parcel-preview-home-btn"></div>                            </div>                            <div class="toolbar-item-label"></div>                        </div>                    </div>                    <div class="full-preview-branding-logo wrap-branding-logo"><div class="branding-logo parcel-branding-logo"></div></div>                    <div class="full-preview-name parcel-subject" id="parcel-subject" role="heading" aria-level="1"><%= parcelSubject %></div>                    <div class="parcel-action-buttons">                        <button class="toolbar-item plugin-selector tracked-send-unshare-btn">                            <div class="tracked-send-toolbar-item-icon-container">                                <div class="tracked-send-toolbar-item-icon unshare"></div>                            </div>                                <div class="tracked-send-toolbar-item-label"><%= unshare %></div>                        </button>                        <button class="toolbar-item plugin-selector tracked-send-forward-btn">                            <div class="tracked-send-toolbar-item-icon-container">                                <div class="tracked-send-toolbar-item-icon forward"></div>                            </div>                                <div class="tracked-send-toolbar-item-label"><%= forwardLabel %></div>                        </button>                        <button class="control-button ts-viewer-download-button"><%= downloadAll %></button>                    </div>                </div>                <div class="parcel-rendition-body-holder">                    <div class="parcel-rendition-list"                         role="group" aria-labelledby="parcel-subject">                    </div>                    <div role="complimentary" class="parcel-rendition-list-rhp">                    </div>                </div>            </div>            <div class="page-body full-preview"></div>        </div>    </div>'}),define("acplugins/tracked-send/js/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0,"da-dk":!0,"fi-fi":!0,"nb-no":!0,"nl-nl":!0,"pt-br":!0,"sv-se":!0,"zh-cn":!0,"zh-tw":!0,"ko-kr":!0,"cs-cz":!0,"hu-hu":!0,"pl-pl":!0,"ru-ru":!0,"uk-ua":!0,"tr-tr":!0,"sk-sk":!0,"sl-si":!0,"bg-bg":!0}),define("acplugins/tracked-send/js/nls/root/ui-strings",{SELECTOR_LABEL:"For Viewing",SELECTOR_LABEL_WEB:"Sent",TOOL_LABEL:"Send",SEND_TRACK_LABEL:"Shared For Viewing",TYPE:"Type",ADDED_DATE:"Added",MODIFIED_DATE:"Modified",PAGES:"Pages",SIZE:"Size",SENDER_NAME:"Sent By",SENT_DATE:"Date Sent",REPORT_ABUSE:"Report Abuse",UNKNOWN:"Unknown",EXTENSION:"(.<%- ext %>)",DOWNLOAD:"Download",DOWNLOAD_ALL:"Download All",REPLY:"Reply",FORWARD:"Forward",NOTIFY_ME_WHEN_VIEWED:"Notify when recipients viewed",UNSHARE:"Unshare",UNSHARED:"Unshared",VIEWED_BY:"Viewed By",VIEW_FULL_ACTIVITY:"View Full Activity",EMAIL_REPLY_FORMAT:"Re: <%= emailSubject %>",OPEN:"Open",SAVEAS:"Save As",TRACK:"Track Online",OPEN_LINK:"(Open Link)",MESSAGE_HEADING:"Message",REMOVE:"Remove",DELETE:"Delete",SHARED_FILES:"Sent Files",SUBJECT:"Subject",SENT_TO:"Sent To",DATE_SENT:"Date Sent",VIEWS:"Views",PARCEL_PUBLIC_SHARING:"Anonymous",EXPAND:"Expand",COLLAPSE:"Collapse",SELECT_ALL:"Select All",NUMBER_OF_VIEWS:"Number of Views",GO_TO_ADOBE_SEND_WEBSITE:"Go To Adobe Send Website",GO_TO_ADOBE_S_T_WEBSITE:"Manage Documents Sent for Signature",DATE_VIEWED:"Date Viewed",CONFIRM_UNSHARE_TITLE:"Unshare File",CONFIRM_UNSHARE_MSG_ONE_ITEM:"If you unshare this file, people won’t be able to access it anymore. You can share it again later.",CONFIRM_UNSHARE_MSG_N_ITEMS:"If you unshare this file, people won’t be able to access it anymore. You can share it again later.",CONFIRM_UNSHARE_MSG:"Are you sure? We will remove the link to this document from your account.",Unshare_checkbox:"Delete shared file from Document Cloud",CONFIRM_REMOVE_TITLE:"Delete shared file",CONFIRM_REMOVE_BUTTON:"Delete file",CONFIRM_REMOVE_MSG_ONE_ITEM:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",CONFIRM_REMOVE_MSG_N_ITEMS:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",CONFIRM_DELETE_MSG_ONE_ITEM:"Deleting this shared file will permanently remove it from Document Cloud. This can’t be undone.",NO_FILES_TITLE:"No Files",NO_FILES_MESSAGE:"There are no files available to download. The files may have been deleted.",SHARE_TITLE:"Send Files",SHARE_WELCOME:"Send and track large files online.",SHARE_WELCOME_DESKTOP:"The fast, easy way to share and monitor files.",SHARE_SELECT_FILES:"Select Files to Send",SHARE_VIEW_SHARED_FILES:"View All Sent Files",READER_FILESELECT_WINDOW_TITLE:"Select Files",READER_FILESELECT_CONTINUE_BUTTON:"Continue",ALL_SUPPORTED_FILES:"All supported files",CHOOSE_FILES:"Choose Files",ALL_SUPPORTED_FILES:"All supported files",FILE:"file",FILES:"files",UPLOADING_TO_SEND:"Uploading to Adobe Document Cloud...",SELECTED_FILES:"Selected Files",ADD_MORE_FILES:"Add Files",SHARE_WITH_HEADING:"Send To",SHARE_ADDRESS_BOOK:"Address Book",SHARE_CHOICE_WORLD:"Create Anonymous Link",SHARE_CHIOCE_WORLD_EXPLAIN:"(with basic usage information)",SHARE_CHOICE_INDIVIDUAL:"Send Personalized Invitations",SHARE_CHOICE_INDIVIDUAL_EXPLAIN:"(with detailed tracking)",SHARE_CHOICE_ALLOW_COMMENTS:"Allow Comments",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE:"Add Your Logo & Color",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE_EDIT:"Edit",SHARE_ADDRESS_HEADING:"Recipient Email Addresses",SHARE_ADDRESS_PROMPT:"Enter recipient email addresses",SHARE_SUBJECT_MSG_HEADING:"Subject & Message",SHARE_INITIAL_SUBJECT:"Shared Files",SHARE_AV_ERROR:"Audio/video files are not supported for sending, and have been omitted from your selection.",SHARE_AV_UPGRADE_MESSAGE:" Upgrade to be able to send audio/video files.",SHARE_FORMS_ERROR:"Form files are not currently supported for sending. Go to Fill & Sign to find and download the form.",SHARE_FORMS_ERROR_DESKTOP:"This file type is currently not supported and has been omitted from your selection.",SHARE_AV_FORMS_ERROR:"Audio/video and form files are not supported for sending, and have been omitted from your selection.",SHARE_OVER_LIMIT_APPEND_ERROR:"<br/><br/>Additionally, you selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_ERROR:"You selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_TITLE:"Too many files.",SHARE_NON_NATIVE_APPEND_ERROR:"<br/><br/>Additionally, your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR:"Send & Track is currently not supported for files stored in <%= connectorLabel %>. To send files from <%= connectorLabel %>, save them to your computer first.",SHARE_NON_NATIVE_ERROR_DEFAULT:"Your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR_HEADING:"Unsupported File Storage",SHARE_MESSAGE_HEADING:"Message",SHARE_MESSAGE_PROMPT:"I have shared some files with you. Please click on the link to view and download them.",SHARE_BUTTON:"Send",SHARE_BUTTON_LINK:"Create Link",SHARE_CANCEL:"Cancel",SHARE_EMAIL_INVALID_PLURAL:"The following email addresses are invalid:",SHARE_EMAIL_INVALID_SINGULAR:"The following email address is invalid:",SHARE_ERROR_SEND_LIMIT_EXCEEDED_TITLE:"Not sent",SHARE_ERROR_SEND_LIMIT_EXCEEDED:"The number of recipients you have selected exceeds your recent limit. Reduce the number of recipients, or wait until later to try again.",SHARE_ERROR_UNSUPPORTED_SHARING_MIME_TYPE:"Audio/video files aren't supported.",SHARE_ERROR_RECIPIENTS_NOT_ALLOWED:"Please upgrade to send to individuals.",SHARE_ERROR_CANNOT_CONVERT_FORM:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_RESTRICTION:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_TIMEOUT:"Files could not be sent because the form file conversion to PDF timed out.",SHARE_INDIVIDUAL_HELP_WEB:"Note: Personalized links are unique to each recipient, but anyone the recipient shares those links with can access the documents.",SHARE_INDIVIDUAL_HELP:"Note: Personalized invitations are unique to each recipient, but anyone the recipient shares those invitations with can access the documents.",SHARE_UPLOAD_ERROR_TITLE:"Error uploading files",SHARE_UPLOAD_ERROR_MSG:"One or more files could not be uploaded. Please try again.",SHARE_NO_FILES_SELECTED:"There are currently no files selected.",SHARE_CLICK_TO_ADD_FILES:"Click the Add Files button to get started.",SHARE_RECIPIENT_PAGE_HEADLINE:"Recipient Page",SHARE_CHOICE_INCLUDE_MESSAGE:"Include Message Text",SHARE_CHOICE_RESPOND_BACK:"Include Reply-To",SHARE_REMOVE:"Remove",ADD_FILES_REJECTED_TITLE:"Invalid Filename Format",ADD_FILES_REJECTED_MESSAGE:"Files must have a file name extension or be a known file type to be sent. Please ensure that your filename includes a valid file extension.",SHARE_PUBLIC_LINK_HEADING_DESKTOP:"Distribute the anonymous link by:",SHARE_COPY_LINK_BUTTON:"Copy Link",SHARE_SUCCESS_SENT_LINK:"Go to Sent Files",SHARE_SUCCESS_SENT_LINK_FOOTER:"to view all previously sent files",READER_GO_URL:"http://www.adobe.com/go/sendpluginrdr_12_0_0",ACROBAT_GO_URL:"http://www.adobe.com/go/sendpluginacro_12_0_0",SEND_UPSELL_HEADLINE:"Upgrade To",SEND_UPSELL_HEADLINE_OLD:"Upgrade to:",SEND_UPSELL_POINT_1:"• Send large files, including documents and videos",SEND_UPSELL_POINT_2:"• Receive an email when files are viewed",SEND_UPSELL_POINT_3:"• Track downloads using an online dashboard",SEND_UPSELL_LATER:"Later",SEND_UPSELL_NOW:"Upgrade Now",SEND_UPSELL_LEARN_MORE:"Learn More",SEND_UPSELL_UPGRADE_REQUIRED:"Unsupported Files",SHARE_TOO_MANY_DLG_TITLE:"Too many email addresses",SHARE_TOO_MANU_DLG_MESSAGE:"You've entered <%=numRecipients%> email addresses, but you can only send to <%=maxRecipients%> at a time. Delete some addresses and try again.",SHARE_SUCCESS_DLG_TITLE:"Files Shared",SHARE_PUBLIC_LINK_HEADING:"Anonymous Link Generated",SHARE_EMAIL_LINK_BUTTON:"Email Link",SHARE_PUBLIC_LINK_MESSAGE:"Anyone with the link will access the files anonymously.",SHARE_PUBLIC_LINK_NO_COPY_OR_EMAIL_WARNING:"You have not yet copied or emailed the link. Are you sure you want to continue?",SHARE_PUBLIC_LINK_INSTRUCTIONS:"Copy the link below to email or share it with others. Anyone who uses the link will be able to access the files.",SHARE_INVITATIONS_HEADING:"Invitations Sent",SHARE_INVITATIONS_MESSAGE:"Each recipient will receive a link by email, and you will be notified when they follow the link.",SHARE_SUCCESS_CLOSE:"Close",SHARE_SUCCESS_CONTINUE:"Continue",SHARE_FILE_EMAIL_BODY:"I'm using Adobe Send. You can view my file by clicking on the link below:",SHARE_FILES_EMAIL_BODY:"I'm using Adobe Send. You can view my files by clicking on the link below:",S_T_FILE_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my file in Adobe Document Cloud by clicking on the link below:",S_T_FILES_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my files in Adobe Document Cloud by clicking on the link below:",SHARE_CLIPBOARD_MESSAGE:"Tip: Use Ctrl + C to copy",SHARE_CLIPBOARD_MESSAGE_MAC:"Tip: Use Cmd + C to copy",SHARE_CLIPBOARD_COPIED:"link is copied to clipboard",PARCEL_ACTIVITY_DOWNLOADED:"downloaded",PARCEL_ACTIVITY_PREVIEWED:"previewed",PARCEL_ACTIVITY_PUBLIC_VISITOR:"public link visitor",PARCEL_ACTIVITY_ALL_FILES:"All Files",PARCEL_ACTIVITY_ALL_FILES_PREVIEW:"All Files Preview Page",PARCEL_ACTIVITY_HEADING:"Activity for “<%= emailSubject %>”",PARCEL_ACTIVITY_RECIPIENT:"Recipient",PARCEL_ACTIVITY_ACTIVITY:"Activity",PARCEL_ACTIVITY_ITEM:"Item",PARCEL_ACTIVITY_DATE_VIEWED:"Date Viewed",PARCEL_ACTIVITY_CLOSE:"Close",CURRENTLY_SHARED_IN:"Sent To",SHARE_THIS_FILE:"Send this File",SHARE_THIS_FILE_AGAIN:"Send this File Again",SENT_FILES_HEADER_SEARCH_CONTROLS:"Search Controls",SENT_FILES_HEADER_REFRESH:"Refresh",SENT_FILES_NUM_FILES:"<%= numFiles %> files",NO_PARCELS_SEND_PROMPT:"There aren't any files here yet.",NO_PARCELS_SEND_SUBPROMPT:"Files you've sent or received for viewing will appear here.",NO_PARCELS_SEND_BTN:"Adobe Send",NO_PARCELS_S_T_BTN:"Learn about sending files for viewing",LEARN_MORE_ST_GO_URL:"http://www.adobe.com/go/LearnMoreSTEmpty",NO_SENT_PARCELS_REVIEW_SUBPROMPT:"Files that are shared by you will appear here.",NO_RECEIVED_PARCELS_REVIEW_SUBPROMPT:"Files that are shared by others will appear here.",SENT_LEARN_MORE:"Learn More",RECEIVED_LEARN_MORE:"Learn More",CTA_SHARE_A_FILE:"Share a file",NO_SHARED_FILE:"No shared files yet.",ON_SIGN_OUT_PROMPT:"Sign in to access shared files.",ON_SIGN_OUT_SUBPROMPT:"See and manage files you've sent or received for viewing.",SIGN_IN_BUTTON:"Sign In",ON_SIGN_OUT_SUBPROMPT_SENT_FILES:"See and manage files that are shared by you.",ON_SIGN_OUT_SUBPROMPT_RECEIVED_FILES:"See and manage files that are shared by others.",COULD_NOT_SEND:"Could not send",ENTERPRISE_USERS_ACCESS_ERROR:"You do not have access to this service. Please contact your IT Administrator to gain access, or try to sign in with an Adobe ID.",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_NOT_AVAILABLE:"Continue at Adobe Document Cloud",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your Color and Logo are currently only available online at the Adobe Send web site. Click "<%= buttonName %>" to go there now.',S_T_CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your logo and color are currently only available at Adobe Document Cloud. Click "<%= buttonName %>" to go there now.',CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_OK:"Continue",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_TITLE:"Add Your Logo & Color",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_DESCRIPTION:"Add your logo and choose a color to display on emails and recipient page.",CUSTOMIZE_RECIPIENT_PAGE_ADD_LOGO:"Add Logo",CUSTOMIZE_RECIPIENT_PAGE_REMOVE_LOGO:"Remove Logo",CUSTOMIZE_RECIPIENT_PAGE_CHOOSE_COLOR:"Choose Color",CUSTOMIZE_RECIPIENT_PAGE_SAVE:"Save",CUSTOMIZE_RECIPIENT_PAGE_CLOSE:"Cancel",CUSTOMIZE_RECIPIENT_PAGE_FILE_FILTERING_LABEL:"File Type is an image",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_TITLE:"Error",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_FORMAT:"The file you have chosen cannot be used as a logo. Please select another file. ",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_COLOR_FORMAT:"The color you have entered is invalid. Please enter a hex value like #FFFFFF or #FFF.",SURVEY_TITLE:"We are interested in your Feedback",SURVEY_LINK:"Tell Us What You Think",SURVEY_QUESTION_ONE:"Why are you using Send & Track today?",SURVEY_QUESTION_TWO:"Does it work well for you?",SURVEY_QUESTION_THREE:"Is it missing something you wanted?",SURVEY_SEND:"Send",SURVEY_CLOSE:"No Thanks",SURVEY_TEXTAREA_LIMITATION_LABEL:"characters remaining",INVALID_PARAMETER_SURVEY_MESSAGE:"Answer type not allowed",INVALID_PARAMETER_SURVEY_TITLE:"Invalid Parameter",SEND_RHP_TITLE:"Sent To",GENERIC_ARIA_LABEL_STRING:"<%= prefix %>. <%= suffix %>",ENTERPRISE_RESTRICTIONS_ENFORCED:"Enterprise Sharing Restrictions Enabled",ENTERPRISE_USERS_SHARING_ACCESS:"This feature isn't available because your organization has enabled sharing restrictions. ",NAME:"NAME",SENT_RECEIVED:"SENT/RECEIVED",OWNER:"SENDER",STATUS:"STATUS",SHARED:"Shared",YOU:"You",VIEWED:"viewed",VIEWED_CAPS:"Viewed",WAITING_FOR_YOU:"Waiting for you",OF:"of",ACTIVITY_VIEWED_BY:"Viewed by <%= participant %>",ACTIVITY_DOWNLOADED_BY:"Downloaded by <%= participant %>",ACTIVITY_ONE_DOWNLOADED_BY:"<%= file_name %> downloaded by <%= participant %>",ACTIVITY_CREATED_BY:"Created by <%= participant %>",ACTIVITY_DOCUMENT_CREATED_BY:"Document created by <%= participant %>",ACTIVITY_SENT_TO:"Sent to <%= participant %>",REMOVE_LINK_DC_TITLE:"Remove Link from Adobe's cloud storage",REMOVE_LINK_DC_CONTENT:"Removing this link will delete it from the list of items shared with you.",REMOVE_LINK_DC_BUTTON:"Remove Link",ASCENDING:"Ascending",DESCENDING:"Descending",SHARED_FILES_DOWNLOAD_TITLE:"Shared Files",SENT_FILES_HEADER:"Shared by you",RECEIVED_FILES_HEADER:"Shared by others",LAST_ACTIVITY:"LAST ACTIVITY",DATE_LAST_ACTIVITY:"Date Last Activity",SHARED_BY:"SHARED BY",SIZE:"SIZE",SHARING:"SHARING",DATE_SHARED:"DATE SHARED",DATE_SHARED_S:"Date Shared",FROM:"FROM",DUE_BY:"Due by"}),define("viewer/templates/page-header-template.html",[],function(){return'<div class="adc-logo"></div>    <div class="page-header-tabs">        <div class="page-header-tab selected"><%= title %></div>    </div>'}),define("viewer/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0}),define("viewer/nls/root/ui-strings",{APP_NAME:"VIEWER",UNSUPPORTED_BROWSER_TITLE_2:"Browser Unsupported",UNSUPPORTED_BROWSER_MSG_2:"You are running an unsupported version of Internet Explorer. To view shared file(s), you must upgrade to the <a class='dialog-link' href='<%= ie %>'>latest version of Internet Explorer</a>, or use the latest version of <a class='dialog-link' href='<%= chrome %>'>Google Chrome</a>, <a class='dialog-link' href='<%= safari %>'>Safari</a> or <a class='dialog-link' href='<%= firefox %>'>Firefox</a>."}),define("viewer/views/page-header-view",["core/ac-core","viewer/ac-viewer","viewer/templates/page-header-template.html","i18n!viewer/nls/ui-strings","core/views/view"],function(e,i,t,s){i.PageHeaderView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&this.$el.html(this._template({title:s.APP_NAME})),this}})}),define("viewer/templates/full-preview-tracked-send-template.html",[],function(){return'<div class="full-preview-header files-header our-preview">    <div class="full-preview-home-btn-wrapper">        <button class="full-preview-home-btn parcel-preview-home-btn"                id="full-preview-header-home-btn"                title="<%= back %>">            <span class="hidden-accessible"><%= back %></span>        </button>        <div class="full-preview-home-btn-separator"></div>    </div>     <div class="full-preview-name-container folder-path                with-home-btn">        <div class="wrap-branding-logo"><div class="branding-logo parcel-branding-logo"></div></div>        <div id="full-preview-name" class="full-preview-name"             role="heading" aria-level="1"><%- name %></div>         <button class="full-preview-action-menu-btn                       files-header-btn"             id="full-preview-action-menu-btn"             title="<%= actions %>" aria-haspopup="true">            <span class="hidden-accessible"><%= actions %></span>        </button>        <div class="full-preview-action-menu menu" role="menu"              aria-hidden="true"></div>    </div>     <div class="full-preview-plugins-selector">        <div class="toolbar-selection-pointer"></div>        <div class="full-preview-plugins-selector-separator"></div>    </div>     <div class="full-preview-header-btns files-header-btns right">        <button class="full-preview-download-btn"             data-test-name="full-preview-header-download-btn">            <div class="full-preview-download-btn-icon"></div>            <div class="full-preview-download-btn-label">                 <%= download %></div>        </button>    </div></div> <div class="full-preview-main">    <div class="full-preview-body folder-items">        <div id="full-preview-image-container"             class="full-preview-image-container">            <!-- Intentionally omit close tag for img.                 See bug 3498744 (IE8) -->            <img class="full-preview-image single hidden" alt=""/>            <div class="full-preview-svg single hidden"/>        </div>        <div class="full-preview-not-available">            <%= previewNotAvailable %>            <span class="full-preview-not-available-desc"                ><%= previewNotAvailableDesc %></span>        </div>    </div>     <div class="full-preview-hud" role="toolbar"         aria-labelledby="full-preview-name"         aria-controls="full-preview-image-container"></div></div> <div class="full-preview-sidebar" tabindex="-1"></div>'}),define("viewer/views/full-preview-tracked-send-view",["core/ac-core","files/ac-files","viewer/ac-viewer","viewer/templates/full-preview-tracked-send-template.html","i18n!files/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","files/views/full-preview-view"],function(e,i,t,s){t.FullPreviewTrackedSendView=i.FullPreviewView.extend({initialize:function(){i.FullPreviewView.prototype.initialize.call(this),this._template=_.template(s),this.options.fullPreviewUiModel.on("change:show_info",this._toggleRHP,this)
},template:function(){return this._template},render:function(){var e,t=(this.options.parcelModel.get("invitation"),new Image);return i.FullPreviewView.prototype.render.call(this),!this.$homeBtn||this.options.viewMode&&"plugin"===this.options.viewMode||this.options.parcelModel.get("enabled")!==!0||(this.$parcelBody.addClass("branded"),this.$fullPreviewHeader.addClass("has-branding"),this.$fullPreviewMain.addClass("has-branding"),this.$parcelBody.addClass("has-branding"),this.$fullPreviewSidebar.addClass("has-branding"),e=this.options.parcelModel.get("color"),this.$fullPreviewBrandingLogo.children().length<1&&this.$fullPreviewBrandingLogo.append(t)),this},_initWrappers:function(){i.FullPreviewView.prototype._initWrappers.call(this),this.$fullPreviewBrandingLogo=$(".full-preview .branding-logo"),this.$parcelContainerFullPreviewName=$(".parcel-container .full-preview-name"),this.$parcelBody=this.$(".full-preview-name-container"),this.$fullPreviewHeader=this.$(".full-preview-header"),this.$fullPreviewMain=this.$(".full-preview-main"),this.$fullPreviewName=this.$(".full-preview-name"),this.$fullPreviewSidebar=this.$(".full-preview-sidebar"),this.$fullPreviewHomeButtonWrapper=this.$(".full-preview-home-btn-wrapper"),this.$fullPreviewHomeButton=this.$(".full-preview-home-btn")},_renderHudView:function(){this._renderChildView("_fullPreviewHudView",t.FullPreviewTrackedSendHudView,this.$previewHud)},_toggleRHP:function(){var e;LOG("Toggle Right Hand Panel"),e=this.options.fullPreviewUiModel.get("show_info"),e?this.$fullPreviewSidebar.addClass("show"):this.$fullPreviewSidebar.removeClass("show")}})}),define("viewer/templates/parcel-asset-template.html",[],function(){return'<div class="parcel-asset-view spinner-icon" role="group" aria-labelledby="parcel-name-<%= viewId %>">        <div role="presentation" class="parcel-hover-preview parcel-asset-rendition-block">            <div role="presentation" class="hover-preview-page3 hover-preview-page small-shadow"></div>            <div role="presentation" class="hover-preview-page2 hover-preview-page small-shadow"></div>            <div role="presentation" class="hover-preview-page1 hover-preview-page small-shadow">                <img class="parcel-asset-rendition" alt="" src="<%= rendition_url %>" />                <div role="presentation" class="hover-preview-not-available-parcel">                    <div class="hover-preview-not-available-header"><%=PREVIEW_NOT_AVAILABLE%></div>                    <div class="hover-preview-not-available-desc">                        <%=PREVIEW_NOT_AVAILABLE_DESC%>                    </div>                </div>                <div role="presentation" class="hover-preview-hud">                    <button data-test-name="hover-preview-hud-prev"                            class="hover-preview-hud-prev                                   hover-preview-control                                   hover-preview-nav-btn disabled"                            title="<%= PREV_PAGE_TITLE %>"                            aria-label="<%= PREV_PAGE_TITLE %>" disabled>                        <div class="hover-preview-nav-btn-img hover-preview-img-prev"></div>                    </button>                    <button data-test-name="hover-preview-hud-next" class="hover-preview-hud-next                                   hover-preview-control                                   hover-preview-nav-btn"                            title="<%= NEXT_PAGE_TITLE %>"                            aria-label="<%= NEXT_PAGE_TITLE %>">                        <div class="hover-preview-nav-btn-img hover-preview-img-next"></div>                    </button>                </div>            </div>        </div>        <div role="presentation" class="parcel-asset-rendition-footer">            <button class="parcel-inline download-button" title="<%= DOWNLOAD %>" aria-label="<%= DOWNLOAD %>"></button><button class="parcel-inline parcel-name" id="parcel-name-<%= viewId %>"><%= filename %></button>        </div>    </div>'}),define("viewer/views/parcel-asset-view",["core/ac-core","viewer/ac-viewer","viewer/templates/parcel-asset-template.html","i18n!files/nls/ui-strings","i18n!core/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,i,t,s,o,n){i.ParcelAssetView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addKeyEventListener()},resetRendition:function(){var e=this.model.getRenditionUrl("tile",this.model.get("current_page"));this.$rendition.attr("src",e)},adjustHud:function(){0===this.model.get("current_page")?(this.$prevBtn.addClass("disabled").prop("disabled",!0),this.$nextBtn.removeClass("disabled").prop("disabled",!1)):this.model.get("current_page")===this.model.get("page_count")-1?(this.$prevBtn.removeClass("disabled").prop("disabled",!1),this.$nextBtn.addClass("disabled").prop("disabled",!0)):(this.$prevBtn.removeClass("disabled").prop("disabled",!1),this.$nextBtn.removeClass("disabled").prop("disabled",!1))},turnPage:function(e){e.stopPropagation();var i,t,s=e.data.direction,o=1,r="NextPg",l=this.options;"prev"===s&&(o=-1,r="PrevPg"),1===o&&this.$nextBtn.hasClass("disabled")||-1===o&&this.$prevBtn.hasClass("disabled")||(t=l.parcelAssetsCollection&&l.parcelAssetsCollection.length>1?n.MULTI:n.SINGLE,l.appApi.siteCatalystApi.logScEvent(l.viewMode&&"plugin"===l.viewMode?[n.PREVIEW,t,n.FILE,r]:[n.RECVIEW,t,n.FILE,r]),i=(this.model.get("current_page")||0)+o,this.model.set("current_page",i),this.resetRendition(),this.adjustHud())},download:function(i){i.stopPropagation();var t=this.model,s=_.extend({},this.options,{id:t.get("id"),content_type:t.get("content_type")});this._triggerViewEvent(e.ViewEvents.DOWNLOAD,s),this.options.appApi.siteCatalystApi.logScEvent([n.RECVIEW,n.MULTI,n.DOWNLOAD_ONE])},render:function(i,t){var n,r=this.model.id,l=1;return e.View.prototype.render.call(this),this.$item||(n=this._template({filename:this.model.get("name"),rendition_url:this.model.getRenditionUrl("tile",0),PREVIEW_NOT_AVAILABLE:o.PREVIEW_NOT_AVAILABLE,PREVIEW_NOT_AVAILABLE_DESC:o.PREVIEW_NOT_AVAILABLE_DESC,DOWNLOAD:o.DOWNLOAD,PREV_PAGE_TITLE:s.PREV_PAGE_TITLE,NEXT_PAGE_TITLE:s.NEXT_PAGE_TITLE,viewId:r}),i?i.replaceWith(n):this.$el.append(n),this.$item=this.$el.children().eq(t),this.$rendition=$(this.$item.find(".parcel-asset-rendition")),this.$hud=$(this.$item.find("div.hover-preview-hud")),this.$prev=this.$hud.find(".hover-preview-img-prev"),this.$next=this.$hud.find(".hover-preview-img-next"),this.$prevBtn=this.$hud.find(".hover-preview-hud-prev"),this.$nextBtn=this.$hud.find(".hover-preview-hud-next"),this.$download=this.$item.find(".download-button"),this.$norendition=this.$item.find(".hover-preview-not-available-parcel"),this.$rendition.on("error",{},_.bind(function(){this.$norendition.show(),this.$rendition.hide(),$(this.$item.find(".parcel-asset-rendition-block")).css("opacity",1),$(this.$item.find(".hover-preview-page")).css("margin-top",this.$norendition.height()/2-this.$norendition.height())},this)),this.$rendition.on("load",{},_.bind(function(){$(this.$item.find(".hover-preview-page")).css("margin-top",this.$rendition.height()/2-this.$rendition.height()),$(this.$item.find(".parcel-asset-rendition-block")).css("opacity",1),this.$item.removeClass("spinner-icon")},this)),l=parseInt(this.model.get("page_count"),10),l>1?(this.$rendition.on("load",{},_.bind(function(){var e=$(this.$item.find(".hover-preview-page"));e.css("width",this.$rendition.width()).css("height",this.$rendition.height()).css("margin-top",this.$rendition.height()/2-this.$rendition.height())},this)),this.$prevBtn.on("click",{direction:"prev"},_.bind(this.turnPage,this)),this.$nextBtn.on("click",{direction:"next"},_.bind(this.turnPage,this))):this.$hud.addClass("hidden"),this.$download.on("click",{},_.bind(this.download,this)),this.$norendition.find(".preview-download").on("click",{},_.bind(this.download,this))),this.$item.data("id",r),this._checkForReportAbuseFlow(),this},_checkForReportAbuseFlow:function(){"True"===this.options.parcelModel.get("reportabuse")&&($(".parcel-asset-rendition").hide(),$(".hover-preview-not-available-parcel").show())},_onKeyPress:function(e){var i,t=$(e.target),s=e.charCode||e.keyCode,o=!1,n=this.$prevBtn,r=this.$nextBtn,l=!1;return(13===s||32===s)&&(l=t.is(n),(l||t.is(r))&&(i=l?r:n,t.trigger("click"),o=!0,t.is(":disabled")&&i.focus())),o}})}),define("viewer/views/multi-file-view",["core/ac-core","viewer/ac-viewer","i18n!acplugins/tracked-send/js/nls/ui-strings","viewer/views/parcel-asset-view","core/views/view"],function(e,i,t){i.MultiFileView=e.View.extend({events:{"click .parcel-asset-view":"_onClickView"},initialize:function(){e.View.prototype.initialize.call(this)},render:function(){return e.View.prototype.render.call(this),this._renderChildViews(),$(".parcel-rendition-list").addClass("plugin"===this.options.viewMode?"plugin":"viewer"),this},_renderChildViews:function(){var e,i=this.$el.children(),s=i.length,o=0,n=this.options.parcelAssetsCollection;n.each(function(t){var n=this._getChildItemView(t);e=s>o?i.eq(o):void 0,n.render(e,o),o+=1},this),"plugin"!==this.options.viewMode&&0===$(".report-abuse").length&&this.$el.append('<div role="button" tabindex="0" class="report-abuse"><span class="report-abuse-label">'+t.REPORT_ABUSE+"</span></div>")},_getChildItemView:function(e){var t,s=this.options,o=e.id,n=this.$el;return t=this.getChildViewById(o),t?(t.$el!==n&&t.setElement(n),_.extend(t.model.attributes,e.attributes)):(s=_.extend({},s,{el:n,model:e}),t=new i.ParcelAssetView(s),this.addChildView(t,o)),t},_getEventTargetItem:function(e){return $(e.target).closest(".parcel-asset-view")},_getEventTargetView:function(e){var i,t=this._getEventTargetItem(e);return t&&(i=this.getChildViewById(t.data("id"))),i},_onClickView:function(e){var i,t,s,o=this.options;s=this._getEventTargetView(e),t=s.model,i=t.id,this._triggerViewEvent("viewer:preview-file",_.extend({},o,{id:i,itemModel:t}))}})}),define("viewer/templates/viewer-page-rhp-view-template",[],function(){return'<div class="ts-rhp-respond-back-multi"></div><div role="button" tabindex="0" class="report-abuse">    <span class="report-abuse-label"><%= reportAbuse %></span></div> '}),define("acplugins/tracked-send/js/viewer-rhp/templates/respond-back-view-template.html",[],function(){return'<div class="ts-rhp-respond-back-container">       <div class="ts-rhp-sender-title ts-rhp-title"><%= senderHeading %></div>       <div class="ts-rhp-sender-name"><%= senderName %></div>       <input type="button" class="button-light-blue-small ts-rhp-reply-button"           value="<%= replyBtn %>"/>       <div class="ts-rhp-message-title ts-rhp-title"><%- messageHeading %></div>       <div class="ts-rhp-email-subject ts-rhp-body-single" title="<%- emailSubject %>"><%- emailSubject %></div>       <div class="ts-rhp-email-message ts-rhp-body-multi"><%- emailMessage %></div>       <div class="ts-rhp-date-title ts-rhp-title"><%= dateTitle %></div>       <div class="ts-rhp-date-sent ts-rhp-body-single"><%= sentDate %></div>   </div>'}),define("acplugins/tracked-send/js/viewer-rhp/views/respond-back-view",["core/ac-core","acplugins/tracked-send/js/viewer-rhp/templates/respond-back-view-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/date-util","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,i,t,s,o){return e.View.extend({events:{"click .ts-rhp-reply-button":"_onReplyClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i)},render:function(){var i=this.options.parcelModel,s=i.get("email_message"),o=i.get("sender_email"),n=i.get("sender_name"),r=i.get("email_subject");e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({messageHeading:t.SHARE_SUBJECT_MSG_HEADING,emailSubject:r,emailMessage:s,senderEmail:o,senderHeading:t.SENDER_NAME,senderName:n,replyBtn:t.REPLY,dateTitle:t.SENT_DATE,sentDate:this._formatDateSend()})),this._initWrappers()),s||o||n?(this.$respondBackContainer.parent().show(),o?this.$replyButton.show():this.$replyButton.hide(),r?this.$emailSubject.show():this.$emailSubject.hide(),s?this.$emailMessage.show():this.$emailMessage.hide(),r||s?this.$messageTitle.show():this.$messageTitle.hide()):this.$respondBackContainer.parent().hide()},_onReplyClick:function(){var e,i,s="mailto:",n=this.options.parcelModel;i=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?[o.RECVIEW,o.MULTI,o.PREVIEW,o.REPLY]:[o.RECVIEW,o.SINGLE,o.REPLY],this.options.appApi.siteCatalystApi.logScEvent(i),s+=n.get("sender_email"),e=_.template(t.EMAIL_REPLY_FORMAT,{emailSubject:encodeURIComponent(n.get("email_subject"))}),s+="?subject="+e,document.location.href=s},_initWrappers:function(){this.$respondBackContainer=this.$(".ts-rhp-respond-back-container"),this.$replyButton=this.$(".ts-rhp-reply-button"),this.$emailSubject=this.$(".ts-rhp-email-subject"),this.$emailMessage=this.$(".ts-rhp-email-message"),this.$messageTitle=this.$(".ts-rhp-message-title")},_formatDateSend:function(){var e,i=this.options.parcelModel;return e=i.get("date_sent"),i?s.formatDate(e||""):""}})}),define("viewer/views/viewer-page-rhp-view",["core/ac-core","viewer/ac-viewer","viewer/templates/viewer-page-rhp-view-template","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/viewer-rhp/views/respond-back-view","core/views/view"],function(e,i,t,s,o){i.ViewerPageRHPView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._addModelEventListeners()},render:function(){var i=this.options.parcelModel;e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({reportAbuse:s.REPORT_ABUSE,sentBy:s.SENDER_NAME,senderName:i.get("sender_name")})),this._initWrappers()),this._renderChildViews()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$respondBack=$(".ts-rhp-respond-back")},_renderChildViews:function(){this._renderRespondBackView()},_renderRespondBackView:function(){this.$respondBack=$(".ts-rhp-respond-back-multi"),this._renderChildView("_respondBackView",o,this.$respondBack)}})}),define("viewer/views/viewer-page-view",["core/ac-core","files/ac-files","app/ac-app","viewer/ac-viewer","acplugins/tracked-send/js/tool/ac-tracked-send","core/utils/css-util","viewer/templates/viewer-page-template.html","i18n!files/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","viewer/views/page-header-view","viewer/views/full-preview-tracked-send-view","viewer/views/multi-file-view","viewer/views/viewer-page-rhp-view","app/views/modal-mask-view"],function(e,i,t,s,o,n,r,l,a,c){s.ViewerPageView=e.View.extend({events:{"click .ts-viewer-download-button":"_onDownloadClick","click .report-abuse":"_onReportAbuseClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(r),this._addUiModelEventListeners(),this._addModelEventListeners(),this._addAppApiCallbacks(),this._addKeyEventListener(),this.on("viewer:preview-file",this._onClickPreview,this)},render:function(){var i=this.$el,t=this.options.parcelModel,s=t.get("email_message"),o=t.get("sender_email"),n=t.get("sender_name");return e.View.prototype.render.call(this),(s||o||n)&&i.addClass("respondBack"),0===this.$el.children().length&&(this.$el.html(this._template({parcelSubject:this._getParcelSubject(),downloadAll:a.DOWNLOAD_ALL,forwardLabel:a.FORWARD,notifyMeWhenViewed:a.NOTIFY_ME_WHEN_VIEWED,viewedBy:a.VIEWED_BY,viewFullActivity:a.VIEW_FULL_ACTIVITY,unshare:a.UNSHARE,reportAbuse:a.REPORT_ABUSE,back:l.BACK})),1===this.options.parcelAssetsCollection.models.length&&"plugin"!==this.options.viewMode&&(this.$(".thumbnails").css("visibility","hidden"),this.$(".parcel-container").css("background-color","#f5f5f5")),this._initWrappers(),this._updateButtonStatus(),this._checkForReportAbuseFlow(),this._renderBrandingLogo()),this._renderChildViews(),this._updateName(),this},stopListening:function(i,t,s){e.View.prototype.stopListening.call(this,i,t,s)},teardown:function(){this._removeModelEventListeners()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){0!==this.$el.children().length&&this._updateButtonStatus()},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$header=this.$(".page-header"),this.$error=this.$(".page-error"),this.$pageBody=this.$(".page-body.thumbnails"),this.$fullPreview=this.$(".page-body.full-preview"),this.$thumbnails=this.$(".parcel-rendition-list"),this.$rightPanel=this.$(".parcel-rendition-list-rhp"),this.$viewedByList=this.$(".parcel-viewed-by-list"),this.$viewedByHead=this.$(".parcel-viewed-by-heading"),this.$notifyChbox=this.$(".parcel-notify-checkbox"),this.$notifyLable=this.$(".parcel-notify-checkbox-label"),this.$modalMask=$("#modal-mask"),this.$parcelBody=this.$(".page-body-container"),this.$parcelBodyHeader=this.$(".parcel-body-header"),this.$brandingLogo=this.$(".branding-logo"),this.$wrapBrandingLogo=this.$(".wrap-branding-logo"),this.$fullPreviewName=this.$(".full-preview-name"),this.$parcelActionBtns=this.$(".parcel-action-buttons"),this.$homeBtnWrapper=this.$(".full-preview-home-btn-wrapper"),this.$homeBtnWrapper.length||(this.$homeBtnWrapper=this.$(".full-preview-home-btn"))},_renderBrandingLogo:function(){var e,i=this.options.parcelModel.get("invitation"),t=new Image;1===this.options.parcelAssetsCollection.models.length||this.options.viewMode&&"plugin"===this.options.viewMode||this.options.parcelModel.get("enabled")!==!0||(this.$parcelBody.addClass("branded"),e=this.options.parcelModel.get("color"),$(t).load($.proxy(this.render,this)),t.src=this.options.itemModel.rootUrl+"a/invitation/"+i+"/asset/branding",this.$brandingLogo.append(t))},_renderChildViews:function(){return e.Features.isFeatureEnabled("ts_enable_eol_ie8and9")&&util.isIE9orBelow()?(this.$parcelBody.hide(),void this._renderUnsupportedBrowserView()):(this.$error.hide(),(this.options.parcelAssetsCollection.models.length>1||"plugin"===this.options.viewMode)&&this._renderPageHeaderView(),this._renderFullPreviewView(),this._renderModalMaskView(),(this.options.parcelAssetsCollection.models.length>1||"plugin"===this.options.viewMode)&&this._renderMultiFileView(),void this._renderRightHandPanel())},_renderUnsupportedBrowserView:function(){this.$error.show(),this._renderChildView("_unsupportedBrowserView",s.UnsupportedBrowserView,this.$error)},_renderPageHeaderView:function(){this._renderChildView("_pageHeaderView",s.PageHeaderView,this.$header)},_renderFullPreviewView:function(){this._renderChildView("_fullPreviewView",s.FullPreviewTrackedSendView,this.$fullPreview)},_renderModalMaskView:function(){var e=this.options.dialogsUiModel.getDialogCount();0===e&&this._renderChildView("_modalMaskView",s.ModalMaskView,this.$modalMask)._updateModal()},_renderMultiFileView:function(){this._renderChildView("_multiFileView",s.MultiFileView,this.$thumbnails)},_renderRightHandPanel:function(){this._renderChildView("_previewRHP",s.ViewerPageRHPView,this.$rightPanel)},_updateButtonStatus:function(){var e=this.options,i=this.$notifyChbox,t=this.$notifyLable,s=e.parcelModel.get("invitations"),o=s&&1===s.length&&"PARCEL_PUBLIC_SHARING"===s[0].recipient_email,r=!o&&e.parcelModel.get("delivery_receipts");r?(n.addClass(i,"selected"),i.prop("checked",!0)):(n.removeClass(i,"selected"),i.prop("checked",!1)),o?(n.addClass(i,"disabled"),n.addClass(t,"disabled"),i.prop("disabled",!0)):(n.removeClass(i,"disabled"),n.removeClass(t,"disabled"),i.prop("disabled",!1))},_addUiModelEventListeners:function(){var e=this.options,i=e.windowUiModel||e.appApi.windowApi.options.windowUiModel;i&&i.on("change:width",this._onWindowResize).on("change:height",this._onWindowResize)},_addAppApiCallbacks:function(){this.options.appApi.previewApi.addItemModelChangeCallback(this._onFullPreviewModelChange)},_onFullPreviewModelChange:function(e){this._toggleOverlay(e?!0:!1)},_toggleOverlay:function(e){var i=this.$pageBody,t="hidden";i&&i.length&&(e?i.addClass(t).attr("aria-hidden",!0):(i.removeClass(t).removeAttr("aria-hidden"),this.render()))},_onWindowResize:function(){if(!this._onDebouncedWindowResize){var e=this.options,i=e.windowUiModel||e.appApi.windowApi.options.windowUiModel;this._onDebouncedWindowResize=_.debounce(this.render,i.get("resize_debounce_delay"))}this._onDebouncedWindowResize()},_onDownloadClick:function(){var i={parentView:this,id:"all"};this.options.appApi.siteCatalystApi.logScEvent([c.RECVIEW,c.MULTI,c.DOWNLOAD_ALL]),this._triggerViewEvent(e.ViewEvents.DOWNLOAD,i)},_onClickPreview:function(t){var s,o,n,r=i.opFactory,l=t.fullPreviewUiModel,a={item_model:t.itemModel};o=t.itemModel.get("page_count"),n=l.get("scroll_pages_limit"),n||(n=1e3);try{e.Features.isFeatureEnabled("enable_ngsend")&&(a.enable_ngdoc=!0,a.view_type="ngdoc")}catch(c){LOG("enable_ngsend is not a feature flipper")}return a.view_format=o>n?"fit_page_width":"scroll_pages",l.set(a),this.options.appApi.siteCatalystApi.logScEvent(["RecView","Multi","Preview","Shown"]),s=r.create("OpeningFullPreviewOp",t),s.run()},_checkForReportAbuseFlow:function(){var e=this.options;"True"===e.parcelModel.get("reportabuse")&&_.defer(function(){$(".report-abuse").trigger("click")}),"plugin"===e.viewMode&&$(".report-abuse").hide()},_onReportAbuseClick:function(){var i,t={parentView:this};return this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?(i=[c.RECVIEW,c.MULTI,c.PREVIEW,c.REPORT_ABUSE],t.parcelId=this.options.parcelAssetsCollection.id):(i=[c.RECVIEW,c.SINGLE,c.REPORT_ABUSE],t.id=this.options.itemModel.id),this.options.appApi.siteCatalystApi.logScEvent(i),this._triggerViewEvent(e.ViewEvents.SHOW_REPORT_ABUSE_DLG,t),!1},_getParcelSubject:function(){return _.escape(this.options.parcelModel.get("email_subject"))},_getNameWidth:function(){var e=n.getFullWidth(this.$parcelBodyHeader)-n.getFullWidth(this.$wrapBrandingLogo)-n.getExtraWidth(this.$fullPreviewName)-n.getFullWidth(this.$homeBtnWrapper)-n.getFullWidth(this.$parcelActionBtns);return e},_updateName:function(){var e=this.$fullPreviewName;e&&e.length&&(this.$fullPreviewName.text(this._getParcelSubject()),this._truncateName())},_truncateName:function(){function i(){return truncate.getTextSize(s).width-t}var t=this._getNameWidth(),s=this.$fullPreviewName;"ja-jp"===e.Locale.getLocale()&&(t*=.85,t=Math.floor(t)),!isNaN(t)&&t>0&&truncate.truncateToFit(s,i)},_onKeyPress:function(e){var i=$(e.target),t=e.charCode||e.keyCode,s=!1;return 13!==t&&32!==t||!i.is("[role='button']:not([aria-disabled='true']):not(:disabled)")||(i.trigger("click"),s=!0),s}})}),define("acplugins/reviews/js/templates/parcel-preview-rhp-template",[],function(){return'    <div class="parcel-topic-message-heading" role="heading" level="2"><%= emailHeading %></div>   <div class="parcel-message"><%- emailMessage %></div>   <div role="grid">       <div role="row">           <div class="parcel-viewed-by-heading" role="columnheader">               <%= viewedBy %>           </div>           <div class="hidden-accessible" role="columnheader">               <%= views %>           </div>       </div>       <div role="presentation" class="parcel-viewed-by-list">       </div>   </div>   <div role="button" tabindex="0" class="parcel-activity-btn">       <span class="parcel-activity-btn-label"><%= viewFullActivity %></span>   </div>   <div class="parcel-notify">       <input type="checkbox" class="parcel-notify-checkbox core-checkbox"              id="parcel-notify-checkbox" />       <span class="parcel-notify-checkbox-checkmark" aria-hidden="true"></span>       <div class="parcel-notify-checkbox-label">           <label for="parcel-notify-checkbox"><%= notifyMeWhenViewed %></label>       </div>   </div> '}),define("acplugins/reviews/js/templates/viewer-page-recipient-template.html",[],function(){return'<div role="row" class="parcel-viewed-by-item">        <div role="gridcell" class="parcel-viewed-by-email">            <%= email %>            <% if (typeof(url) != "undefined") { %><a href="<%= url %>" target="_blank"><% } %>            <% if (typeof(url) != "undefined") { %><%= openLink %><% } %>            <% if (typeof(url) != "undefined") { %></a><% } %>        </div>        <div role="gridcell" class="parcel-viewed-by-count"><%= count %></div>    </div>'}),define("acplugins/reviews/js/views/parcel-preview-rhp-view",["core/ac-core","app/ac-app","files/ac-files","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/parcel-preview-rhp-template","acplugins/reviews/js/templates/viewer-page-recipient-template.html","i18n!acplugins/reviews/js/nls/ui-strings","core/utils/css-util","core/utils/view-util","acplugins/reviews/js/utils/sc-constants"],function(e,i,t,s,o,n,r,l,a,c){s.ParcelPreviewRHPView=e.View.extend({events:{"click .parcel-notify-checkbox":"_onDeliveryReceiptsClick","click .parcel-notify-checkbox-label":"_onDeliveryReceiptsClick","click .parcel-activity-btn":"_onActivityBtnClick","keydown .parcel-activity-btn":"_onActivityBtnClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(o),this._recipientTemplate=_.template(n),this._addModelEventListeners()},render:function(){var i=this.options.parcelModel;e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({notifyMeWhenViewed:r.NOTIFY_ME_WHEN_VIEWED,viewedBy:r.VIEWED_BY,viewFullActivity:r.VIEW_FULL_ACTIVITY,publicLink:r.PARCEL_PUBLIC_SHARING,openLink:r.OPEN_LINK,emailHeading:r.MESSAGE_HEADING,emailTopic:i.get("email_subject"),emailMessage:i.get("email_message"),views:r.VIEWS})),this._initWrappers(),this._renderRightPanelItems()),this._updateButtonStatus()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){this._updateButtonStatus()},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$viewedByList=this.$(".parcel-viewed-by-list"),this.$viewedByHead=this.$(".parcel-viewed-by-heading"),this.$notifyChbox=this.$(".parcel-notify-checkbox"),this.$notifyLable=this.$(".parcel-notify-checkbox-label"),this.$parcelTopicMessageHeading=this.$(".parcel-topic-message-heading"),this.$parcelMessage=this.$(".parcel-message")},_renderRightPanelItems:function(){var e,i,t,s,o=this.options.parcelModel,n=o.get("invitations"),l=[],a=!1;n=_.sortBy(n,function(e){return e.recipient_email}),_.each(n,function(o){e=o.event_counts.parcel_view||0,"PARCEL_PUBLIC_SHARING"===o.recipient_email?(s=o.preview_url,t=this._recipientTemplate({email:r.PARCEL_PUBLIC_SHARING,openLink:r.OPEN_LINK,count:e,url:s})):(a=!0,i=this._recipientTemplate({email:_.escape(o.recipient_email),count:e}),l.push(i))},this),t&&l.push(t),this.$viewedByList.append(l),a||(this.$parcelTopicMessageHeading.hide(),this.$parcelMessage.hide())},_updateButtonStatus:function(){var e=this.options,i=this.$notifyChbox,t=this.$notifyLable,s=e.parcelModel.get("invitations"),o=s&&1===s.length&&"PARCEL_PUBLIC_SHARING"===s[0].recipient_email,n=!o&&e.parcelModel.get("delivery_receipts");n?(l.addClass(i,"selected"),i.prop("checked",!0)):(l.removeClass(i,"selected"),i.prop("checked",!1)),a.enableInput(i,!o),o?l.addClass(t,"disabled"):l.removeClass(t,"disabled")},_onActivityBtnClick:function(e){var i,t,o,n=this.options;return"keydown"===e.type&&13!==e.which&&32!==e.which?!0:(t=_.extend(this.options,{parentView:this}),delete t.el,i=new s.ParcelActivityDlg(t),i.open(),o=n.parcelAssetsCollection&&n.parcelAssetsCollection.length>1?c.MULTI:c.SINGLE,void n.appApi.siteCatalystApi.logScEvent([c.PREVIEW,c.SHARED,o,c.VIEW_FULL_ACTIVITY]))},_onDeliveryReceiptsClick:function(){var e,i,t=this.options,o=t.parcelModel.get("invitations"),n=1===o.length&&"PARCEL_PUBLIC_SHARING"===o[0].recipient_email,r=!t.parcelModel.get("delivery_receipts");if(!n)return this._setCheckboxSelectionStatus(r),e=t.parcelAssetsCollection&&t.parcelAssetsCollection.length>1?c.MULTI:c.SINGLE,t.appApi.siteCatalystApi.logScEvent([c.PREVIEW,c.SHARED,e,c.NOTIFY_WHEN_VIEWED,r?c.CHECKED:c.UNCHECKED]),i=s.opFactory.create("SettingDeliveryReceiptsOp",{parcelModel:this.options.parcelModel,deliveryReceipts:r}),i.run().fail(_.bind(function(){this._setCheckboxSelectionStatus(!r)},this))},_setCheckboxSelectionStatus:function(e){var i=this.$(".parcel-notify-checkbox");e?(l.addClass(i,"selected"),i.prop("checked",!0)):(l.removeClass(i,"selected"),i.prop("checked",!1))}})}),define("acplugins/reviews/js/views/parcel-preview-view",["core/ac-core","app/ac-app","files/ac-files","acplugins/reviews/js/ac-review","viewer/ac-viewer","core/utils/view-util","acplugins/reviews/js/utils/sc-constants","acplugins/reviews/js/ops/manipulation/unshare-one-parcel-op","acplugins/reviews/js/ops/manipulation/unshare-one-if-confirmed-op","acplugins/reviews/js/views/parcel-activity-dlg","viewer/views/viewer-page-view","viewer/collections/parcel-asset-collection","core/models/ui/error-ui-model","core/models/ui/full-preview-ui-model","core/models/ui/plugins-ui-model","app/models/ui/modal-mask-ui-model","acplugins/reviews/js/views/parcel-preview-rhp-view"],function(e,i,t,s,o,n,r){s.ParcelPreviewView=o.ViewerPageView.extend({events:{"click .parcel-preview-home-btn":"_onHomeBtnClick","click .tracked-send-forward-btn":"_onForwardClick","click .tracked-send-unshare-btn":"_onUnshareClick","click .parcel-viewed-by-email":"_onPublicLinkClick"},initialize:function(){this.options.viewMode="plugin",this.options.errorUiModel=e.uiModelFactory.create("ErrorUiModel"),this.options.fullPreviewUiModel=e.uiModelFactory.create("FullPreviewUiModel"),this.options.fullPreviewPluginsUiModel=e.uiModelFactory.create("PluginsUiModel"),this.options.fullPreviewOverlaysUiModel=e.uiModelFactory.create("PluginsUiModel"),this.options.modalMaskUiModel=i.uiModelFactory.create("ModalMaskUiModel"),this.options.fullPreviewUiModel.set({standalone:!1,read_only:!1}),o.ViewerPageView.prototype.initialize.call(this),this.on(t.ViewEvents.FULL_PREVIEW_CLOSE,this._onFullPreviewClose,this)},render:function(){var e=this.options.parcelModel.id,i=s.PLUGIN_ID+"/"+e;o.ViewerPageView.prototype.render.call(this),this.options.appApi.routerApi.navigate(i)},_renderChildViews:function(){this._renderPageHeaderView(),this._renderFullPreviewView(),this._renderModalMaskView(),this._renderMultiFileView(),this._renderRightHandPanel()},_renderRightHandPanel:function(){this._renderChildView("_previewRHP",s.ParcelPreviewRHPView,this.$rightPanel)},_onFullPreviewClose:function(){t.opFactory.create("ClosingFullPreviewOp",this.options).run()},closeWithoutResolving:function(){this.applyMethodRecursively("undelegateEvents"),this.applyMethodRecursively("stopListening"),this._triggerViewEvent("ParcelPreview_Close")},_initWrappers:function(){o.ViewerPageView.prototype._initWrappers.call(this),this.$unshareButton=this.$(".tracked-send-unshare-btn")},_updateButtonStatus:function(){o.ViewerPageView.prototype._updateButtonStatus.call(this),n.enableInput(this.$unshareButton,this.options.parcelModel.get("is_active"))},_onClickPreview:function(e){var i=e.itemModel;this.options.appApi.routerApi.navigate("/file/"+i.id,{trigger:!0}),this.closeWithoutResolving()},_onHomeBtnClick:function(e){e.preventDefault(),this.closeWithoutResolving(),this.options.appApi.routerApi.navigate(s.PLUGIN_ID)},_onForwardClick:function(){var e,i=this.options,t="/send/parcel/"+i.parcelModel.id;i.appApi.routerApi.navigate(t,{trigger:!0}),this.closeWithoutResolving(),e=i.parcelAssetsCollection&&i.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,i.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,e,r.PREVIEW,r.RHP,r.SHARE_FILE_BUTTON])},_onPublicLinkClick:function(){var e;
e=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,e,r.PUBLIC_LINK])},_onUnshareClick:function(){var e,i,t;this.$unshareButton.hasClass("disabled")||(t=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,t,r.UNSHARE]),i=_.extend(this.options,{itemModel:this.options.parcelModel}),e=new s.UnshareOneIfConfirmedOp(i),e.run())}})}),define("acplugins/reviews/js/ops/getting/getting-assets-op",["core/ac-core","acplugins/reviews/js/ac-review","core/ops/op","viewer/collections/parcel-asset-collection"],function(e,i){i.GettingAssetsOp=e.Op.extend({run:function(){var e=this.options.parcelAssetsCollection;return e.fetch()}})}),define("acplugins/reviews/js/views/parcels-list-view",["core/ac-core","acplugins/reviews/js/ac-review","viewer/ac-viewer","core/utils/view-util","core/utils/css-util","acplugins/reviews/js/utils/sc-constants","acplugins/reviews/js/utils/ts-utils","core/utils/sc-analytics","acplugins/reviews/js/models/ui/parcels-list-item-ui-model","acplugins/reviews/js/views/parcels-list-item-view","acplugins/reviews/js/views/parcel-preview-view","acplugins/reviews/js/ops/getting/getting-assets-op"],function(e,i,t,s,o,n,r,l){i.ParcelsListView=e.View.extend({events:{"click .review-list-item":"_onItemClick","dblclick .review-list-item":"_onItemDblClick","click .review-list-item-info-container":"_onItemCollectionClick","keyClick .review-list-item":"_onItemKeyClick"},initialize:function(){e.View.prototype.initialize.call(this),this.listenTo(this.options.collectionsUiModel,"change:checkbox",_.bind(function(){this.render()},this)).listenTo(this.options.collectionsUiModel,"scrollSelectedItemIntoViewEvent",this._scrollSelectedItemIntoView).listenTo(this.options.collectionsUiModel,"change:view",this._scrollSelectedItemIntoView),this._addKeyEventListener(),this._addFocusEventListener(),this.bIsSingleClickEventWaiting=!1},render:function(){if(e.View.prototype.render.call(this),this.options.selectionUiModel&&this.options.selectionUiModel.getSingleSelectedItemModel()){var i=this.options.selectionUiModel.getSingleSelectedItemModel().id,t=this.options.parcelCollection.get(i);t&&this.options.selectionUiModel.updateSelectedItemModel(t,!0)}return this._renderChildViews(),e.Util.isCEF()||this._updateForVerticalScrollBar(),this},_updateForVerticalScrollBar:function(){setTimeout(_.bind(function(){this.$el.length&&this.options.collectionUiModel.set("has_vertical_scrollbar",s.isVerticalScrollBarPresent(this.$el))},this),50)},_getEventTargetItem:function(e,i){return $(e.target).closest(i)},_getEventTargetView:function(e,i){var t,s;return i||(i=".review-list-item"),s=this._getEventTargetItem(e,i),s&&(t=this.getChildViewById(s.data("id"))),t},_getEventTargetId:function(e,i){var t,s=this._getEventTargetItem(e,i);return s&&(t=s.data("id")),t},_getViewEventOptions:function(e){return{collectionItemsView:this,itemView:this._getEventTargetView(e)}},_addKeyEventListener:function(){this.options.appApi.keyApi.pushKeyHandler(this)},_removeKeyEventListener:function(){this.options.appApi.keyApi.popKeyHandler(this)},_selectType:function(i){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,{collectionItemsView:this,selectType:i})},_onItemCheckboxClick:function(i){var t,s,o=this._getViewEventOptions(i),n=$(i.target);i.stopPropagation(),t=i.shiftKey?e.SelectionUiModel.SELECT_EXTEND:e.SelectionUiModel.SELECT_TOGGLE,_.extend(o,{selectType:t}),s=n.hasClass("selected"),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,o),this._logScSelectionEvent(n,s)},showParcelPreview:function(e){var s,o,l,a,c,d,h=this.options,p=h.appApi;s=p.displayApi.showFullOverlay(!0),a=this.options.appApi.baseFilesUrisApi.getSendApiUri(),a=r.extractRootUrl(a),h.parcelAssetsCollection=new t.ParcelAssetCollection([],{rootUrl:a,parcel_id:e.id,parcelModel:e}),this._parcelPreview&&this._parcelPreview.off(),o=_.extend({},h,{el:s,parcelModel:e}),l=new i.ParcelPreviewView(o),this._parcelPreview=l,l.on("ParcelPreview_Close",this._onParcelPreviewClose,this),d=i.opFactory.create("GettingAssetsOp",h),d.run().then(_.bind(function(){c=h.parcelAssetsCollection&&h.parcelAssetsCollection.length>1?n.MULTI:n.SINGLE,p.siteCatalystApi.logScEvent([n.PREVIEW,n.SHARED,c,n.SHOWN]),this.render()},l))},_handleModifiedClick:function(i){var t,s;s=i.shiftKey?e.SelectionUiModel.SELECT_EXTEND:i.ctrlKey||i.metaKey?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT,t=this._getViewEventOptions(i),_.extend(t,{selectType:s}),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,t)},_onItemClick:function(e){this.bIsSingleClickEventWaiting=!0,setTimeout(_.bind(function(){if(1==this.bIsSingleClickEventWaiting){var i=this._getEventTargetItem(e,".parcel-list-item");this.bIsSingleClickEventWaiting=!1,this._selectItemRow(e),this._consumeEvent(e),this._scrollItemIntoView(i)}},this),500)},_onItemKeyClick:function(e){this._delayedKeyClickTimer&&clearTimeout(this._delayedKeyClickTimer),this._delayedKeyClickTimer=_.defer(_.bind(function(){var i=this._getEventTargetItem(e,".parcel-list-item");this._selectItemRow(e),this._consumeEvent(e),this._scrollItemIntoView(i)},this),e)},_onItemDblClick:function(e){this.bIsSingleClickEventWaiting=!1,this.$(".shared-workflow-list-item.selected").removeClass("selected"),this._doOpenFile(e),this.$(".shared-workflow-list-item.selected").find(".shared-list-item-row").focus(),this._consumeEvent(e)},_doOpenFile:function(e){var i;if(i=this._getEventTargetView(e)){var t=i.model;t&&this._openReviewDocument(t)}},_openReviewDocument:function(e){var i={};if(void 0!=e.attributes&&(i.reviewUrl=e.attributes.id,void 0!=e.attributes.resources&&1==e.attributes.resources.length)){var t=e.attributes.resources[0].id;i.invitationId=t,i.closeExistingDoc=!1,this.options.appApi.rnaApi.done(function(e){e.assetApi({methodName:"openEurekaFile",methodArgs:i})})}this.options.appApi.siteCatalystApi.logVirgoFileOpenEvent(l.VIRGO_REVIEW)},_deselectAll:function(i){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend(i,{selectType:e.SelectionUiModel.SELECT_NONE}))},_selectItemRow:function(i){var t,s=this._getEventTargetItem(i,".review-list-item"),o=s.hasClass("selected");t=o?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT;var n=this._getViewEventOptions(i);_.extend(n,{selectType:t}),this._consumeEvent(i),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n)},_selectItemRowForFocusIn:function(i){var t,s=this._getEventTargetItem(i,".review-list-item"),o=s.hasClass("selected");if(o)this._consumeEvent(i);else{t=e.SelectionUiModel.SELECT_SELECT;var n=this._getViewEventOptions(i);_.extend(n,{selectType:t}),this._consumeEvent(i),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n)}},_onParcelPreviewClose:function(){_.defer(_.bind(function(){var e=this._parcelPreview;e.off(),this.options.appApi.displayApi.showFullOverlay(!1),delete this._parcelPreview},this))},_renderChildViews:function(){var e=this.collection.length;this._renderInProgress||(this._renderInProgress=!0,this._asyncBeginRenderingListItems().then(_.bind(this._asyncRenderListItems,this,0,e,10)).then(_.bind(this._asyncEndRenderingListItems,this)).then(_.bind(function(){this._renderInProgress=!1,this.collection.length>0&&$("#parcels-no-parcels-prompt-review").hide()},this)))},_beginRenderingListItems:function(){var e=this.getChildViews();_.each(e,function(e){e.options.remove=!0})},_asyncBeginRenderingListItems:function(){var e=$.Deferred();return _.defer(_.bind(function(){this._beginRenderingListItems(),e.resolve()},this)),e.promise()},_endRenderingListItems:function(){var e,i,t,s=this.getChildViews(),o=this.$el.children();for(i=s.length-1;i>=0;i-=1)e=s[i],e.options.remove?(e.$item.hasClass("selected")&&this._clearSelection(this.options),this.removeChildView(e)):(e._adjustLayout(),e._loadThumbnail());for(o=this.$el.children(),t=this.collection.length-1,i=o.length-1;i>t;i-=1)o.eq(i).remove();this._setTabbableItem()},_asyncEndRenderingListItems:function(){var e=$.Deferred();return _.defer(_.bind(function(){this._endRenderingListItems(),e.resolve()},this)),this.options.rootView.bringSelectedItemInView&&this._scrollSelectedItemIntoView(),e.promise()},_renderSomeListItems:function(e,i){var t,s,o=this.$el.children(),n=o.length,r=e;this.collection.each(function(l,a){a>=e&&i>a&&(t=this._getChildItemView(l),s=n>r?o.eq(r):void 0,t.render(s,r),delete t.options.remove,r+=1)},this)},_asyncRenderSomeListItems:function(e,i){var t,s=$.Deferred();return t=_.bind(function(e,i){this._renderSomeListItems(e,i),s.resolve()},this,e,i),t(),s.promise()},_asyncRenderListItems:function(e,i,t){return i>e?this._asyncRenderSomeListItems(e,e+t).then(_.bind(this._asyncRenderListItems,this,e+t,i,t)):this._getResolvedPromise()},_getChildItemView:function(e){var t,s,o=this.options,n=e.getId(),r=this.$el;return t=this.getChildViewById(n),t?(t.$el!==r&&t.setElement(r),_.extend(t.model.attributes,e.attributes),t.options.checkbox=o.collectionsUiModel.get("checkbox")):(s=new i.ParcelsListItemUiModel,o=_.extend({},o,{el:r,checkbox:o.collectionsUiModel.get("checkbox"),model:e,itemUiModel:s}),t=new i.ParcelsListItemView(o),this.addChildView(t,n)),t},_getContainingItem:function(e){return e.closest(".review-list-item")},_getContainingRowOrRowGroup:function(e){return e.closest(".review-list-item-row")},_isItemSelected:function(e){return this._getContainingItem(e).hasClass("selected")},_logScSelectionEvent:function(e,i){var t;t=this._isItemSelected(e),t!==i&&this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.FILE_NAME,t?n.CHECKED:n.UNCHECKED])},_getChildViewHeight:function(){var e=this.$el.children();return e.length>0?o.getFullHeight(e.eq(0)):void 0},_getChildViewWidth:function(){var e=this.$el.children();return e.length>0?o.getFullWidth(e.eq(0)):void 0},_isListView:function(){return this.options.collectionsUiModel.isListView()},_isThumbnailView:function(){return this.options.collectionsUiModel.isThumbnailView()},_scrollSelectedItemIntoView:function(){for(var e=this.$el.children(),i=0;i<e.length;i++)if(e.eq(i).hasClass("selected"))return this._scrollItemIntoView(e.eq(i)),void(this.options.rootView.bringSelectedItemInView=!1)},_scrollItemIntoView:function(e){function i(e){t.stop(!0,!0),t.animate({scrollTop:e},a.get("scroll_duration"))}var t,s,o,n,r,l,a=this.options.collectionsUiModel;e.length&&(t=this.$el,s=e.position().top,o=e.height(),n=t.height(),this._isMouseWheel||(0>s||s+o>n)&&(r=t.scrollTop(),l=s-(n-o)/2,i(Math.max(r+l,0))))},_onFocusIn:function(e){var i,t,s,o=$(e.target);return i=this.$(".review-list-item-row"),t=this._getContainingRowOrRowGroup(o),s=i.index(t),this._lastActiveRowIndex===s&&this._consumeEvent(e),0===t.length?!0:(i.attr("tabindex",-1),t.hasClass("focused")||(t.addClass("focused").attr("tabindex",0),o.attr("tabindex",0)),this._lastActiveRowIndex!=i.index(t)&&(this._lastActiveRowIndex=i.index(t)),this._consumeEvent(e),this.$el.scrollLeft(0),!0)},_onFocusOut:function(e){var i,t=$(e.target);return i=this._getContainingRowOrRowGroup(t),i.removeClass("focused").find("[role=checkbox]:tabbable, button:tabbable, a[href]:tabbable, [role=link]:tabbable").attr("tabindex",-1),!0},_setTabbableItem:function(){var e=this.$(".review-list-item-row:focusable"),i=this.$(":tabbable");0===i.length&&e.attr("tabindex","0")},_getNextFocusableIndexForThumbnailView:function(e,i,t,s){var o=i,n=e.width()/$(".shared-thumb-view .review-list-item").outerWidth(!0)|0,r=Math.ceil(t/n),l=i/n|0,a=i%n;switch(s){case 39:i!=t-1&&(o=i+1);break;case 37:0!=i&&(o=i-1);break;case 38:0!=l&&(o=n*(l-1)+a);break;case 40:l!=r-1&&(o=n*(l+1)+a)}return o>t-1&&(o=i),o},_onKeyDown:function(i){function t(e){l.stop(!0,!0),l.animate({scrollTop:e},f.get("scroll_duration"))}var o,n,r=$(i.target),l=this.$el,a=l[0],c=this.options,d=c.appApi.selectionApi,h=i.which,p=l.height(),u=l.width(),_=l?l.scrollTop():0,v=this._getChildViewHeight(),w=this._getChildViewWidth(),g=0,E=0===v?0:Math.floor(p/v),m=0===w?0:Math.floor(u/w),S=!1,f=this.options.collectionsUiModel,A=this.options.selectionUiModel,I=this.$(".review-list-item-row"),C=this._getContainingRowOrRowGroup(r),T=C.find(".review-list-item-checkbox"),R=I.first(),b=I.last(),N=l.find(":tabbable").first(),O=r.is(C),L=!C.is(r),y=r.is("a[href], [role=link]"),M=I.index(C),V=($.Event("click"),$.Event("dblclick")),P=$.Event("keyClick"),D=s.descendantHasFocus(".parcels-content"),U=s.descendantHasFocus(l),F=!U&&D,k=!1,B=C.hasClass("expanded"),H=C.find(".review-list-item-files"),x=this._isListView(),W=this._isThumbnailView(),G=!1,j=r.is("body")&&k?!0:!1;if(v&&(x?g=E:W&&(g=E*m)),s.isElementHidden(l))return S;if(r.is(":focusable")&&!D)return S;switch(c=this._getViewEventOptions(i),P.shiftKey=i.shiftKey,h){case 9:if(0===A.getNumSelectedItems()&&O);else if(this._setTabbableItem(),F){var Y=$(".review-list-header-info-container").find(":tabbable"),K=Y.index(r);K==Y.length-1&&(n=0===A.getNumSelectedItems()?R:N?N:R,G=!0)}else j&&(n=N?N:R);break;case 32:U&&(y?(r.trigger(V),S=!0,(i.shiftKey?C:T).trigger(P),S=!0):r.hasClass("review-list-item-row")&&(r.trigger(P),S=!0));break;case 13:U&&(e.Util.isCEF()?(1===A.getNumSelectedItems()&&(o=A.getSingleSelectedItemModel(),this._openReviewDocument(o)),this._consumeEvent(i)):(r.trigger(P),S=!0));break;case 27:!e.Util.isCEF()||d.isRunningInFileSelection()||this.options.isInSearchResultsView&&!A.isItemSelected()||(this._deselectAll(c),S=!0);break;case 33:U?(n=I.eq(Math.max(0,M-g)),G=!0):(t(_-p),S=!0);break;case 34:U?(n=I.eq(Math.min(I.length-1,M+g)),G=!0):(t(_+p),S=!0);break;case 35:t(a.scrollHeight),S=!0,C.is(b)||(n=b,G=!0);break;case 36:t(0),S=!0,C.is(R)||(n=R,G=!0);break;case 37:case 39:U&&(k=37===h,W?(B&&L&&(n=s.getNextFocusableDescendant(H,!0)),n&&n.length||(L?n=C:O&&(n=I.eq(this._getNextFocusableIndexForThumbnailView(l,M,I.length,h)),G=!0,n&&n.hasClass("expanded")&&(n=n.find(":focusable:last"))))):(i.ctrlKey||i.metaKey)&&C.is("[aria-expanded]")?(B&&k||!B&&!k)&&(C.find("button").trigger(P),S=!0):r.hasClass("review-list-item-file-name")||(n=s.getNextFocusableDescendant(C,k,!0,":not(.review-list-item-file-name)")));break;case 38:U?(B&&L&&(n=s.getNextFocusableDescendant(H,!0)),n&&n.length||(L?n=C:O&&(W?(n=I.eq(this._getNextFocusableIndexForThumbnailView(l,M,I.length,h)),G=!0):M>0&&(n=I.eq(M-1),G=!0),n&&n.hasClass("expanded")&&(n=n.find(":focusable:last"))))):v&&!F&&(t(_-v),S=!0);break;case 40:U?(B&&(n=s.getNextFocusableDescendant(H)),n&&n.length||(W?(n=I.eq(this._getNextFocusableIndexForThumbnailView(l,M,I.length,h)),G=!0):M<I.length-1&&(n=I.eq(M+1),G=!0))):v&&!F&&(t(_+v),S=!0);break;case 65:(i.ctrlKey||i.metaKey)&&(i.shiftKey?this._clearSelection(c):this._selectAll(c),this._consumeEvent(i),S=!0);break;case 68:break;case 127:case 46:}return n&&n.length>0&&(S=!0,this._isItemSelected(C)&&i.shiftKey?n.trigger(P):1!=G||n.parent().hasClass("selected")||(this.$(".shared-workflow-list-item.selected").removeClass("selected"),n.trigger(P)),n.focus()),S},_selectAll:function(i){_.extend(i,{selectType:e.SelectionUiModel.SELECT_ALL}),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,i)},_clearSelection:function(i){this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION,i)},_deleteIfSelected:function(){var e,t=this.options;return e=t.selectionUiModel.getNumSelectedItems()>0,e&&this._triggerViewEvent(i.ViewEvents.DELETE,{parentView:this}),e}})}),define("acplugins/reviews/js/templates/parcels-list-header-template.html",[],function(){return'<div role="columnheader">    <div role="checkbox"         class="review-list-header-checkbox                review-list-item-checkbox                core-checkbox"         title="<%=SELECT_ALL%>"         tabindex="0"         aria-checked="false"></div></div><div role="presentation" class="review-list-header-info-container shared-list-header-info-container">   <div role="columnheader" class="review-list-header-file shared-workflow-files-header-column name">       <button class="shared-workflow-files-header-column-title review-list-header-file-title workflow-files-header-column-sort-text-theme name" aria-label="<%= NAME_T %>" title="<%= NAME_T %>" tabindex="0" ></button>       <div class="review-list-header-file-sort virgo-sort descending shared-workflow-files-header-column-sort name" tabindex="0" role="button"></div>   </div>   <div role="columnheader" class="review-list-header-lastactivity shared-workflow-files-header-column last_activity">       <button class="shared-workflow-files-header-column-title review-list-header-lastactivity-title workflow-files-header-column-sort-text-theme last_activity" aria-label="<%= LAST_ACTIVITY_T %>" title="<%= LAST_ACTIVITY_T %>" tabindex="0"></button>       <div class="review-list-header-lastactivity-sort virgo-sort descending shared-workflow-files-header-column-sort last_activity" tabindex="0" role="button"></div>   </div>   <div role="columnheader" class="review-list-header-owner shared-workflow-files-header-column initiator">       <button class="shared-workflow-files-header-column-title review-list-header-owner-title workflow-files-header-column-sort-text-theme initiator" aria-label="<%= INITIATOR_T %>" title="<%= INITIATOR_T%>" tabindex="0"></button>       <div class="review-list-header-owner-sort virgo-sort descending shared-workflow-files-header-column-sort initiator" tabindex="0" role="button"></div>   </div>   <div role="columnheader" class="review-list-header-status shared-workflow-files-header-column workflow-files-header-column-no-sort-text-theme" title="<%= STATUS%>" aria-label="<%= STATUS%>"></div>   <div class="review-files-sort-menu shared-files-sort-menu menu ui-theme dropdown-background-theme dropdown-border-theme" role="menu" aria-label="<%= SORT_BY_DROPDOWN %>">           <div class="shared-files-sort-menu-title cb-text-theme"><%= SORT_BY %></div>           <div class="shared-files-sort-menu-items drop-down-text-theme theme-list-item-row name" aria-label="<%= NAME %>" title="<%= NAME %>" tabindex="-1">               <div class="shared-files-sort-menu-name"><%= NAME %></div>               <div class="shared-files-sort-menu-items-tick-icon name-tick-icon"></div>           </div>           <div class="shared-files-sort-menu-items drop-down-text-theme theme-list-item-row last_activity" aria-label="<%= LAST_ACTIVITY %>" title="<%= LAST_ACTIVITY %>" tabindex="-1">               <div class="shared-files-sort-menu-name"><%= LAST_ACTIVITY %></div>               <div class="shared-files-sort-menu-items-tick-icon last-activity-tick-icon"></div>           </div>           <div class="shared-files-sort-menu-items drop-down-text-theme theme-list-item-row initiator" aria-label="<%= INITIATOR %>" title="<%= INITIATOR %>" tabindex="-1">               <div class="shared-files-sort-menu-name"><%= INITIATOR %></div>               <div class="shared-files-sort-menu-items-tick-icon initiator-tick-icon"></div>           </div>    </div></div>'}),define("acplugins/reviews/js/views/parcels-list-header-view",["core/ac-core","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/parcels-list-header-template.html","i18n!acplugins/reviews/js/nls/ui-strings","core/utils/truncate","core/utils/view-util","acplugins/reviews/js/utils/sc-constants","core/models/workflow-status-strings","i18n!core/nls/ui-strings","core/utils/event-util","core/utils/sc-analytics"],function(e,i,t,s,o,n,r,l,a,c,d){i.ParcelsListHeaderView=e.View.extend({events:{"click .review-list-header-checkbox":"_onCheckboxClick","click .review-list-header-info-container":"_onHeaderClick","click .review-files-sort-menu":"_onSortMenuClick","dblclick .review-list-header-info-container":"_onHeaderClick","dblclick .review-files-sort-menu":"_onSortMenuClick"},_addMenuEventListeners:function(){c.addDomEventListener(document.body,"click",this._onBodyClick,!0)},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._addKeyEventListener(),this._addUiModelEventListeners(),this._addMenuEventListeners()},_onBodyClick:function(e){var i=$(e.target);i.hasClass("shared-workflow-files-header-column-title")||this._hideSortMenu()},_hideSortMenu:function(){this.$sortMenu.hide(),this.$filenameTitle.removeClass("selected"),this.$lastActivityTitle.removeClass("selected"),this.$ownerTitle.removeClass("selected")},render:function(){var i,o,n=this.$el;return e.View.prototype.render.call(this),0===n.children().length&&(n.html(_.template(t)({SELECT_ALL:s.SELECT_ALL,SORT_BY:a.SORT_BY,NAME:a.NAME_S,LAST_ACTIVITY:a.LAST_ACTIVITY_S,INITIATOR:a.SENDER_S,INITIATOR_T:a.SENDER_S.toUpperCase(),NAME_T:s.NAME,LAST_ACTIVITY_T:s.LAST_ACTIVITY,STATUS:s.STATUS,SORT_BY_DROPDOWN:s.SORT_BY_DROPDOWN})),this._initWrappers()),i=this.options.collectionUiModel,i.get("has_vertical_scrollbar")?(o=this._getScrollBarWidth(),this.$header.css({right:o+"px"})):this.$header.css({right:0}),this._updateCheckbox(),this.$filenameTitle.text(s.NAME),this.$ownerTitle.text(a.SENDER_S.toUpperCase()),this.$status.text(s.STATUS),this.$lastActivityTitle.text(s.LAST_ACTIVITY),this._updateFields(),this._adjustLayout(),this},_initWrappers:function(){this.$checkbox=this.$(".review-list-header-checkbox"),this.$header=this.$(".review-list-header-info-container"),this.$filename=this.$(".review-list-header-file"),this.$filenameTitle=this.$(".review-list-header-file-title"),this.$filenameSort=this.$(".review-list-header-file-sort"),this.$lastActivity=this.$(".review-list-header-lastactivity"),this.$lastActivityTitle=this.$(".review-list-header-lastactivity-title"),this.$lastActivitySort=this.$(".review-list-header-lastactivity-sort"),this.$owner=this.$(".review-list-header-owner"),this.$ownerTitle=this.$(".review-list-header-owner-title"),this.$ownerSort=this.$(".review-list-header-owner-sort"),this.$status=this.$(".review-list-header-status"),this.$sortMenu=this.$(".review-files-sort-menu")},_isItemSelectable:function(){return!0},_getNumSelectable:function(){var e=0;return this.options.collection.each(_.bind(function(i){this._isItemSelectable(i)&&(e+=1)},this)),e},_getNumSelected:function(){return this.options.selectionUiModel.getSelectionCount()},_getScrollBarWidth:function(){var e=this._scrollBarWidth;return void 0===e&&(e=n.getScrollBarWidth(),this._scrollBarWidth=e),e},_updateCheckbox:function(){var i=this.$checkbox,t=this.options,s=t.selectionUiModel.getSelectionCount();!this.options.collectionsUiModel.get("checkbox")||this.options.isInSearchResultsView?i.addClass("hidden").attr("aria-hidden",!0):(i.removeClass("hidden dash selected").removeAttr("aria-hidden"),s>0&&(s===this._getNumSelectable()?i.addClass("selected").attr("aria-checked","true"):i.addClass("dash").attr("aria-checked","mixed"))),e.Util.isIE8()&&n.detachAndReattachElement(i)},_onCheckboxClick:function(){this._getNumSelected()>0?this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION):(this.options.collection.length>0&&this.options.appApi.siteCatalystApi.logScEvent([r.FILE_LIST,r.SENT_FILES,r.ACTION,r.SELECT_ALL]),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend({},this.options,{selectType:e.SelectionUiModel.SELECT_ALL})))},_onSortMenuClick:function(e){var i=$(e.target);i.hasClass("shared-files-sort-menu-items")&&(this.$sortMenu.hide(),this._sortOnColumn(i)),this._consumeEvent(e)},_onHeaderClick:function(e){var i=$(e.target);console.log(e.type),i.is(this.$status)||(!this.options.isInSearchResultsView&&i.hasClass("shared-workflow-files-header-column-title")&&i.hasClass("currently_sorted")?i.hasClass("selected")?(i.removeClass("selected"),this.$sortMenu.hide()):(i.addClass("selected"),this.$sortMenu.show(),this.$sortMenu.css("left",i.parent().position().left)):(i.hasClass("shared-workflow-files-header-column-title")||i.hasClass("shared-workflow-files-header-column-sort"))&&(this.$sortMenu.hide(),this._sortOnColumn(i)),this._consumeEvent(e))},_getLogColumnName:function(e){var i="";switch(e){case l.MODIFIED_DATE:i=d.VIRGO_SORT_LAST_ACTIVITY;break;case l.INITIATOR:i=d.VIRGO_SORT_SENDER;break;case l.FILENAME:i=d.VIRGO_SORT_FILENAME}return i},_sortOnColumn:function(e){var i="",t=l.DESC;e.hasClass("name")?i=l.FILENAME:e.hasClass("last_activity")?i=l.MODIFIED_DATE:e.hasClass("initiator")&&(i=l.INITIATOR),t=e.hasClass("shared-workflow-files-header-column-sort")&&e.hasClass("descending")?l.ASC:l.DESC,this.options.appApi.siteCatalystApi.logVirgoSortEvent(d.VIRGO_REVIEW,this._getLogColumnName(i),t==l.DESC),this.options.collectionsUiModel.trigger("SortItems",{sort_key:i,sort_order:t})},getCurrentSortedColumn:function(){var e,i=this.$sortMenu.find(".selected");return i.length&&(i.hasClass("name")?e=this.$filenameTitle:i.hasClass("last_activity")?e=this.$lastActivityTitle:i.hasClass("initiator")&&(e=this.$ownerTitle)),e},_onKeyDown:function(e){var i,t=!1,s=$(e.target);if(!n.descendantHasFocus(this.$el))return t;switch(e.which){case 9:n.isElementDisplayed(this.$sortMenu)&&this._hideSortMenu(),i=n.getNextFocusableDescendant(this.$header,e.shiftKey);break;case 27:n.isElementDisplayed(this.$sortMenu)&&(this._hideSortMenu(),t=!0);break;case 13:case 32:s.click(),s.hasClass("shared-files-sort-menu-items")&&(i=this.getCurrentSortedColumn()),t=!0;break;case 37:case 39:t=!0;break;case 38:case 40:n.isElementDisplayed(this.$sortMenu)&&(i=n.getNextFocusableDescendant(this.$sortMenu,e.shiftKey,!0)),t=!0}return i&&i.length>0&&(i.focus(),t=!0),t},_addUiModelEventListeners:function(){var e=this.options;e.collectionUiModel.on("change:has_vertical_scrollbar",this._onHasVerticalScrollbarChange),e.collectionsUiModel.on("change:checkbox",this.render),e.selectionUiModel.on("change:selected_item_models",this._updateCheckbox),this.listenTo(this.options.collectionsUiModel,"change:rhpShown",this._adjustLayout),this.listenTo(e.collectionsUiModel,"change:view",this._adjustLayout),this.options.appApi.windowApi.addWindowResizeCallback(_.bind(this._adjustLayout))},_onHasVerticalScrollbarChange:function(){this.render()},_updateFields:function(){this.$lastActivitySort.hide(),this.$lastActivityTitle.removeClass("currently_sorted selected"),this.$filenameSort.hide(),this.$filenameTitle.removeClass("currently_sorted selected"),this.$ownerSort.hide(),this.$ownerTitle.removeClass("currently_sorted selected"),this.$sortMenu.hide(),this.$(".shared-files-sort-menu-items.last_activity").removeClass("selected"),this.$(".shared-files-sort-menu-items.name").removeClass("selected"),this.$(".shared-files-sort-menu-items.initiator").removeClass("selected"),this.$(".shared-files-sort-menu-name").css("width","100%"),this.$(".name-tick-icon").hide(),this.$(".last-activity-tick-icon").hide(),this.$(".initiator-tick-icon").hide();var e=this.options.collectionsUiModel;e.get("sort_key")==l.MODIFIED_DATE?(this.$lastActivitySort.show(),this.$lastActivityTitle.addClass("currently_sorted"),e.get("sort_order")==l.DESC?(this.$lastActivitySort.addClass("descending"),this.$lastActivitySort.attr("aria-label",s.DESCENDING),this.$lastActivitySort.attr("title",s.DESCENDING)):(this.$lastActivitySort.removeClass("descending"),this.$lastActivitySort.attr("aria-label",s.ASCENDING),this.$lastActivitySort.attr("title",s.ASCENDING)),this.$(".shared-files-sort-menu-items.last_activity").addClass("selected"),this.$(".shared-files-sort-menu-items.last_activity").find(".shared-files-sort-menu-name").css("width","90%"),this.$(".last-activity-tick-icon").show()):e.get("sort_key")==l.FILENAME?(this.$filenameSort.show(),this.$filenameTitle.addClass("currently_sorted"),e.get("sort_order")==l.DESC?(this.$filenameSort.addClass("descending"),this.$filenameSort.attr("aria-label",s.DESCENDING),this.$filenameSort.attr("title",s.DESCENDING)):(this.$filenameSort.removeClass("descending"),this.$filenameSort.attr("aria-label",s.ASCENDING),this.$filenameSort.attr("title",s.ASCENDING)),this.$(".shared-files-sort-menu-items.name").addClass("selected"),this.$(".shared-files-sort-menu-items.name").find(".shared-files-sort-menu-name").css("width","90%"),this.$(".name-tick-icon").show()):e.get("sort_key")==l.INITIATOR&&(this.$ownerSort.show(),this.$ownerTitle.addClass("currently_sorted"),e.get("sort_order")==l.DESC?(this.$ownerSort.addClass("descending"),this.$ownerSort.attr("aria-label",s.DESCENDING),this.$ownerSort.attr("title",s.DESCENDING)):(this.$ownerSort.removeClass("descending"),this.$ownerSort.attr("aria-label",s.ASCENDING),this.$ownerSort.attr("title",s.ASCENDING)),this.$(".shared-files-sort-menu-items.initiator").addClass("selected"),this.$(".shared-files-sort-menu-items.initiator").find(".shared-files-sort-menu-name").css("width","90%"),this.$(".initiator-tick-icon").show())},_updateVisibilityOfColumns:function(e,i){var t=i.colMargin,s=this.$filename.position().left,o=i.totalVisibleCols,n=e-s,r=n-t*o,l=i.totalFluidCols,a=r/l;if(1==i.fileName.visibility){var c=i.fileName.end-i.fileName.start+1;this.$filename.css("width",a*c+"px"),this.$filename.css("margin-right",t+"px"),this.$filenameSort.css("left",this.$filenameTitle.outerWidth()),this.$filename.show(),this.$filenameTitle.hasClass("currently_sorted")&&this.$sortMenu.css("left",this.$filename.position().left)}else this.$filename.hide();if(1==i.lastActivity.visibility){var c=i.lastActivity.end-i.lastActivity.start+1,d=i.lastActivity.colNumber;this.$lastActivity.css("left",s+a*(i.lastActivity.start-1)+t*d+"px"),this.$lastActivity.css("width",a*c+"px"),this.$lastActivity.css("margin-right",t+"px"),this.$lastActivitySort.css("left",this.$lastActivityTitle.outerWidth()),this.$lastActivity.show(),this.$lastActivityTitle.hasClass("currently_sorted")&&this.$sortMenu.css("left",this.$lastActivity.position().left)}else this.$lastActivity.hide();if(1==i.owner.visibility){var c=i.owner.end-i.owner.start+1,d=i.owner.colNumber;this.$owner.css("left",s+a*(i.owner.start-1)+t*d+"px"),this.$owner.css("width",a*c+"px"),this.$owner.css("margin-right",t+"px"),this.$ownerSort.css("left",this.$ownerTitle.outerWidth()),this.$owner.show(),this.$ownerTitle.hasClass("currently_sorted")&&this.$sortMenu.css("left",this.$owner.position().left)}else this.$owner.hide();if(1==i.status.visibility){var c=i.status.end-i.status.start+1,d=i.status.colNumber;this.$status.css("left",s+a*(i.status.start-1)+t*d+"px"),this.$status.css("width",a*c+"px"),this.$status.css("margin-right",t+"px"),this.$status.show()}else this.$status.hide()},_adjustLayout:function(){var e=this.options.collectionsUiModel.get("view");if(this.$filename.removeAttr("style"),this.$lastActivity.removeAttr("style"),this.$owner.removeAttr("style"),this.$status.removeAttr("style"),"list"==e){var i=this.$header.width();this.$el.hasClass("sticky-search-header")&&(this.$el.removeClass("sticky-search-header"),i=this.$header.width(),this.$el.addClass("sticky-search-header")),100>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!1},lastActivity:{visibility:!1},owner:{visibility:!1},status:{visibility:!1},totalFluidCols:0,totalVisibleCols:0,colMargin:24}):i>100&&300>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:1},lastActivity:{visibility:!1},owner:{visibility:!1},status:{visibility:!1},totalFluidCols:1,totalVisibleCols:1,colMargin:24}):i>300&&500>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:3},lastActivity:{visibility:!1},owner:{visibility:!1},status:{visibility:!0,colNumber:1,start:4,end:5},totalFluidCols:5,totalVisibleCols:2,colMargin:24}):i>500&&700>=i?this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:3},lastActivity:{visibility:!1},owner:{visibility:!0,colNumber:1,start:4,end:5},status:{visibility:!0,colNumber:2,start:6,end:7},totalFluidCols:7,totalVisibleCols:3,colMargin:32}):this._updateVisibilityOfColumns(i,{fileName:{visibility:!0,colNumber:0,start:1,end:3},lastActivity:{visibility:!0,colNumber:1,start:4,end:5},owner:{visibility:!0,colNumber:2,start:6,end:7},status:{visibility:!0,colNumber:3,start:8,end:9},totalFluidCols:9,totalVisibleCols:4,colMargin:32})}else this.$status.hide(),this.$filenameTitle.hasClass("currently_sorted")?(this.$filename.show(),this.$filename.css("left","0px"),this.$filename.css("width",this.$header.width()),this.$sortMenu.css("left",this.$filename.position().left),this.$filenameSort.css("left",this.$filenameTitle.outerWidth())):this.$filename.hide(),this.$lastActivityTitle.hasClass("currently_sorted")?(this.$lastActivity.show(),this.$lastActivity.css("left","0px"),this.$lastActivity.css("width",this.$header.width()),this.$sortMenu.css("left",this.$lastActivity.position().left),this.$lastActivitySort.css("left",this.$lastActivityTitle.outerWidth())):this.$lastActivity.hide(),this.$ownerTitle.hasClass("currently_sorted")?(this.$owner.show(),this.$owner.css("left","0px"),this.$owner.css("width",this.$header.width()),this.$sortMenu.css("left",this.$owner.position().left),this.$ownerSort.css("left",this.$ownerTitle.outerWidth())):this.$owner.hide()
}})}),define("acplugins/reviews/js/views/parcels-collection-view",["core/ac-core","files/ac-files","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/parcels-collection-template.html","core/utils/view-util","core/models/workflow-status-strings","acplugins/reviews/js/views/parcels-list-view","acplugins/reviews/js/views/parcels-list-header-view"],function(e,i,t,s,o,n){t.ParcelsCollectionView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(s),this._addKeyEventListener(),this._addCollectionEventListeners(),this._addUiModelEventListeners()},render:function(){var i=this.$el,t=this.options,s=t.appApi.pluginsApi,o=t.pluginId;return e.View.prototype.render.call(this),0===i.children().length&&(i.html(this._template({pluginSelectorId:s.getPluginSelectorId(o)})),this._initWrappers()),this._renderChildViews(),this._onViewChange(this.options.collectionsUiModel),this},_initWrappers:function(){this.$header=this.$(".reviews-header"),this.$selectionActions=this.$(".selection-actions"),this.$items=this.$(".review-collection-items"),this.options.isInSearchResultsView?(this.$items.addClass("uss-search-active"),this.$header.addClass("uss-search-active"),this.$search_content=$(".search-views-content"),this.$search_content.scroll(this._onScrollSearchResults),this._StickyHeaderTop=$(".search-results-header").outerHeight(!0)+this.$header.outerHeight(!0),this._contentBottom=this._StickyHeaderTop+this.$search_content.outerHeight(!0)):this.$items.on("scroll",this._onItemScroll)},_onItemScroll:function(){var i=this.$items,t=this.options.parcelCollection.length,s=this.options.parcelCollection.getNumberOfItems();e.Util.isMac()&&this._renderHeaderView(),2*i.height()+i.scrollTop()>i.prop("scrollHeight")&&s>t&&this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaFileAPI.getWorkflowData(n.REVIEW,t).done(_.bind(function(e){e.WorkflowData.length&&this.options.parcelCollection.length===e.dataRange.from&&this.options.parcelCollection.add(e.WorkflowData,{silent:!0,merge:!0,sort:!1}),this.render()},this))},this))},_onScrollSearchResults:function(){if(this.$el.is(":visible")){var e=this.$items.offset().top,t=this.$items.offset().top+this.$items.outerHeight(!0);if(this._StickyHeaderTop>e&&this._StickyHeaderTop<t){if(this.$header.hasClass("sticky-search-header")||this.$header.addClass("sticky-search-header"),this.$search_content.hasClass("with-sticky-search-header")||this.$search_content.addClass("with-sticky-search-header"),this.options.selectionUiModel.getNumSelectedItems()?this.$header.addClass("active-context-board"):this.$header.removeClass("active-context-board"),t<this._contentBottom&&this.collection.length<this.options.searchModel.getSearchResultCount()){var s=this.options;_.extend(s,{startIndex:this.collection.length,search_scope:["review"],noSearchReset:!0}),this.options.appApi.displayApi.showSpinner(!0),i.opFactory.create("USSSearchingOp",s).run().always(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1)},this))}}else this.$header.hasClass("sticky-search-header")&&this.$header.removeClass("sticky-search-header"),this.$search_content.hasClass("with-sticky-search-header")&&this.$search_content.removeClass("with-sticky-search-header")}},_renderChildViews:function(){this._renderItemsView(),this._renderHeaderView()},_renderItemsView:function(){this._renderChildView("_itemsView",t.ParcelsListView,this.$items)},_renderHeaderView:function(){this._renderChildView("_headerView",t.ParcelsListHeaderView,this.$header,{collectionItemsView:this._itemsView})},_renderSelectionActionsView:function(){this._renderChildView("_selectionActionsView",t.SelectionActionsView,this.$selectionActions)},_setFocusToChildView:function(e,i){var t=i?"[role=checkbox]:focusable":":tabbable:first",s=e.find(t);return s.length?(s.focus(),!0):!1},_onKeyDown:function(e){var i=!1;switch(e.which){case 38:o.descendantHasFocus(this.$items)&&(this.setFocusToHeaderView(!0)||this.setFocusToSelectionActionsView(),i=!0);break;case 40:(o.descendantHasFocus(this.$header)||o.descendantHasFocus(this.$selectionActions))&&(this.setFocusToCollectionItemsView(),i=!0)}return i&&this._consumeEvent(e),i},setFocusToHeaderView:function(e){var i=this._setFocusToChildView(this.$header,e);return i},setFocusToSelectionActionsView:function(e){var i=this._setFocusToChildView(this.$selectionActions,e);return i},setFocusToCollectionItemsView:function(){var e=this._setFocusToChildView(this.$items);return e},_correctFocusOnSelectionChange:function(i,t){var s=this.$header,o=s.find("[role=checkbox]"),n=this.$selectionActions,r=!1,l=!1;i&&(r=i.is(s),l=i.is(n)),this._hideOrShowHeaderCheckbox(),r&&t.selectType===e.SelectionUiModel.SELECT_ALL?this.setFocusToSelectionActionsView(!0):l&&(o.is(":focusable")?this.setFocusToHeaderView(!0):this.setFocusToCollectionItemsView())},_hideOrShowHeaderCheckbox:function(){var i=this.$header.find("[role=checkbox]"),t=this.$selectionActions;t.hasClass("open")||e.Util.isCEF()?i.hide():i.show()},_addCollectionEventListeners:function(){var e,i,t=this.options,s=t.collectionsUiModel,o=t.collectionUiModel,n=this.collection;e=s.get("debounced_render_delay"),i=_.debounce(_.bind(function(){this.invalidateViewsRecursively(),this.render(),o.set("show_empty",0===n.length)},this),e),n.on("add change remove sort reset",function(){i()})},_onViewEvent:function(i,t){switch(i){case e.ViewEvents.SELECT_ITEM:this._onSelectItem(t);break;case e.ViewEvents.CLEAR_SELECTION:this._onClearSelection(t)}e.View.prototype._onViewEvent.call(this,i,t)},_onSelectItem:function(e){var i,t=o.descendantHasFocus(this.$header),s=o.descendantHasFocus(this.$selectionActions);t?i=this.$header:s&&(i=this.$selectionActions),_.delay(this._correctFocusOnSelectionChange,this.options.collectionsUiModel.get("scroll_render_delay"),i,e)},_onClearSelection:function(e){this._onSelectItem(e)},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.collectionsUiModel,"change:view",this._onViewChange)},_setHeaderVisibility:function(){this.options.collection&&(0==this.options.collection.length?this.$header.hide():this.$header.show())},_onViewChange:function(e){var i=e.get("view");"list"==i?(this.$items.removeClass("shared-thumb-view"),this.$items.removeClass("cb-theme-text"),this.$el.removeClass("shared-item-thumb-view"),this._setHeaderVisibility()):"thumbnail"==i&&(this.$items.addClass("shared-thumb-view"),this.$items.addClass("cb-theme-text"),this.$el.addClass("shared-item-thumb-view"),this._setHeaderVisibility())}})}),define("acplugins/reviews/js/templates/no-parcels-collection-template.html",[],function(){return'<div id="parcels-no-parcels-prompt-review" class="shared-no-parcels shown"><div class="shared-empty-state-icon"></div><div class="shared-on-sign-out-prompt theme-text"><%= NO_PARCELS_REVIEW_PROMPT%></div><div class="shared-on-sign-out-subprompt theme-text"><%= NO_PARCELS_REVIEW_SUBPROMPT%></div><div class="shared-on-sign-out-button control-button theme-button theme-button-label on-send-for-review" role="button"aria-label="<%= NO_PARCELS_REVIEW_PROMPT %><%= NO_PARCELS_REVIEW_SUBPROMPT %><%= NO_PARCELS_REVIEW_BTN %>"tabindex="0"><%= NO_PARCELS_REVIEW_BTN %></div></div>'}),define("acplugins/reviews/js/templates/no-parcels-button-template",[],function(){return'<button id="parcels-no-parcels-send-btn" class="parcels-no-parcels-btn theme-hyperlink">       <%= sendBtn %></button> '}),define("acplugins/reviews/js/views/no-parcels-collection-view",["core/ac-core","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/no-parcels-collection-template.html","acplugins/reviews/js/templates/no-parcels-button-template","i18n!acplugins/reviews/js/nls/ui-strings","acplugins/reviews/js/utils/sc-constants","core/views/view"],function(e,i,t,s,o,n){return i.NoParcelsCollectionView=e.View.extend({events:{"click .on-send-for-review":"_onSendForReviewClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t),this._buttonTemplate=_.template(s),this._addUiModelEventListeners()},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({NO_PARCELS_REVIEW_PROMPT:o.NO_PARCELS_REVIEW_PROMPT,NO_PARCELS_REVIEW_SUBPROMPT:o.NO_PARCELS_REVIEW_SUBPROMPT,NO_PARCELS_REVIEW_BTN:o.NO_PARCELS_REVIEW_BTN})),this._initWrappers(),this.options.collectionUiModel.get("show_empty")?this.$noParcelsSendPrompt.addClass("shown"):this.$noParcelsSendPrompt.removeClass("shown")),this},_initWrappers:function(){this.$noParcelsSendPrompt=this.$("#parcels-no-parcels-prompt"),this.$noParcelsSendBtn=this.$("#parcels-no-parcels-send-btn")},_onSendForReviewClick:function(){var i,t=this.options;t.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.NO_PARCELS,n.SHARE_BUTTON,n.CLICKED]),e.Util.isCEF()?this.options.appApi.rnaApi.done(_.bind(function(e){e.stApi.launchReviewApp()},this)):(i="send",t.appApi.routerApi.navigate(i,{trigger:!0}))},_addUiModelEventListeners:function(){this.listenTo(this.options.collectionUiModel,"change:show_empty",this._onShowEmptyChange)},_onShowEmptyChange:function(e,i){i?(this.render(),this.$noParcelsSendPrompt.addClass("shown")):this.$noParcelsSendPrompt.removeClass("shown")}}),i.NoParcelsCollectionView}),define("acplugins/reviews/js/views/parcels-view",["core/ac-core","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/parcels-template.html","acplugins/reviews/js/views/parcels-collection-view","acplugins/reviews/js/views/no-parcels-collection-view"],function(e,i,t){i.ParcelsView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$parcelsContent=this.$(".parcels-content"),this.$parcelsNoContent=this.$(".parcels-no-content")},_renderChildViews:function(){var i=this._collectionUiModel;e.Util.isCEF()&&_.isUndefined(this.options.parcelCollection)||(i||(i=this._collectionUiModel=e.uiModelFactory.create("CollectionUiModel"),i.set("show_empty",0===this.options.parcelCollection.length)),0!=this.options.parcelCollection.length||this.options.isInSearchResultsView?(this.$parcelsContent.show(),this.$parcelsNoContent.hide(),this._renderParcelsContentView(i)):setTimeout(_.bind(function(){0!=this.options.parcelCollection.length||this.options.isInSearchResultsView||(this.$parcelsContent.hide(),this.$parcelsNoContent.show(),this._renderParcelsNoContentView(i))},this),200))},_renderParcelsNoContentView:function(e){this._renderChildView("_noParcelsContentView",i.NoParcelsCollectionView,this.$parcelsNoContent,{collection:this.options.parcelCollection,collectionUiModel:e})},_renderParcelsContentView:function(e){this._renderChildView("_parcelsContentView",i.ParcelsCollectionView,this.$parcelsContent,{collection:this.options.parcelCollection,collectionUiModel:e})}})}),define("acplugins/reviews/js/views/sent-files-body-view",["core/ac-core","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/sent-files-body-template.html","acplugins/reviews/js/views/parcels-view"],function(e,i,t){i.SentFilesBodyView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$parcels=this.$(".parcels"),this.$searchResults=this.$(".parcels-search-results")},_renderChildViews:function(){var e=!0;e&&this._renderParcelsView()},_renderParcelsView:function(){this._renderChildView("_parcelsView",i.ParcelsView,this.$parcels)}})}),define("acplugins/reviews/js/templates/sent-files-footer-template.html",[],function(){return'<div class="adobe-send-btn desktop theme-hyperlink" role="link" id="footer-link" disabled tabindex="-1"><%=GO_TO_ADOBE_SEND_WEBSITE%></div>'}),define("acplugins/reviews/js/views/sent-files-footer-view",["core/ac-core","acplugins/reviews/js/ac-review","i18n!acplugins/reviews/js/nls/ui-strings","acplugins/reviews/js/templates/sent-files-footer-template.html","core/utils/view-util"],function(e,i,t,s,o){i.SentFilesFooterView=e.View.extend({events:{"click .adobe-send-btn":"_onAdobeSendWebsiteClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addFocusEventListener(),this._addKeyEventListener(),this._template=_.template(s)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({GO_TO_ADOBE_SEND_WEBSITE:t.GO_TO_ADOBE_S_T_WEBSITE})),this._initWrappers(),this._setTabbableItem()),this._updateSendButton(),this},_initWrappers:function(){this.$adobeSendBtn=this.$(".adobe-send-btn")},_updateSendButton:function(){this.$adobeSendBtn.addClass("desktop")},_onFocusIn:function(e){var i=$(e.target);return this.$(":focusable").not(i).attr("tabindex",-1),i.attr("tabindex",0),!0},_onFocusOut:function(){return!0},_setTabbableItem:function(){var e=this.$(".adobe-send-btn:focusable"),i=this.$(":tabbable");0===i.length&&e.attr("tabindex","0")},_onKeyDown:function(e){var i=this.$el,t=e.which,s=!1;if(!o.descendantHasFocus(i))return s;switch(t){case 13:s=!0,$(e.target).click();break;case 32:s=!0,$(e.target).click()}return s},_onAdobeSendWebsiteClick:function(){var e=this.options;e.appApi.rnaApi?this.options.appApi.rnaApi.done(_.bind(function(e){e.esApi.invokeMethod({methodName:"launchSFSManagePage"})},this)):e.appApi.routerApi.navigate("/send",{trigger:!0})}})}),define("acplugins/reviews/js/templates/files-rhp-template",[],function(){return'<div class="rhp-preview"></div><div class="rhp-properties"></div><div class="rhp-intro-message"></div><div class="rhp-workflow-deadline"></div><div class="rhp-participants-accodian"></div><div class="rhp-primary-actions"/></div>'}),define("acplugins/reviews/js/views/files-rhp-view",["core/ac-core","acplugins/reviews/js/ac-review","i18n!core/nls/ui-strings","acplugins/reviews/js/templates/files-rhp-template","core/models/workflow-status-strings","core/utils/sc-analytics","core/utils/view-util","core/views/rhp/shared-rhp-preview-view","core/views/rhp/shared-rhp-properties-view","core/views/rhp/shared-rhp-intro-message-view","core/views/rhp/shared-rhp-deadline-view","core/views/rhp/review/primary-actions-view","core/views/rhp/review/rhp-participants-view","core/views/view","core/views/view","core/models/context-board-model"],function(e,i,t,s,o,n,r){return i.ReviewFilesRhpView=e.View.extend({events:{"click    #context-board-cross":"_onCrossClick"},_onCrossClick:function(){this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("ShowCommentsList",{}).done(_.bind(function(){},this))},this))},initialize:function(){e.View.prototype.initialize.call(this),this.cbViewModel=e.modelFactory.create("ContextBoardModel"),_.extend(this.options,{cbViewModel:this.cbViewModel}),this._addKeyEventListener()},render:function(){var i;e.View.prototype.render.call(this),i=this.$el,0===i.children().length&&(i.html(_.template(s)({removeFromTracking:t.REMOVE_FROM_TRACKING})),this._initWrappers(),this.options.runningInRHP&&(this.options.rootView._pluginOptions&&this.options.rootView._pluginOptions.isCBView&&"Tracking"!=this.options.rootView._pluginOptions.requestAgent&&"recent"!=this.options.rootView._pluginOptions.requestAgent?this.options.appApi.siteCatalystApi.logEvent("Viewer","ContextBoard",n.VIRGO_REVIEW):this.options.appApi.siteCatalystApi.logVirgoRHPOpenedEvent(n.VIRGO_REVIEW_CB)));var r=this.cbViewModel.getSingleSelectedItemModel();if(!r||this.options.isInSearchResultsView&&r.workflowType!==o.REVIEW)i.hide();else if(this.options.rootView._pluginOptions&&this.options.rootView._pluginOptions.isCBView&&"Tracking"!=this.options.rootView._pluginOptions.requestAgent&&"recent"!=this.options.rootView._pluginOptions.requestAgent){var l=this.options.appApi.usersMeApi.options.usersMeIdentityModel;l.get("email")?this._doRenderPostGetUserIdentity():this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("ReviewGetLoggedInUserInfo").always(_.bind(function(e){e&&this.options.appApi.usersMeApi.options.usersMeIdentityModel.set("email",e),this._doRenderPostGetUserIdentity()},this))},this))}else this._doRenderPostGetUserIdentity();return this._doManageContextBoardCrossIconVisibility(),this},_doManageContextBoardCrossIconVisibility:function(){var e=!1;this.options.appApi.rnaApi.done(_.bind(function(i){i._reviewAPI.invoke("ShouldShowCloseIcon",{}).done(_.bind(function(i){e=i;var t=document.getElementById("context-board-menu"),s=document.getElementById("context-board-cross");t&&s&&(e?(t.style.width="85%",s.style.width="12%",s.style.visibility="visible"):(t.style.width="97%",s.style.width="0%",s.style.visibility="hidden"))},this))},this))},_doRenderPostGetUserIdentity:function(){this.$el.show(),this._renderChildViews(),this._updateFields()},_initWrappers:function(){this.$preview=this.$(".rhp-preview"),this.$properties=this.$(".rhp-properties"),this.$introMessage=this.$(".rhp-intro-message"),this.$deadline=this.$(".rhp-workflow-deadline"),this.$reviewParticipants=this.$(".rhp-participants-accodian"),this.$reviewPrimaryActions=this.$(".rhp-primary-actions"),this.$closeButton=this.$("#context-board-cross"),this.options.cbViewModel=this.cbViewModel},_renderChildViews:function(){this._renderChildView("_previewView",e.SharedRhpPreviewView,this.$preview),this._renderChildView("_propertiesView",e.SharedRhpPropertiesView,this.$properties),this._renderChildView("_introMessageView",e.SharedRhpIntroMsgView,this.$introMessage),this._renderChildView("_deadlineView",e.SharedRhpDeadlineView,this.$deadline),this.options.isUnaccepted?this.$reviewParticipants.hide():(this._renderChildView("_reviewParticipantsView",e.ReviewRhpParticipantsView,this.$reviewParticipants),this.$reviewParticipants.show()),this._renderChildView("_reviewPrimaryActionsView",e.RhpReviewPrimaryActionsView,this.$reviewPrimaryActions)},_updateFields:function(){this.options.hidePreview?this.$preview.hide():this.$preview.show()},_setModel:function(e,i){var t,s=this.cbViewModel,o=!1,n=void 0,r=void 0;this.cbViewModel.getSingleSelectedItemModel()&&(t=this.cbViewModel.getSingleSelectedItemModel().id,n=this.cbViewModel.getSingleSelectedItemModel().getCollaborators(),r=this.cbViewModel.getSingleSelectedItemModel().CTAClicked,o=e[t]||e&&e.id&&t&&e.id.toLowerCase()==t.toLowerCase()?!0:!1),s.clearSelection(),i?s.addItem(e):_.each(_.values(e),function(e){s.addItem(e)}),o?(s.getSingleSelectedItemModel().CTAClicked=r,n&&_.isUndefined(s.getSingleSelectedItemModel().getCollaborators())&&s.getSingleSelectedItemModel().setCollaborators(n)):(s.trigger("change:cb_item_model"),s.getSingleSelectedItemModel().CTAClicked=void 0),this.render()},_getSiteCatalystContext:function(){return t.RHP},_onKeyDown:function(e){var i=($(e.target),e.which),t=!1,s=e.shiftKey,o=e.ctrlKey;if(117!=i)return t;var n=$(".shared-files-rhp");if(0!=n.length)return t;if(n=$(".context-board-rhp:visible"),!this.$el.is(n))return t;var l,a=n.hasClass("hidden")?!1:!0,c=r.descendantHasFocus(this.$el),d=n.find(":focusable");(!c||o)&&(a&&(s||d&&d.length>0&&(l=d.first().attr("tabindex",0))),l&&l.length>0&&(t=!0,l.focus()));var h={};return h.isF6Consumed=t,h.shift=s,this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaServicesAPI.f6KeyHandled(h)},this)),t}}),i.ReviewFilesRhpView}),define("acplugins/reviews/js/views/on-signed-in-view",["core/ac-core","files/ac-files","acplugins/reviews/js/ac-review","core/models/workflow-status-strings","acplugins/reviews/js/templates/on-signed-in-template.html","core/utils/util","core/utils/css-util","core/utils/sc-analytics","core/utils/view-util","acplugins/reviews/js/views/sent-files-header-view","acplugins/reviews/js/views/sent-files-body-view","acplugins/reviews/js/views/sent-files-footer-view","acplugins/reviews/js/views/files-rhp-view"],function(e,i,t,s,o,n,r,l,a){return t.OnSignedInView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(o),this._addUiModelEventListeners(),this._addKeyEventListener()},render:function(){var i=this.$el;return e.View.prototype.render.call(this),0===i.children().length&&(i.html(_.template(o)),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){if(this.$header=this.$(".review-files-header"),this.$body=this.$(".review-files-body"),this.$footer=this.$(".sent-files-footer"),this.$plugin=$("#reviews-plugin"),this.options.isInSearchResultsView){this.$body.addClass("uss-search-active"),this.$searchContextBoard=$(".search-context-board");var e=this.options.pluginId+"-rhpId",i=_.template('<div class="review-files-rhp ui-theme theme-container" id="'+e+'">');this.$searchContextBoard.append(i()),this.$rhp=this.$searchContextBoard.find("#"+e)}else this.$rhp=this.$(".review-files-rhp")},_addUiModelEventListeners:function(){var e=this.options;e.selectionUiModel.on("deleteReviewEvent",this._hideContextBoardView),e.selectionUiModel.on("removeMeReviewEvent",this._hideContextBoardView),e.selectionUiModel.on("unshareReviewEvent",this._hideContextBoardView),this.listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange)},_hideContextBoardView:function(){var e=this.$header,i=this.$body,t=this.$rhp;e.hasClass("with-rhp")&&(e.removeClass("with-rhp"),i.removeClass("with-rhp"),t.addClass("hidden"),this.$(".review-files-main-header").removeClass("with-rhp"),this.options.collectionsUiModel.set("rhpShown",!1)),this.options.selectionUiModel.clearSelection(),this.render()},_renderChildViews:function(){this.options;this._renderSentFilesHeaderView(),this._renderSentFilesBodyView(),this._renderSentFilesRhpView(),"desktop"===this.options.collectionsUiModel.get("mode")&&this.options.appApi.rnaApi.done(_.bind(function(e){e.esApi.isSendForSignEnabled()&&this._renderSentFilesFooterView()},this))},_renderSentFilesHeaderView:function(){this._renderChildView("_sentFilesHeaderView",t.SentFilesHeaderView,this.$header)},_renderSentFilesBodyView:function(){this._renderChildView("_sentFilesBodyView",t.SentFilesBodyView,this.$body)},_renderSentFilesFooterView:function(){this._renderChildView("_sentFilesFooterView",t.SentFilesFooterView,this.$footer)},_renderSentFilesRhpView:function(){this.rhpView=this._renderChildView("_sentFilesRhpView",t.ReviewFilesRhpView,this.$rhp)},_onSelectedItemModelsChange:function(e){var i=this.options,t=this.$header,o=this.$body,n=this.$rhp,a=i.appApi;if(!i.noSelectionActions&&!a.acrobatApi.isInAcrobat()){if(i.isInSearchResultsView){var c=e.getSingleSelectedItemModel();if(c&&c.workflowType!=s.REVIEW)return n.hide(),void(t.hasClass("with-rhp")||(t.addClass("with-rhp"),o.addClass("with-rhp"),this.options.collectionsUiModel.set("rhpShown",!0),this._renderSentFilesHeaderView(),this._renderSentFilesBodyView()))}e.isItemSelected()?(this.rhpView._setModel(e.getSelectedItemModels()),e.getSingleSelectedItemModel()&&(e.getSingleSelectedItemModel().CTAClicked=void 0),t.hasClass("with-rhp")||(t.addClass("with-rhp"),o.addClass("with-rhp"),n.removeClass("hidden").removeClass("invisible"),this.options.collectionsUiModel.set("rhpShown",!0),this.options.appApi.siteCatalystApi.logVirgoRHPOpenedEvent(l.VIRGO_REVIEW_CB))):t.hasClass("with-rhp")&&(t.removeClass("with-rhp"),o.removeClass("with-rhp"),n.addClass("hidden"),_.defer(_.bind(function(){t.hasClass("with-rhp")||this.options.collectionsUiModel.set("rhpShown",!1)},this))),r.addTransitionEndCallback(o,"right",_.bind(function(){t.removeClass("animating"),r.removeTransitionEndCallbacks(n),t.hasClass("with-rhp")||n.addClass("invisible"),this.render()},this))}},_onKeyDown:function(e){var i=$(e.target),t=e.which,s=!1,o=e.shiftKey;if(!a.isElementDisplayed(this.$plugin))return!1;if(117!=t||!a.descendantHasFocus(this.$el))return s;var n,r=this.$rhp.hasClass("hidden")?!1:!0,l=i.closest(this.$rhp).length?!0:!1,c=this.$rhp.find(":focusable"),d=this.$body.find(".review-list-item.selected>.review-list-item-row"),h=this.$el.find(":tabbable"),p=e.altKey,u=e.ctrlKey;p||!r&&u?n=d.length>0?d:h.first().attr("tabindex",0):u?n=c.first().attr("tabindex",0):l?(o&&(n=d),c.attr("tabindex",-1)):r&&(o||c&&c.length>0&&(n=c.first().attr("tabindex",0))),n&&n.length>0&&(s=!0,n.focus());var v={};return v.isF6Consumed=s,v.shift=o,this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaServicesAPI.f6KeyHandled(v)},this)),s}}),t.OnSignedInView}),define("acplugins/reviews/js/templates/on-signed-out-template.html",[],function(){return'<div class="review-workflow-name shared-workflow-heading shared-files-main-header-empty-state theme-page-header" title="<%= workflowName %>" ><%= workflowName %></div><div class="shared-offline-icon"></div><div class="shared-on-sign-out-prompt theme-text"><%= ON_SIGN_OUT_PROMPT %></div><div class="shared-on-sign-out-subprompt theme-text"><%= ON_SIGN_OUT_SUBPROMPT %></div><div class="shared-on-sign-out-button sign-in-btn control-button theme-button theme-button-label" role="button"aria-label="<%= ON_SIGN_OUT_PROMPT %><%= ON_SIGN_OUT_SUBPROMPT %><%= SIGN_IN_BUTTON %>"tabindex="0"><%= SIGN_IN_BUTTON %></div>'}),define("acplugins/reviews/js/views/on-signed-out-view",["core/ac-core","acplugins/reviews/js/ac-review","acplugins/reviews/js/templates/on-signed-out-template.html","i18n!acplugins/reviews/js/nls/ui-strings","core/views/view"],function(e,i,t,s){return i.OnSignedOutView=e.View.extend({events:{"click .sign-in-btn":"_onSignInClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._template=_.template(t)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({workflowName:s.REVIEW_WORKFLOW_NAME,ON_SIGN_OUT_PROMPT:s.ON_REVIEWS_SIGN_OUT_PROMPT,ON_SIGN_OUT_SUBPROMPT:s.ON_REVIEWS_SIGN_OUT_SUBPROMPT,SIGN_IN_BUTTON:s.REVIEWS_SIGN_IN_BUTTON})),this._initWrappers()),this},_initWrappers:function(){this.$signInBtn=this.$(".sign-in-btn")},_onKeyDown:function(e){return 32===e.which||13===e.which?($(e.target).click(),!0):!1},_onSignInClick:function(e){this._consumeEvent(e),this.$el.hide(),this.options.appApi.displayApi.showSpinner(!0),this.options.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1)},this),_.bind(function(){this.options.appApi.displayApi.showSpinner(!1),this.$el.show()},this))},_getSignInButtonAriaLabel:function(){return _.template(s.GENERIC_ARIA_LABEL_STRING,{prefix:s.ON_SIGN_OUT_PROMPT,suffix:s.SIGN_IN_BUTTON})}}),i.OnSignedOutView}),define("acplugins/reviews/js/views/review-home-view-view",["core/ac-core","files/ac-files","plugins-common/ac-plugins","acplugins/reviews/js/ac-review","acplugins/reviews/js/utils/sc-constants","acplugins/reviews/js/templates/tracked-send-template.html","acplugins/reviews/js/utils/sharing","acplugins/reviews/js/utils/ts-utils","core/models/workflow-status-strings","i18n!core/nls/ui-strings","i18n!acplugins/reviews/js/nls/ui-strings","core/constants/thumbnail-constants","core/utils/sc-analytics","acplugins/reviews/js/models/ui/parcel-preview-ui-model","core/views/home-view-view","acplugins/reviews/js/ops/showing/parcel-preview-op","acplugins/reviews/js/views/on-signed-in-view","acplugins/reviews/js/views/on-signed-out-view","core/ops/uss/uss-review-op"],function(e,i,t,s,o,n,r,l,a,c,d,h,p){const u={ServiceTypeNone:0,Recents_k:1,SharedByOthers_k:2,SharedByYou_k:3,DocumentCloud_k:4,Favorites_k:5,ServiceTypeLast_k:6};return s.HomeViewView=e.PluginContentView.extend({initialize:function(){e.PluginContentView.prototype.initialize.call(this),e.Util.isCEF()&&(require(["files/views/files-offline-view"],function(){}),require(["files/views/files-no-access-view"],function(){})),s.plugin=this,this.options.parcelCollection=new e.ParcelCollection([],{wfType:a.REVIEW,sortAscending:!1,sortField:"modify_date"}),this.options.participantAvatarMap={}},_cacheParticipantAvatar:function(e,i,t){t&&(e?this.options.participantAvatarMap[e]=t:i&&(this.options.participantAvatarMap[i]=t))},_getParticipantAvatar:function(e,i){var t="";return this.options.participantAvatarMap[e]?t=this.options.participantAvatarMap[e]:this.options.participantAvatarMap[i]&&(t=this.options.participantAvatarMap[i]),t},_addUiModelEventListeners:function(){var e=this.options;e.collectionsUiModel.on("SortItems",this._sortItems)},_sortSearchResults:function(i,t){var s,o,n=this.options.parcelCollection,r=t===e.SortUiModel.ORDER_ASCENDING?1:-1;if(i===a.FILENAME)n.comparator=function(e,i){return s=e.attributes.name?e.attributes.name.toLowerCase():e.getSingleFileName().toLowerCase(),o=i.attributes.name?i.attributes.name.toLowerCase():i.getSingleFileName().toLowerCase(),s>o?1*r:o>s?-1*r:0};else if(i===a.INITIATOR){var l=this.options.appApi.usersMeApi.getUserIdentity().email.toLowerCase();n.comparator=function(e,i){return s=l===e.getSenderEmail().toLowerCase()?d.YOU:e.getSenderName().toLowerCase(),o=l===i.getSenderEmail().toLowerCase()?d.YOU:i.getSenderName().toLowerCase(),s=e.getSenderName().toLowerCase(),o=i.getSenderName().toLowerCase(),s>o?1*r:o>s?-1*r:0}}else n.comparator=function(e,t){return e.get(i)>t.get(i)?1*r:e.get(i)<t.get(i)?-1*r:0};n.sort(),this.options.collectionsUiModel.set("sort_key",i),this.options.collectionsUiModel.set("sort_order",t)},_sortItems:function(e){this.options.isInSearchResultsView?this._sortSearchResults(e.sort_key,e.sort_order):this._requestWorkflowData({sortField:e.sort_key,sortOrder:e.sort_order,RefreshList:"SORT"}),this.bringSelectedItemInView=!0},_requestWorkflowData:function(e){if(!this.options.isInSearchResultsView){var i="",t="",s="";e&&e.sortField?i=e.sortField:this.options.collectionsUiModel.get("sort_key")&&(i=this.options.collectionsUiModel.get("sort_key")),e&&e.sortOrder?t=e.sortOrder:this.options.collectionsUiModel.get("sort_order")&&(t=this.options.collectionsUiModel.get("sort_order")),e&&e.RefreshList&&(s=e.RefreshList),this.options.appApi.rnaApi.done(_.bind(function(e){e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:a.REVIEW,SortField:i,SortOrder:t,RefreshList:s}}).done(_.bind(function(){},this))},this))}},render:function(){var i=this.$el;e.PluginContentView.prototype.render.call(this),this._pluginOptions&&this._pluginOptions.isCBView&&(0===i.children().length&&(i.html(_.template(n)),this._initWrappers(),"Tracking"!=this._pluginOptions.requestAgent&&"recent"!=this._pluginOptions.requestAgent&&this.options.appApi.rnaApi.done(_.bind(function(e){e.fileApi({methodName:"getSingleWorkflowData",methodArgs:this._pluginOptions.workflowID}).done(_.bind(function(){},this))},this))),this._renderChildViews(),("Tracking"==this._pluginOptions.requestAgent||"recent"==this._pluginOptions.requestAgent)&&this.options.appApi.rnaApi.done(_.bind(function(e){var i={workflowId:this._pluginOptions.workflowID,workflowType:this._pluginOptions.workflowType,isUnaccepted:this._pluginOptions.isUnaccepted?"true":"false",bootstrap:this._pluginOptions.bootstrap};e.fileApi({methodName:"getTrackingWorkflowData",methodArgs:i}).done(_.bind(function(){},this))},this))),this._processRouterArgs().then(_.bind(function(){0===i.children().length&&(i.html(_.template(n)),this._initWrappers()),!this.options.isInSearchResultsView&&!this._isSelected||i.closest(".hidden").length||this._renderChildViews()},this))},initPlugin:function(){var i=this.options,t=i.appApi.pluginsApi,o=e.modelFactory,n=e.uiModelFactory;return _.extend(i,{sessionModel:o.create("SessionModel"),collectionsUiModel:new s.CollectionsUiModel,dialogsUiModel:n.create("DialogsUiModel"),rhpPreviewUiModel:n.create("RhpPreviewUiModel"),itemUiModel:n.create("CollectionItemUiModel"),parcelPreviewUiModel:new s.ParcelPreviewUiModel}),t.isPluginOfThisType(i.pluginId,"search_views")?_.extend(i,{isInSearchResultsView:!0}):_.extend(i,{selectionUiModel:n.create("SelectionUiModel")}),e.Util.isCEF()&&this._changeModeToDesktop(),i.appApi.siteCatalystApi.register("sharing",r),i.collectionsUiModel.on("change:mode",this._onModeChange),i.isInSearchResultsView?(i.collectionsUiModel.set("checkbox",!1),i.collectionsUiModel.set("sort_key",a.MODIFIED_DATE),i.collectionsUiModel.set("sort_order",a.DESC)):this._onModeChange(),this._isSelected=!1,this._addUiModelEventListeners(),this._getResolvedPromise()
},selectPlugin:function(i){return _.defer(_.bind(function(i){var t,n,r=this.options,l=r.appApi.networkConnectivityApi,a=this.options.appApi.routerApi.parseQueryParams(window.location.href.slice(window.location.href.indexOf("?")));if(this._pluginOptions=this._pluginOptions||{},i&&_.extend(this._pluginOptions,i),i&&r.isInSearchResultsView&&(r.searchModel=i.searchModel,r.searchUiModel=i.searchUiModel,r.selectionUiModel=i.selectionUiModel),r.searchModel&&r.parcelCollection.reset(r.searchModel.get("parcelCollection").models),i&&(n=i.noHistoryEffect),n||(t=r.appApi.routerApi,t.navigate(s.PLUGIN_ID)),e.Util.isCEF()){if(this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.CLICKED]),this._isSelected&&_.isUndefined(this.options.parcelCollection))return this._renderForStartup(),this._getResolvedPromise();this.options.appApi.displayApi.applyUIThemeStyles(this.$el).then(_.bind(function(){_.delay(_.bind(function(){this.render()},this),0)},this))}if("desktop"===r.collectionsUiModel.get("mode")){if(this._pluginOptions||(this._pluginOptions={}),a.isCBView&&(this._pluginOptions.isCBView="true"==a.isCBView?!0:!1),a.isLaunchedFromShare&&(e.isLaunchedFromShare="true"==a.isLaunchedFromShare?!0:!1),a.workflowID&&(this._pluginOptions.workflowID=a.workflowID),a.requestAgent&&(this._pluginOptions.requestAgent=a.requestAgent),a.isUnaccepted&&(this._pluginOptions.isUnaccepted=a.isUnaccepted),a.workflowType&&(this._pluginOptions.workflowType=a.workflowType),a.bootstrap&&(this._pluginOptions.bootstrap=a.bootstrap),l.removeNetworkConnectivtyChangeCallback(this._onConnectionChanged),l.addNetworkConnectivtyChangeCallback(this._onConnectionChanged),r.appApi.networkConnectivityApi.isOnline())return r.appApi.sessionApi.isSignedInReader()?(this.$onSignedOut&&this.$onSignedOut.hide(),this.$offlineView&&this.$offlineView.hide(),r.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){return this._isSelected=!0,this._startPlugin()},this),_.bind(function(e){return r.appApi.displayApi.showSpinner(!1),this._isSelected=!0,this._startPlugin(),e&&"NoAccessToPdfServices"===e.errorString?(this._addAppApiCallbacks(),this._renderForStartup(),this._getResolvedPromise()):void(0===this.$el.children().length&&r.appApi.pluginsApi.handleServerOutageFailure())},this)),this._getResolvedPromise()):(this._isSelected=!0,this._addAppApiCallbacks(),this._renderForStartup(),this._getResolvedPromise());this.$onSignedOut&&this.$onSignedOut.hide(),this.$offlineView&&this.$offlineView.hide(),this._isSelected=!0;var c=this.options.appApi.usersMeApi.options.usersMeIdentityModel;return c.get("email")||this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("ReviewGetLoggedInUserInfo").done(_.bind(function(e){e?this.options.appApi.usersMeApi.options.usersMeIdentityModel.set("email",e):console.log("Offline Reviews : Couldn't Fetch Logged In User Ifno.")},this))},this)),this._startPlugin(),this._getResolvedPromise()}return this._isSelected=!0,this._startPlugin()},this),i),this._getResolvedPromise()},fetchFileListFromUSS:function(i,t){this.options.search_uri=i;var s=e.opFactory.create("USSReviewOp",_.extend(this.options)).run({});s.done(_.bind(function(i){this.response=i,this.response.request=t;var s=this.options;console.log(i),s.appApi.rnaApi.done(_.bind(function(){var i=e.opFactory.create("SendChunkDataToNative",s);i.run(JSON.stringify(this.response),"ReviewUSS")},this))},this)).fail(_.bind(function(i){if(this.options.appApi.inactivityApi.isIdle())this.options.appApi.inactivityApi.setIsActive();else{this.response=i,this.response.request=t;var s=this.options;console.log(i),s.appApi.rnaApi.done(_.bind(function(){var i=e.opFactory.create("SendChunkDataToNative",s);i.run(JSON.stringify(this.response),"ReviewUSS")},this))}},this))},getReviewFileList:function(i){this.options.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){if(""===i.search_uri){var t=e.opFactory.create("DCDiscoveryAPIOp",_.extend(this.options)).run({});t.always(_.bind(function(e){void 0!=e&&this.fetchFileListFromUSS(e.templates.search_uri,i.request)},this))}else this.fetchFileListFromUSS(i.search_uri,i.request)},this))},deselectPlugin:function(){e.Util.isCEF()&&$(".page-main-container").removeClass("sent-files-container"),e.PluginContentView.prototype.deselectPlugin.call(this),this._isSelected=!1},releasePlugin:function(){delete this._startingPluginPromise,e.PluginContentView.prototype.releasePlugin.call(this)},refreshCollaborators:function(){if("recent"==this._pluginOptions.requestAgent){var e=this.options.selectionUiModel.getSingleSelectedItemModel();e.set("collaborators",void 0),e.set("avatarsFetched",void 0),e.set("fetchPublicProfileInfoData",void 0)}},clickedOutsideAiCview:function(){if(e.Util.isCEF()){this.options.selectionUiModel.clearSelection();var i=this.$(".review-files-sort-menu");i.length>0&&"none"!==i.css("display")&&(i.hide(),this.$(".review-list-header-file-title").removeClass("selected"),this.$(".review-list-header-lastactivity-title").removeClass("selected"),this.$(".review-list-header-owner-title").removeClass("selected"))}return this._getResolvedPromise()},getSiteCatalystName:function(){return o.SENT_FILES},getAppApiVersion:function(){return void 0==Ac.Plugins.groups.send?"dev":Ac.Plugins.groups.send.FRAMEWORK_VERSION},getReviewAvatar:function(e){return s.opFactory.create("FetchingReviewParticipantOp",this.options).run(e,"asset-0",0)},getReviewIntroMessage:function(e){return s.opFactory.create("FetchIntroMessageOp",this.options).run(e)},_initWrappers:function(){this.$onSignedIn=this.$(".on-signed-in"),this.$onSignedOut=this.$(".on-signed-out"),this.$offlineView=this.$(".files-offline-view"),this.$noAccessView=this.$(".files-no-access-view"),this.$contextBoard=this.$(".context-board-view")},_renderChildViews:function(){var e=this.options.collectionsUiModel.get("mode");if("desktop"===e){if(this._pluginOptions&&this._pluginOptions.isCBView)return this._renderContextBoardView(),this.$offlineView.hide(),this.$onSignedIn.hide(),this.$onSignedOut.hide(),this.$noAccessView.hide(),void this.$contextBoard.show();this.$contextBoard.hide(),this.options.appApi.sessionApi.isSignedInReader()?this.options.appApi.networkConnectivityApi.isOnline()?this.options.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){this.$onSignedIn.show(),this.$onSignedOut.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedInView()},this),_.bind(function(e){e&&"NoAccessToPdfServices"===e.errorString&&(this.$noAccessView.show(),this.$onSignedIn.hide(),this.$onSignedOut.hide(),this.$offlineView.hide(),this._renderNoAccessView())},this)):(this.$noAccessView.hide(),this.$onSignedOut.hide(),this.options.parcelCollection.length>0?(this.$onSignedIn.show(),this.$offlineView.hide(),this._renderOnSignedInView()):(this.$onSignedIn.hide(),this.$offlineView.show(),this._renderOfflineView())):(this.$onSignedOut.show(),this.$onSignedOut.addClass("unselectable"),this.$onSignedIn.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedOutView())}else this.$onSignedIn.show(),this.$onSignedOut.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedInView()},_renderOnSignedInView:function(){this._renderChildView("_onSignedInView",s.OnSignedInView,this.$onSignedIn)},_renderOnSignedOutView:function(){this._renderChildView("_onSignedOutView",s.OnSignedOutView,this.$onSignedOut)},_renderOfflineView:function(){var e={workflowName:d.REVIEW_WORKFLOW_NAME};this._renderChildView("_filesOfflineView",i.FilesOfflineView,this.$offlineView,e)},_renderNoAccessView:function(){this._renderChildView("_filesNoAccessView",i.FilesNoAccessView,this.$noAccessView)},_renderContextBoardView:function(){var e=!1,i=!1,t=!0,o=!1,n=!1;this._pluginOptions&&"Tracking"==this._pluginOptions.requestAgent?(e=!1,o=this._pluginOptions.isUnaccepted):this._pluginOptions&&"recent"==this._pluginOptions.requestAgent?(e=!1,i=!1):this._pluginOptions&&"Document"==this._pluginOptions.requestAgent&&(n=!0,e=!0),this.$cbView=this._renderChildView("_sentFilesRhpView",s.ReviewFilesRhpView,this.$contextBoard,{hidePreview:e,showRemoveFromTracking:i,expandParticipantsAccodian:t,isUnaccepted:o,isDocView:n})},_whenSignedInFunction:function(){var e=this.options;this._requestWorkflowData({RefreshList:"SIGNIN"}),this.options.appApi.rnaApi.done(_.bind(function(e){e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:a.REVIEW,SortField:"none",SortOrder:"none",RefreshList:"SIGNIN"}}).done(_.bind(function(){},this))},this)),e.collectionsUiModel.initializeFromCohorts(e.appApi.usersMeApi.getUserCohorts())},_startPlugin:function(){var e=this._startingPluginPromise,i=this.options.collectionsUiModel.get("mode");return this._pluginOptions&&this._pluginOptions.isCBView?void this._renderForStartup():(e?("desktop"===i&&this.options.appApi.rnaApi.done(_.bind(function(e){e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:a.REVIEW,SortField:"none",SortOrder:"none",RefreshList:"START"}}).done(_.bind(function(){},this))},this)),this._renderForStartup()):(this._whenSignedInFunction(),e=this._startingPluginPromise=s.opFactory.create("StartingPluginOp",this.options).run().then(_.bind(function(){"desktop"===i&&this._addAppApiCallbacks(),this._renderForStartup()},this))),e)},_addAppApiCallbacks:function(){var e=(this.options,this.options.appApi),i=e.sessionApi;i.removeSignedInChangeCallback(this._onSignedInChange),i.addSignedInChangeCallback(this._onSignedInChange)},_onSignedInChange:function(e,i){i?this._isSelected&&(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):($(".page-main-container").removeClass("sent-files-container"),this.options.selectionUiModel.clearSelection(),this.releasePlugin(),this._renderForStartup(),this.options.participantAvatarMap={})},_onConnectionChanged:function(e,i){i?(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):($(".page-main-container").removeClass("sent-files-container"),this._renderForStartup())},_renderForStartup:function(){var i=this.options.selectionUiModel;e.Util.isCEF()||i.clearSelection(),this.render(),this.options.appApi.displayApi.showSpinner(!1)},_processRouterArgs:function(){var e,i,t,o=s.selector.routerArgs,n=this.options,r=$.Deferred();return o?(e=o.parcelID,this._startingPluginPromise.then(_.bind(function(){var o;t=n.appApi.baseFilesUrisApi.getSendApiUri(),t=l.extractRootUrl(t),i=new s.ParcelModel({parcel_id:e},{rootUrl:t}),i.fetch().then(_.bind(function(e){o=_.extend({},n,{},{parcelModel:e})},this,i))},this))):r.resolve(),delete s.selector.routerArgs,r.promise()},_changeModeToDesktop:function(){var e=this.options,i=e.collectionsUiModel.get("mode");"web"===i&&e.collectionsUiModel.set("mode","desktop")},_onModeChange:function(){var e=this.options,i=e.collectionsUiModel,t=e.selectionUiModel,s=i.get("mode");"desktop"===s?(i.set("checkbox",!1),t.set("multiple_selection",!0)):"web"===s&&(i.set("checkbox",!0),t.set("multiple_selection",!0))},_onViewEvent:function(i,t){"ParcelPreview_Close"===i&&this._renderChildViews(),e.View.prototype._onViewEvent.call(this,i,t)},_setContextBoardModel:function(e,i){if(i||(i=0),this.$cbView&&e.model){_.extend(this._pluginOptions,e.pluginOptions);var t=!1,s=!1,o=!0,n=!1;"Tracking"==this._pluginOptions.requestAgent?n=this._pluginOptions.isUnaccepted:"recent"==this._pluginOptions.requestAgent?s=!1:t=!0;var r={hidePreview:t,showRemoveFromTracking:s,expandParticipantsAccodian:o,isUnaccepted:n};_.extend(this.$cbView.options,r),_.each(this.$cbView.getChildViews(),function(e){_.extend(e.options,r)}),this.options.selectionUiModel.clearSelection(),this.options.selectionUiModel.updateSelectedItemModel(e.model,!1),this.$cbView._setModel(e.model,!0)}else 3>i&&setTimeout(this._setContextBoardModel,100,e,i+1)},_refreshUI:function(){this.options.isInSearchResultsView||this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaFileAPI.getWorkflowData(a.REVIEW).done(_.bind(function(e){if(e){if((!this._pluginOptions||"recent"!=this._pluginOptions.requestAgent)&&this._workflowData&&JSON.stringify(e)===JSON.stringify(this._workflowData))return;this._workflowData=e,this._workflow_status_code!=e.status_code&&(this._workflow_status_code=e.status_code,200!=this._workflow_status_code&&this.options.appApi.pluginsApi.isPluginSelected(this.options.pluginId)&&!this.options.appApi.pluginsApi.isNativeViewSelected()&&this.options.appApi.networkConnectivityApi.isOnline()&&this.options.parcelCollection.length&&this.options.appApi.errorApi.enqueueAjaxError({status:e.status_code,responseText:e.status_message})),this.options.parcelCollection.reset(void 0,{silent:!0}),this.options.parcelCollection.pushData(e),this.options.collectionsUiModel.set("sort_key",e.sortBy),this.options.collectionsUiModel.set("sort_order",e.sortOrder),this.render()}},this))},this))},_ClickUnshareButton:function(i){var t=this.options,s={};s.Title=c.CONFIRM_UNSHARE_TITLE,s.Message=c.CONFIRM_UNSHARE_MSG,s.ActionButtonName=c.CONFIRM_UNSHARE_BUTTON,s.RejectButtonName=c.CANCEL,s.Source="Unshare",t.appApi.rnaApi.done(_.bind(function(t){t._reviewAPI.invoke("EurekaAlertDialog",s).done(_.bind(function(s){if(t.logPerformance("UnshareFile","start"),"false"===s)this.options.selectionUiModel.trigger("enableUnshareReviewAction");else{if(this.options.appApi.rnaApi.done(function(e){e.logPerformance("UnshareReviewFile","start")}),this.options.isDocView=s.isDocView,s.isDocView)_.isUndefined(i.isOriginalShared)&&(i.isOriginalShared=s.isOriginalShared),i.isOriginalShared?((_.isUndefined(i.commentingUrn)||""===i.commentingUrn)&&(i.commentingUrn=s.commentingUrn),this.options.commenting_uri=_.isUndefined(i.commentingUrn)||""===i.commentingUrn?"false":s.commentingBaseUri+i.commentingUrn):this.options.commenting_uri="false";else{if(_.isUndefined(i.isOriginalShared)||i.isOriginalShared&&_.isUndefined(i.commentingUrn))return;_.isUndefined(i.isOriginalShared)||i.isOriginalShared||(this.options.commenting_uri="false"),_.isUndefined(i.isOriginalShared)||!i.isOriginalShared||_.isUndefined(i.commentingUrn)||(this.options.commenting_uri=s.commentingBaseUri+i.commentingUrn)}e.opFactory.create("UnshareReviewOp",this.options).run(i.ParcelId).then(_.bind(function(){try{t._reviewAPI.invoke("EurekaReviewRefreshAppModel",i);var e="Unshare";void 0!==i.isOriginalShared&&i.isOriginalShared&&(e+=p.VIRGO_ORIGINAL_SHARE),t._reviewAPI.invoke("logEurekaEventAndDataGroup",["Eureka:Review success","Success",e,"EurekaActions",i.ParcelId,i.role])}catch(o){}t._reviewAPI.invoke("unshareReview",[i.ParcelId,i.workflowType,i.isOriginalShared]),this.showToastForReviewAction(d.UNSHARED_STRING);var n=i.workflowType;this._UpdateFileList(n);var r={};r.InvitationId=i.InvitationId,r.ParcelId=i.ParcelId,r.Unshare=!0,i.AssetId&&(r.assetId=i.AssetId,r.sharedStatus=!1),s.isDocView?t._reviewAPI.invoke("AVEurekaDocClose",r):t._reviewAPI.invoke("AVCloseUnsharedDoc",r),this.options.selectionUiModel.trigger("unshareReviewEvent"),this.options.appApi.rnaApi.done(function(e){e.logPerformance("UnshareFile","end")})},this),_.bind(function(){this.options.selectionUiModel.trigger("enableUnshareReviewAction"),this.options.appApi.rnaApi.done(function(e){e.logPerformance("UnshareFile","end")})},this))}},this))},this))},_ClickDeleteButton:function(e){var i=this.options,t={},o={};e.status&&e.status.toLowerCase()==a.UNSHARED_STRING.toLowerCase()?(t.Title=c.CONFIRM_DELETE_FILE_TITLE,t.Message=c.CONFIRM_DELETE_MSG_ONE_ITEM,e.filename&&(t.Message=_.template(c.CONFIRM_DELETE_FILE_MSG,{filename:e.filename})),t.ActionButtonName=c.CONFIRM_DELETE_FILE_BUTTON):void 0!==e.isOriginalShared&&e.isOriginalShared?(t.Title=c.CONFIRM_DELETE_SHARED_FILE_TITLE_NO_COPY_MODEL,t.Message=c.CONFIRM_DELETE_SHARED_FILE_MSG_NO_COPY_MODEL,t.ActionButtonName=c.CONFIRM_DELETE_SHARED_FILE_BUTTON_NO_COPY_MODEL):(t.Title=c.CONFIRM_DELETE_SHARED_FILE_TITLE_COPY_MODEL,t.Message=c.CONFIRM_DELETE_SHARED_FILE_MSG_COPY_MODEL,t.ActionButtonName=c.CONFIRM_DELETE_SHARED_FILE_BUTTON_COPY_MODEL),t.RejectButtonName=d.CANCEL_ACTION_BUTTON,t.Source="Delete",o.InvitationId=e.InvitationId,i.appApi.rnaApi.done(_.bind(function(i){i._reviewAPI.invoke("EurekaAlertDialog",t).done(_.bind(function(t){t===!0&&s.opFactory.create("DeletingReviewOp",this.options).run(e.ParcelId).then(_.bind(function(){try{var t="Delete";void 0!==e.isOriginalShared&&e.isOriginalShared&&(t+=p.VIRGO_ORIGINAL_SHARE),t+=" Review",i._reviewAPI.invoke("logEurekaEventAndDataGroup",["Eureka:Review success","Success",t,"EurekaActions",e.ParcelId,e.role])}catch(s){}i._reviewAPI.invoke("deleteReview",[e.ParcelId,e.InvitationId,e.workflowType]),this.showToastForReviewAction(d.DELETED_STRING);var n={};n.workflowType=e.workflowType,n.RefreshList="SBY",this._RefreshDataModel(n),i._reviewAPI.invoke("AVEurekaDocClose",o),this.options.selectionUiModel.trigger("deleteReviewEvent"),i._reviewAPI.invoke("DeleteEurekaCache",o)},this))},this))},this))},_ClickRemoveMeButton:function(e){var i=this.options,t={},o={};t.Message=d.REMOVE_ME_MESSAGE,t.ActionButtonName=d.REMOVEME_ACTION_BUTTON,t.RejectButtonName=d.CANCEL_ACTION_BUTTON,t.Source="RemoveMe",o.InvitationId=e.InvitationId,i.appApi.rnaApi.done(_.bind(function(i){i._reviewAPI.invoke("EurekaAlertDialog",t).done(_.bind(function(t){t===!0&&s.opFactory.create("RemoveMeOp",this.options).run(e.InvitationId).then(_.bind(function(){try{i._reviewAPI.invoke("logEurekaEventAndDataGroup",["Eureka:Manage","Use","Remove me","EurekaActions",e.ParcelId,e.role])}catch(t){}i._reviewAPI.invoke("removeMe",[e.InvitationId,e.workflowType]),this.showToastForReviewAction(d.REMOVEME_STRING);var s={};s.workflowType=e.workflowType,s.RefreshList="SBO",this._RefreshDataModel(s),i._reviewAPI.invoke("AVEurekaDocClose",o),this.options.selectionUiModel.trigger("removeMeReviewEvent")},this))},this))},this))},_ClickReportAbuseButton:function(i){var t=e.getDocumentCloudBaseUrl()+"link/reportabuse/review?uri="+i.InvitationUrn;this.options.appApi.rnaApi.done(_.bind(function(e){e.openDecoratedUrl(t)},this))},_getParticipantsList:function(e){var i=$.Deferred();return s.opFactory.create("FetchingReviewParticipantOp",this.options).run(e.ReviewId).done(_.bind(function(e){i.resolve(e)},this)).fail(_.bind(function(e){i.reject(e)},this)),i},_getThumbnailForReview:function(e){var i=$.Deferred();return void 0===e.ThumbnailType&&(e.ThumbnailType=h.TILE),s.opFactory.create("FetchingThumbnailForReviewOp",this.options).run(e.InvitationId,"asset-0",0,e.ThumbnailType,e.NeedIDInResponse,e.ItemID).done(_.bind(function(e){i.resolve(e)},this)).fail(_.bind(function(e){i.reject(e)},this)),i},_CopyReviewLink:function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.cefBrowserApi({methodName:"handleViewEvent",parameters:["CopyEvent",{}]})},this))},_UpdateFileList:function(e){this.options.isInSearchResultsView?this.options.searchUiModel.trigger("refresh_search_category","review"):this.options.appApi.rnaApi.done(_.bind(function(i){var t={WorkflowType:e,SortField:"none",SortOrder:"none"};i.fileApi({methodName:"updateFileList",methodArgs:t}).done(_.bind(function(){},this))},this))},_RefreshACPUSSData:function(e,i){var t={WorkflowType:"Creative_Cloud",ServiceType:u.Recents_k,SortField:"none",SortOrder:"none",RefreshList:e};i.fileApi({methodName:"requestWorkflowData",methodArgs:t}).done(_.bind(function(){},this));var s={WorkflowType:"Creative_Cloud",ServiceType:u.Favorites_k,SortField:"none",SortOrder:"none",RefreshList:e};i.fileApi({methodName:"requestWorkflowData",methodArgs:s}).done(_.bind(function(){},this))},_RefreshSCReviewUSSData:function(e,i){i.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:a.REVIEW,SortField:"none",SortOrder:"none",RefreshList:e}}).done(_.bind(function(){},this))},_RefreshDataModel:function(e){this.options.isInSearchResultsView?this.options.searchUiModel.trigger("refresh_search_category","review"):this.options.appApi.rnaApi.done(_.bind(function(i){var t="";e.RefreshList&&(t=e.RefreshList),e.workflowType&&""!=e.workflowType?e.workflowType==a.CREATIVE_CLOUD?this._RefreshACPUSSData(t,i):this._RefreshSCReviewUSSData(t,i):(this._RefreshACPUSSData(t,i),this._RefreshSCReviewUSSData(t,i))},this))},showToastForReviewAction:function(i){this.options.toastArgumentString=i,this.options.FadeOutTime=3e3;var t=this.$el;this.$toastPlaceholderDIV=t.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),t.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options})},showToastForReviewActionNoIcon:function(i){if(!_.isUndefined(i)&&!_.isUndefined(i.argsString)){this.options.toastArgumentString=i.argsString,this.options.FadeOutTime=3e3,i.fadeTimeout&&(this.options.FadeOutTime=i.fadeTimeout);var t=this.$el;this.$toastPlaceholderDIV=t.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),t.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options});var s=t.find(".toast-icon");s&&(s.hide(),this._rhpToast.$toastAction.css("display","block"))}}}),s.HomeViewView}),define("acplugins/reviews/js/review",["acplugins/reviews/js/ac-review","acplugins/reviews/js/ops/op-factory","acplugins/reviews/js/views/review-home-view-view"],function(e){_.extend(e,{init:function(){e.opFactory=new e.OpFactory}})}),define("acplugins/reviews/js/plugin",["acplugins/reviews/js/ac-review","acplugins/reviews/js/review"],function(e){e.init()});