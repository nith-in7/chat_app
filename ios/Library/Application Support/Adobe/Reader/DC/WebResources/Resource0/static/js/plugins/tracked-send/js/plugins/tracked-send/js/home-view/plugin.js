/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2012 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2015 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2018 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property laws,
* including trade secret and or copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2014 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by all applicable intellectual property
* laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2013 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

/************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
* Copyright 2022 Adobe
* All Rights Reserved.
*
* NOTICE: All information contained herein is, and remains
* the property of Adobe and its suppliers, if any. The intellectual
* and technical concepts contained herein are proprietary to Adobe
* and its suppliers and are protected by all applicable intellectual
* property laws, including trade secret and copyright laws.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe.
*************************************************************************
*/

/*************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2020 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and may be covered by U.S. and Foreign Patents,
* patents in process, and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/

define("acplugins/tracked-send/js/home-view/ac-tracked-send",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var t=e.TrackedSend.Home;return t||(t=e.TrackedSend.Home={}),t.CachedData={},t.PLUGIN_ID||(t.PLUGIN_ID="sentfiles"),t}),define("acplugins/tracked-send/js/home-view/models/ui/collections-ui-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/workflow-status-strings","core/models/ui/ui-model"],function(e,t){var i="list",s="thumbnail";return t.CollectionsUiModel=e.UiModel.extend({recognized:{checkbox:{type:"boolean",optional:!1},data_render_delay:{type:"number",optional:!1},scroll_duration:{type:"number",optional:!1},scroll_id_into_view:{type:"string",optional:!0},scroll_render_delay:{type:"number",optional:!1},scroll_listen_delay:{type:"number",optional:!1},view:{type:"string",optional:!1,choices:[i,s]},folders_only:{type:"boolean",optional:!1},filter_by_extension:{type:"array",optional:!1},mode:{type:"string",optional:!1,choices:["desktop","web"]},itemClickAction:{type:"string",optional:!1,choices:["open","select"]},itemDblClickAction:{type:"string",optional:!1,choices:["preview","open"]},single_multi_view:{type:"string",optional:!1,choices:["single","multi"]},show_empty:{type:"boolean",optional:!1},index_last_selected:{type:"number",optional:!1},sort_key:{type:"string",optional:!1},sort_order:{type:"string",optional:!1},user_role:{type:"string",optional:!1}},defaults:{checkbox:!0,data_render_delay:10,scroll_duration:250,scroll_render_delay:250,scroll_listen_delay:250,view:i,folders_only:!1,filter_by_extension:[],mode:"web",itemClickAction:"select",itemDblClickAction:"open",single_multi_view:"single",show_empty:!1,index_last_selected:-1,sort_key:"",sort_order:"",user_role:""},initializeFromCohorts:function(e){e&&e["ts-a12-ui"]&&this.set({mode:"enabled"===e["ts-a12-ui"]?"desktop":"web"})},isListView:function(){return this.get("view")===i},isThumbnailView:function(){return this.get("view")===s}},{VIEW_LIST:i,VIEW_THUMBNAIL:s}),t.CollectionsUiModel}),define("acplugins/tracked-send/js/home-view/models/parcel-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/models/model"],function(e,t,i){return t.ParcelModel=e.Model.extend({initialize:function(t,i){e.Model.prototype.initialize.call(this,t,i),this.rootUrl="",this.idAttribute="parcel_id",i.collection&&(this.rootUrl=i.collection.rootUrl),i.rootUrl&&(this.rootUrl=i.rootUrl)},url:function(){var e=this.id;return this.rootUrl+"/a/api/parcels/"+encodeURIComponent(e)},getRenditionUrl:function(e,t,s){var o=Ac.baseFilesUrisModel.getRenditionUri()+"assets/"+encodeURIComponent(e)+"/"+t;return o+="?"+i.getClientIdQueryParam(),s&&(o+="&page="+s),o},idAttribute:"parcel_id",parse:function(e){return e.parcels?e.parcels[0]:e},getRecipients:function(){var e,t=this.get("invitations");return e=_.map(t,function(e){return e.recipient_email})},getViews:function(){return this.get("events").filter(function(e){return"parcel_view"===e.event_type})},isActive:function(){return this.get("is_active")},getNumHits:function(){var e=this.countEventTypes();return e.parcel_view||0},countEventTypes:function(){var e;return e=_.reduce(this.get("invitations"),function(e,t){var i=t.event_counts;return i&&(e=_.reduce(i,function(e,t,i){return e.hasOwnProperty(i)||(e[i]=0),e[i]+=t,e},e)),e},{})},getSingleFileInfo:function(){var e=this.get("resources");return e&&1===e.length?e[0]:void 0},getSingleFileId:function(){var e=this.getSingleFileInfo();return e?e.asset_id:void 0},isSingleFileNotPreviewable:function(){var e,t=this.getSingleFileInfo();return t?(e=t.content_type,"application/zip"===e):!1}}),t.ParcelModel}),define("acplugins/tracked-send/js/home-view/collections/parcel-collection",["acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","acplugins/tracked-send/js/home-view/models/parcel-model"],function(e,t){e.ParcelCollection=Backbone.Collection.extend({initialize:function(e,t){Backbone.Collection.prototype.initialize.call(this,e,t),this.rootUrl=t.rootUrl,this.sortAscending=!1,this.sortField="date_sent"},model:e.ParcelModel,setSortField:function(e,t){this.sortField=e,this.sortAscending=t},comparator:function(e,t){var i,s,o,n=e.get(this.sortField),r=t.get(this.sortField);return i=this.sortAscending?n:r,s=this.sortAscending?r:n,o=i===s?0:s>i?-1:1},url:function(){return this.rootUrl+"/a/api/parcels"},fetch:function(e){return e=t.customizeOptions("GET",e),e.data=_.extend({},{max:1e3},e.data),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){this.folder=e.folder;for(var t=e.parcels,i=[],s=0;s<t.length;s++){var o=t[s];o&&null==o.review&&i.push(o)}return i}})}),define("acplugins/tracked-send/js/home-view/ops/plugin/listening-for-parcel-updates-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op","core/views/view-events"],function(e,t){t.ListeningForParcelUpdatesOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this)},run:function(){return this.options.appApi.notificationApi.addFolderNotificationCallback(this._getFolder(),_.bind(function(e){e.fetch()},this,this.options.parcelCollection)),this._getResolvedPromise()},_getFolder:function(){return this.options.parcelCollection.folder}})}),define("acplugins/tracked-send/js/home-view/ops/plugin/starting-plugin-op",["core/ac-core","files/ac-files","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/models/ui/collections-ui-model","acplugins/tracked-send/js/home-view/collections/parcel-collection","acplugins/tracked-send/js/home-view/ops/plugin/listening-for-parcel-updates-op","core/ops/op"],function(e,t,i){var s,o;i.StartingPluginOp=e.Op.extend({run:function(){void 0!=s||"sentfiles"!==this.options.pluginId&&"sentfiles_search"!==this.options.pluginId||(s=!0),void 0!=o||"receivedfiles"!==this.options.pluginId&&"reviews_search"!==this.options.pluginId||(o=!0);{var t,n,r,a,l,d=this.options;e.modelFactory,e.uiModelFactory}return t=i.opFactory,r=t.create("GettingParcelsOp",d),l=t.create("ListeningForParcelUpdatesOp",d),(s===!0||o===!0)&&(s&&(s=!1),o&&(o=!1),a=i.opFactory.create("ListeningForViewEventsOp",d),$.when(a.run())),n=t.create("ShowingSignInOp",d),n.run().then(function(){return r.run()},function(){})}})}),define("acplugins/tracked-send/js/home-view/views/view-events",["acplugins/tracked-send/js/home-view/ac-tracked-send"],function(e){e.ViewEvents={DELETE:"ts:delete",DOWNLOAD_PARCEL_ASSETS:"ts:download",UNSHARE:"ts:unshare",TRACK:"ts:track",OPENBROWSER:"ts:openbrowser",SHOW_SINGLE_ASSET:"ts:show_single_asset",FORWARD:"ts:forward",SAVEAS_SINGLE_ASSET:"ts:saveas_single_asset",GET_RHP_PREVIEW_METADATA:"ts:get_rhp_preview_metadata"}}),define("acplugins/tracked-send/js/home-view/ops/plugin/listening-for-view-events-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op","acplugins/tracked-send/js/home-view/views/view-events","core/views/view-events"],function(e,t){t.ListeningForViewEventsOp=e.Op.extend({initialize:function(){e.Op.prototype.initialize.call(this),this._initEventMap()},run:function(){return this.options.rootView.on("all",this._onViewEvent),this._deferred=$.Deferred(),this._deferred.promise()},_onViewEvent:function(e,t){var i,s,o,n;i=this._eventMap[e],i&&(s=i[0].create(i[1],t)),s&&(o=s.options,o&&(n=o.parentDeferred),s.run().then(function(){n&&n.resolve()},function(){n&&n.reject()}))},_mapEvent:function(e,t,i,s,o){e[t]=[i,s,o]},_initEventMap:function(){var i,s,o,n,r,a;i=this._eventMap={},s=this._mapEvent,o=e.opFactory,n=t.opFactory,r=e.ViewEvents,a=t.ViewEvents,s(i,r.SELECT_ITEM,n,"SelectingCollectionItemOp"),s(i,r.CLEAR_SELECTION,o,"ClearingSelectionOp"),s(i,a.DELETE,n,"DeletingParcelIfConfirmedOp"),s(i,a.DOWNLOAD_PARCEL_ASSETS,n,"DownloadingParcelAssetsOp"),s(i,r.DOWNLOAD,o,"DownloadingAssetIfExistsOp"),s(i,a.UNSHARE,n,"UnsharingParcelIfConfirmedOp"),s(i,a.TRACK,n,"ShowingParcelPreviewOp"),s(i,a.OPENBROWSER,n,"DesktopShowInBrowserOp"),s(i,a.SHOW_SINGLE_ASSET,n,"ShowingSingleAssetOp"),s(i,a.FORWARD,n,"ForwardingParcelOp"),s(i,a.SAVEAS_SINGLE_ASSET,n,"SaveAsSingleAssetOp"),s(i,a.GET_RHP_PREVIEW_METADATA,n,"GettingRhpPreviewMetadataOp")}})}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-parcels-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/collections/parcel-collection","core/ops/op"],function(e,t){t.GettingParcelsOp=e.Op.extend({run:function(){var e,t,i=this.options;return e=i.parcelCollection,t=e.fetch()}})}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-rhp-preview-metadata-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,t){return t.GettingRhpPreviewMetadataOp=e.Op.extend({run:function(){function t(){var e=d.get("item_model");return e?e.getSingleFileId():void 0}function i(){return n===t()}function s(e){return l.getConnectorsUiHelpers(l.getConnectorName(e))}function o(e){return c.create("GettingFolderPathOp",a).run(e).then(function(e){i()&&(r=e.path,d.set("file_path",r),d.set("connector_info",s(r[0].id)))})}var n,r,a=this.options,l=a.appApi.connectorsApi,d=a.rhpPreviewUiModel,c=e.opFactory;return n=t(),n?c.create("GettingAssetMetadataOp",a).run(n).then(function(e){return i()?(d.set({item_info:e,page_count:e.page_count}),o(e.parent_id)):void 0},function(e){404===e.status&&d.set("item_not_found",!0)}):this._getRejectedPromise()}}),t.GettingRhpPreviewMetadataOp}),define("acplugins/tracked-send/js/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0,"da-dk":!0,"fi-fi":!0,"nb-no":!0,"nl-nl":!0,"pt-br":!0,"sv-se":!0,"zh-cn":!0,"zh-tw":!0,"ko-kr":!0,"cs-cz":!0,"hu-hu":!0,"pl-pl":!0,"ru-ru":!0,"uk-ua":!0,"tr-tr":!0,"sk-sk":!0,"sl-si":!0,"bg-bg":!0}),define("acplugins/tracked-send/js/nls/root/ui-strings",{SELECTOR_LABEL:"For Viewing",SELECTOR_LABEL_WEB:"Sent",TOOL_LABEL:"Send",SEND_TRACK_LABEL:"Shared For Viewing",TYPE:"Type",ADDED_DATE:"Added",MODIFIED_DATE:"Modified",PAGES:"Pages",SIZE:"Size",SENDER_NAME:"Sent By",SENT_DATE:"Date Sent",REPORT_ABUSE:"Report Abuse",UNKNOWN:"Unknown",EXTENSION:"(.<%- ext %>)",DOWNLOAD:"Download",DOWNLOAD_ALL:"Download All",REPLY:"Reply",FORWARD:"Forward",NOTIFY_ME_WHEN_VIEWED:"Notify when recipients viewed",UNSHARE:"Unshare",UNSHARED:"Unshared",VIEWED_BY:"Viewed By",VIEW_FULL_ACTIVITY:"View Full Activity",EMAIL_REPLY_FORMAT:"Re: <%= emailSubject %>",OPEN:"Open",SAVEAS:"Save As",TRACK:"Track Online",OPEN_LINK:"(Open Link)",MESSAGE_HEADING:"Message",REMOVE:"Remove",DELETE:"Delete",SHARED_FILES:"Sent Files",SUBJECT:"Subject",SENT_TO:"Sent To",DATE_SENT:"Date Sent",VIEWS:"Views",PARCEL_PUBLIC_SHARING:"Anonymous",EXPAND:"Expand",COLLAPSE:"Collapse",SELECT_ALL:"Select All",NUMBER_OF_VIEWS:"Number of Views",GO_TO_ADOBE_SEND_WEBSITE:"Go To Adobe Send Website",GO_TO_ADOBE_S_T_WEBSITE:"Manage Documents Sent for Signature",DATE_VIEWED:"Date Viewed",CONFIRM_UNSHARE_TITLE:"Unshare File",CONFIRM_UNSHARE_MSG_ONE_ITEM:"If you unshare this file, people won’t be able to access it anymore. You can share it again later.",CONFIRM_UNSHARE_MSG_N_ITEMS:"If you unshare this file, people won’t be able to access it anymore. You can share it again later.",CONFIRM_UNSHARE_MSG:"Are you sure? We will remove the link to this document from your account.",Unshare_checkbox:"Delete shared file from Document Cloud",CONFIRM_REMOVE_TITLE:"Delete shared file",CONFIRM_REMOVE_BUTTON:"Delete file",CONFIRM_REMOVE_MSG_ONE_ITEM:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",CONFIRM_REMOVE_MSG_N_ITEMS:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",CONFIRM_DELETE_MSG_ONE_ITEM:"Deleting this shared file will permanently remove it from Document Cloud. This can’t be undone.",NO_FILES_TITLE:"No Files",NO_FILES_MESSAGE:"There are no files available to download. The files may have been deleted.",SHARE_TITLE:"Send Files",SHARE_WELCOME:"Send and track large files online.",SHARE_WELCOME_DESKTOP:"The fast, easy way to share and monitor files.",SHARE_SELECT_FILES:"Select Files to Send",SHARE_VIEW_SHARED_FILES:"View All Sent Files",READER_FILESELECT_WINDOW_TITLE:"Select Files",READER_FILESELECT_CONTINUE_BUTTON:"Continue",ALL_SUPPORTED_FILES:"All supported files",CHOOSE_FILES:"Choose Files",ALL_SUPPORTED_FILES:"All supported files",FILE:"file",FILES:"files",UPLOADING_TO_SEND:"Uploading to Adobe Document Cloud...",SELECTED_FILES:"Selected Files",ADD_MORE_FILES:"Add Files",SHARE_WITH_HEADING:"Send To",SHARE_ADDRESS_BOOK:"Address Book",SHARE_CHOICE_WORLD:"Create Anonymous Link",SHARE_CHIOCE_WORLD_EXPLAIN:"(with basic usage information)",SHARE_CHOICE_INDIVIDUAL:"Send Personalized Invitations",SHARE_CHOICE_INDIVIDUAL_EXPLAIN:"(with detailed tracking)",SHARE_CHOICE_ALLOW_COMMENTS:"Allow Comments",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE:"Add Your Logo & Color",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE_EDIT:"Edit",SHARE_ADDRESS_HEADING:"Recipient Email Addresses",SHARE_ADDRESS_PROMPT:"Enter recipient email addresses",SHARE_SUBJECT_MSG_HEADING:"Subject & Message",SHARE_INITIAL_SUBJECT:"Shared Files",SHARE_AV_ERROR:"Audio/video files are not supported for sending, and have been omitted from your selection.",SHARE_AV_UPGRADE_MESSAGE:" Upgrade to be able to send audio/video files.",SHARE_FORMS_ERROR:"Form files are not currently supported for sending. Go to Fill & Sign to find and download the form.",SHARE_FORMS_ERROR_DESKTOP:"This file type is currently not supported and has been omitted from your selection.",SHARE_AV_FORMS_ERROR:"Audio/video and form files are not supported for sending, and have been omitted from your selection.",SHARE_OVER_LIMIT_APPEND_ERROR:"<br/><br/>Additionally, you selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_ERROR:"You selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_TITLE:"Too many files.",SHARE_NON_NATIVE_APPEND_ERROR:"<br/><br/>Additionally, your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR:"Send & Track is currently not supported for files stored in <%= connectorLabel %>. To send files from <%= connectorLabel %>, save them to your computer first.",SHARE_NON_NATIVE_ERROR_DEFAULT:"Your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR_HEADING:"Unsupported File Storage",SHARE_MESSAGE_HEADING:"Message",SHARE_MESSAGE_PROMPT:"I have shared some files with you. Please click on the link to view and download them.",SHARE_BUTTON:"Send",SHARE_BUTTON_LINK:"Create Link",SHARE_CANCEL:"Cancel",SHARE_EMAIL_INVALID_PLURAL:"The following email addresses are invalid:",SHARE_EMAIL_INVALID_SINGULAR:"The following email address is invalid:",SHARE_ERROR_SEND_LIMIT_EXCEEDED_TITLE:"Not sent",SHARE_ERROR_SEND_LIMIT_EXCEEDED:"The number of recipients you have selected exceeds your recent limit. Reduce the number of recipients, or wait until later to try again.",SHARE_ERROR_UNSUPPORTED_SHARING_MIME_TYPE:"Audio/video files aren't supported.",SHARE_ERROR_RECIPIENTS_NOT_ALLOWED:"Please upgrade to send to individuals.",SHARE_ERROR_CANNOT_CONVERT_FORM:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_RESTRICTION:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_TIMEOUT:"Files could not be sent because the form file conversion to PDF timed out.",SHARE_INDIVIDUAL_HELP_WEB:"Note: Personalized links are unique to each recipient, but anyone the recipient shares those links with can access the documents.",SHARE_INDIVIDUAL_HELP:"Note: Personalized invitations are unique to each recipient, but anyone the recipient shares those invitations with can access the documents.",SHARE_UPLOAD_ERROR_TITLE:"Error uploading files",SHARE_UPLOAD_ERROR_MSG:"One or more files could not be uploaded. Please try again.",SHARE_NO_FILES_SELECTED:"There are currently no files selected.",SHARE_CLICK_TO_ADD_FILES:"Click the Add Files button to get started.",SHARE_RECIPIENT_PAGE_HEADLINE:"Recipient Page",SHARE_CHOICE_INCLUDE_MESSAGE:"Include Message Text",SHARE_CHOICE_RESPOND_BACK:"Include Reply-To",SHARE_REMOVE:"Remove",ADD_FILES_REJECTED_TITLE:"Invalid Filename Format",ADD_FILES_REJECTED_MESSAGE:"Files must have a file name extension or be a known file type to be sent. Please ensure that your filename includes a valid file extension.",SHARE_PUBLIC_LINK_HEADING_DESKTOP:"Distribute the anonymous link by:",SHARE_COPY_LINK_BUTTON:"Copy Link",SHARE_SUCCESS_SENT_LINK:"Go to Sent Files",SHARE_SUCCESS_SENT_LINK_FOOTER:"to view all previously sent files",READER_GO_URL:"http://www.adobe.com/go/sendpluginrdr_12_0_0",ACROBAT_GO_URL:"http://www.adobe.com/go/sendpluginacro_12_0_0",SEND_UPSELL_HEADLINE:"Upgrade To",SEND_UPSELL_HEADLINE_OLD:"Upgrade to:",SEND_UPSELL_POINT_1:"• Send large files, including documents and videos",SEND_UPSELL_POINT_2:"• Receive an email when files are viewed",SEND_UPSELL_POINT_3:"• Track downloads using an online dashboard",SEND_UPSELL_LATER:"Later",SEND_UPSELL_NOW:"Upgrade Now",SEND_UPSELL_LEARN_MORE:"Learn More",SEND_UPSELL_UPGRADE_REQUIRED:"Unsupported Files",SHARE_TOO_MANY_DLG_TITLE:"Too many email addresses",SHARE_TOO_MANU_DLG_MESSAGE:"You've entered <%=numRecipients%> email addresses, but you can only send to <%=maxRecipients%> at a time. Delete some addresses and try again.",SHARE_SUCCESS_DLG_TITLE:"Files Shared",SHARE_PUBLIC_LINK_HEADING:"Anonymous Link Generated",SHARE_EMAIL_LINK_BUTTON:"Email Link",SHARE_PUBLIC_LINK_MESSAGE:"Anyone with the link will access the files anonymously.",SHARE_PUBLIC_LINK_NO_COPY_OR_EMAIL_WARNING:"You have not yet copied or emailed the link. Are you sure you want to continue?",SHARE_PUBLIC_LINK_INSTRUCTIONS:"Copy the link below to email or share it with others. Anyone who uses the link will be able to access the files.",SHARE_INVITATIONS_HEADING:"Invitations Sent",SHARE_INVITATIONS_MESSAGE:"Each recipient will receive a link by email, and you will be notified when they follow the link.",SHARE_SUCCESS_CLOSE:"Close",SHARE_SUCCESS_CONTINUE:"Continue",SHARE_FILE_EMAIL_BODY:"I'm using Adobe Send. You can view my file by clicking on the link below:",SHARE_FILES_EMAIL_BODY:"I'm using Adobe Send. You can view my files by clicking on the link below:",S_T_FILE_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my file in Adobe Document Cloud by clicking on the link below:",S_T_FILES_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my files in Adobe Document Cloud by clicking on the link below:",SHARE_CLIPBOARD_MESSAGE:"Tip: Use Ctrl + C to copy",SHARE_CLIPBOARD_MESSAGE_MAC:"Tip: Use Cmd + C to copy",SHARE_CLIPBOARD_COPIED:"link is copied to clipboard",PARCEL_ACTIVITY_DOWNLOADED:"downloaded",PARCEL_ACTIVITY_PREVIEWED:"previewed",PARCEL_ACTIVITY_PUBLIC_VISITOR:"public link visitor",PARCEL_ACTIVITY_ALL_FILES:"All Files",PARCEL_ACTIVITY_ALL_FILES_PREVIEW:"All Files Preview Page",PARCEL_ACTIVITY_HEADING:"Activity for “<%= emailSubject %>”",PARCEL_ACTIVITY_RECIPIENT:"Recipient",PARCEL_ACTIVITY_ACTIVITY:"Activity",PARCEL_ACTIVITY_ITEM:"Item",PARCEL_ACTIVITY_DATE_VIEWED:"Date Viewed",PARCEL_ACTIVITY_CLOSE:"Close",CURRENTLY_SHARED_IN:"Sent To",SHARE_THIS_FILE:"Send this File",SHARE_THIS_FILE_AGAIN:"Send this File Again",SENT_FILES_HEADER_SEARCH_CONTROLS:"Search Controls",SENT_FILES_HEADER_REFRESH:"Refresh",SENT_FILES_NUM_FILES:"<%= numFiles %> files",NO_PARCELS_SEND_PROMPT:"There aren't any files here yet.",NO_PARCELS_SEND_SUBPROMPT:"Files you've sent or received for viewing will appear here.",NO_PARCELS_SEND_BTN:"Adobe Send",NO_PARCELS_S_T_BTN:"Learn about sending files for viewing",LEARN_MORE_ST_GO_URL:"http://www.adobe.com/go/LearnMoreSTEmpty",NO_SENT_PARCELS_REVIEW_SUBPROMPT:"Files that are shared by you will appear here.",NO_RECEIVED_PARCELS_REVIEW_SUBPROMPT:"Files that are shared by others will appear here.",SENT_LEARN_MORE:"Learn More",RECEIVED_LEARN_MORE:"Learn More",CTA_SHARE_A_FILE:"Share a file",NO_SHARED_FILE:"No shared files yet.",ON_SIGN_OUT_PROMPT:"Sign in to access shared files.",ON_SIGN_OUT_SUBPROMPT:"See and manage files you've sent or received for viewing.",SIGN_IN_BUTTON:"Sign In",ON_SIGN_OUT_SUBPROMPT_SENT_FILES:"See and manage files that are shared by you.",ON_SIGN_OUT_SUBPROMPT_RECEIVED_FILES:"See and manage files that are shared by others.",COULD_NOT_SEND:"Could not send",ENTERPRISE_USERS_ACCESS_ERROR:"You do not have access to this service. Please contact your IT Administrator to gain access, or try to sign in with an Adobe ID.",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_NOT_AVAILABLE:"Continue at Adobe Document Cloud",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your Color and Logo are currently only available online at the Adobe Send web site. Click "<%= buttonName %>" to go there now.',S_T_CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your logo and color are currently only available at Adobe Document Cloud. Click "<%= buttonName %>" to go there now.',CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_OK:"Continue",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_TITLE:"Add Your Logo & Color",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_DESCRIPTION:"Add your logo and choose a color to display on emails and recipient page.",CUSTOMIZE_RECIPIENT_PAGE_ADD_LOGO:"Add Logo",CUSTOMIZE_RECIPIENT_PAGE_REMOVE_LOGO:"Remove Logo",CUSTOMIZE_RECIPIENT_PAGE_CHOOSE_COLOR:"Choose Color",CUSTOMIZE_RECIPIENT_PAGE_SAVE:"Save",CUSTOMIZE_RECIPIENT_PAGE_CLOSE:"Cancel",CUSTOMIZE_RECIPIENT_PAGE_FILE_FILTERING_LABEL:"File Type is an image",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_TITLE:"Error",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_FORMAT:"The file you have chosen cannot be used as a logo. Please select another file. ",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_COLOR_FORMAT:"The color you have entered is invalid. Please enter a hex value like #FFFFFF or #FFF.",SURVEY_TITLE:"We are interested in your Feedback",SURVEY_LINK:"Tell Us What You Think",SURVEY_QUESTION_ONE:"Why are you using Send & Track today?",SURVEY_QUESTION_TWO:"Does it work well for you?",SURVEY_QUESTION_THREE:"Is it missing something you wanted?",SURVEY_SEND:"Send",SURVEY_CLOSE:"No Thanks",SURVEY_TEXTAREA_LIMITATION_LABEL:"characters remaining",INVALID_PARAMETER_SURVEY_MESSAGE:"Answer type not allowed",INVALID_PARAMETER_SURVEY_TITLE:"Invalid Parameter",SEND_RHP_TITLE:"Sent To",GENERIC_ARIA_LABEL_STRING:"<%= prefix %>. <%= suffix %>",ENTERPRISE_RESTRICTIONS_ENFORCED:"Enterprise Sharing Restrictions Enabled",ENTERPRISE_USERS_SHARING_ACCESS:"This feature isn't available because your organization has enabled sharing restrictions. ",NAME:"NAME",SENT_RECEIVED:"SENT/RECEIVED",OWNER:"SENDER",STATUS:"STATUS",SHARED:"Shared",YOU:"You",VIEWED:"viewed",VIEWED_CAPS:"Viewed",WAITING_FOR_YOU:"Waiting for you",OF:"of",ACTIVITY_VIEWED_BY:"Viewed by <%= participant %>",ACTIVITY_DOWNLOADED_BY:"Downloaded by <%= participant %>",ACTIVITY_ONE_DOWNLOADED_BY:"<%= file_name %> downloaded by <%= participant %>",ACTIVITY_CREATED_BY:"Created by <%= participant %>",ACTIVITY_DOCUMENT_CREATED_BY:"Document created by <%= participant %>",ACTIVITY_SENT_TO:"Sent to <%= participant %>",REMOVE_LINK_DC_TITLE:"Remove Link from Adobe's cloud storage",REMOVE_LINK_DC_CONTENT:"Removing this link will delete it from the list of items shared with you.",REMOVE_LINK_DC_BUTTON:"Remove Link",ASCENDING:"Ascending",DESCENDING:"Descending",SHARED_FILES_DOWNLOAD_TITLE:"Shared Files",SENT_FILES_HEADER:"Shared by you",RECEIVED_FILES_HEADER:"Shared by others",LAST_ACTIVITY:"LAST ACTIVITY",DATE_LAST_ACTIVITY:"Date Last Activity",SHARED_BY:"SHARED BY",SIZE:"SIZE",SHARING:"SHARING",DATE_SHARED:"DATE SHARED",DATE_SHARED_S:"Date Shared",FROM:"FROM",DUE_BY:"Due by"}),define("acplugins/tracked-send/js/home-view/ops/downloading/downloading-parcel-assets-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/rna/rna-notification-model","i18n!core/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/http-util","core/ops/op"],function(e,t,i,s,o,n){return t.DownloadingParcelAssetsOp=e.Op.extend({_updateNotificationData:function(e,t){var i=e.get("userData"),s={};try{s=JSON.parse(i)}catch(o){}t.downloadedFileSys&&(s.downloadedFileSys=t.downloadedFileSys),t.downloadedFilePath&&(s.downloadedFilePath=t.downloadedFilePath),t.downloadedFileName&&(s.downloadedFileName=t.downloadedFileName,s.fileName=t.downloadedFileName),e.invoke("setProperty",{operationType:"",userData:JSON.stringify(s)})},_onDownloadCompletion:function(e,t){this._updateNotificationData(e,t),e.invoke("setProperty",{operationType:"",state:i.NOTIFICATION_STATES.DOWNLOADED})},_onDownloadFailed:function(e,t){if(7!==t){var o={errorTitle:s.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!1};e.invoke("setProperty",{operationType:"",state:i.NOTIFICATION_STATES.FAILED,error:JSON.stringify(o)})}else this.options.appApi.rnaApi.done(_.bind(function(t){var i=t.notificationAPI.getNotificationList(),s=1==i.length;t.notificationAPI.removeNotification(e.get("notificationID")),s&&t.rnaServicesAPI.showServicesProgressWidget(!1,!1,"",!0)},this))},_onDownloadProgress:function(e,t){var s=this;t.progressObj&&t.progressObj._addEventListener("custom:downloadFinished",function(t,i){i.params&&0==i.params.errorCode?s._onDownloadCompletion(e,i.params):s._onDownloadFailed(e,i.params.errorCode)}),this._updateNotificationData(e,t),t.progressObj?e.invoke("setProperty",{operationType:i.NOTIFICATION_OPERATIONS.DOWNLOAD}):e.invoke("setProperty",{operationType:"",state:i.NOTIFICATION_STATES.DOWNLOADED})},_downloadFileAsZip:function(e,t){var i=this;return this.options.appApi.rnaApi.done(function(s){s.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0),s.assetApi({methodName:"downloadFile",methodArgs:e}).then(_.bind(function(e){0===e.errorCode?i._onDownloadProgress(t,e):i._onDownloadFailed(t,e.errorCode)},this))})},_downloadUnsharedParcels:function(t,r,a,l,d){var c=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"parcels/"+d+"/assets",h=n.getRequestHeaders("GET"),p=this.options.appApi.baseFilesUrisApi.getDownloadUri(),u=this,g="zip";$.ajax(c,{type:"GET",headers:h,dataType:"JSON"}).then(function(n){var r=n.assets,h=_.pluck(r,"id").join(";");if("all"!==a&&(h=a),"all"!==a&&l.length&&(g=l.split("."),g.length&&(g=g[g.length-1])),"zip"===g&&r.length){l=r[0].name;var m=l.split(".");m.length&&(l=m[0],g=1===r.length?m[m.length-1]:"zip",l+="."+g)}h&&u.options.appApi.downloadApi.getDownloadTicket(h).done(function(n){if(d){c="zip"===g?p+"archive/zip/"+h+"?dlticket="+n.download_ticket:p+"assets/"+h+"?dlticket="+n.download_ticket;var r=l.length?l:"binder.zip",a={assetId:"",urlString:c,fileExtension:g,fileName:l.length?l:"binder",fetchMetadata:!1},m={notificationHeading:o.SHARE_INITIAL_SUBJECT};m.fileName=r,m.fileExtn=e.Util.getExtension(r),m.showDownloadAll=!1,u.options.appApi.rnaApi.done(_.bind(function(e){e.notificationAPI.createNotification({operationType:i.NOTIFICATION_OPERATIONS.PROCESS,state:i.NOTIFICATION_STATES.IN_PROGRESS,userData:JSON.stringify(m),progress:0,description:"sent"}).done(_.bind(function(t){e.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0),setTimeout(function(){u._downloadFileAsZip(a,t)},750)},u))},u)),t&&t.set("masked",!1)}else dialogApi.displayTextAlert(dialogApi.SEVERITY_ERROR,o.NO_FILES_TITLE,o.NO_FILES_MESSAGE,s.CLOSE)})})},run:function(){var t,n,r,a,l,d,c=this.options,h=$.Deferred(),p=(c.appApi.baseFilesUrisApi.getDownloadUri(),c.appApi.dialogApi);t=c.selectionUiModel,n=t.getSingleSelectedItemModel(),l=c.parcelIdToDownload?c.parcelIdToDownload:this.options.rootView._getParcelId(n);var u,g=c.idToShow?c.idToShow:"all",m=c.status;u=c.parcelIdToDownload?c.invitationId:"sender"===n.attributes.send_track_info.user_role?"":n.getInvitationId();var v=this,w=c.fileName?c.fileName:"";if(a=t.get("selected_item_ui_models"),"UNSHARED"===m)this._downloadUnsharedParcels(r,a,g,w,l);else if(l){n&&n.isFile()&&(g="asset-0"),d=u.length?this.options.rootView._getSendUriTrimmed()+"track?invitation_id="+u+"&parcel_id="+l+"&file_id="+g:this.options.rootView._getSendUriTrimmed()+"track?parcel_id="+l+"&file_id="+g;var f,E="binder.zip",S="zip";n&&(f=n.getSingleResource()),f?(E=n.getSingleResource()[0].name,S=E.split("."),S.length&&(E=S[0],S=n.isFile()?S[S.length-1]:"zip",n.isFile()===!1&&n.get("aep_workflow_info").intro_subject.length&&(E=n.get("aep_workflow_info").intro_subject),E+="."+S)):(E=w,S=E.split("."),S.length&&(E=S[0],S=w.length?S[S.length-1]:"zip",E+="."+S));var I={assetId:"",urlString:d,fileExtension:S,assetType:"sntManaged",fileName:E,fetchMetadata:!1};if("all"!==g&&w.length){var A=w.split(".");A.length&&(A=A[A.length-1]),I={assetId:"",urlString:d,assetType:"sntManaged",fileExtension:A,fileName:w,fetchMetadata:!1},E=w}var C={notificationHeading:o.SHARE_INITIAL_SUBJECT};C.fileName=E,C.fileExtn=e.Util.getExtension(E),C.showDownloadAll=!1,c.appApi.rnaApi.done(_.bind(function(e){e.notificationAPI.createNotification({operationType:i.NOTIFICATION_OPERATIONS.PROCESS,state:i.NOTIFICATION_STATES.IN_PROGRESS,userData:JSON.stringify(C),progress:0,description:"sent"}).done(_.bind(function(t){e.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0),setTimeout(function(){v._downloadFileAsZip(I,t)},750)},v))},v)),r&&r.set("masked",!1)}else p.displayTextAlert(p.SEVERITY_ERROR,o.NO_FILES_TITLE,o.NO_FILES_MESSAGE,s.CLOSE);return h.promise()}}),t.DownloadingParcelAssetsOp}),define("acplugins/tracked-send/js/home-view/ops/downloading/saveas-single-asset-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/rna/rna-notification-model","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,t,i,s,o){var n="binder.zip";t.SaveAsSingleAssetOp=e.Op.extend({run:function(){var t,o,r,a=this.options,l=e.opFactory,d=a.idToSaveAs,c=a.nameToSaveAs,h={notificationHeading:s.SHARED_FILES};return d&&c||(t=a.selectionUiModel,o=t.getSingleSelectedItemModel(),o&&(r=o.get("resources"),r&&1===r.length&&(d=r[0].asset_id,c=r[0].name))),h.fileName=n,h.fileExtn=e.Util.getExtension(n),h.showDownloadAll=!1,l.create("GettingAssetMetadataOp",a).run(d).done(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.notificationAPI.createNotification({operationType:i.NOTIFICATION_OPERATIONS.PROCESS,state:i.NOTIFICATION_STATES.IN_PROGRESS,userData:JSON.stringify(h),progress:0,description:"sent"}).done(_.bind(function(t){e.rnaServicesAPI.showServicesProgressWidget(!0,!0,"busy",!0),this._downloadSingleFileAsZip(d,t).then(_.bind(function(e){this._onDownloadCompletion(t,e)},this),_.bind(function(e){this._onDownloadFailed(t,e)},this))},this))},this))},this)),this._getResolvedPromise()},_downloadSingleFileAsZip:function(t,i){var s=this.options,o=e.opFactory;return o.create("DownloadingZipStartOp",_.extend({},s,{id_list:t,numForms:0,fileName:n,notificationObj:i})).run()},_onDownloadCompletion:function(e,t){var s=e.get("userData"),o={};try{o=JSON.parse(s)}catch(n){}t.downloadedFileSys&&(o.downloadedFileSys=t.downloadedFileSys),t.downloadedFilePath&&(o.downloadedFilePath=t.downloadedFilePath),e.invoke("setProperty",{operationType:"",userData:JSON.stringify(o),state:i.NOTIFICATION_STATES.DOWNLOADED})},_onDownloadFailed:function(e,t){if(7!==t){var s={errorTitle:o.NOTIFICATION_DOWNLOAD_ERROR,errorBody:"",downloadError:!0,showRetry:!1};e.invoke("setProperty",{operationType:"",state:i.NOTIFICATION_STATES.FAILED,error:JSON.stringify(s)})}}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!core/nls/ui-strings","core/utils/http-util","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/sc-analytics","core/models/workflow-status-strings","core/ops/op"],function(e,t,i,s,o,n,r){t.DeletingParcelIfConfirmedOp=e.Op.extend({run:function(){var e,t,a,l,d,c,h=this.options,p=h.appApi.dialogApi;
e=h.selectionUiModel,c=e.getSingleSelectedItemModel(),t=e.getNumSelectedItems(),1===t?c.getWorkflowStatus()&&c.getWorkflowStatus().toLowerCase()==r.UNSHARED_STRING.toLowerCase()?(a=i.CONFIRM_DELETE_MSG_ONE_ITEM,c.getSingleFileInfo()&&c.getSingleFileInfo().name&&(a=_.template(i.CONFIRM_DELETE_FILE_MSG,{filename:c.getSingleFileInfo().name})),l=i.CONFIRM_DELETE_FILE_TITLE,d=i.CONFIRM_DELETE_FILE_BUTTON):void 0!==c.get("bootstrap")&&void 0!==c.get("bootstrap").is_original_shared&&c.get("bootstrap").is_original_shared?(a=i.CONFIRM_DELETE_SHARED_FILE_MSG_NO_COPY_MODEL,l=i.CONFIRM_DELETE_SHARED_FILE_TITLE_NO_COPY_MODEL,d=i.CONFIRM_DELETE_SHARED_FILE_BUTTON_NO_COPY_MODEL):(a=i.CONFIRM_DELETE_SHARED_FILE_MSG_COPY_MODEL,l=i.CONFIRM_DELETE_SHARED_FILE_TITLE_COPY_MODEL,d=i.CONFIRM_DELETE_SHARED_FILE_BUTTON_COPY_MODEL):(a=i.CONFIRM_DELETE_N_FILES_MSG,l=i.CONFIRM_DELETE_N_FILES_TITLE,d=i.CONFIRM_DELETE_N_FILES_BUTTON),l=o.CONFIRM_REMOVE_TITLE;var u="";this.options.parcelModel?u=this.options.rootView._getParcelId(this.options.parcelModel):console.log("Uninitialized parcel model");var g=d+" "+i.DIALOG+" "+a+" "+d+" "+i.BUTTON+" "+i.TO_ACTIVATE_PRESS_SPACE_BAR;return p.displayTextAlert(p.SEVERITY_NEUTRAL,l,a,d,i.CANCEL,this.options,g).then(_.bind(function(){var e="Delete";try{if(!_.isUndefined(this.options.selectionUiModel)){var t=this.options.selectionUiModel.getSingleSelectedItemModel(),i=this.options.selectionUiModel.getNumSelectedItems();if(1===i)if(void 0!==t.get("bootstrap")&&void 0!==t.get("bootstrap").is_original_shared&&t.get("bootstrap").is_original_shared)e+=n.VIRGO_ORIGINAL_SHARE;else{var o=t.getOriginalShared();!_.isUndefined(o)&&o&&(e+=n.VIRGO_ORIGINAL_SHARE)}}}catch(r){}e+=":Success:SingleFile";var a=this.options.rootView&&this.options.rootView._pluginOptions&&"Document"==this.options.rootView._pluginOptions.requestAgent;a?this.options.appApi.siteCatalystApi.logVirgoViewerEvent(n.VIRGO_SENDTRACK_CB,e):this.options.appApi.siteCatalystApi.logVirgoEvent(n.VIRGO_SENDTRACK_CB,e);var l,d=(this.options,"DELETE"),c={},h=$.Deferred();l=this.options.rootView._getSendUri()+"parcels/"+u;var p=s.getRequestHeaders(d);c["Content-Type"]="application/json",c.Accept="application/vnd.adobe.skybox+json;version=1",c.Authorization=p.Authorization,$.ajax(l,{type:d,headers:c,global:!0,dataType:"json",success:_.bind(function(){this.options.appApi.rnaApi.done(function(e){e.assetApi({methodName:"closeSNTFile",methodArgs:"closeMultiParcelView"})}),"multi"==this.options.collectionsUiModel.get("single_multi_view")&&this.options.rootView._refreshUI("header"),this.options.selectionUiModel.trigger("deleteParcelEvent");var e=this.options.selectionUiModel.getSingleSelectedItemModel(),t=!1,i="";i="recent"===this.options.rootView.getPluginOptions().requestAgent?"recent":"sharedTab",t=e.attributes.aep_workflow_info?e.attributes.aep_workflow_info.isReceivedFile:!1;var s=e.attributes.WorkflowType;this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("deleteReview",[u,u,s])},this));var o=e.getAssetId();this.options.rootView._sendDataModelRefreshCommand("delete",o,t,i)},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),h.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)})},this))}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,t){t.DeletingParcelOp=e.Op.extend({run:function(){var e,t,i,s=this.options,o=[];return e=s.selectionUiModel,t=e.get("selected_item_models"),i=e.get("selected_item_ui_models"),_.each(t,function(t){var s,n=t.id,r=i[n];r.set("masked",!0),s=t.destroy({wait:!0}).then(function(){e.deselectItem(n,!0)},function(){r.set("masked",!1)}),o.push(s)}),$.when.apply($,o)}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/forwarding-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,t){t.ForwardingParcelOp=e.Op.extend({run:function(){var t,i,s,o=this.options,n={};return t=o.selectionUiModel,i=t.getSingleSelectedItemModel(),s="/send/parcel/"+i.id,e.Util.isCEF()?this.options.appApi.rnaApi.done(_.bind(function(e){n.selectedParcelId=i.id,n.selectedAssetIds=[],n.selectedModels=[],e.stApi.launchSendTrackApp(n)},this)):(o.appApi.routerApi.navigate(s,{trigger:!0}),t.clearSelection()),this._getResolvedPromise()}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/setting-delivery-receipts-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){t.SettingDeliveryReceiptsOp=e.Op.extend({run:function(){var e,t,s,o,n,r=this.options,a=this.options.parcelModel;return e=a.url(),t=e+"/delivery_receipts",s="PUT",o={value:r.deliveryReceipts},n=i.getRequestHeaders(s),n["Content-Type"]="application/json",$.ajax(t,{type:s,headers:n,data:JSON.stringify(o),dataType:"json"}).then(function(){r.parcelModel.set({delivery_receipts:r.deliveryReceipts})})}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/http-util","i18n!core/nls/ui-strings","core/utils/sc-analytics","core/models/workflow-status-strings","core/ops/op"],function(e,t,i,s,o,n){t.UnsharingParcelIfConfirmedOp=e.Op.extend({run:function(){var e,r,a,l,d,c=this.options,h=c.appApi.dialogApi;e=c.selectionUiModel,r=e.getNumSelectedItems(),1===r?(l=o.CONFIRM_UNSHARE_TITLE,a=o.CONFIRM_UNSHARE_MSG,d=o.CONFIRM_UNSHARE_BUTTON):(l=o.CONFIRM_UNSHARE_TITLE,a=_.template(i.CONFIRM_UNSHARE_MSG_N_ITEMS,{numItems:r}),d=o.CONFIRM_UNSHARE_BUTTON);var p='<div class = "card-content">'+a+'</div>   <label class="card-checkbox-label">       <div role="menuitemcheckbox" aria-checked="true" class="card-checkbox core-checkbox" style="float: left; margin-top: -1px; margin-right: -10px" onkeypress="handleEnter(event)" tabindex="0"></div>       <div class="card-checkbox-text theme-text" style="margin-top: 10px; margin-right: -10px">'+i.Unshare_checkbox+' </div>       <script>function handleEnter(event) { if (event.keyCode === 13) document.getElementsByClassName("card-checkbox")[0].click(); }</script>',u=this.options,g=this.options.rootView&&this.options.rootView._pluginOptions&&"Document"==this.options.rootView._pluginOptions.requestAgent,m=d+" "+o.DIALOG+" "+a+" "+d+" "+o.BUTTON+" "+o.TO_ACTIVATE_PRESS_SPACE_BAR,v="Unshare",w="";try{if(!_.isUndefined(e)&&1===r){var f=e.getSingleSelectedItemModel();if(void 0!==f.get("bootstrap")&&void 0!==f.get("bootstrap").is_original_shared&&f.get("bootstrap").is_original_shared)v+=n.VIRGO_ORIGINAL_SHARE;else{var E=f.getOriginalShared();!_.isUndefined(E)&&E&&(v+=n.VIRGO_ORIGINAL_SHARE)}w=f.getAssetId()}}catch(S){}return h.displayHtmlAlert(h.SEVERITY_NEUTRAL,l,p,d,o.CANCEL,this.options,m).then(function(){u.appApi.rnaApi.done(function(e){e.logPerformance("UnshareFile","start")});var i=$(".alert-dialog-container").find(".card-checkbox");if(0==i.length||!i.hasClass("core-checkbox-checked")){var o=u.rootView._getParcelId(u.selectionUiModel.getSingleSelectedItemModel()),r=u.selectionUiModel.getSingleSelectedItemModel(),a=r.get("asset_id"),l=r.attributes?r.attributes.WorkflowType:"";return v+=":Success:SingleFile",g?u.appApi.siteCatalystApi.logVirgoViewerEvent(n.VIRGO_SENDTRACK_CB,v):u.appApi.siteCatalystApi.logVirgoEvent(n.VIRGO_SENDTRACK_CB,v),t.opFactory.create("UnsharingParcelOp",u).run().done(function(){"multi"==u.collectionsUiModel.get("single_multi_view")&&e.clearSelection();var t=u.selectionUiModel.getSingleSelectedItemModel(),i=!1,s="";s="recent"===u.rootView.getPluginOptions().requestAgent?"recent":"sharedTab",i=t.attributes.aep_workflow_info?t.attributes.aep_workflow_info.isReceivedFile:!1,u.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("unshareReview",[o,l])},this));var n={};n.InvitationId=o,n.ParcelId=o,n.Unshare=!0,r&&(n.assetId=r,n.sharedStatus=!1),u.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("AVCloseUnsharedDoc",n)},this));var r=t.getAssetId();u.rootView._sendDataModelRefreshCommand("unshare",r,i,s),u.appApi.rnaApi.done(function(e){e.logPerformance("UnshareFile","end")})})}var d,o,c=(this.options,"DELETE"),h={},p=$.Deferred();u.selectionUiModel.getSingleSelectedItemModel().id.length&&(o=u.rootView._getParcelId(u.selectionUiModel.getSingleSelectedItemModel())),d=u.rootView._getSendUri()+"parcels/"+o;var m=s.getRequestHeaders("DELETE");h["Content-Type"]="application/json",h.Accept="application/vnd.adobe.skybox+json;version=1",h.Authorization=m.Authorization,$.ajax(d,{type:c,headers:h,global:!0,dataType:"json",success:_.bind(function(e){u.appApi.rnaApi.done(function(e){e.assetApi({methodName:"closeSNTFile",methodArgs:"closeMultiParcelView"})}),"multi"==u.collectionsUiModel.get("single_multi_view")&&u.rootView._refreshUI("header"),u.selectionUiModel.trigger("deleteParcelEvent"),u.rootView._sendDataModelRefreshCommand("delete",a&&""!=a?a:o),p.resolve(e)},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this))},this)}),v+=":DeleteSuccess:SingleFile",g?u.appApi.siteCatalystApi.logVirgoViewerEvent(n.VIRGO_SENDTRACK_CB,v):u.appApi.siteCatalystApi.logVirgoEvent(n.VIRGO_SENDTRACK_CB,v)})}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){return t.UnshareOneParcelOp=e.Op.extend({run:function(){var e,t,s,o,n,r=this.options,a="PUT",l=r.appApi;e=r.itemModel;var d=r.rootView._getParcelId(e);return t=r.rootView._getSendUri()+"parcels/"+d+"/is_active",s=JSON.stringify({value:!1}),o=i.getRequestHeaders(a),o["Content-Type"]="application/json",this.options.appApi.rnaApi.done(function(e){e.logPerformance("NwCall_UnshareParcel","start")}),n=$.ajax(t,{type:a,headers:o,data:s,global:!0,dataType:"json"}).then(_.bind(function(){this.options.appApi.rnaApi.done(function(e){e.logPerformance("NwCall_UnshareParcel","end")}),e.set({is_active:!1}),e.attributes.send_track_info&&(e.attributes.send_track_info.state="UNSHARED")},this),function(e){e&&423==e.status&&l.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this))})}}),t.UnshareParcelOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op","acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-parcel-op"],function(e,t){t.UnsharingParcelOp=e.Op.extend({run:function(){var e,i,s,o=this.options,n=[];return e=o.selectionUiModel,i=e.get("selected_item_models"),s=e.get("selected_item_ui_models"),_.each(i,function(e){var i,r,a=e.id,l=s[a];l&&l.set("masked",!0),r=new t.UnshareOneParcelOp({itemModel:e,rootView:o.rootView,appApi:o.appApi}),i=r.run().then(function(){e.set({is_active:!1}),l&&l.set("masked",!1)},function(){l&&l.set("masked",!1)}),n.push(i)}),$.when.apply($,n)}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/remove-me-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){return t.RemoveMeOp=e.Op.extend({run:function(e){var t,s,o,n,r=this.options,a="DELETE",l=$.Deferred();return t=r.itemModel,s=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"invitation/"+e+"/consent",o=JSON.stringify({value:!1}),n=i.getRequestHeaders(a),n["Content-Type"]="application/json",this.options.appApi.rnaApi.done(function(e){e.logPerformance("NwCall_RemoveMe","start")}),$.ajax(s,{type:a,headers:n,data:o,dataType:"json",global:!0,success:_.bind(function(e){this.options.appApi.rnaApi.done(function(e){e.logPerformance("NwCall_RemoveMe","end")}),l.resolve(e)},this),error:_.bind(function(e){423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),l.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),l}}),t.RemoveMeOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/fetching-thumbnail-for-tracked-send-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/constants/thumbnail-constants","core/utils/thumbnail-util","core/ops/op"],function(e,t,i,s,o){return t.FetchingThumbnailForTrackedSendOp=e.Op.extend({run:function(t,i,n,r,a,l){var d,c=(this.options,$.Deferred());if(this.model&&"UNSHARED"===this.model.attributes.send_track_info.state){d=e.getBaseFilesUrl()+"api/rrx/assets/"+i+"/thumbnail";var h=120,p=h,u=h,g=t+i+s.THUMBNAIL,m={methodName:"getURLImage",methodArgs:[{id:g,url:d,width:p,height:u}]}}else var m=o.getThumnailRequestParams(e.getBaseFilesUrl(),t,i,n,r);return this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaTasksAPI.invokeMethod(m).then(_.bind(function(e){e.has_cached_icon._value?c.resolve(a===!0?{ImageURL:e.icon_url._value,ItemID:l}:e.icon_url._value):e._addEventListener("custom:urlImageBitmap",_.bind(function(e,t){var i=t.params;void 0!=i.url&&c.resolve(a===!0?{ImageURL:i.url,ItemID:l}:i.url)},this))},this))},this)),c.promise()}}),t.FetchingThumbnailForTrackedSendOp}),define("acplugins/tracked-send/js/home-view/ops/selection/selecting-collection-item-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,t){return t.SelectingCollectionItemOp=e.Op.extend({run:function(){var t,i=this.options,s=i.itemView,o=this._multipleSelection();switch(this.options.selectType){case e.SelectionUiModel.SELECT_ALL:t=this._selectAll(!0);break;case e.SelectionUiModel.SELECT_NONE:t=this._selectAll(!1);break;case e.SelectionUiModel.SELECT_DESELECT:t=this._selectItem(s,!1);break;case e.SelectionUiModel.SELECT_EXTEND:t=this._extendSelectItem(s);break;case e.SelectionUiModel.SELECT_SELECT:t=this._selectItem(s);break;case e.SelectionUiModel.SELECT_TOGGLE:t=this._toggleSelectItem(s);break;case e.SelectionUiModel.SELECT_NEXT:t=this._selectNext();break;case e.SelectionUiModel.SELECT_PREVIOUS:t=this._selectPrevious();break;case e.SelectionUiModel.EXTEND_SELECT_NEXT:t=this._selectNext(o);break;case e.SelectionUiModel.EXTEND_SELECT_PREVIOUS:t=this._selectPrevious(o)}return t&&i.selectionUiModel.triggerSelectionChange(),this._getResolvedPromise()},_selectItemView:function(e,t){var i,s=this.options,o=e.model;return i=s.noFolderSelection&&o.isFolder(),s.selectionUiModel.selectItem(o,e.options.itemUiModel,i?!1:t)},_selectAll:function(t){var i,s=this.options.collectionItemsView.getChildViews();if(!(t&&s.length>1)||this._multipleSelection())return t?(_.each(s,_.bind(function(e){this._selectItemView(e,t)&&(i=!0)},this)),i):(e.opFactory.create("ClearingSelectionOp",this.options).run(),i=!0)},_deselectAll:function(){return this.options.selectionUiModel.getNumSelectedItems()>0?(this._selectAll(!1),!0):!1},_selectNext:function(e){var t=this._getSelectionEnd(),i=this._getNextSelectable(t,!1);if(e||this._deselectAll())return i>=0&&(t=i),this._selectChildAt(t)},_selectPrevious:function(e){var t=this._getSelectionStart(),i=this._getNextSelectable(t,!0);if(e||this._deselectAll())return i>=0&&(t=i),this._selectChildAt(t)},_extendSelectItem:function(e){var t,i,s,o;return this._multipleSelection()||this._selectAll(!1)&&(o=!0),this._selectItemView(e,!0)&&(o=!0),t=this._getTargetIndex(),i=this._getClosestSelectedIndex(t,!1),i>0?(this._selectRange(!0,t,i)&&(o=!0),this._selectRange(!1,0,t-1)&&(o=!0)):(s=this._getClosestSelectedIndex(t,!0),s>=0?this._selectRange(!0,s,t)&&(o=!0):this._selectItem(e)&&(o=!0)),o},_selectItem:function(e){var t;return this._selectAll(!1)&&(t=!0),this._selectItemView(e,!0)&&(t=!0),t},_toggleSelectItem:function(e){var t,i=e.options.itemUiModel.get("selected");return this._multipleSelection()||this._selectAll(!1)&&(t=!0),this._selectItemView(e,!i)&&(t=!0),t},_multipleSelection:function(){return this.options.selectionUiModel.get("multiple_selection")},_getSelectionIndex:function(e){function t(e){return s=i.eq(e),l.isItemSelected(s.data("id"))}var i,s,o,n,r,a=this.options,l=a.selectionUiModel;if(i=this._getChildren(),o=i.length,r=-1,e){for(n=0;o>n;n+=1)if(t(n)){r=n;break}}else for(n=o-1;n>=0;n-=1)if(t(n)){r=n;break}return r},_getSelectionStart:function(){return this._getSelectionIndex(!0)},_getSelectionEnd:function(){return this._getSelectionIndex(!1)},_getTargetId:function(){var e,t,i=this.options.itemView;return i&&(e=i.model,e&&(t=e.id)),t},_getTargetIndex:function(){var e,t,i;return t=this._getTargetId(),i=this.options.collectionItemsView.$el.children(),i.each(function(i,s){return $(s).data("id")===t?(e=i,!1):void 0}),e},_getClosestSelectedIndex:function(e,t){var i,s,o,n,r,a;if(i=this.options.collectionItemsView,s=i.$el.children(),o=s.length,n=-1,a=_.bind(function(e){var t=this._getItemUiModelAt(i,s,e);return t.get("selected")},this),t){for(r=e-1;r>=0;r-=1)if(a(r)){n=r;break}}else for(r=e+1;o>r;r+=1)if(a(r)){n=r;break}return n},_selectRange:function(e,t,i){var s,o,n,r,a;for(s=this.options.collectionItemsView,n=s.$el.children(),r=t;i>=r;r+=1)o=this._getItemViewAt(s,n,r),this._selectItemView(o,e)&&(a=!0);return a},_isChildAtSelectable:function(e){return this._isChildSelectable(this._getChildAt(e))},_isChildSelectable:function(e){var t=e.data("model");return!this.options.noFolderSelection||!t.isFolder()},_selectChild:function(e,t,i){var s,o,n,r=this.options,a=!1;if(e)return e=$(e),n=this.options.collectionItemsView.getChildViewById(e.data("id")),s=n.model,o=n.options.itemUiModel,i&&(a=i.scrollIntoView),a&&this._scrollItemIntoView(e),r.selectionUiModel.selectItem(s,o,this._isChildSelectable(e)?t:!1,!0)},_selectChildAndScroll:function(e,t){return this._selectChild(e,t,{scrollIntoView:!0})},_selectChildAt:function(e,t,i){return _.isUndefined(t)&&(t=!0),this._selectChildAndScroll(this._getChildAt(e),t,i)},_getItemViewAt:function(e,t,i){var s=t.eq(i),o=$(s).data("id");return e.getChildViewById(o)},_getChildren:function(){return this.options.collectionItemsView.$el.children()},_getChildCount:function(){return this._getChildren().length},_getChildAt:function(e){var t=this._getChildren();return 0>e||e>=t.length?void 0:t.eq(e)},_getNextSelectable:function(e,t){return t?Math.max(e-1,0):Math.min(this._getChildCount()-1,e+1)},_scrollItemIntoView:function(e){var t=e.position().top,i=e.height(),s=$(this.options.collectionItemsView.el).height();if(0>t||t+i>s){var o=$(this.options.collectionItemsView.el).scrollTop(),n=t-(s-i)/2;$(this.options.collectionItemsView.el).scrollTop(Math.max(o+n,0))}},_getItemUiModelAt:function(e,t,i){var s=this._getItemViewAt(e,t,i);return s.options.itemUiModel}}),t.SelectingCollectionItemOp}),define("acplugins/tracked-send/js/home-view/ops/showing/showing-sign-in-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,t){t.ShowingSignInOp=e.Op.extend({run:function(){return this._getResolvedPromise()}})}),define("acplugins/tracked-send/js/home-view/ops/showing/showing-single-asset-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,t){t.ShowingSingleAssetOp=e.Op.extend({run:function(){var t,i,s,o=this.options,n=o.idToShow,r=o.invitationId;n||(t=o.selectionUiModel,i=t.getSingleSelectedItemModel(),i&&(s=i.get("resources"),s&&1===s.length&&(n=s[0].asset_id)));var a={};return r.length?a.invitationId=r:(a.invitationId=r,a.parcelId=o.parcelId,a.assetId=o.idToShow,a.fileName=o.fileName,a.status=o.status,"UNSHARED"===o.status&&(a.assetId="")),e.Util.isCEF()?this.options.appApi.rnaApi.done(function(e){e.assetApi({methodName:"openSNTFile",methodArgs:a})}):n&&o.appApi.routerApi.navigate("/file/"+n,{trigger:!0}),this._getResolvedPromise()}})}),define("acplugins/tracked-send/js/home-view/ops/showing/desktop-show-in-browser-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,t){t.DesktopShowInBrowserOp=e.Op.extend({run:function(){var i=t.opFactory;if("trackObject"===this.options.eventName)var s=e.getBaseCloudUrl(),o="sentfiles/",n=this.options.selectionUiModel.getSingleSelectedItemModel().id,r=s+o+n;else if("adobeSendWebsite"===this.options.eventName)var r="/send";var a={url:r},l=i.create("JumpToBrowserApiCallOp",this.options),d=l.run(a).done(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.ipmApi({methodName:"executeURI",methodArgs:JSON.parse(d.responseText).uri})},this))},this));return d.promise()}})}),define("acplugins/tracked-send/js/home-view/ops/showing/jump-to-browser-api-call-op",["core/ac-core","core/utils/http-util","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,t,i){var s="reader/jump_to_browser_url";i.JumpToBrowserApiCallOp=e.Op.extend({run:function(e){var i,o,n=this.options,r=Ac.baseFilesUrisModel.getSendApiUri();return _.isEmpty(r)?this._getRejectedPromise():(i="POST",o=_.extend({},t.getRequestHeaders(i,n,!1),{"Content-Type":"application/json"}),r+=s,n.appApi.networkApi.throttledAjax(r,{type:i,headers:o,data:JSON.stringify(e),dataType:"json",global:!1}))}})}),define("acplugins/tracked-send/js/utils/ts-utils",[],function(){var e={extractRootUrl:function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host}};return e}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-snt-history-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/ts-utils","core/utils/date-util","i18n!core/nls/ui-strings","acplugins/tracked-send/js/home-view/collections/parcel-collection","core/ops/op"],function(e,t,i,s,o,n){return t.GettingSendTrackHistoryOp=e.Op.extend({run:function(e){void 0===e.parcelModel&&(e.parcelModel=this.options.selectionUiModel.getSingleSelectedItemModel());var o=this.options.rootView._getParcelId(e.parcelModel);o=this._getLegacyId(o);var n,r,a=(this.options,o),l={};this._parcel_events=[],this._parcelModel=e.parcelModel;var d=$.Deferred();return r=this.options.appApi.baseFilesUrisApi.getSendApiUri(),r=s.extractRootUrl(r),n={parcel_id:a,comparator:!1,rootUrl:r},this._fileviewevent_collection=new t.FileViewEventCollection([],n),this._parcelModel.set("fileviewevents",this._fileviewevent_collection),_.each(this._parcelModel.get("participants"),function(e){l[this._getLegacyId(e.id)]=""===e.email?i.PARCEL_ACTIVITY_PUBLIC_VISITOR:_.escape(""===e.name?e.email:e.name)},this),this._inv_emails=l,this.fetchEvents(_.bind(function(e){this.processEvents(e,d)},this),_.bind(function(){d.reject()},this),!1),d},fetchEvents:function(e,t,i){this._fileviewevent_collection.fetch({data:{sort:"created!asc",page:0,max:1e3},reset:i,success:e,error:t})},processEvents:function(e,t){var s,o,n,r;s=this._getCSSStyledText(i.ACTIVITY_CREATED_BY),r=""===this._parcelModel.attributes.creator.name?this._parcelModel.attributes.creator.email:this._parcelModel.attributes.creator.name,s=_.template(s,{participant:r}),o=s+" <br>",n=this._getUTCDateFromModelDate(this._parcelModel.attributes.create_date),o+=this.formatDateAndTime(n),this._parcel_events.push(o);var a,l;_.each(this._parcelModel.get("participants"),function(e){""===e.email?l=!0:(l=!1,a=void 0===a?""===e.name?e.email:e.name:a+", "+(""===e.name?e.email:e.name))},this),l||(s=this._getCSSStyledText(i.ACTIVITY_SENT_TO),s=_.template(s,{participant:a}),o=s+" <br>",n=this._getUTCDateFromModelDate(this._parcelModel.attributes.create_date),o+=this.formatDateAndTime(n),this._parcel_events.push(o)),_.each(e.models,function(e){var t=e.get("event_type");"parcel_view"===t?(s=this._getCSSStyledText(i.ACTIVITY_VIEWED_BY),s=_.template(s,{participant:this._inv_emails[e.get("invitation_id")]})):(s=this._getCSSStyledText(i.ACTIVITY_DOWNLOADED_BY),s=_.template(s,{participant:this._inv_emails[e.get("invitation_id")]})),o=s+" <br>",n=moment.utc(e.get("created"),"YYYY-MM-DDThh:mm:ss").toDate(),n=moment(n).format("YYMMDDHHmmssZ"),n=this._getUTCDateFromModelDate(n),o+=this.formatDateAndTime(n),this._parcel_events.push(o)},this),this._parcel_events.reverse(),t.resolve(this._parcel_events)},_getLegacyId:function(e){return e},_getUTCDateFromModelDate:function(e){return o.formatDateWithFormat(e,"YYMMDDHHmmssZ",!0)},_getCSSStyledText:function(e){var t=e.substring(0,e.indexOf("<%=")),i=e.substring(e.indexOf("<%=")),s='<span class="rhp-snt-activity-event-heading">'+t+"</span>"+i;return s},formatDateAndTime:function(e){return _.template(n.DATETYPE_AND_TIME)({dateType:"",date:e})}}),t.GettingSendTrackHistoryOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/unshare-review-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){return t.UnshareReviewOp=e.Op.extend({run:function(e){var t,s,o,n,r=this.options,a="PUT",l=$.Deferred();return t=r.itemModel,s=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"parcels/"+e+"/is_active",o=JSON.stringify({value:!1}),n=i.getRequestHeaders(a),n["Content-Type"]="application/json",$.ajax(s,{type:a,headers:n,data:o,dataType:"json",global:!0,success:_.bind(function(e){l.resolve(e)},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),l.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),l}}),t.UnshareReviewOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/deleting-review-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){return t.DeletingReviewOp=e.Op.extend({run:function(e){var t,s=(this.options,"DELETE"),o={},n=$.Deferred();t=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"parcels/"+e;var r=i.getRequestHeaders(s);return o["Content-Type"]="application/json",o.Accept="application/vnd.adobe.skybox+json;version=1",o.Authorization=r.Authorization,o["x-api-client-id"]=r["x-api-client-id"],$.ajax(t,{type:s,headers:o,dataType:"json",global:!0,success:_.bind(function(e){n.resolve(e)},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),n.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),n}}),t.DeletingReviewOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/fetching-thumbnail-for-review-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/utils/thumbnail-util","core/ops/op"],function(e,t,i,s){return t.FetchingThumbnailForReviewOp=e.Op.extend({run:function(t,o,n,r){var a=(this.options,"GET"),l={},d=$.Deferred(),c=i.getRequestHeaders(a);l.Authorization=c.Authorization;var h=s.getThumnailRequestParams(e.getBaseFilesUrl(),t,o,n,r);return this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaTasksAPI.invokeMethod(h).then(_.bind(function(e){e.has_cached_icon._value?d.resolve(e.icon_url._value):e._addEventListener("custom:urlImageBitmap",_.bind(function(e,t){var i=t.params;void 0!=i.url&&d.resolve(i.url)},this))},this))},this)),d.promise()}}),t.FetchingThumbnailForReviewOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/fetching-review-intro-message-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){return t.FetchIntroMessageOp=e.Op.extend({run:function(s){var o,n=(this.options,"GET"),r={},a=$.Deferred();if("dummyId"===s||""===s)return a.reject({httpRespCode:404,httpRespBody:"The resource is no longer accessible"}),a;if(this.invitationId=s,this.dataMap=t.CachedData,void 0!=this.dataMap[s])return _.isUndefined(this.dataMap[s].data)?this.dataMap[s].promise:(a.resolve(this.dataMap[s].data),a);this.dataMap[s]={promise:a};var l=i.getRequestHeaders(n);return r.Authorization="Bearer "+this.options.appApi.sessionApi.getPrimaryToken(),r["x-api-client-id"]=l["x-api-client-id"],o=e.getBaseFilesUrl()+"a/preview/"+s+"/bootstrap?shareinfo=true",$.ajax(o,{type:n,headers:r,global:!1,dataType:"json",success:_.bind(function(e,t,i){var s,o,n=!1;void 0!==e.is_original_shared&&(n=e.is_original_shared),_.isUndefined(e)||_.isUndefined(e.meta_list)||!e.meta_list.length||_.isUndefined(e.meta_list[0].commenting_urn)||(s=e.meta_list[0].commenting_urn),_.isUndefined(e)||_.isUndefined(e.meta_list)||!e.meta_list.length||_.isUndefined(e.meta_list[0].asset_urn)||(o=e.meta_list[0].asset_urn),void 0===e||void 0===e.parcel_data||void 0===e.parcel_data.email_message?a.reject({httpRespCode:i.status,httpRespBody:i.responseText}):(this.dataMap[this.invitationId].data={email_message:e.parcel_data.email_message,preview_url:e.parcel_data.preview_url,is_original_shared:n,commenting_urn:s,asset_id:o,is_legacy_asset:e.is_legacy_asset},a.resolve(this.dataMap[this.invitationId].data))},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),a.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),a}}),t.FetchIntroMessage}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/fetching-review-participants-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){return t.FetchingReviewParticipantOp=e.Op.extend({run:function(e){var t,s,o=(this.options,"GET"),n=$.Deferred(),s={};t=e+"/participants";var r=i.getRequestHeaders(o);return s["x-api-key"]="AdobeAcrobat5",s["x-api-client-id"]=r["x-api-client-id"],s["Content-Type"]="application/json",$.ajax(t,{type:o,headers:s,dataType:"json",global:!1,success:_.bind(function(e){n.resolve(e)},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),n.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),n}}),t.FetchingReviewParticipantOp}),define("acplugins/reviews/js/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0,"da-dk":!0,"fi-fi":!0,"nb-no":!0,"nl-nl":!0,"pt-br":!0,"sv-se":!0,"zh-cn":!0,"zh-tw":!0,"ko-kr":!0,"cs-cz":!0,"hu-hu":!0,"pl-pl":!0,"ru-ru":!0,"uk-ua":!0,"tr-tr":!0,"sk-sk":!0,"sl-si":!0,"bg-bg":!0}),define("acplugins/reviews/js/nls/root/ui-strings",{SELECTOR_LABEL:"For Review",SELECTOR_LABEL_WEB:"Sent",TOOL_LABEL:"Send",SEND_TRACK_LABEL:"Send & Track",REVIEW_WORKFLOW_NAME:"Shared For Review",TYPE:"Type",ADDED_DATE:"Added",MODIFIED_DATE:"Modified",PAGES:"Pages",SIZE:"Size",SENDER_NAME:"Sent By",SENT_DATE:"Date Sent",REPORT_ABUSE:"Report Abuse",UNKNOWN:"Unknown",EXTENSION:"(.<%- ext %>)",DOWNLOAD:"Download",DOWNLOAD_ALL:"Download All",REPLY:"Reply",FORWARD:"Forward",NOTIFY_ME_WHEN_VIEWED:"Notify when recipients viewed",UNSHARE:"Unshare",VIEWED_BY:"Viewed By",VIEW_FULL_ACTIVITY:"View Full Activity",EMAIL_REPLY_FORMAT:"Re: <%= emailSubject %>",OPEN:"Open",SAVEAS:"Save As",TRACK:"Track Online",OPEN_LINK:"(Open Link)",MESSAGE_HEADING:"Message",REMOVE:"Remove",SHARED_FILES:"Sent Files",SUBJECT:"Subject",SENT_TO:"Sent To",DATE_SENT:"Date Sent",VIEWS:"Views",PARCEL_PUBLIC_SHARING:"Anonymous",EXPAND:"Expand",COLLAPSE:"Collapse",SELECT_ALL:"Select All",NUMBER_OF_VIEWS:"Number of Views",GO_TO_ADOBE_SEND_WEBSITE:"Go To Adobe Send Website",GO_TO_ADOBE_S_T_WEBSITE:"Manage Documents Sent for Signature",DATE_VIEWED:"Date Viewed",CONFIRM_UNSHARE_TITLE:"Unshare",CONFIRM_UNSHARE_MSG_ONE_ITEM:"Your files will not longer be viewable to your recipients. Are you sure you want to unshare?",CONFIRM_UNSHARE_MSG_N_ITEMS:"Your files will not longer be viewable to your recipients. Are you sure you want to unshare?",CONFIRM_REMOVE_TITLE:"Remove",CONFIRM_REMOVE_MSG_ONE_ITEM:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",CONFIRM_REMOVE_MSG_N_ITEMS:"Are you sure you want to remove these files from the sent list? By removing the files, they will be unshared and removed from this list, but will not be deleted from your library.",NO_FILES_TITLE:"No Files",NO_FILES_MESSAGE:"There are no files available to download. The files may have been deleted.",SHARE_TITLE:"Send Files",SHARE_WELCOME:"Send and track large files online.",SHARE_WELCOME_DESKTOP:"The fast, easy way to share and monitor files.",SHARE_SELECT_FILES:"Select Files to Send",SHARE_VIEW_SHARED_FILES:"View All Sent Files",READER_FILESELECT_WINDOW_TITLE:"Select Files",READER_FILESELECT_CONTINUE_BUTTON:"Continue",ALL_SUPPORTED_FILES:"All supported files",CHOOSE_FILES:"Choose Files",ALL_SUPPORTED_FILES:"All supported files",FILE:"file",FILES:"files",UPLOADING_TO_SEND:"Uploading to Adobe Document Cloud...",SELECTED_FILES:"Selected Files",ADD_MORE_FILES:"Add Files",SHARE_WITH_HEADING:"Send To",SHARE_ADDRESS_BOOK:"Address Book",SHARE_CHOICE_WORLD:"Create Anonymous Link",SHARE_CHIOCE_WORLD_EXPLAIN:"(with basic usage information)",SHARE_CHOICE_INDIVIDUAL:"Send Personalized Invitations",SHARE_CHOICE_INDIVIDUAL_EXPLAIN:"(with detailed tracking)",SHARE_CHOICE_ALLOW_COMMENTS:"Allow Comments",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE:"Add Your Logo & Color",SHARE_CHOICE_CUSTOMIZE_RECIPIENT_PAGE_EDIT:"Edit",SHARE_ADDRESS_HEADING:"Recipient Email Addresses",SHARE_ADDRESS_PROMPT:"Enter recipient email addresses",SHARE_SUBJECT_MSG_HEADING:"Subject & Message",SHARE_INITIAL_SUBJECT:"Shared Files",SHARE_AV_ERROR:"Audio/video files are not supported for sending, and have been omitted from your selection.",SHARE_AV_UPGRADE_MESSAGE:" Upgrade to be able to send audio/video files.",SHARE_FORMS_ERROR:"Form files are not currently supported for sending. Go to Fill & Sign to find and download the form.",SHARE_FORMS_ERROR_DESKTOP:"This file type is currently not supported and has been omitted from your selection.",SHARE_AV_FORMS_ERROR:"Audio/video and form files are not supported for sending, and have been omitted from your selection.",SHARE_OVER_LIMIT_APPEND_ERROR:"<br/><br/>Additionally, you selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_ERROR:"You selected more than <%- limit %> files. Files beyond that limit have been omitted.",SHARE_OVER_LIMIT_TITLE:"Too many files.",SHARE_NON_NATIVE_APPEND_ERROR:"<br/><br/>Additionally, your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR:"Send & Track is currently not supported for files stored in <%= connectorLabel %>. To send files from <%= connectorLabel %>, save them to your computer first.",SHARE_NON_NATIVE_ERROR_DEFAULT:"Your selection included files stored in one or more unsupported storage locations, and have been omitted.",SHARE_NON_NATIVE_ERROR_HEADING:"Unsupported File Storage",SHARE_MESSAGE_HEADING:"Message",SHARE_MESSAGE_PROMPT:"I have shared some files with you. Please click on the link to view and download them.",SHARE_BUTTON:"Send",SHARE_BUTTON_LINK:"Create Link",SHARE_CANCEL:"Cancel",SHARE_EMAIL_INVALID_PLURAL:"The following email addresses are invalid:",SHARE_EMAIL_INVALID_SINGULAR:"The following email address is invalid:",SHARE_ERROR_SEND_LIMIT_EXCEEDED_TITLE:"Not sent",SHARE_ERROR_SEND_LIMIT_EXCEEDED:"The number of recipients you have selected exceeds your recent limit. Reduce the number of recipients, or wait until later to try again.",SHARE_ERROR_UNSUPPORTED_SHARING_MIME_TYPE:"Audio/video files aren't supported.",SHARE_ERROR_RECIPIENTS_NOT_ALLOWED:"Please upgrade to send to individuals.",SHARE_ERROR_CANNOT_CONVERT_FORM:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_RESTRICTION:"Files could not be sent because the form file could not be converted to pdf.",SHARE_ERROR_CANNOT_CONVERT_FORM_TIMEOUT:"Files could not be sent because the form file conversion to PDF timed out.",SHARE_INDIVIDUAL_HELP_WEB:"Note: Personalized links are unique to each recipient, but anyone the recipient shares those links with can access the documents.",SHARE_INDIVIDUAL_HELP:"Note: Personalized invitations are unique to each recipient, but anyone the recipient shares those invitations with can access the documents.",SHARE_UPLOAD_ERROR_TITLE:"Error uploading files",SHARE_UPLOAD_ERROR_MSG:"One or more files could not be uploaded. Please try again.",SHARE_NO_FILES_SELECTED:"There are currently no files selected.",SHARE_CLICK_TO_ADD_FILES:"Click the Add Files button to get started.",SHARE_RECIPIENT_PAGE_HEADLINE:"Recipient Page",SHARE_CHOICE_INCLUDE_MESSAGE:"Include Message Text",SHARE_CHOICE_RESPOND_BACK:"Include Reply-To",SHARE_REMOVE:"Remove",ADD_FILES_REJECTED_TITLE:"Invalid Filename Format",ADD_FILES_REJECTED_MESSAGE:"Files must have a file name extension or be a known file type to be sent. Please ensure that your filename includes a valid file extension.",SHARE_PUBLIC_LINK_HEADING_DESKTOP:"Distribute the anonymous link by:",SHARE_COPY_LINK_BUTTON:"Copy Link",SHARE_SUCCESS_SENT_LINK:"Go to Sent Files",SHARE_SUCCESS_SENT_LINK_FOOTER:"to view all previously sent files",READER_GO_URL:"http://www.adobe.com/go/sendpluginrdr_12_0_0",ACROBAT_GO_URL:"http://www.adobe.com/go/sendpluginacro_12_0_0",SEND_UPSELL_HEADLINE:"Upgrade To",SEND_UPSELL_HEADLINE_OLD:"Upgrade to:",SEND_UPSELL_POINT_1:"• Send large files, including documents and videos",SEND_UPSELL_POINT_2:"• Receive an email when files are viewed",SEND_UPSELL_POINT_3:"• Track downloads using an online dashboard",SEND_UPSELL_LATER:"Later",SEND_UPSELL_NOW:"Upgrade Now",SEND_UPSELL_LEARN_MORE:"Learn More",SEND_UPSELL_UPGRADE_REQUIRED:"Unsupported Files",SHARE_TOO_MANY_DLG_TITLE:"Too many email addresses",SHARE_TOO_MANU_DLG_MESSAGE:"You've entered <%=numRecipients%> email addresses, but you can only send to <%=maxRecipients%> at a time. Delete some addresses and try again.",SHARE_SUCCESS_DLG_TITLE:"Files Shared",SHARE_PUBLIC_LINK_HEADING:"Anonymous Link Generated",SHARE_EMAIL_LINK_BUTTON:"Email Link",SHARE_PUBLIC_LINK_MESSAGE:"Anyone with the link will access the files anonymously.",SHARE_PUBLIC_LINK_NO_COPY_OR_EMAIL_WARNING:"You have not yet copied or emailed the link. Are you sure you want to continue?",SHARE_PUBLIC_LINK_INSTRUCTIONS:"Copy the link below to email or share it with others. Anyone who uses the link will be able to access the files.",SHARE_INVITATIONS_HEADING:"Invitations Sent",SHARE_INVITATIONS_MESSAGE:"Each recipient will receive a link by email, and you will be notified when they follow the link.",SHARE_SUCCESS_CLOSE:"Close",SHARE_SUCCESS_CONTINUE:"Continue",SHARE_FILE_EMAIL_BODY:"I'm using Adobe Send. You can view my file by clicking on the link below:",SHARE_FILES_EMAIL_BODY:"I'm using Adobe Send. You can view my files by clicking on the link below:",S_T_FILE_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my file in Adobe Document Cloud by clicking on the link below:",S_T_FILES_EMAIL_BODY:"I'm using Adobe Send & Track. You can view my files in Adobe Document Cloud by clicking on the link below:",SHARE_CLIPBOARD_MESSAGE:"Tip: Use Ctrl + C to copy",SHARE_CLIPBOARD_MESSAGE_MAC:"Tip: Use Cmd + C to copy",SHARE_CLIPBOARD_COPIED:"link is copied to clipboard",PARCEL_ACTIVITY_DOWNLOADED:"downloaded",PARCEL_ACTIVITY_PREVIEWED:"previewed",PARCEL_ACTIVITY_PUBLIC_VISITOR:"public link visitor",PARCEL_ACTIVITY_ALL_FILES:"All Files",PARCEL_ACTIVITY_ALL_FILES_PREVIEW:"All Files Preview Page",PARCEL_ACTIVITY_HEADING:"Activity for “<%= emailSubject %>”",PARCEL_ACTIVITY_RECIPIENT:"Recipient",PARCEL_ACTIVITY_ACTIVITY:"Activity",PARCEL_ACTIVITY_ITEM:"Item",PARCEL_ACTIVITY_DATE_VIEWED:"Date Viewed",PARCEL_ACTIVITY_CLOSE:"Close",CURRENTLY_SHARED_IN:"Sent To",SHARE_THIS_FILE:"Send this File",SHARE_THIS_FILE_AGAIN:"Send this File Again",SENT_FILES_HEADER_SEARCH_CONTROLS:"Search Controls",SENT_FILES_HEADER_REFRESH:"Refresh",SENT_FILES_NUM_FILES:"<%= numFiles %> files",NO_PARCELS_REVIEW_PROMPT:"There aren't any files here yet.",NO_REVIEWS_PROMPT:"No Review Files",NO_PARCELS_REVIEW_SUBPROMPT:"Files you've sent or received for review will appear here.",NO_PARCELS_SEND_BTN:"Adobe Send",NO_PARCELS_REVIEW_BTN:"Send File for Review",ON_REVIEWS_SIGN_OUT_PROMPT:"Sign in to access shared files.",ON_REVIEWS_SIGN_OUT_SUBPROMPT:"See and manage files you've sent or received for review.",REVIEWS_SIGN_IN_BUTTON:"Sign In",COULD_NOT_SEND:"Could not send",ENTERPRISE_USERS_ACCESS_ERROR:"You do not have access to this service. Please contact your IT Administrator to gain access, or try to sign in with an Adobe ID.",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_NOT_AVAILABLE:"Continue at Adobe Document Cloud",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your Color and Logo are currently only available online at the Adobe Send web site. Click "<%= buttonName %>" to go there now.',S_T_CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_MSG:'Edits to your logo and color are currently only available at Adobe Document Cloud. Click "<%= buttonName %>" to go there now.',CUSTOMIZE_RECIPIENT_PAGE_DIALOG_USE_WEB_OK:"Continue",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_TITLE:"Add Your Logo & Color",CUSTOMIZE_RECIPIENT_PAGE_DIALOG_DESCRIPTION:"Add your logo and choose a color to display on emails and recipient page.",CUSTOMIZE_RECIPIENT_PAGE_ADD_LOGO:"Add Logo",CUSTOMIZE_RECIPIENT_PAGE_REMOVE_LOGO:"Remove Logo",CUSTOMIZE_RECIPIENT_PAGE_CHOOSE_COLOR:"Choose Color",CUSTOMIZE_RECIPIENT_PAGE_SAVE:"Save",CUSTOMIZE_RECIPIENT_PAGE_CLOSE:"Cancel",CUSTOMIZE_RECIPIENT_PAGE_FILE_FILTERING_LABEL:"File Type is an image",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_TITLE:"Error",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_LOGO_FORMAT:"The file you have chosen cannot be used as a logo. Please select another file. ",CUSTOMIZE_RECIPIENT_PAGE_UNSUPPORTED_COLOR_FORMAT:"The color you have entered is invalid. Please enter a hex value like #FFFFFF or #FFF.",SURVEY_TITLE:"We are interested in your Feedback",SURVEY_LINK:"Tell Us What You Think",SURVEY_QUESTION_ONE:"Why are you using Send & Track today?",SURVEY_QUESTION_TWO:"Does it work well for you?",SURVEY_QUESTION_THREE:"Is it missing something you wanted?",SURVEY_SEND:"Send",SURVEY_CLOSE:"No Thanks",SURVEY_TEXTAREA_LIMITATION_LABEL:"characters remaining",INVALID_PARAMETER_SURVEY_MESSAGE:"Answer type not allowed",INVALID_PARAMETER_SURVEY_TITLE:"Invalid Parameter",SEND_RHP_TITLE:"Sent To",GENERIC_ARIA_LABEL_STRING:"<%= prefix %>. <%= suffix %>",ENTERPRISE_RESTRICTIONS_ENFORCED:"Enterprise Sharing Restrictions Enabled",ENTERPRISE_USERS_SHARING_ACCESS:"This feature isn't enabled because your organization has enabled sharing restrictions. ",OPEN:"Open",CLOSED:"Closed",NAME:"NAME",LAST_ACTIVITY:"LAST ACTIVITY",DEADLINE:"DEADLINE",STATUS:"STATUS",INITIATOR:"OWNER",LAST_COMMENTED:"Last commented",GUEST:"GUEST",REVIEWS:"Reviews",DELETE_REVIEW_MESSAGE:"Deleting this shared file will permanently remove it and all associated comments from Document Cloud for all participants. This can't be undone.",DELETE_ACTION_BUTTON:"Delete File",CANCEL_ACTION_BUTTON:"Cancel",UNSHARE_REVIEW_MESSAGE:"Are you sure? People will not be able to access this document anymore.",UNSHARE_ACTION_BUTTON:"Unshare File",OWNER:"OWNER",REVIEWED:"Reviewed",NUM_OF_TOTAL_REVIEWED:"<%= num %> of <%= total %>",YOU:"You",OWNER:"OWNER",REVIEWED:"Reviewed",NUM_OF_TOTAL_REVIEWED:"<%= num %> of <%= total %>",NUM_OF_TOTAL_COMMENTED:"<%= num %> of <%= total %> commented",YOU:"You",REMOVEME_REVIEW_MESSAGE:"Are you sure you want to remove yourself? If you continue, the document will be removed from the list of items shared with you.",REMOVEME_ACTION_BUTTON:"Remove Me",DELETED_STRING:"Deleted",UNSHARED_STRING:"Unshared",REMOVEME_STRING:"Removed",REMOVE_ME_TITLE:"Remove Me",REMOVE_ME_MESSAGE:"If you remove yourself, this file will be removed from the list of files shared with you.",ASCENDING:"Ascending",DESCENDING:"Descending",FINISHED:"Finished",COMMENTED:"Commented",SORT_BY_DROPDOWN:"Sort By Dropdown"}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/deleting-review-parcel-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!core/nls/ui-strings","i18n!acplugins/reviews/js/nls/ui-strings","core/ops/op"],function(e,t,i,s){t.DeletingReviewIfConfirmedOp=e.Op.extend({run:function(){var e,o,n,r,a=this.options,l=a.appApi.dialogApi;
e=a.selectionUiModel;var d=a.searchUiModel;return o=e.getNumSelectedItems(),n=1===o?s.CONFIRM_REMOVE_MSG_ONE_ITEM:s.CONFIRM_REMOVE_MSG_N_ITEMS,r=s.CONFIRM_REMOVE_TITLE,l.displayTextAlert(l.SEVERITY_WARNING,r,n,s.REMOVE,i.CANCEL).then(function(){return t.opFactory.create("DeletingParcelOp",a).run().done(function(){e.clearSelection(),d.invalidate()})})}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/unshare-one-review-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/reviews/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,t,i,s){t.UnshareOneReviewIfConfirmedOp=e.Op.extend({run:function(){var e,o,n,r=this.options,a=r.appApi.dialogApi;return e=i.CONFIRM_UNSHARE_MSG_ONE_ITEM,o=i.CONFIRM_UNSHARE_TITLE,a.displayTextAlert(a.SEVERITY_WARNING,o,e,i.UNSHARE,s.CANCEL).then(function(){n=new t.UnshareOneReviewOp(r),n.run()})}})}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/unshare-one-review-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op"],function(e,t,i){return t.UnshareOneReviewOp=e.Op.extend({run:function(){var e,t,s,o,n,r=this.options,a="PUT";return e=r.itemModel,t=e.url()+"/is_active",s=JSON.stringify({value:!1}),o=i.getRequestHeaders(a),o["Content-Type"]="application/json",n=$.ajax(t,{type:a,headers:o,data:s,dataType:"json"}).then(function(){e.set({is_active:!1})})}}),t.UnshareOneReviewOp}),define("acplugins/tracked-send/js/home-view/ops/manipulation/review/unsharing-review-parcel-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/reviews/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,t,i,s){t.UnsharingReviewParcelIfConfirmedOp=e.Op.extend({run:function(){var e,o,n,r,a=this.options,l=a.appApi.dialogApi;return e=a.selectionUiModel,o=e.getNumSelectedItems(),n=1===o?i.CONFIRM_UNSHARE_MSG_ONE_ITEM:_.template(i.CONFIRM_UNSHARE_MSG_N_ITEMS,{numItems:o}),r=i.CONFIRM_UNSHARE_TITLE,l.displayTextAlert(l.SEVERITY_WARNING,r,n,i.UNSHARE,s.CANCEL).then(function(){return t.opFactory.create("UnsharingParcelOp",a).run().done(function(){e.clearSelection()})})}})}),define("acplugins/tracked-send/js/home-view/ops/op-factory",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/selection/clearing-selection-op","core/ops/selection/selecting-collection-item-op","acplugins/tracked-send/js/home-view/ops/plugin/starting-plugin-op","acplugins/tracked-send/js/home-view/ops/plugin/listening-for-view-events-op","acplugins/tracked-send/js/home-view/ops/getting/getting-parcels-op","acplugins/tracked-send/js/home-view/ops/getting/getting-rhp-preview-metadata-op","acplugins/tracked-send/js/home-view/ops/downloading/downloading-parcel-assets-op","acplugins/tracked-send/js/home-view/ops/downloading/saveas-single-asset-op","acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-if-confirmed-op","acplugins/tracked-send/js/home-view/ops/manipulation/deleting-parcel-op","acplugins/tracked-send/js/home-view/ops/manipulation/forwarding-parcel-op","acplugins/tracked-send/js/home-view/ops/manipulation/setting-delivery-receipts-op","acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-if-confirmed-op","acplugins/tracked-send/js/home-view/ops/manipulation/unsharing-parcel-op","acplugins/tracked-send/js/home-view/ops/manipulation/remove-me-op","acplugins/tracked-send/js/home-view/ops/manipulation/fetching-thumbnail-for-tracked-send-op","acplugins/tracked-send/js/home-view/ops/selection/selecting-collection-item-op","acplugins/tracked-send/js/home-view/ops/showing/showing-sign-in-op","acplugins/tracked-send/js/home-view/ops/showing/showing-single-asset-op","acplugins/tracked-send/js/home-view/ops/showing/desktop-show-in-browser-op","acplugins/tracked-send/js/home-view/ops/showing/jump-to-browser-api-call-op","acplugins/tracked-send/js/home-view/ops/getting/getting-snt-history-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/unshare-review-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/deleting-review-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/fetching-thumbnail-for-review-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/fetching-review-intro-message-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/fetching-review-participants-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/deleting-review-parcel-if-confirmed-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/unshare-one-review-if-confirmed-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/unshare-one-review-op","acplugins/tracked-send/js/home-view/ops/manipulation/review/unsharing-review-parcel-if-confirmed-op"],function(e,t){t.OpFactory=e.Op.extend({create:function(e,i){var s=t[e];return s?new s(i):void LOG(0,"AcTrackedSend.OpFactory.create: Unrecognized class: "+e)}})}),define("acplugins/tracked-send/js/utils/sc-constants",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var t=e.TrackedSend;return t.ScConstants={ACTION:"Action",ACTIONS:"Actions",ADD_FILES_TO_SHARE:"AddFilesToShare",ADDRESS_BOOK:"AddressBook",ATTEMPTED_TO_SHARE_FORM:"AttemptedToShareForm",AUTOCOMPLETE:"Autocomplete",AVOIDED:"Avoided",BROWSER_CLOSE:"BrowserClosed",BRANDING:"Branding",CANCEL:"Cancel",CHECKED:"Checked",CHICKLET_ADDED:"ChickletAdded",CLICKED:"Clicked",CLICK_BRANDING:"ClickBranding",CLICK_BRANDING_IN_READER:"ClickBrandingInReader",CLICK_BRANDING_IN_ACROBAT:"ClickBrandingInAcrobat",CLOSE:"Close",COLOR_INPUT:"ColorInput",COLOR_MENU_BUTTON:"ColorMenuButton",COLOR_WELL:"ColorWell",CONTINUE:"Continue",DATE_VIEWED:"DateViewed",DEFAULT:"Default",DIALOG:"Dialog",DISABLED:"Disabled",DISALLOWED:"Disallowed",DOWNLOAD:"Download",DOWNLOAD_ALL:"DownloadAll",DOWNLOAD_ONE:"DownloadOne",DRAG_FILES:"DragFiles",DURATION:"Duration",EDIT_BRANDING_ONLINE:"ContinueOnline",EMAIL:"Email",EMAIL_LINK:"EmailLink",ENABLED:"Enabled",ENTERED:"Entered",EVENTUAL_CLICK:"EventualClick",FILE:"File",FILE_LIST:"FileList",FILE_NAME:"FileName",FILES_SHARED_DLG:"FilesSharedDlg",FORWARD:"Forward",FULL_ACTIVITY:"FullActivity",HIDDEN:"Hidden",IMMEDIATE_CLICK:"ImmediateClick",INCLUDE_MESSAGE_TEXT:"IncludeMessageText",INCLUDE_REPLY_TO:"IncludeReplyTo",IPM:"IPM",LATER:"Later",LOGO_BUTTON:"LogoButton",LOGO_CANCEL:"LogoCancel",LOGO_SAVE:"LogoSave",MESSAGE:"Message",MULTI:"Multi",NO_PARCELS:"NoParcels",NOTIFY_WHEN_VIEWED:"NotifyWhenViewed",NUM_FILES_CHECKED:"NumFilesChecked",PERSONAL:"Personal",PERSONAL_AND_PUBLIC:"PersonalANDPublic",PREVIEW:"Preview",PUBLIC:"Public",PUBLIC_LINK:"PublicLink",RECVIEW:"RecView",REPLY:"Reply",REMOVE:"Remove",REPORT_ABUSE:"ReportAbuse",RHP:"RHP",SCROLL:"Scroll",SAVE_AS:"SaveAs",SELECT_ALL:"SelectAll",SELECT_FILES:"SelectFiles",SENT_FILES:"SentFiles",SHARE:"Share",SHARE_BUTTON:"ShareButton",SHARE_FILE_BUTTON:"ShareFileButton",SHARE_ICON:"ShareIcon",SHARE_WITH:"ShareWith",SHARED:"Shared",SHOWN:"Shown",SINGLE:"Single",SORT:"Sort",SUBJECT:"Subject",SUCCESS:"Success",SURVEY:"Survey",SURVEY_CANCEL:"SurveyCancel",SURVEY_FIELD_FOCUS:"SurveyFieldFocus",SURVEY_LINK:"SurveyLink",SURVEY_SEND:"SurveySend",TOOLS:"Tools",TRACK:"Track",TRASH:"Trash",TURN_OFF_BRANDING:"TurnOffBranding",TURN_ON_BRANDING:"TurnOnBranding",UNCHECKED:"Unchecked",UNSHARE:"Unshare",UPGRADE:"Upgrade",URL_HIGHLIGHT:"UrlHighlight",URL_KEY_COPY:"UrlKeyCopy",VIEW:"View",VIEW_ALL_SHARED_FILES:"ViewAllSharedFiles",VIEW_FULL_ACTIVITY:"ViewFullActivity",WARNED_BEFORE_CLOSING:"WarnB4Close",WARNING:"Warning",WITH_REPLY:"wReply",1:"1","2_TO_5":"2to5","6_TO_10":"6to10","11_OR_MORE":"11orMore","11_TO_20":"11to20","21_TO_40":"21to40","41_TO_120":"41to120","121_OR_MORE":"121orMore",FSS:"FSS",FORM:"Form",OUTPUT:"Output",SAVE_TO_PDF:"SaveToPDF","1_STARTED":"1-Started","2_COMPLETED":"2-Completed",ERROR:"Error",SEND_TAB:"SendTab",COMPLETED:"Completed",SHARED_BY_YOU:"SharedByYou",SHARED_BY_OTHERS:"SharedByOthers",VIEW_FILES:"ViewFiles ",REVIEW_FILES:"ReviewFiles "},t.ScConstants}),define("acplugins/tracked-send/js/home-view/templates/tracked-send-template.html",[],function(){return'<div class="on-signed-in ui-theme theme-container"></div>    <div class="on-signed-out ui-theme theme-container "></div>    <div class="files-offline-view ui-theme theme-container"></div>	 <div class="files-no-access-view ui-theme theme-container"></div>    <div class="context-board-view context-board-rhp cb-active-background-theme"></div>'}),define("acplugins/tracked-send/js/tool/ac-tracked-send",["plugins-common/ac-plugins"],function(e){e.TrackedSend||(e.TrackedSend={});var t=e.TrackedSend.Tool;return t||(t=e.TrackedSend.Tool={}),t.PLUGIN_ID||(t.PLUGIN_ID="send"),t}),define("acplugins/tracked-send/js/tool/models/version-model",["core/ac-core","acplugins/tracked-send/js/tool/ac-tracked-send","core/models/model"],function(e,t){return t.VersionModel=e.Model.extend({url:function(){return e.getBaseFilesUrl()+"a/version"}}),t.VersionModel}),define("acplugins/tracked-send/js/utils/sharing",[],function(){var e={Connector:{kind:"value",values:["DOCCLD","CCLOUD","ONEDRV"]},CountValue2:{kind:"value",values:["2to5","6to10","11orMore"]},CountValue1:{kind:"value",values:["1","2to5","6to10","11orMore"]},CountValue0:{kind:"value",values:["0","1","2to5","6to10","11orMore"]}},t=[{pageName:"FileList:SentFiles:Clicked",selector:""},{pageName:"FileList:SentFiles:Action:Unshare",selector:""},{pageName:"FileList:SentFiles:Action:Forward",selector:""},{pageName:"FileList:SentFiles:Action:Download",selector:""},{pageName:"FileList:SentFiles:Action:Trash",selector:""},{pageName:"FileList:SentFiles:Action:SelectAll",selector:""},{pageName:"FileList:SentFiles:FileName:Checked",selector:""},{pageName:"FileList:SentFiles:FileName:Unchecked",selector:""},{pageName:"FileList:SentFiles:NumFilesChecked:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Preview:Shared:Single:Shown",selector:""},{pageName:"Preview:Shared:Multi:Shown",selector:""},{pageName:"Preview:Shared:Single:NotifyWhenViewed:Checked",selector:""},{pageName:"Preview:Shared:Multi:NotifyWhenViewed:Checked",selector:""},{pageName:"Preview:Shared:Single:NotifyWhenViewed:Unchecked",selector:""},{pageName:"Preview:Shared:Multi:NotifyWhenViewed:Unchecked",selector:""},{pageName:"Preview:Shared:Single:ViewFullActivity",selector:""},{pageName:"Preview:Shared:Multi:ViewFullActivity",selector:""},{pageName:"Preview:Shared:Multi:PreviewFile:SendFileAgain",selector:""},{pageName:"Preview:Shared:Single:Unshare",selector:""},{pageName:"Preview:Shared:Multi:Unshare",selector:""},{pageName:"Preview:Shared:Single:PublicLink",selector:""},{pageName:"Preview:Shared:Multi:PublicLink",selector:""},{pageName:"Preview:Shared:Multi:Forward",selector:""},{pageName:"Preview:Shared:Multi:File:NextPg",selector:""},{pageName:"Preview:Shared:Multi:File:PrevPg",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Shown",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Unshare:Clicked",selector:""},{pageName:"Preview:Shared:Multi:UnshareDlg:Unshare:Cancel",selector:""},{pageName:"Preview:Shared:Single:FullActivity:Shown",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Shown",selector:""},{pageName:"Preview:Shared:Single:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:All",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Recipient",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Activity",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Filter:Item",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:ViewedBy",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:DateViewed",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Close",selector:""},{pageName:"Preview:Shared:Multi:FullActivity:Sort:File",selector:""},{pageName:"Preview:Shared:Multi:Preview:RHP:ShareFileButton",selector:""},{pageName:"RecView:Multi:Shown",selector:""},{pageName:"RecView:Multi:Shown:wReply",selector:""},{pageName:"RecView:Multi:SaveToAcrobat",selector:""},{pageName:"RecView:Multi:File:NextPg",selector:""},{pageName:"RecView:Multi:File:PrevPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:FitPgFull",selector:""},{pageName:"RecView:Preview:BottomNavBar:FitPgWidth",selector:""},{pageName:"RecView:Preview:BottomNavBar:FullScreen",selector:""},{pageName:"RecView:Preview:BottomNavBar:HideRHP",selector:""},{pageName:"RecView:Preview:BottomNavBar:NextPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:PrevPg",selector:""},{pageName:"RecView:Preview:BottomNavBar:Scroll",selector:""},{pageName:"RecView:Preview:BottomNavBar:Close",selector:""},{pageName:"RecView:Multi:Preview:Shown",selector:""},{pageName:"RecView:Multi:Preview:ReportAbuse",selector:""},{pageName:"RecView:Multi:Preview:Download",selector:""},{pageName:"RecView:Multi:downloadOne",selector:""},{pageName:"RecView:Multi:downloadAll",selector:""},{pageName:"RecView:Multi:Preview:BackButton",selector:""},{pageName:"RecView:Multi:Preview:Reply",selector:""},{pageName:"RecView:Single:Shown",selector:""},{pageName:"RecView:Single:Shown:wReply",selector:""},{pageName:"RecView:Single:ReportAbuse",selector:""},{pageName:"RecView:Single:Download",selector:""},{pageName:"RecView:Single:Reply",selector:""},{pageName:"Preview:Toolbar:Share:Clicked",selector:""},{pageName:"Tools:Share:Clicked",selector:""},{pageName:"Tools:Share:Shown",selector:""},{pageName:"Tools:Share:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:ts-direct-to-workflow-view:<cohort-name>",selector:""},{pageName:"Tools:Share:welcome:Shown",selector:""},{pageName:"Tools:Share:workflow:Shown",selector:""},{pageName:"Tools:Share:success:Shown",selector:""},{pageName:"Tools:Share:welcome:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:workflow:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:success:Shown:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:welcome:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:workflow:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:success:BrowserClosed:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:SelectFiles:Clicked",selector:""},{pageName:"Tools:Share:ViewAllSharedFiles:Clicked",selector:""},{pageName:"Tools:Share:AddFilesToShare",selector:""},{pageName:"Tools:Share:ShareWith:Public",selector:""},{pageName:"Tools:Share:ShareWith:Public:Checked",selector:""},{pageName:"Tools:Share:ShareWith:Public:Unchecked",selector:""},{pageName:"Tools:Share:ShareWith:Personal",selector:""},{pageName:"Tools:Share:ShareWith:Personal:Checked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:Unchecked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:Email:Disabled:Clicked",selector:""},{pageName:"Tools:Share:Subject:Entered",selector:""},{pageName:"Tools:Share:Message:Entered",selector:""},{pageName:"Tools:Share:Subject:Default",selector:""},{pageName:"Tools:Share:Message:Default",selector:""},{pageName:"Tools:Share:IncludeMessageText:Unchecked",selector:""},{pageName:"Tools:Share:IncludeMessageText:Checked",selector:""},{pageName:"Tools:Share:IncludeReplyTo:Unchecked",selector:""},{pageName:"Tools:Share:IncludeReplyTo:Checked",selector:""},{pageName:"Tools:Share:AttemptedToShareForm",selector:""},{pageName:"Tools:Share:ShareButton",selector:""},{pageName:"Tools:Share:ShareButton:Clicked",selector:""},{pageName:"Tools:Share:ShareButton:Disabled",selector:""},{pageName:"Tools:Share:Cancel",selector:""},{pageName:"Tools:Share:AddressBook:Clicked",selector:""},{pageName:"Tools:Share:AddressBook:Shown",selector:""},{pageName:"Tools:Share:AddressBook:Success",selector:""},{pageName:"Tools:Share:AddressBook:Cancel",selector:""},{pageName:"Tools:Share:AddressBook:IPM",selector:""},{pageName:"Tools:Share:AddressBook:Enabled",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Personal:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Public:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:ts-success-dlg-1:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Personal:ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlog:Public:ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic::ts-public-url-copy:<cohort-name>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:EmailLink",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:UrlHighlight",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Shown",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:EmailLink",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:UrlHighlight",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:UrlKeyCopy",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:UrlKeyCopy",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Duration:<DurationValue>",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Personal:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Public:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:WarnB4Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:PersonalANDPublic:Close",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Shown",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:ChooseFilesButton:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:DragFiles:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:AddSelected:<CountValue1>",selector:"",variables:{CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Shown",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:ChooseFiles:Clicked",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:AddSelected:<CountValue1>",selector:"",variables:{Connector:e.Connector,CountValue1:e.CountValue1},values:e.CountValue1},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Cancel",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:RecentFiles:Clicked",selector:""},{pageName:"Tools:Share:Branding:ColorMenuButton",selector:"",prop49:"Clicked on the color menu button in the customize branding dialog"},{pageName:"Tools:Share:Branding:LogoButton",selector:"",prop49:"Clicked to change logo in customize branding dialog"},{pageName:"Tools:Share:Branding:ClickBrandingInReader",selector:"",prop49:"Clicked to edit their branding settings while in the In Reader Browser"},{pageName:"Tools:Share:Branding:ClickBranding",selector:""},{pageName:"Tools:Share:Branding:LogoCancel",selector:""},{pageName:"Tools:Share:Branding:LogoSave",selector:""},{pageName:"Tools:Share:Branding:TurnOffBranding",selector:""},{pageName:"Tools:Share:Branding:TurnOnBranding",selector:""},{pageName:"Tools:Share:Branding:ColorWell",selector:""},{pageName:"Tools:Share:Branding:ColorInput",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline:Continue",selector:""},{pageName:"Tools:Share:Branding:ContinueOnline:Cancel",selector:""},{pageName:"RecView:ReportAbuse:Dialog:ReportAbuse:Success",selector:""},{pageName:"RecView:ReportAbuse:Dialog:ReportAbuse:Cancel",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Shown",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:<cohort-name>",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Later:Clicked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Upgrade:Clicked",selector:""},{pageName:"Tools:Share:ShareWith:Personal:IPM:Close",selector:""},{pageName:"Tools:Share:FilesSharedDlg:Disallowed:Warning:Shown",selector:""},{pageName:"Preview:FileInfo:Clicked",selector:""},{pageName:"Preview:ShareIcon:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:<Connector>:Clicked",selector:"",variables:{Connector:e.Connector},values:e.Connector},{pageName:"Tools:Share:ChooseFilesDlg:Continue",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:1",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:MyCmptr:Clicked",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:Cancel",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:2",selector:""},{pageName:"Tools:Share:ChooseFilesDlg:AcomOnly:Success:3",selector:""},{pageName:"FileList:Shared:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:Shown",selector:""},{pageName:"FileList:ShareFileDlg:MakePrivate",selector:""},{pageName:"FileList:ShareFileDlg:MakePublic",selector:""},{pageName:"FileList:ShareFileDlg:EmailLink:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"FileList:ShareFileDlg:Cancel",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:Shown",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:MakePrivate",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:MakePublic",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:EmailLink:Clicked",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"FileList:ActionBar:ShareFileDlg:Cancel",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:Shown",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:MakePrivate",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:MakePublic",selector:""},{pageName:"sent",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:EmailLinkButton:Clicked",selector:""},{pageName:"Preview:Toolbar:GearMenu:ShareFileDlg:Cancel",selector:""},{pageName:"FileList:DupFileNameDlg:DeleteUploaded:Success",selector:""},{pageName:"Tools:Survey:SurveyLink",selector:""},{pageName:"Tools:Survey:Cancel",selector:""},{pageName:"Tools:Survey:Send",selector:""},{pageName:"Tools:Survey:SurveyFieldFocus",selector:""}];return{variables:e,pages:t}}),define("acplugins/tracked-send/js/home-view/models/ui/parcel-preview-ui-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/ui/ui-model"],function(e,t){return t.ParcelPreviewUiModel=e.UiModel.extend({recognized:{parcelPreview:{type:"object",optional:!0},deferred:{type:"object",optional:!0},onHistoryChange:{type:"object",optional:!0}},defaults:{parcelPreview:void 0,deferred:void 0,onHistoryChange:void 0}}),t.ParcelPreviewUiModel}),define("viewer/ac-viewer",[],function(){var e,t,i;return e="dev",t=Ac.Viewer,t||(t=Ac.Viewer={}),i=t[e],i||(i=t[e]={}),i.VERSION=e,i.ID||(i.APP_ID="viewer"),i}),define("viewer/models/parcel-asset-model",["core/ac-core","viewer/ac-viewer","core/models/collection-item-model"],function(e,t){t.ParcelAssetModel=e.CollectionItemModel.extend({initialize:function(t,i){e.CollectionItemModel.prototype.initialize.call(this,t,i),i.collection&&(this.rootUrl=i.collection.rootUrl),i.rootUrl&&(this.rootUrl=i.rootUrl)},getRenditionUrl:function(t,i){var s,o,n;return s=this.collection.parcel,n=s.get("invitation"),n?(o=this.rootUrl+"a/invitation/"+encodeURIComponent(n)+"/asset/"+encodeURIComponent(this.get("id"))+"/"+t,i&&(o+="?page="+i),o):e.CollectionItemModel.prototype.getRenditionUrl.call(this,t,i)}})}),define("viewer/collections/parcel-asset-collection",["viewer/ac-viewer","core/utils/http-util","viewer/models/parcel-asset-model"],function(e,t){e.ParcelAssetCollection=Backbone.Collection.extend({model:e.ParcelAssetModel,initialize:function(e,t){Backbone.Collection.prototype.initialize.call(this,e,t),this.rootUrl=t.rootUrl,this.parcel_id=t.parcel_id,this.parcel=t.parcelModel,this.sortAscending=!0,this.sortField="name"},comparator:function(e,t){var i,s,o,n=e.get(this.sortField),r=t.get(this.sortField);return i=this.sortAscending?n:r,s=this.sortAscending?r:n,o=i===s?0:s>i?-1:1},url:function(){return this.rootUrl+"/a/api/parcels/"+this.parcel_id+"/assets"},fetch:function(e){return e=t.customizeOptions("GET",e),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){return e.assets}})}),define("acplugins/tracked-send/js/home-view/ops/showing/parcel-preview-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","viewer/ac-viewer","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/utils/ts-utils","viewer/collections/parcel-asset-collection","core/ops/op"],function(e,t,i,s,o){return t.ParcelPreviewOp=e.Op.extend({run:function(){var e,n,r,a,l,d,c=this.options,h=this.options.parcelModel,p=this.options.parcelPreviewUiModel,u=this.options.appApi;e=u.displayApi.showFullOverlay(!0),n=this.options.appApi.baseFilesUrisApi.getSendApiUri(),n=o.extractRootUrl(n),c.parcelAssetsCollection=new i.ParcelAssetCollection([],{rootUrl:n,parcel_id:h.id,parcelModel:h}),r=p.get("parcelPreview"),r&&r.off(),l=p.get("deferred"),l||(l=$.Deferred(),p.set({deferred:l})),d=p.get("onHistoryChange"),d&&u.routerApi.removeHistoryChangeCallback(d),d=this._onHistoryChange,u.routerApi.addHistoryChangeCallback(d),p.set({onHistoryChange:d}),a=_.extend({},c,{el:e,parcelModel:h}),r=new t.ParcelPreviewView(a),p.set({parcelPreview:r}),this.parcelPreview=r,r.on("all",c.rootView._onViewEvent,c.rootView),r.on("ParcelPreview_Close",this._onParcelPreviewClose,this);var g=t.opFactory.create("GettingAssetsOp",c);return g.run().then(_.bind(function(){var e;e=c.parcelAssetsCollection&&c.parcelAssetsCollection.length>1?s.MULTI:s.SINGLE,u.siteCatalystApi.logScEvent([s.PREVIEW,s.SHARED,e,s.SHOWN]),this.render()},r)),l.promise()},_onParcelPreviewClose:function(){var e,t=this.options.parcelPreviewUiModel;e=t.get("parcelPreview"),e&&(t.unset("parcelPreview"),e.off(),_.defer(_.bind(function(){var i=t.get("deferred");i.resolve(),t.unset("deferred"),this.options.appApi.routerApi.removeHistoryChangeCallback(this._onHistoryChange),this.options.appApi.displayApi.showFullOverlay(!1),e.$el.empty()},this)))},_onHistoryChange:function(){this._onParcelPreviewClose()}}),t.ParcelPreviewOp}),define("acplugins/tracked-send/js/home-view/templates/on-signed-in-template.html",[],function(){return'<div class="sent-files-header"></div><div class="sent-files-body shared-workflow-files-body "></div><div class="sent-files-rhp shared-files-rhp cb-active-background-theme hidden invisible"></div><div class="review-sent-files-rhp shared-files-rhp cb-active-background-theme hidden invisible"></div>'}),define("acplugins/tracked-send/js/home-view/templates/sent-files-header-template.html",[],function(){return'<div class="sent-files-main-header shared-files-main-header theme-file-list-row-border"><div class="sent-workflow-name shared-workflow-heading theme-page-header" title="<%= workflowName %>" ><%= workflowName %></div><div class="sent-parcel-name shared-workflow-heading theme-page-header "><%= parcelName %></div><div class="sent-files-header-item shared-header-listing-btns"><div class="shared-header-btn-listView shared-workflow-header-btn-cn" role="button"><div class="shared-header-btn shared-workflow-header-btn listView" title="<%= listView%>" aria-label="<%= listView%>" tabindex="0"></div></div><div class="shared-header-btn-thumbnailView shared-workflow-header-btn-cn" role="button"><div class="shared-header-btn shared-workflow-header-btn thumbnailView" title="<%= thumbnailView%>" aria-label="<%= thumbnailView%>" tabindex="0"></div></div></div></div>'}),define("acplugins/tracked-send/js/home-view/views/sent-files-header-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/date-util","core/utils/view-util","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!files/nls/ui-strings","acplugins/tracked-send/js/home-view/templates/sent-files-header-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings"],function(e,t,i,s,o,n,r){t.SentFilesHeaderView=e.View.extend({events:{"click .shared-header-btn-listView":"_onListViewButtonClick","click .shared-header-btn-thumbnailView":"_onThumbnailViewButtonClick","click .sent-workflow-name":"_onHeaderClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(r),this._addUiModelEventListeners(),this._addKeyEventListener(),this._addFocusEventListener()},render:function(){if(e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({workflowName:this._getHeaderText(),listView:n.VIRGO_LIST_VIEW,thumbnailView:n.VIRGO_THUMBNAIL_VIEW,parcelName:""})),this._initWrappers()),this.options.isInSearchResultsView){var t=this.options,i=t.searchModel.get("total_hits");if(_.isUndefined(i))this.$headerName.text(this._getHeaderText());else{var s=_.template(n.SEARCH_HEADER,{label:this._getHeaderText(),count:i});this.$headerName.text(s),this.$headerName.attr("title",s),this.$headerName.attr("aria-label",_.template(t.searchUiModel.getHeaderAriaLabel(),{category:o.SEND_TRACK_LABEL,count:i}))}}return this._updateButtonSelectionState(),this},_initWrappers:function(){this.$listViewBtn=this.$(".shared-workflow-header-btn.listView"),this.$listViewBtn.addClass("shared-header-btn-"+this.options.pluginId),this.$thumbnailViewBtn=this.$(".shared-workflow-header-btn.thumbnailView"),this.$thumbnailViewBtn.addClass("shared-header-btn-"+this.options.pluginId),this.$listingToggleButtons=this.$(".sent-files-header-item.shared-header-listing-btns"),this.$mainHeader=this.$(".sent-files-main-header"),this.$headerName=this.$(".sent-workflow-name"),this.$parcelName=this.$(".sent-parcel-name"),this.$listViewBtn.attr("title",n.VIRGO_LIST_VIEW),this.$thumbnailViewBtn.attr("title",n.VIRGO_THUMBNAIL_VIEW),this.$headerName.addClass(this.options.pluginId+"workflow-name"),this.options.isInSearchResultsView&&(this.$mainHeader.addClass("uss-search-active"),this.$thumbnailViewBtn.hide(),this.$listViewBtn.hide(),this.$listingToggleButtons.hide())},_addUiModelEventListeners:function(){var e=this.options,t=e.appApi.pluginsApi.getPluginsUiModel(e.pluginId);this.listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange),this.listenTo(e.collectionsUiModel,"change:single_multi_view",this._onListChange),e.isInSearchResultsView&&(this.listenTo(e.searchModel,"change:total_hits",this.render),this.listenTo(t,"change:selected_searched_plugin_id",this._searchPluginChanged))},_onListChange:function(){var e=this.options.collectionsUiModel.get("single_multi_view");if(this.options.selectionUiModel.clearSelection(),"single"==e?(this.$headerName.removeClass("multi-parcel"),this.$headerName.removeAttr("tabindex"),this.$parcelName.hide(),this.$mainHeader.css("grid-template-columns","auto auto 1px 90px"),this.$headerName.text(this._getHeaderText())):"multi"==e&&(this.$headerName.addClass("multi-parcel"),this.$headerName.attr("tabindex",0),this.$parcelName.show(),this.options.parcelCollection.models.length>0&&(i.isGreaterThanCutoffDate(this.options.parcelCollection.models[0].get("create_date"),this.options.isInSearchResultsView)?(this.$parcelName.text(this.options.parcelCollection.models[0].get("send_track_info").intro_subject),this.$parcelName.attr("title",this.options.parcelCollection.models[0].get("send_track_info").intro_subject)):(this.$parcelName.text(this.options.parcelCollection.models[0].get("resources")[0].name),this.$parcelName.attr("title",this.options.parcelCollection.models[0].get("resources")[0].name))),this.$headerName.text(this._getHeaderText()+" > "),this.$mainHeader.css("grid-template-columns","max-content auto 1px 90px")),this.options.isInSearchResultsView){var t=this.options.appApi.pluginsApi.getPluginsUiModel(this.options.pluginId);
t.get("selected_searched_plugin_id")===this.options.pluginId&&"single"==e?this.$el.hide():this.$el.show()}},_searchPluginChanged:function(e,t){"search_summary"===t?this.$el.show():this.$el.hide()},_onListViewButtonClick:function(){this.$thumbnailViewBtn.removeClass("button-selected"),this.$listViewBtn.addClass("button-selected"),this.options.collectionsUiModel.set("view","list")},_onThumbnailViewButtonClick:function(){this.$thumbnailViewBtn.addClass("button-selected"),this.$listViewBtn.removeClass("button-selected"),this.options.collectionsUiModel.set("view","thumbnail")},_onHeaderClick:function(){this.options.appApi.pluginsApi.callPluginMethod(this.options.pluginId,"_refreshUI","header",this._getResolvedPromise(),!0)},_onKeyDown:function(e){var t,i=$(e.target),s=e.which,o=!1,n=9==s&&!e.shiftKey&&i.is("body")?!0:!1;if(i.hasClass("shared-header-btn")&&!i.hasClass("shared-header-btn-"+this.options.pluginId))return o;if((!i.hasClass("shared-workflow-header-btn")&&!i.hasClass("multi-parcel")||0==i.closest(".sent-files-header").length)&&!n)return o;switch(s){case 32:case 13:i.hasClass("listView")?(this._onListViewButtonClick(),o=!0):i.hasClass("thumbnailView")?(this._onThumbnailViewButtonClick(),o=!0):i.hasClass("multi-parcel")&&this._onHeaderClick();break;case 9:n&&(t=$(".sent-files-main-header").find(":focusable").first())}return t&&0!=t.length&&(t.focus(),o=!0),o},_onSelectedItemModelsChange:function(e){var t=this.options,i=(this.$header,this.$body,this.$rhp,t.appApi);t.noSelectionActions||i.acrobatApi.isInAcrobat()||"multi"==this.options.collectionsUiModel.get("single_multi_view")||(e.isItemSelected()?this.$mainHeader.addClass("with-rhp"):this.$mainHeader.removeClass("with-rhp"))},_updateButtonSelectionState:function(){this.options.parcelCollection&&(0==this.options.parcelCollection.length?this.$listingToggleButtons.hide():this.$listingToggleButtons.show());var e=this.options.collectionsUiModel.get("view");"list"==e?(this.$thumbnailViewBtn.removeClass("button-selected"),this.$listViewBtn.addClass("button-selected")):"thumbnail"==e&&(this.$thumbnailViewBtn.addClass("button-selected"),this.$listViewBtn.removeClass("button-selected"))},_getHeaderText:function(){return"sentfiles_search"===this.options.pluginId||"sentfiles"===this.options.pluginId?o.SENT_FILES_HEADER:o.RECEIVED_FILES_HEADER}})}),define("acplugins/tracked-send/js/home-view/templates/sent-files-body-template.html",[],function(){return'<div class="parcels"></div>    <div class="parcels-search-results"></div>    <div class="parcel-hover-details"></div>'}),define("acplugins/tracked-send/js/home-view/templates/parcels-template.html",[],function(){return'<div class="parcels-content ui-theme theme-container"></div>    <div class="parcels-no-content"></div>'}),define("acplugins/tracked-send/js/home-view/templates/parcels-collection-template.html",[],function(){return'<div role="toolbar" class="selection-actions ui-theme theme-container"></div><div role="group"     aria-labelledby="<%= pluginSelectorId %>"     aria-multiselectable="true">    <div role="row" class="sent-files-header shared-workflow-files-header ui-theme theme-container theme-file-list-row-border"></div>    <div role="presentation"         class="sent-files-items shared-collection-items with-header">    </div>    <div role="presentation" class="collection-footer"></div></div>'}),define("acplugins/tracked-send/js/home-view/models/ui/parcels-list-item-ui-model",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/ui/ui-model"],function(e,t){t.ParcelsListItemUiModel=e.CollectionItemUiModel.extend({recognized:{expanded:{type:"boolean",optional:!1},masked:{type:"boolean",optional:!1},selected:{type:"boolean",optional:!1}},defaults:{expanded:!1,masked:!1,selected:!1}})}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-file-template.html",[],function(){return'<div role="row" class="parcel-list-item-file" data-id="<%= fileId %>"        aria-selected="false" aria-level="2">    <div role="gridcell"></div>    <div role="gridcell">        <div class="parcel-list-preview-img-cn shared-list-preview-img-cn theme-file-list-row-border">             <div role="img"                   aria-label="<%= iconDesc %>"                   class="collection-item-thumb <%= iconCls %> parcel-list-item-file-icon parcel-list-item-icon shared-list-item-icon"></div>        </div>        <a class="parcel-list-item-file-name theme-list-item-text"           tabindex="-1"><%- filename %></a>    </div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div></div>'}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-item-template.html",[],function(){return'<div role="<%= itemRole %>" class="parcel-list-item view-list-item shared-workflow-list-item theme-list-item-row theme-file-list-row-border shared-file-list-text-color">    <div role="row" class="shared-list-item-row shared-theme-list-item-row" aria-selected="false">        <div role="gridcell">            <div role="checkbox"                 class="parcel-list-item-checkbox view-list-item-checkbox"                                  aria-checked="false"                 aria-labelledby="parcel-list-item-num-files-<%= viewId %>">            </div>        </div>        <div role="presentation"             class="parcel-list-item-info-container                    shared-list-item-info-container">            <div role="rowheader">                <div class="parcel-list-preview-img-cn shared-list-preview-img-cn theme-file-list-row-border" id="parcel-list-preview-img-cn-<%= viewId %>">                    <div role="img" aria-label="<%= iconDesc %>"                       aria-hidden="true"                       class="collection-item-thumb <%= iconCls %>                               parcel-list-item-icon shared-list-item-icon" id="parcel-list-item-icon-<%= viewId %>"></div>                <img class="parcel-list-preview-image shared-list-preview-image file-list-thumbnail-border centered-vertically" id="parcel-list-preview-image-<%= viewId %>" style="display: none;" src=""/>               </div>               <div class="parcel-list-item-details">                   <div class="parcel-list-item-num-files"                         id="parcel-list-item-num-files-<%= viewId %>"                        >                        <%- numFiles %></div>                   <img class="parcel-list-item-name-starred-icon" alt="" />                   <div class="parcel-list-item-subheading">                      <div class="parcel-list-item-extension"                         id="parcel-list-item-extension-<%= viewId %>">                       </div>                       <span class="parcel-list-item-info-separator"> ● </span>                       <div class="parcel-list-item-owner"                             id="parcel-list-item-owner-<%= viewId %>">                          <%= owner %></div>                   </div>               </div>               <div class="multi-parcel-sub-heading cb-shaded-text-theme">                   <div class="parcel-list-grid-item-extension"></div>                   <div class="parcel-grid-item-info-separator grid-separator-one"> ● </div>                   <div class="parcel-list-grid-item-owner"></div>                   <div class="parcel-grid-item-info-separator grid-separator-two"> ● </div>                   <div class="parcel-list-grid-item-date"></div>               </div>            </div>            <div role="gridcell" class="parcel-list-item-sentdate"                 id="parcel-list-item-sentdate-<%= viewId %>">               <%= sentdate %></div>            <div role="gridcell" class="parcel-list-item-status"                 id="parcel-list-item-status-<%= viewId %>">             </div>            <img class = "parcel-list-item-status-icon" alt="" />            <div role="gridcell" class="parcel-list-item-triple-dot shared-list-item-triple-dot"                 id="parcel-list-item-triple-dot-<%= viewId %>">             </div>        </div>    </div>    <div role="presentation" class="parcel-list-item-files"></div>    <div role="presentation" class="parcel-list-item-mask"></div></div>'}),define("acplugins/tracked-send/js/home-view/views/parcels-list-item-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/view-util","core/utils/css-util","core/utils/date-util","core/utils/file-types","core/utils/truncate","acplugins/tracked-send/js/home-view/templates/parcels-list-file-template.html","acplugins/tracked-send/js/home-view/templates/parcels-list-item-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/models/workflow-status-strings","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/constants/thumbnail-constants"],function(e,t,i,s,o,n,r,a,l,d,c,h,p,u){t.ParcelsListItemView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(l),this._fileTemplate=_.template(a),this._addUiModelEventListeners(),this._addKeyEventListener()},render:function(t,i){var s,o,n,r,a,l=this.options.model.get("resources"),d=this.model.getId();if(e.View.prototype.render.call(this),this.$item)t?t.data("id")!==d&&(this.$item=this.$item.clone(),t.replaceWith(this.$item.get(0)),this._initWrappers()):this.$el.append(this.$item.get(0)),this.invalidate();else{1===l.length?(s=this._getIconClass(l[0]),o=this._getIconDesc(l[0]),n="presentation"):(s="file-icon-multifile parcel-list-item-icon-hitarea",o="",n="rowgroup"),(void 0==s||""==s)&&(s="shared-file-icon-singlefile"),r=d;var c;if(c="sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?this._getLastActivityDate():this._getSharedDate(),a=$(this._template({iconCls:s,iconDesc:o,numFiles:this._getNumFiles(),sentdate:c,owner:_.escape(this._getOwner()),viewId:r,modelId:d,itemRole:n})),e.Util.isCEF()){var h=this._getNumFiles();"sentfiles"!=this.options.pluginId&&"sentfiles_search"!=this.options.pluginId&&(h+=", "+this._getOwner()),h+=", "+this._getWorkflowStatus(),h+=", "+this._getLastActivityDate(),a.find("[role='row']:first").addClass("parcel-list-item-row").attr({"aria-label":h,tabindex:"-1"})}else a.find("[role='row']:first").addClass("parcel-list-item-row").attr({"aria-labelledby":"parcel-list-item-num-files-"+r,tabindex:"-1"});o.length&&a.find(".collection-item-thumb:first").removeAttr("aria-hidden"),t?t.replaceWith(a):this.$el.append(a),this.$item=this.$el.children().eq(i),this._initWrappers()}return this.$item.data("id",d),e.Util.isCEF()&&(this.$item.find(".parcel-list-item-subject").addClass("desktop"),this.$item.find(".parcel-list-item-to").addClass("desktop"),this.$item.find(".parcel-list-item-file-name").addClass("desktop")),this._initWrappers(),this._updateFields(),this._onViewChange(),e.Util.isCEF()&&this._updateForVerticalScrollBar(),this.model.get("thumbnailUrl")?this._showThumbnail(this.model.get("thumbnailUrl"),!0):this._showThumbnail(null,!1),this._setCheckboxVisibility(),this},_getParcelAriaLabel:function(e){return _.template(d.GENERIC_ARIA_LABEL_STRING,{prefix:e,suffix:d.FILES})},_updateForVerticalScrollBar:function(){setTimeout(_.bind(function(){this.$el.length&&this.options.collectionUiModel.set("has_vertical_scrollbar",i.isVerticalScrollBarPresent(this.$el))},this),150)},remove:function(){this.$item.remove()},getViewElement:function(){return this.$item},invalidate:function(){e.View.prototype.invalidate.call(this)},expand:function(){this.options.itemUiModel.set("expanded",!0)},collapse:function(){this.options.itemUiModel.set("expanded",!1)},isExpanded:function(){return this.options.itemUiModel.get("expanded")},stopListening:function(t,i,s){e.View.prototype.stopListening.call(this,t,i,s)},_escapeId:function(e){return e.length?e.replace(/(:|\.|\[|\]|,|=|@|\/)/g,"\\$1"):void 0},_initWrappers:function(){this.$infoContainer=this.$item.find(".parcel-list-item-info-container"),this.$files=this.$item.find(".parcel-list-item-files"),this.$checkbox=this.$item.find(".parcel-list-item-checkbox"),this.$fileName=this.$item.find(".parcel-list-item-file-name"),this.$parcelNumFiles=this.$item.find(".parcel-list-item-num-files"),this.$itemRow=this.$item.find(".parcel-list-item-row"),this.$multiFileIcon=this.$item.find(".file-icon-multifile"),this.$previewCn=this.$("#parcel-list-preview-img-cn-"+this._escapeId(this.model.getId())),this.$preview=this.$("#parcel-list-preview-image-"+this._escapeId(this.model.getId())),this.$parcelItemIcon=this.$item.find("#parcel-list-item-icon-"+this._escapeId(this.model.getId())),this.$parcelListItemInfo=this.$item.find(".parcel-list-item-details"),this.$numFiles=this.$item.find("#parcel-list-item-num-files-"+this._escapeId(this.model.getId())),this.$date=this.$item.find("#parcel-list-item-sentdate-"+this._escapeId(this.model.getId())),this.$owner=this.$item.find("#parcel-list-item-owner-"+this._escapeId(this.model.getId())),this.$status=this.$item.find("#parcel-list-item-status-"+this._escapeId(this.model.getId())),this.$statusIcon=this.$item.find(".parcel-list-item-status-icon"),this.$numOfFilesString=this.$item.find(".multi-parcel-sub-heading"),this.$fileExtension=this.$item.find("#parcel-list-item-extension-"+this._escapeId(this.model.getId())),this.$starred=this.$item.find(".parcel-list-item-name-starred-icon"),this.$subheading=this.$item.find("parcel-list-item-subheading"),this.$subheadingSep=this.$item.find(".parcel-list-item-info-separator"),this.$gridExtension=this.$item.find(".parcel-list-grid-item-extension"),this.$gridFirstSeparator=this.$item.find(".grid-separator-one"),this.$gridOwner=this.$item.find(".parcel-list-grid-item-owner"),this.$gridSecondSeparator=this.$item.find(".grid-separator-two"),this.$gridDate=this.$item.find(".parcel-list-grid-item-date"),this.$gridSeparators=this.$item.find(".parcel-grid-item-info-separator"),this.$tripleDot=this.$item.find("#parcel-list-item-triple-dot-"+this._escapeId(this.model.getId())),this.$columnHeader=$(".sent-list-header-info-container"),this.$preview.on("error",this._thumbnailError)},_getNumFiles:function(){{var e,t;this.model.attributes.WorkflowType}e=this.model.getInfo();var i=o.isGreaterThanCutoffDate(this.model.get("create_date"),this.options.isInSearchResultsView);if(e.intro_subject&&i&&(t=e.intro_subject),"multi"==this.options.collectionsUiModel.get("single_multi_view")||""===t||void 0===t){var s=this.model.get("resources");t=s?s[0].name:"-"}return t},_getCreateDate:function(){var e=this.model.get("create_date"),t=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,t,!1):"-"},_getSharedDate:function(){var e,t=this.model.getInfo();t&&(e=t.shared_date);var i=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,i,!1):this._getCreateDate()?this._getCreateDate():void 0},_getLastActivityDate:function(){var e=this.model.get("last_activity_date");e||(e=this.model.get("modify_date"));var t=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,t,!1):"-"},_getLastAccessDate:function(){var e=this.model.getLastAccessDate(),t=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,t,!1):"-"},_getOwner:function(){var e,t=this.model.getSenderName(),i=this.options.appApi.options.usersMeIdentityModel.get("email").toLowerCase();return e=i.toLowerCase()==this.model.getSenderEmail().toLowerCase()?d.YOU:t?t:this.model.getSenderEmail().toLowerCase(),e?e:"-"},_getGridOwnerInfo:function(){var e,t;if("sender"==this.model.getInfo().user_role)e=d.YOU;else{var i=this.model.getSenderName()?this.model.getSenderName():this.model.getSenderEmail();e=void 0!=i?i:"-"}return t=e},_getDateSent:function(){return"Shared"},_getIconClass:function(e){var t,i=n.getFileInfo(e.type||"",e.name);return t=i.iconCls||""},_getIconDesc:function(e){var t,i=n.getFileInfo(e.content_type||"",e.name);return t=i.desc||""},_getWorkflowStatus:function(){var e=this.options.appApi.options.usersMeIdentityModel.get("email").toLowerCase();if(e==this.model.getSenderEmail().toLowerCase()){if(this.options.model.getInfo().state==c.UNSHARED_UC)return d.UNSHARED;var t=0,i=0;_.each(this.options.model.get("participants"),function(e){t++,e.status==c.OPENED&&i++},this);var s=i+" "+d.OF+" "+t+" "+d.VIEWED;return s}var s=d.WAITING_FOR_YOU;return _.each(this.options.model.get("participants"),function(t){e==t.email.toLowerCase()&&t.status==c.OPENED&&(s=d.VIEWED_CAPS)},this),s},_getStatus:function(){return this.options.model.getInfo().state==c.UNSHARED_UC?h.UNSHARED_STRING:p.SHARED},_getAssetExtension:function(){var e,t,i=this._getNumFiles();return e=i.lastIndexOf("."),t=n.getExtensionFromMimeType(this.model.getSingleFileMimeType()),t||(t=e>0?i.substr(e+1):""),t},_setCheckboxVisibility:function(){var e=this.$checkbox;this.options.checkbox?(s.removeClass(e,"hidden"),s.removeClass(this.$item,"no-checkbox")):(s.addClass(e,"hidden"),s.addClass(this.$item,"no-checkbox"))},_updateFields:function(){var t=this.model.id,i=this.$numFiles,s=this.$infoContainer;this.model.isActive()?s.removeClass("disabled"):s.addClass("disabled"),1==this.model.get("favorite")?this.$starred.show():this.$starred.hide(),("sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId)&&(this.$subheadingSep.hide(),this.$owner.hide()),this.$statusIcon.show(),i.attr("href")&&-1!==i.attr("href").indexOf(t)||i.attr("href","/sentfiles/"+t),e.Util.isCEF()&&this.$fileName.addClass("desktop");var o,r,a,l=this._getNumFiles();if(o=l.lastIndexOf("."),r=o>0?l.substr(0,o):l,a=n.getExtensionFromMimeType(this.model.getSingleFileMimeType()),a||(a=o>0?l.substr(o+1):""),this.options.isInSearchResultsView){var d=this.options.searchUiModel.get("mru_query_regex");r=r.replace(d,function(e){return"<b>"+e+"</b>"}),i.html(r)}else i.text(r);i.attr("title",r),this.$fileExtension.text(a.toUpperCase()),this.$date.text("sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?this._getLastActivityDate():this._getSharedDate()),this.$owner.text(h.FROM+" "+this._getOwner()),this.$status.text(this._getStatus()),this.$status.attr("title",this._getStatus()),this.$fileExtension.attr("title",a),"sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?this.$date.attr("title",this._getLastActivityDate()):this.$date.attr("title",this._getSharedDate()),this.$owner.attr("title",h.FROM+" "+this._getOwner()),this.$gridExtension.text(this._getAssetExtension().toUpperCase()),this.$gridExtension.attr("title",this._getAssetExtension().toUpperCase()),this.$gridOwner.text(this._getGridOwnerInfo()),this.$gridOwner.attr("title",this._getGridOwnerInfo()),"sender"==this.model.getInfo().user_role?(this.$gridDate.text(this._getLastActivityDate()),this.$gridDate.attr("title",this._getLastActivityDate())):(this.$gridDate.text(this._getSharedDate()),this.$gridDate.attr("title",this._getSharedDate()))},_onExpandedChange:function(e,t){this._showFileList(t)},_addUiModelEventListeners:function(){var e=this.options.itemUiModel;this.listenTo(e,"change:expanded",this._onExpandedChange).listenTo(e,"change:selected",this._onUiModelSelectedChange).listenTo(this.options.collectionsUiModel,"change:rhpShown",this._adjustLayout).listenTo(this.options.collectionsUiModel,"change:view",this._onViewChange).listenTo(this.options.collectionUiModel,"change:has_vertical_scrollbar",this._adjustLayout),this.options.appApi.windowApi.addWindowResizeCallback(_.bind(this._adjustLayout))},_onUiModelSelectedChange:function(){this._updateSelectionStatus()},_onViewChange:function(e){var t=this.options.collectionsUiModel.get("view");"list"==t?(this.$date.removeClass("shared-thumb-view"),this.$owner.removeClass("shared-thumb-view"),this.$status.removeClass("shared-thumb-view"),this.$statusIcon.removeClass("shared-thumb-view"),this.$preview.removeClass("shared-thumb-view"),this.$item.removeClass("shared-thumb-view"),this.$item.addClass("theme-list-item-row theme-file-list-row-border"),this.$previewCn.removeClass("shared-thumb-view theme-file-preview-background theme-grid-view-border"),this.$numFiles.removeClass("shared-thumb-view"),this.$numOfFilesString.removeClass("shared-thumb-view"),this.$tripleDot.removeClass("shared-thumb-view"),this.$numFiles.removeClass("cb-text-theme"),this.$numOfFilesString.removeClass("cb-text-theme"),this.$subheading.removeClass("shared-thumb-view"),this.$gridExtension.hide(),this.$gridOwner.hide(),this.$gridDate.hide(),this.$gridSeparators.hide()):"thumbnail"==t&&(this.isExpanded()&&this.collapse(),this.$date.addClass("shared-thumb-view"),this.$owner.addClass("shared-thumb-view"),this.$status.addClass("shared-thumb-view"),this.$statusIcon.addClass("shared-thumb-view"),this.$preview.addClass("shared-thumb-view"),this.$item.addClass("shared-thumb-view"),this.$item.removeClass("theme-list-item-row theme-file-list-row-border"),this.$previewCn.addClass("shared-thumb-view theme-file-preview-background theme-grid-view-border"),this.$numFiles.addClass("shared-thumb-view"),this.$numOfFilesString.addClass("shared-thumb-view"),this.$tripleDot.hide(),this.$subheading.addClass("shared-thumb-view"),this.$numFiles.addClass("cb-text-theme"),this.$numOfFilesString.addClass("cb-text-theme"),this.$numFiles.show(),this.$numOfFilesString.show(),this.$gridExtension.show(),"sender"==this.model.getInfo().user_role?(this.$gridFirstSeparator.hide(),this.$gridOwner.hide()):(this.$gridFirstSeparator.show(),this.$gridFirstSeparator.css("display",""),this.$gridOwner.show(),this.$gridOwner.css("display","")),this.$gridSecondSeparator.show(),this.$gridSecondSeparator.css("display",""),this.$gridDate.show(),this.$gridDate.css("display","")),this.$item.hasClass("selected")&&e&&(this.options.rootView.bringSelectedItemInView=!0,this.options.collectionsUiModel.trigger("scrollSelectedItemIntoViewEvent")),this._adjustLayout()},_showFileList:function(e){e?(this.render(!1,this.$item),this.$files.slideDown("fast")):(this.render(!0,this.$item),this.$files.slideUp("fast"))},_updateSelectionStatus:function(){var t=this.$item,o=this.$checkbox,n=this.$previewCn,r=this.model.get("resources").length>1,a=r?t:this.$itemRow,l=a.find("[aria-selected]").addBack();this.options.itemUiModel.get("selected")?(s.addClass(t,"selected"),s.addClass(o,"selected"),s.addClass(n,"selected"),l.attr("aria-selected",!0),o.attr("aria-checked",!0)):(s.removeClass(t,"selected"),s.removeClass(o,"selected"),s.removeClass(n,"selected"),l.attr("aria-selected",!1),o.attr("aria-checked",!1)),e.Util.isIE8()&&i.detachAndReattachElement(o)},_updateVisibilityOfColumns:function(e,t){var i=t.colMargin,s=this.$parcelListItemInfo.position().left,o=t.totalVisibleCols,n=e-s,r=n-i*o,a=t.totalFluidCols,l=r/a;if(1==t.fileName.visibility){var d=t.fileName.end-t.fileName.start+1;this.$parcelListItemInfo.css("width",l*d+"px"),this.$parcelListItemInfo.css("margin-right",i+"px"),this.$numFiles.show();var h=l*d*.9,p=this.$fileExtension.width(),u=this.$subheadingSep.width()+2*parseInt(this.$subheadingSep.css("marginLeft")),_=h-p-u;this.$owner.css("max-width",_+"px")}else this.$numFiles.hide(),this.$subheading.hide();if(1==t.date.visibility){var d=t.date.end-t.date.start+1,g=t.date.colNumber;this.$date.css("left",s+l*(t.date.start-1)+i*g+"px"),this.$date.css("width",l*d+"px"),this.$date.css("margin-right",i+"px"),this.$date.show()}else this.$date.hide();if(1==t.status.visibility){var d=t.status.end-t.status.start+1,g=t.status.colNumber;this._getStatus()===c.UNSHARED_STRING?(this.$status.css("left",s+l*(t.status.start-1)+i*g+"px"),this.$statusIcon.hide()):(this.$statusIcon.css("left",s+l*(t.status.start-1)+i*g+"px"),this.$status.css("left",s+l*(t.status.start-1)+i*g+25+"px"),this.$statusIcon.show(),this.$statusIcon.css("display","")),this.$status.css("width",l*d+"px"),this.$status.css("margin-right",i+"px"),this.$status.show()}else this.$status.hide(),this.$statusIcon.hide()},_adjustLayout:function(){var e=this.options.collectionsUiModel.get("view");this.$parcelListItemInfo.removeAttr("style"),this.$numFiles.removeAttr("style"),this.$numOfFilesString.removeAttr("style"),this.$date.removeAttr("style"),this.$status.removeAttr("style"),this.$statusIcon.removeAttr("style"),this.$tripleDot.removeAttr("style"),this.$gridExtension.removeAttr("style"),this.$gridDate.removeAttr("style"),this.$gridSecondSeparator.removeAttr("style"),this.$tripleDot.hide();"sentfiles"==this.options.pluginId?!0:!1;if("list"==e){var t=this.$item.width();t=this.$columnHeader&&this.$columnHeader.width()?this.$columnHeader.width():t,100>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!1},date:{visibility:!1},status:{visibility:!1},totalFluidCols:0,totalVisibleCols:0,colMargin:24}):t>100&&300>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:1},date:{visibility:!1},status:{visibility:!1},totalFluidCols:1,totalVisibleCols:1,colMargin:24}):t>300&&500>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:3},date:{visibility:!0,colNumber:1,start:4,end:5},status:{visibility:!1},totalFluidCols:5,totalVisibleCols:2,colMargin:24}):t>500&&700>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:5},date:{visibility:!0,colNumber:1,start:6,end:7},status:{visibility:!1},totalFluidCols:7,totalVisibleCols:2,colMargin:32}):this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:5},status:{visibility:!0,colNumber:1,start:6,end:7},date:{visibility:!0,colNumber:2,start:8,end:9},totalFluidCols:9,totalVisibleCols:3,colMargin:32})}else if("thumbnail"==e){var t=this.$el.width();if(t){var i=parseInt($(".shared-workflow-files-body").css("marginLeft")),s=$(".shared-thumb-view .shared-workflow-list-item").width(),o=24,n=Math.floor((t-i)/(s+o)),r=(t-i-s*n)/n;$(".shared-thumb-view .shared-workflow-list-item").css("marginRight",r+"px")}if(this._getStatus()===c.UNSHARED_STRING&&(this.$statusIcon.removeClass("shared-thumb-view"),this.$statusIcon.hide(),this.$numOfFilesString.css("left","-25px")),"sender"!=this.model.getInfo().user_role){this.$gridOwner.css("max-width",""),this.$gridDate.css("width","");var a=.9*this.$numOfFilesString.width(),l=this.$gridExtension.width(),d=this.$gridSeparators.width()+2*parseInt(this.$gridSeparators.css("marginLeft")),h=this.$gridDate.width(),p=this.$gridOwner.width();p>a-l-2*d-h&&(p=a-l-2*d-h),56>=p&&(p=55),h>a-l-2*d-p&&(h=a-l-2*d-p),23>=h&&(h=22),p+=1,h+=1,this.$gridOwner.css("max-width",p+"px"),this.$gridDate.css("width",h+"px")}}},_loadThumbnail:function(){if(this.model){var e=null;if(this.model.get("thumbnailUrl")&&this.options.model.getInfo().state!=c.UNSHARED_UC)e=this.model.get("thumbnailUrl"),this._showThumbnail(e,!0);else if(0==this.model.get("thumbFetchSucces",!1)||this.model.get("resources").length>1||"single"==this.options.collectionsUiModel.get("single_multi_view")&&this.options.model.getInfo().state==c.UNSHARED_UC)this._showThumbnail(e,!1);else if(this.options.appApi.rnaApi.done(function(e){e.logPerformance("SharedTabListRendition","start")}),this.model.attributes.participants.length){var i=this.model.getInvitationId(),s="asset-0";this.model.attributes.resources[0].asset_id&&(s=this.model.attributes.resources[0].asset_id);var o=t.opFactory.create("FetchingThumbnailForTrackedSendOp",this.options).run(i,s,0,u.THUMBNAIL);o.then(_.bind(function(t){t?(e=t,e?this._showThumbnail(e,!0):this._showThumbnail(e,!1),this.model.set("thumbnailUrl",e,{silent:!0}),this.model.set("thumbFetchSucces",!0,{silent:!0}),this.options.appApi.rnaApi.done(function(e){e.logPerformance("SharedTabListRendition","end")})):(this._showThumbnail(e,!1),this.model.set("thumbFetchSucces",!1))},this),function(){})}}},_thumbnailError:function(){this._showThumbnail(null,!1)},_showThumbnail:function(e,t){var i="#parcel-list-preview-image-"+this._escapeId(this.model.getId()),s=this.$(i),o="#parcel-list-item-icon-"+this._escapeId(this.model.getId()),n=this.$(o);s.attr("src",e),t?(s.show(),n.hide()):(s.hide(),n.show())}})}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-file-template-review.html",[],function(){return'<div role="row" class="review-list-item-file" data-id="<%= fileId %>"        aria-selected="false" aria-level="2">    <div role="gridcell"></div>    <div role="gridcell">        <div role="img"             aria-label="<%= iconDesc %>"             class="collection-item-thumb <%= iconCls %> review-list-item-file-icon"></div>        <a class="review-list-item-file-name theme-list-item-text"           tabindex="-1"><%- filename %></a>    </div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div>    <div role="gridcell"></div></div>'}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-item-template-review.html",[],function(){return'<div role="<%= itemRole %>" class="parcel-list-item review-list-item shared-workflow-list-item theme-list-item-row theme-file-list-row-border shared-file-list-text-color">    <div role="row" class="shared-list-item-row shared-theme-list-item-row" aria-selected="false">        <div role="gridcell">            <div class="review-list-item-checkbox" style="display:none;"                 tabindex="-1"                 aria-checked="false"                 aria-labelledby="review-list-item-filename-<%= viewId %>" id="review-list-item-checkbox-<%= viewId %>">            </div>        </div>        <div role="presentation"             class="review-list-item-info-container shared-list-item-info-container">            <div role="rowheader">                <div class="review-list-preview-img-cn shared-list-preview-img-cn theme-file-list-row-border" id="review-list-preview-img-cn-<%= viewId %>">                    <div role="img" aria-label="<%= iconDesc %>"                       aria-hidden="true"                       class="collection-item-thumb <%= iconCls %>                               review-list-item-icon shared-list-item-icon" id="review-list-item-icon-<%= viewId %>"></div>                <img class="review-list-preview-image shared-list-preview-image file-list-thumbnail-border centered-vertically" id="review-list-preview-image-<%= viewId %>" style="display: none;" src=""/>               </div>               <div class="review-list-item-details">                   <div class="review-list-item-filename"                     id="review-list-item-filename-<%= viewId %>"                     >                    <%- files %>                   </div>                   <img class="review-list-item-name-starred-icon" alt="" />                   <div class="review-list-item-subheading">                      <div class="review-list-item-extension"                         id="review-list-item-extension-<%= viewId %>">                       </div>                       <span class="review-list-item-info-separator ext-owner"> ● </span>                       <div class="review-list-item-owner"                             id="review-list-item-owner-<%= viewId %>">                          <%= owner %></div>                       <span class="review-list-item-info-separator owner-wfStatus"> ● </span>                       <div class="review-list-item-wfStatus"                             id="review-list-item-wfStatus-<%= viewId %>">                          <%= wfStatus %></div>                   </div>               </div>                   <div class="review-grid-item-info-outer">                       <div class="review-grid-item-info theme-virgo-basic-text cb-shaded-text-theme"                       id="review-grid-item-info-<%= viewId %>"                       >                       <div class="review-list-grid-item-extension"></div>                       <div class="review-grid-item-info-separator grid-separator-one"> ● </div>                       <div class="review-list-grid-item-owner"></div>                       <div class="review-grid-item-info-separator grid-separator-two"> ● </div>                       <div class="review-list-grid-item-date"></div>                       </div>                   </div>            </div>            <div role="gridcell" class="review-list-item-create-date"                 id="review-list-item-create-date-<%= viewId %>">               <%= createDate %></div>            <div role="gridcell" class="review-list-item-status"                 id="review-list-item-status-<%= viewId %>">             </div>            <img class = "review-list-item-status-icon" alt="" />            <div role="gridcell" class="review-list-item-triple-dot shared-list-item-triple-dot"                 id="review-list-item-triple-dot-<%= viewId %>">             </div>        </div>    </div>    <div role="presentation" class="review-list-item-files"></div>    <div role="presentation" class="review-list-item-mask"></div></div>'
}),define("acplugins/tracked-send/js/home-view/views/parcels-list-item-view-review",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/view-util","core/utils/css-util","core/utils/date-util","core/utils/file-types","core/utils/truncate","acplugins/tracked-send/js/home-view/templates/parcels-list-file-template-review.html","acplugins/tracked-send/js/home-view/templates/parcels-list-item-template-review.html","i18n!acplugins/reviews/js/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","core/models/workflow-status-strings","i18n!core/nls/ui-strings","i18n!files/nls/ui-strings","core/constants/thumbnail-constants"],function(e,t,i,s,o,n,r,a,l,d,c,h,p,u,g){t.ParcelsListItemViewReview=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(l),this._fileTemplate=_.template(a),this._addUiModelEventListeners()},render:function(t,i){var s,o,n,r,a,l=this.model.getSingleResource(),d=this.model.getId();if(e.View.prototype.render.call(this),this.$item)t?t.data("id")!==d&&(this.$item=this.$item.clone(),t.replaceWith(this.$item.get(0)),this._initWrappers()):this.$el.append(this.$item.get(0)),this.invalidate();else{1===l.length?(s=this._getIconClass(l[0]),o=this._getIconDesc(l[0]),n="presentation"):(s="file-icon-multifile review-list-item-icon-hitarea",o="",n="rowgroup"),r=d;var c;if(c="sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?this._getLastActivityDate():this._getSharedDate(),a=$(this._template({iconCls:s,iconDesc:o,files:this._getFiles(),createDate:c,owner:this._localizedOwner(),wfStatus:this._getWorkflowStatus(),viewId:r,modelId:d,itemRole:n})),e.Util.isCEF())if(1===l.length){var h=this._getFiles();"sentfiles"!=this.options.pluginId&&"sentfiles_search"!=this.options.pluginId&&(h+=", "+this._localizedOwner()),h+=", "+this._getWorkflowStatus(),h+=", "+this._getSharedDate(),a.find("[role='row']:first").addClass("review-list-item-row").attr({"aria-label":h,tabindex:"-1"})}else{var h=this._getParcelAriaLabel(l.length);"sentfiles"!=this.options.pluginId&&"sentfiles_search"!=this.options.pluginId&&(h+=", "+this._localizedOwner()),h+=", "+this._getWorkflowStatus(),h+=", "+this._getSharedDate(),a.addClass("review-list-item-row").attr({"aria-expanded":"false","aria-label":h,"aria-level":"1","aria-selected":"false",tabindex:"-1"})}else 1===l.length?a.find("[role='row']:first").addClass("review-list-item-row").attr({"aria-labelledby":"review-list-item-filename-"+r,tabindex:"-1"}):a.addClass("review-list-item-row").attr({"aria-expanded":"false","aria-labelledby":"review-list-item-filename-"+r+" review-list-item-create-date-"+r,"aria-level":"1","aria-selected":"false",tabindex:"-1"});o.length&&a.find(".collection-item-thumb:first").removeAttr("aria-hidden"),t?t.replaceWith(a):this.$el.append(a),this.$item=this.$el.children().eq(i),this._initWrappers()}return this.$item.data("id",d),e.Util.isCEF()&&(this.$item.find(".review-list-item-create-date").addClass("desktop"),this.$item.find(".review-list-item-owner").addClass("desktop"),this.$item.find(".review-list-item-file-name").addClass("desktop")),this._initWrappers(),this._updateFields(),this._onViewChange(),e.Util.isCEF()&&this._updateForVerticalScrollBar(),this},_getParcelAriaLabel:function(e){return _.template(d.GENERIC_ARIA_LABEL_STRING,{prefix:e,suffix:d.FILES})},_updateForVerticalScrollBar:function(){setTimeout(_.bind(function(){this.$el.length&&this.options.collectionUiModel.set("has_vertical_scrollbar",i.isVerticalScrollBarPresent(this.$el))},this),150)},remove:function(){this.$item.remove()},getViewElement:function(){return this.$item},invalidate:function(){e.View.prototype.invalidate.call(this)},expand:function(){this.options.itemUiModel.set("expanded",!0)},collapse:function(){this.options.itemUiModel.set("expanded",!1)},isExpanded:function(){return this.options.itemUiModel.get("expanded")},stopListening:function(t,i,s){e.View.prototype.stopListening.call(this,t,i,s)},_escapeId:function(e){return e.length?e.replace(/(:|\.|\[|\]|,|=|@|\/)/g,"\\$1"):void 0},_initWrappers:function(){this.$iconHitArea=this.$item.find(".review-list-item-icon-hitarea"),this.$infoContainer=this.$item.find(".review-list-item-info-container"),this.$files=this.$item.find(".review-list-item-files"),this.$starred=this.$item.find(".review-list-item-name-starred-icon"),this.$subheading=this.$item.find("review-list-item-subheading"),this.$subheadingSep=this.$item.find(".review-list-item-info-separator"),this.$subheadingSepOwnerWfStatus=this.$item.find(".review-list-item-info-separator.owner-wfStatus"),this.$subheadingSepExtensionOwner=this.$item.find(".review-list-item-info-separator.ext-owner"),this.$checkbox=this.$item.find("#review-list-item-checkbox-"+this._escapeId(this.model.getId())),this.$fileName=this.$item.find("#review-list-item-file-name-"+this._escapeId(this.model.getId())),this.$fileExtension=this.$item.find("#review-list-item-extension-"+this._escapeId(this.model.getId())),this.$numFiles=this.$item.find("#review-list-item-filename-"+this._escapeId(this.model.getId())),this.$fileDetails=this.$item.find(".review-list-item-details"),this.$gridInfo=this.$item.find("#review-grid-item-info-"+this._escapeId(this.model.getId())),this.$gridInfoOuter=this.$item.find(".review-grid-item-info-outer"),this.$date=this.$item.find("#review-list-item-create-date-"+this._escapeId(this.model.getId())),this.$owner=this.$item.find("#review-list-item-owner-"+this._escapeId(this.model.getId())),this.$wfStatus=this.$item.find("#review-list-item-wfStatus-"+this._escapeId(this.model.getId())),this.$status=this.$item.find("#review-list-item-status-"+this._escapeId(this.model.getId())),this.$statusIcon=this.$item.find(".review-list-item-status-icon"),this.$itemRow=this.$item.find(".review-list-item-row"),this.$parcelItemIcon=this.$item.find("#review-list-item-icon-"+this._escapeId(this.model.getId())),this.$multiFileIcon=this.$item.find(".file-icon-multifile"),this.$preview=this.$("#review-list-preview-image-"+this._escapeId(this.model.getId())),this.$previewCn=this.$("#review-list-preview-img-cn-"+this._escapeId(this.model.getId())),this.$tripleDot=this.$("#review-list-item-triple-dot-"+this._escapeId(this.model.getId())),this.$columnHeader=$(".sent-list-header-info-container"),this.$preview.on("error",this._onThumbnailError),this.$gridExtension=this.$item.find(".review-list-grid-item-extension"),this.$gridFirstSeparator=this.$item.find(".grid-separator-one"),this.$gridOwner=this.$item.find(".review-list-grid-item-owner"),this.$gridSecondSeparator=this.$item.find(".grid-separator-two"),this.$gridDate=this.$item.find(".review-list-grid-item-date"),this.$gridSeparators=this.$item.find(".review-grid-item-info-separator")},_onThumbnailError:function(){this._showThumbnail(null,!1)},_getFiles:function(){var e,t=this.model.getInfo();if(t&&t.intro_subject&&(e=t.intro_subject),!e||""===e){var i=this.model.getSingleResource();e=i?1===i.length?i[0].name:_.template(d.SENT_FILES_NUM_FILES,{numFiles:i.length}):0}return e},_getCreateDate:function(){var e=this.model.get("create_date");if(e){var t=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return o.formatDateWithFormat(e,t,!1)}return"-"},_getSharedDate:function(){var e,t=this.model.getInfo();t&&(e=t.shared_date);var i=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,i,!1):this._getCreateDate()?this._getCreateDate():void 0},_getLastActivityDate:function(){var e=this.model.get("last_activity_date");e||(e=this.model.get("modify_date"));var t=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,t,!1):"-"},_getLastAccessDate:function(){var e=this.model.getLastAccessDate(),t=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,t,!1):"-"},_getDeadline:function(){var e=this.model.getDeadline(),t=this.options.isInSearchResultsView?void 0:"YYMMDDHHmmssZ";return e?o.formatDateWithFormat(e,t):"-"},_getOwner:function(){var e=this.options.appApi.usersMeApi.options.usersMeIdentityModel,t=this.model.getPartcipantDetails(e);if(t&&t.role==h.REVIEW_CREATOR)return h.YOU;var i=this.model.getSenderName();return i?i:"-"},_getWorkflowStatus:function(){var e,t="",i=this.model.getInfo(),s=this._getDeadline(),o=this.model.attributes.WorkflowType;return _.isUndefined(i)||(e=i.user_status),_.isUndefined(e)||e.toUpperCase()!=h.FINISHED.toUpperCase()?_.isUndefined(e)||e.toUpperCase()!=h.COMMENTED.toUpperCase()?"-"!=s?t=c.DUE_BY+" "+s:o==h.CREATIVE_CLOUD&&(_.isUndefined(e)||e.toUpperCase()!=h.UNOPENED.toUpperCase()||(t=p.UNOPENED)):t=d.COMMENTED:t=d.FINISHED,t},_getStatus:function(){var e=this.model.getWorkflowStatus();return e&&e.toUpperCase()==h.UNSHARED_STRING.toUpperCase()?p.UNSHARED_STRING:u.SHARED},_getAssetExtension:function(){var e,t,i=this._getFiles();return e=i.lastIndexOf("."),t=n.getExtensionFromMimeType(this.model.getSingleFileMimeType()),t||(t=e>0?i.substr(e+1):""),t},_isReveiwComplete:function(){var e=0,t=0,i=!1,s=0;return _.each(this.options.model.get("participants"),function(o){e++,o.status.toUpperCase()==h.FINISHED.toUpperCase()&&t++,(o.status.toUpperCase()==h.COMMENTED.toUpperCase()||o.hasCommented)&&s++,o.role.toUpperCase()==h.INITIATOR.toUpperCase()&&o.status.toUpperCase()==h.UNSHARED_STRING.toUpperCase()&&(i=!0)},this),e!=t&&e!=s||this._getOwner()!=h.YOU||i?!1:!0},_localizedOwner:function(){var e=this._getOwner();return e==h.YOU?d.YOU:e},_getIconClass:function(e){{var t;n.getFileInfo(e.content_type||"",e.name)}return t="file-icon-pdf"},_getIconDesc:function(e){var t,i=n.getFileInfo(e.content_type||"",e.name);return t=i.desc||""},_resolveGUIDToName:function(){var e;e=_.isString(this.model.getInfo().creator)?this.model.getInfo().creator:this.model.getInfo().creator.adobeId;var t=this.model.getId();this.options.rootView.getSenderNameFromSntAPI(t,e).then(_.bind(function(e){this.model.setSenderInfo(e),name=this.model.getSenderName()?this.model.getSenderName():this.model.getSenderEmail(),this.$subheadingSepExtensionOwner&&this.$owner&&(this.$owner.text(p.FROM+" "+name),this.$owner.attr("title",p.FROM+" "+name),this.$owner.show(),this.$owner.css("display",""),this.$subheadingSepExtensionOwner.show(),this.$subheadingSepExtensionOwner.css("display",""),this.$gridOwner.text(name),this.$gridOwner.attr("title",name),this.$gridOwner.show(),this.$gridFirstSeparator.show(),this._adjustLayout())},this))},_updateFields:function(){var t=(this.model.getId(),this.$numFiles),i=this.$infoContainer,s=this._getWorkflowStatus();this.model.isActive()?i.removeClass("disabled"):i.addClass("disabled"),e.Util.isCEF()&&this.$fileName.addClass("desktop"),1===this.model.get("favorite")?this.$starred.show():this.$starred.hide();var o,r,a,l=this._getFiles();if(o=l.lastIndexOf("."),r=o>0?l.substr(0,o):l,a=n.getExtensionFromMimeType(this.model.getSingleFileMimeType()),a||(a=o>0?l.substr(o+1):""),this.options.isInSearchResultsView){var d=this.options.searchUiModel.get("mru_query_regex");r=r.replace(d,function(e){return"<b>"+e+"</b>"}),t.html(r)}else t.text(r);t.attr("title",r),this.$fileExtension.text(a.toUpperCase()),this.$date.text("sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?this._getLastActivityDate():this._getSharedDate()),this.$status.text(this._getStatus()),this.$wfStatus.text(s),this.$wfStatus.attr("title",s),""===s?(this.$wfStatus.hide(),this.$subheadingSepOwnerWfStatus.hide()):(this.$subheadingSepOwnerWfStatus.show(),this.$subheadingSepOwnerWfStatus.css("display",""),this.$wfStatus.show(),this.$wfStatus.css("display","")),this.$status.attr("title",this._getStatus()),this.$fileExtension.attr("title",a),"sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?this.$date.attr("title",this._getLastActivityDate()):this.$date.attr("title",this._getSharedDate());var c=this._localizedOwner();""==c||"-"==c?(this.$subheadingSepExtensionOwner.hide(),this.$owner.hide(),"sentfiles"!=this.options.pluginId&&"sentfiles_search"!=this.options.pluginId&&this._resolveGUIDToName()):(this.$owner.text(p.FROM+" "+c),this.$owner.attr("title",p.FROM+" "+c),this.$owner.css("display",""),this.$subheadingSepExtensionOwner.css("display","")),("sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId)&&(this.$subheadingSep.hide(),this.$owner.hide(),this.$wfStatus.hide()),this.$gridExtension.text(this._getAssetExtension().toUpperCase()),this.$gridExtension.attr("title",this._getAssetExtension().toUpperCase()),""==c||"-"==c?(this.$gridOwner.hide(),this.$gridFirstSeparator.hide()):(this.$gridOwner.text(c),this.$gridOwner.attr("title",c),this.$gridOwner.show(),this.$gridFirstSeparator.show()),"sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?(this.$gridDate.text(this._getLastActivityDate()),this.$gridDate.attr("title",this._getLastActivityDate())):(this.$gridDate.text(this._getSharedDate()),this.$gridDate.attr("title",this._getSharedDate()))},_addUiModelEventListeners:function(){var e=this.options.itemUiModel;this.listenTo(e,"change:selected",this._onUiModelSelectedChange).listenTo(this.options.collectionsUiModel,"change:view",this._onViewChange).listenTo(this.options.collectionsUiModel,"change:rhpShown",this._adjustLayout).listenTo(this.options.collectionUiModel,"change:has_vertical_scrollbar",this._adjustLayout),this.options.appApi.windowApi.addWindowResizeCallback(_.bind(this._adjustLayout))},_onUiModelSelectedChange:function(){this._updateSelectionStatus()},_showFileList:function(e){this.render(this.$item),e?this.$files.slideDown("fast"):this.$files.slideUp("fast")},_updateSelectionStatus:function(){var t=this.$item,o=this.$checkbox,n=this.$tripleDot,r=this.$previewCn,a=this.model.getSingleResource().length>1,l=a?t:this.$itemRow,d=l.find("[aria-selected]").addBack();this.options.itemUiModel.get("selected")?(s.addClass(t,"selected"),s.addClass(o,"selected"),s.addClass(n,"selected"),s.addClass(r,"selected"),d.attr("aria-selected",!0),o.attr("aria-checked",!0)):(s.removeClass(t,"selected"),s.removeClass(o,"selected"),s.removeClass(n,"selected"),s.removeClass(r,"selected"),d.attr("aria-selected",!1),o.attr("aria-checked",!1)),e.Util.isIE8()&&i.detachAndReattachElement(o)},_loadThumbnail:function(){if(this.model){var e=null;if(this.model.get("thumbnailUrl"))e=this.model.get("thumbnailUrl"),this._showThumbnail(e,!0);else if(0==this.model.get("thumbFetchSucces",!1))this._showThumbnail(e,!1);else{var i=t.opFactory.create("FetchingThumbnailForReviewOp",this.options).run(this.model.getSingleFileInfo().id,"asset-0",0,g.THUMBNAIL);i.then(_.bind(function(t){t?(e=t,e?this._showThumbnail(e,!0):this._showThumbnail(e,!1),this.model.set("thumbnailUrl",e,{silent:!0}),this.model.set("thumbFetchSucces",!0,{silent:!0})):(this._showThumbnail(e,!1),this.model.set("thumbFetchSucces",!1))},this),function(){}),this._showThumbnail(e,!1)}}},_showThumbnail:function(e,t){var i="#review-list-preview-image-"+this._escapeId(this.model.getId()),s=this.$(i),o="#review-list-item-icon-"+this._escapeId(this.model.getId()),n=this.$(o);t?(s.show(),n.hide(),s.attr("src",e)):(s.hide(),n.show())},_onViewChange:function(e){var t=this.options.collectionsUiModel.get("view");"list"==t?(this.$date.removeClass("shared-thumb-view"),this.$owner.removeClass("shared-thumb-view"),this.$status.removeClass("shared-thumb-view"),this.$statusIcon.removeClass("shared-thumb-view"),this.$preview.removeClass("shared-thumb-view"),this.$item.removeClass("shared-thumb-view"),this.$item.addClass("theme-list-item-row theme-file-list-row-border"),this.$previewCn.removeClass("shared-thumb-view theme-file-preview-background theme-grid-view-border"),this.$numFiles.removeClass("shared-thumb-view"),this.$gridInfo.removeClass("shared-thumb-view"),this.$gridInfoOuter.removeClass("shared-thumb-view"),this.$subheading.removeClass("shared-thumb-view"),this.$tripleDot.removeClass("shared-thumb-view"),this.$fileDetails.removeClass("shared-thumb-view"),this.$numFiles.removeClass("cb-text-theme"),this.$gridInfo.removeClass("cb-text-theme"),this.$tripleDot.removeClass("cb-text-theme"),this.$gridExtension.hide(),this.$gridOwner.hide(),this.$gridDate.hide(),this.$gridSeparators.hide()):"thumbnail"==t&&(this.$date.addClass("shared-thumb-view"),this.$owner.addClass("shared-thumb-view"),this.$status.addClass("shared-thumb-view"),this.$statusIcon.addClass("shared-thumb-view"),this.$preview.addClass("shared-thumb-view"),this.$item.addClass("shared-thumb-view"),this.$item.removeClass("theme-list-item-row theme-file-list-row-border"),this.$previewCn.addClass("shared-thumb-view theme-file-preview-background theme-grid-view-border"),this.$numFiles.addClass("shared-thumb-view"),this.$gridInfo.addClass("shared-thumb-view"),this.$gridInfoOuter.addClass("shared-thumb-view"),this.$tripleDot.addClass("shared-thumb-view"),this.$fileDetails.addClass("shared-thumb-view"),this.$subheading.addClass("shared-thumb-view"),this.$numFiles.addClass("cb-text-theme"),this.$gridInfo.addClass("cb-text-theme"),this.$gridInfoOuter.addClass("cb-text-theme"),this.$tripleDot.addClass("cb-text-theme"),this.$numFiles.show(),this.$fileDetails.show(),this.$gridInfo.show(),this.$gridInfoOuter.show(),this.$tripleDot.show(),this.$gridExtension.show(),"sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?(this.$gridFirstSeparator.hide(),this.$gridOwner.hide()):(this.$gridFirstSeparator.show(),this.$gridFirstSeparator.css("display",""),this.$gridOwner.show(),this.$gridOwner.css("display","")),this.$gridSecondSeparator.show(),this.$gridSecondSeparator.css("display",""),this.$gridDate.show(),this.$gridDate.css("display","")),this.$item.hasClass("selected")&&e&&(this.options.rootView.bringSelectedItemInView=!0,this.options.collectionsUiModel.trigger("scrollSelectedItemIntoViewEvent")),this._adjustLayout()},_updateVisibilityOfColumns:function(e,t){var i=t.colMargin,s=this.$fileDetails.position().left,o=t.totalVisibleCols,n=e-s,r=n-i*o,a=t.totalFluidCols,l=r/a;if(1==t.fileName.visibility){var d=t.fileName.end-t.fileName.start+1;if(this.$fileDetails.css("width",l*d+"px"),this.$fileDetails.css("margin-right",i+"px"),this.$fileDetails.show(),"sentfiles"!=this.options.pluginId&&"sentfiles_search"!=this.options.pluginId){this.$owner.css("max-width",""),this.$wfStatus.css("max-width","");var c=l*d*.9,p=this.$fileExtension.width(),u=this.$subheadingSep.width()+2*parseInt(this.$subheadingSep.css("marginLeft")),_=this.$wfStatus.width(),g=this.$owner.width();g>c-p-2*u-_&&(g=c-p-2*u-_),23>=g&&(g=22),_>c-p-2*u-g&&(_=c-p-2*u-g),23>=_&&(_=22),g+=1,_+=1,this.$owner.css("max-width",g+"px"),this.$wfStatus.css("max-width",_+"px")}}else this.$numFiles.hide(),this.$subheading.hide();if(1==t.date.visibility){var d=t.date.end-t.date.start+1,m=t.date.colNumber;this.$date.css("left",s+l*(t.date.start-1)+i*m+"px"),this.$date.css("width",l*d+"px"),this.$date.css("margin-right",i+"px"),this.$date.show()}else this.$date.hide();if(1==t.status.visibility){var d=t.status.end-t.status.start+1,m=t.status.colNumber;this._getStatus()===h.UNSHARED_STRING?(this.$status.css("left",s+l*(t.status.start-1)+i*m+"px"),this.$statusIcon.hide()):(this.$statusIcon.css("left",s+l*(t.status.start-1)+i*m+"px"),this.$status.css("left",s+l*(t.status.start-1)+i*m+25+"px"),this.$statusIcon.show(),this.$statusIcon.css("display","")),this.$status.css("width",l*d+"px"),this.$status.css("margin-right",i+"px"),this.$status.show()}else this.$status.hide(),this.$statusIcon.hide()},_adjustLayout:function(){var e=this.options.collectionsUiModel.get("view");if(this.$numFiles.removeAttr("style"),this.$fileDetails.removeAttr("style"),this.$gridInfoOuter.removeAttr("style"),this.$gridInfo.removeAttr("style"),this.$date.removeAttr("style"),this.$status.removeAttr("style"),this.$statusIcon.removeAttr("style"),this.$tripleDot.removeAttr("style"),this.$gridExtension.removeAttr("style"),this.$gridDate.removeAttr("style"),this.$gridSecondSeparator.removeAttr("style"),this.$tripleDot.hide(),"list"==e){var t=this.$item.width();t=this.$columnHeader&&this.$columnHeader.width()?this.$columnHeader.width():t,t&&(100>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!1},date:{visibility:!1},status:{visibility:!1},totalFluidCols:0,totalVisibleCols:0,colMargin:24}):t>100&&300>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:1},date:{visibility:!1},status:{visibility:!1},totalFluidCols:1,totalVisibleCols:1,colMargin:24}):t>300&&500>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:3},date:{visibility:!0,colNumber:1,start:4,end:5},status:{visibility:!1},totalFluidCols:5,totalVisibleCols:2,colMargin:24}):t>500&&700>=t?this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:5},date:{visibility:!0,colNumber:1,start:6,end:7},status:{visibility:!1},totalFluidCols:7,totalVisibleCols:2,colMargin:32}):this._updateVisibilityOfColumns(t,{fileName:{visibility:!0,colNumber:0,start:1,end:5},status:{visibility:!0,colNumber:1,start:6,end:7},date:{visibility:!0,colNumber:2,start:8,end:9},totalFluidCols:9,totalVisibleCols:3,colMargin:32}))}else if("thumbnail"==e){var t=this.$el.width();if(t){var i=parseInt($(".shared-workflow-files-body").css("marginLeft")),s=$(".shared-thumb-view .shared-workflow-list-item").width(),o=24,n=Math.floor((t-i)/(s+o)),r=(t-i-s*n)/n;$(".shared-thumb-view .shared-workflow-list-item").css("marginRight",r+"px")}if(this._getStatus()===h.UNSHARED_STRING&&(this.$statusIcon.removeClass("shared-thumb-view"),this.$statusIcon.hide(),this.$gridInfoOuter.css("left","-25px")),"sender"!=this.model.getInfo().user_role){this.$gridOwner.css("max-width",""),this.$gridDate.css("width","");var a=.9*this.$gridInfoOuter.width(),l=this.$gridExtension.width(),d=this.$gridSeparators.width()+2*parseInt(this.$gridSeparators.css("marginLeft")),c=this.$gridDate.width(),p=this.$gridOwner.width();p>a-l-2*d-c&&(p=a-l-2*d-c),56>=p&&(p=55),c>a-l-2*d-p&&(c=a-l-2*d-p),23>=c&&(c=22),p+=1,c+=1,this.$gridOwner.css("max-width",p+"px"),this.$gridDate.css("width",c+"px")}}}})}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-item-placeholder-template.html",[],function(){return'<div class="shared-workflow-list-item"><div class="track-send-loader"></div></div>'}),define("acplugins/tracked-send/js/home-view/views/parcels-list-item-placeholder-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/util","core/utils/view-util","acplugins/tracked-send/js/home-view/templates/parcels-list-item-placeholder-template.html","i18n!core/nls/ui-strings","core/views/view"],function(e,t,i,s,o){return t.ParcelsListItemPlaceholderView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(o)},render:function(){var t,i="parcel-list-loader";return e.View.prototype.render.call(this),this.$item?this.$el.append(this.$item.get(0)):(t=$(this._template()),this.$el.append(t),this.$item=this.$el.children().eq(this.$el.children().length-1)),this.$item.data("id",i),this},_isPlaceholderItemVisible:function(){var e="parcel-list-loader",t=this.$el.children(),i=t.length,s=t.eq(i-1);return s.data("id")==e?!0:!1},_removePlaceholderItem:function(){this.$item&&this.$item.remove()},_appendPlaceholderItem:function(){this.$el&&this.$el.append(this.$item.get(0))}}),t.ParcelsListItemPlaceholderView}),define("acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-if-confirmed-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/ops/op"],function(e,t,i,s){t.UnshareOneIfConfirmedOp=e.Op.extend({run:function(){var e,o,n,r=this.options,a=r.appApi.dialogApi;return e=i.CONFIRM_UNSHARE_MSG_ONE_ITEM,o=i.CONFIRM_UNSHARE_TITLE,a.displayTextAlert(a.SEVERITY_WARNING,o,e,i.UNSHARE,s.CANCEL).then(function(){n=new t.UnshareOneParcelOp(r),n.run()})}})}),define("acplugins/tracked-send/js/home-view/templates/parcel-activity-template.html",[],function(){return'<div role="dialog" tabindex="-1" aria-label="<%- header %>" class="parcel-activity-dlg generic-dialog">            <div role="presentation" class="dialog-title-bar">                <div role="heading" class="dialog-title">                    <%= header %>                </div>            </div>            <div role="grid" class="parcel-table-container-2">                <div role="row" class="parcel-activity-table-header collection-header">                    <div role="columnheader" class="collection-header-column-title parcel-recipient-col parcel-activity-nosort"><%= recipient %></div>                    <div role="columnheader" class="collection-header-column-title parcel-activity-col parcel-activity-nosort"><%= activity %></div>                    <div role="columnheader" class="collection-header-column-title parcel-item-col parcel-activity-nosort"><%= item %></div>                    <button role="columnheader" tabindex="0" aria-sort="descending" class="collection-header-column-title parcel-date-col parcel-date-col-header"><%= dateViewed %>                    <div class="collection-header-column-sort descending parcel-activity-sort-btn" data-test-name="parcel-activity-date-sort"></div>                    </button>                </div>                <div role="presentation" class="parcel-activity-body"></div>            </div>            <button class="parcel-activity-close-btn control-button ui-theme theme-text button-grey"><%= close %></button>    </div>'}),define("acplugins/tracked-send/js/home-view/templates/parcel-activity-item-template.html",[],function(){return'<div role="row" class="parcel-activity-item-row collection-item">        <div role="gridcell" class="parcel-activity-item-recipient parcel-recipient-col"><%= email %></div>            <div role="gridcell" class="parcel-activity-item-what parcel-activity-col"><%= what %></div>        <div role="gridcell" class="parcel-activity-item-item parcel-item-col">            <div role="img" aria-label="<%= iconDesc %>"<% if (!iconDesc.length) { %>                 aria-hidden="true"<% } %>                 class="collection-item-thumb parcel-activity-item-icon <%= iconCls %>"></div>            <div class="parcel-activity-item-filename"><%= filename %></div>        </div>        <div role="gridcell" class="parcel-activity-item-date parcel-date-col"><%= date %></div>    </div>'}),define("acplugins/tracked-send/js/home-view/collections/fileviewevent-collection",["acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util"],function(e,t){e.FileViewEventCollection=Backbone.Collection.extend({initialize:function(e,t){Backbone.Collection.prototype.initialize.call(this,e,t),this.parcel_id=t.parcel_id,this.rootUrl=t.rootUrl},url:function(){return this.rootUrl+"/a/api/parcels/"+this.parcel_id+"/file_view_events"},fetch:function(e){return e=e||{},e=t.customizeOptions("GET",e),Backbone.Collection.prototype.fetch.call(this,e)},parse:function(e){return e.events}})}),define("acplugins/tracked-send/js/home-view/views/parcel-activity-dlg",["core/ac-core","core/utils/date-util","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcel-activity-template.html","acplugins/tracked-send/js/home-view/templates/parcel-activity-item-template.html","core/utils/file-types","core/utils/truncate","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/utils/ts-utils","core/utils/util","core/utils/http-util","acplugins/tracked-send/js/home-view/collections/fileviewevent-collection"],function(e,t,i,s,o,n,r,a,l,d,c,h){i.ParcelActivityDlg=e.DialogView.extend({PAGE_SIZE:25,_page_num:0,_sort_order:"desc",_no_more_events:!1,_prev_scrolltop:0,_what_map:{parcel_view:a.PARCEL_ACTIVITY_PREVIEWED,download:a.PARCEL_ACTIVITY_DOWNLOADED},events:{"click .parcel-activity-close-btn":"_onCloseBtnClick","click .parcel-date-col-header":"_onSortClick"},initialize:function(){var t,n,r,c=this.options.parcelModel.id,p=this.options,u=c,g={},m={};n=this.options.appApi.baseFilesUrisApi.getSendApiUri(),n=d.extractRootUrl(n),t={parcel_id:u,comparator:!1,rootUrl:n},e.DialogView.prototype.initialize.call(this),this._fileviewevent_collection=new i.FileViewEventCollection([],t),p.parcelModel.set("fileviewevents",this._fileviewevent_collection),this._template=_.template(s),this._itemTemplate=_.template(o),e.View.prototype.initialize.call(this),_.each(p.parcelModel.get("participants"),function(e){g[this._getLegacyId(e.id)]=""===e.email?a.PARCEL_ACTIVITY_PUBLIC_VISITOR:_.escape(e.email)},this),this._inv_emails=g,_.each(p.parcelModel.get("resources"),function(e){e.icon_class=this._getIconClass(e),e.icon_desc=this._getIconDesc(e)},this);var v=this.options.appApi.baseFilesUrisApi.getSendApiUri()+"parcels/"+u+"/assets",w=this,f=h.getRequestHeaders("GET");$.ajax(v,{type:"GET",headers:f,dataType:"JSON",global:!0,async:!1}).then(function(e){var t=e.assets;_.each(t,function(e){e.icon_class=w._getIconClass(e),e.icon_desc=w._getIconDesc(e),m[e.id]=e})},function(){}),this._files_by_id=m,r=p.parcelAssetsCollection&&p.parcelAssetsCollection.length>1?l.MULTI:l.SINGLE,p.appApi.siteCatalystApi.logScEvent([l.PREVIEW,l.SHARED,r,l.FULL_ACTIVITY,l.SHOWN])},render:function(){e.DialogView.prototype.render.call(this),this.$el.html(this._template({header:_.template(a.PARCEL_ACTIVITY_HEADING,{emailSubject:_.escape(this.options.parcelModel.get("send_track_info").intro_subject)}),recipient:a.PARCEL_ACTIVITY_RECIPIENT,activity:a.PARCEL_ACTIVITY_ACTIVITY,item:a.PARCEL_ACTIVITY_ITEM,dateViewed:a.PARCEL_ACTIVITY_DATE_VIEWED,close:a.PARCEL_ACTIVITY_CLOSE})),this.$body=this.$(".parcel-activity-body"),this.loadEvents(_.bind(function(e){this._checkLimit(e.length),this.displayEvents(e),this.$body.scrollTop(0)},this),!1),this.$body.scroll(_.bind(function(){this._checkScroll()},this)),this._initWrappers(),this._invalidateSize(),this._initTabLimits(),this.$el.find(":focusable:first").focus()},loadEvents:function(e,t){this.isLoading=!0,this._fileviewevent_collection.fetch({data:{sort:"created!"+this._sort_order,page:this._page_num,max:this.PAGE_SIZE},reset:t,success:e})},displayEvents:function(e){_.each(e.models,function(e){var i,s,o,n,r=e.get("event_type"),l=e.get("file_id"),d="hidden",c="";"parcel_view"===r?(o=this.options.parcelModel.get("resources"),1===o.length?(n=o[0].name,d=o[0].icon_class,c=o[0].icon_desc):(n=a.PARCEL_ACTIVITY_ALL_FILES_PREVIEW,d="file-icon-multifile")):"all"===l?(n=a.PARCEL_ACTIVITY_ALL_FILES,d="file-icon-multifile"):(s=this._files_by_id[l],n=s?s.name:"",d=s?s.icon_class:"hidden",c=s?s.icon_desc:""),i=this._itemTemplate({filename:n,iconCls:d,iconDesc:c,what:this._what_map[r],email:this._inv_emails[e.get("invitation_id")],date:t.formatDate(e.get("created"))}),this.$body.append(i)},this),_.each(this.$(".parcel-recipient-col"),function(e){var t=$(e);r.truncateElementText(t)}),_.each(this.$(".parcel-activity-item-filename"),function(e){var t=$(e);r.truncateElementText(t)}),this.isLoading=!1},close:function(t,i){var s;s=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?l.MULTI:l.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([l.PREVIEW,l.SHARED,s,l.FULL_ACTIVITY,l.CLOSE]),e.DialogView.prototype.close.call(this,t,i)},_initWrappers:function(){e.DialogView.prototype._initWrappers.call(this),this.$body=this.$(".parcel-activity-body")},_onSortClick:function(){var e,t=this.options;this._sort_order="asc"===this._sort_order?"desc":"asc",this._page_num=0,this._no_more_events=!1,this.loadEvents(_.bind(function(e){var t=this.$(".parcel-activity-sort-btn"),i=this.$(".parcel-date-col-header");this.$body.empty(),this._checkLimit(e.length),this.displayEvents(e),this.$body.scrollTop(0),"asc"===this._sort_order?(t.removeClass("descending"),i.attr("aria-sort","ascending")):(t.addClass("descending"),i.attr("aria-sort","descending"))},this),!0),e=t.parcelAssetsCollection&&t.parcelAssetsCollection.length>1?l.MULTI:l.SINGLE,t.appApi.siteCatalystApi.logScEvent([l.PREVIEW,l.SHARED,e,l.FULL_ACTIVITY,l.SORT,l.DATE_VIEWED])
},_checkLimit:function(e){e<this.PAGE_SIZE&&(this._no_more_events=!0)},_getLegacyId:function(e){return e},_checkScroll:function(){var e=100,t=this.$body.height(),i=this.$body.get(0).scrollHeight,s=this.$body.scrollTop(),o=this._prev_scrolltop;this._prev_scrolltop=s,!this._no_more_events&&s>o&&!this.isLoading&&+s+t+e>i&&(this._page_num+=1,this.loadEvents(_.bind(function(e){this._checkLimit(e.length),this.displayEvents(e)},this),!1))},_getIconClass:function(e){var t,i=n.getFileInfo(e.content_type||"",e.name);return t=i.iconCls||""},_getIconDesc:function(e){var t,i=n.getFileInfo(e.content_type||"",e.name);return t=i.desc||""},_setupSizedElement:function(e){var t=this.$(e);t.attr("data-title")?t.text(t.attr("data-title")):t.attr({"data-title":t.text()}),r.truncateElementText(t)},_invalidateSize:function(){this._setupSizedElement(".dialog-title"),this._center(),this._showModalMask(!0)},_addAppApiCallbacks:function(){e.DialogView.prototype._addAppApiCallbacks.call(this),c.isIE8()||this.options.appApi.windowApi.addWindowResizeCallback(this._onWindowResize)},_removeAppApiCallbacks:function(){e.DialogView.prototype._removeAppApiCallbacks.call(this),c.isIE8()||this.options.appApi.windowApi.removeWindowResizeCallback(this._onWindowResize)},_onWindowResize:function(){this.render()}})}),define("viewer/templates/viewer-page-template.html",[],function(){return'<div class="page-main-container">        <div class="page-error error"></div>        <div class="page-body-container parcel-container">            <div class="page-body thumbnails">                <div class="parcel-body-header">                    <div class="full-preview-home-btn-wrapper">                        <button class="full-preview-home-btn parcel-preview-home-btn"                                id="full-preview-header-home-btn"                                title="<%= back %>">                            <span class="hidden-accessible"><%= back %></span>                        </button>                        <div class="full-preview-home-btn-separator"></div>                        <div class="toolbar-item plugin-selector">                            <div class="toolbar-item-icon-container">                                <div class="toolbar-item-icon back-toolbar-icon parcel-preview-home-btn"></div>                            </div>                            <div class="toolbar-item-label"></div>                        </div>                    </div>                    <div class="full-preview-branding-logo wrap-branding-logo"><div class="branding-logo parcel-branding-logo"></div></div>                    <div class="full-preview-name parcel-subject" id="parcel-subject" role="heading" aria-level="1"><%= parcelSubject %></div>                    <div class="parcel-action-buttons">                        <button class="toolbar-item plugin-selector tracked-send-unshare-btn">                            <div class="tracked-send-toolbar-item-icon-container">                                <div class="tracked-send-toolbar-item-icon unshare"></div>                            </div>                                <div class="tracked-send-toolbar-item-label"><%= unshare %></div>                        </button>                        <button class="toolbar-item plugin-selector tracked-send-forward-btn">                            <div class="tracked-send-toolbar-item-icon-container">                                <div class="tracked-send-toolbar-item-icon forward"></div>                            </div>                                <div class="tracked-send-toolbar-item-label"><%= forwardLabel %></div>                        </button>                        <button class="control-button ts-viewer-download-button"><%= downloadAll %></button>                    </div>                </div>                <div class="parcel-rendition-body-holder">                    <div class="parcel-rendition-list"                         role="group" aria-labelledby="parcel-subject">                    </div>                    <div role="complimentary" class="parcel-rendition-list-rhp">                    </div>                </div>            </div>            <div class="page-body full-preview"></div>        </div>    </div>'}),define("viewer/templates/page-header-template.html",[],function(){return'<div class="adc-logo"></div>    <div class="page-header-tabs">        <div class="page-header-tab selected"><%= title %></div>    </div>'}),define("viewer/nls/ui-strings",{root:!0,"xx-xx":!0,"de-de":!0,"en-gb":!0,"es-es":!0,"fr-fr":!0,"it-it":!0,"ja-jp":!0}),define("viewer/nls/root/ui-strings",{APP_NAME:"VIEWER",UNSUPPORTED_BROWSER_TITLE_2:"Browser Unsupported",UNSUPPORTED_BROWSER_MSG_2:"You are running an unsupported version of Internet Explorer. To view shared file(s), you must upgrade to the <a class='dialog-link' href='<%= ie %>'>latest version of Internet Explorer</a>, or use the latest version of <a class='dialog-link' href='<%= chrome %>'>Google Chrome</a>, <a class='dialog-link' href='<%= safari %>'>Safari</a> or <a class='dialog-link' href='<%= firefox %>'>Firefox</a>."}),define("viewer/views/page-header-view",["core/ac-core","viewer/ac-viewer","viewer/templates/page-header-template.html","i18n!viewer/nls/ui-strings","core/views/view"],function(e,t,i,s){t.PageHeaderView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&this.$el.html(this._template({title:s.APP_NAME})),this}})}),define("viewer/templates/full-preview-tracked-send-template.html",[],function(){return'<div class="full-preview-header files-header our-preview">    <div class="full-preview-home-btn-wrapper">        <button class="full-preview-home-btn parcel-preview-home-btn"                id="full-preview-header-home-btn"                title="<%= back %>">            <span class="hidden-accessible"><%= back %></span>        </button>        <div class="full-preview-home-btn-separator"></div>    </div>     <div class="full-preview-name-container folder-path                with-home-btn">        <div class="wrap-branding-logo"><div class="branding-logo parcel-branding-logo"></div></div>        <div id="full-preview-name" class="full-preview-name"             role="heading" aria-level="1"><%- name %></div>         <button class="full-preview-action-menu-btn                       files-header-btn"             id="full-preview-action-menu-btn"             title="<%= actions %>" aria-haspopup="true">            <span class="hidden-accessible"><%= actions %></span>        </button>        <div class="full-preview-action-menu menu" role="menu"              aria-hidden="true"></div>    </div>     <div class="full-preview-plugins-selector">        <div class="toolbar-selection-pointer"></div>        <div class="full-preview-plugins-selector-separator"></div>    </div>     <div class="full-preview-header-btns files-header-btns right">        <button class="full-preview-download-btn"             data-test-name="full-preview-header-download-btn">            <div class="full-preview-download-btn-icon"></div>            <div class="full-preview-download-btn-label">                 <%= download %></div>        </button>    </div></div> <div class="full-preview-main">    <div class="full-preview-body folder-items">        <div id="full-preview-image-container"             class="full-preview-image-container">            <!-- Intentionally omit close tag for img.                 See bug 3498744 (IE8) -->            <img class="full-preview-image single hidden" alt=""/>            <div class="full-preview-svg single hidden"/>        </div>        <div class="full-preview-not-available">            <%= previewNotAvailable %>            <span class="full-preview-not-available-desc"                ><%= previewNotAvailableDesc %></span>        </div>    </div>     <div class="full-preview-hud" role="toolbar"         aria-labelledby="full-preview-name"         aria-controls="full-preview-image-container"></div></div> <div class="full-preview-sidebar" tabindex="-1"></div>'}),define("viewer/views/full-preview-tracked-send-view",["core/ac-core","files/ac-files","viewer/ac-viewer","viewer/templates/full-preview-tracked-send-template.html","i18n!files/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","files/views/full-preview-view"],function(e,t,i,s){i.FullPreviewTrackedSendView=t.FullPreviewView.extend({initialize:function(){t.FullPreviewView.prototype.initialize.call(this),this._template=_.template(s),this.options.fullPreviewUiModel.on("change:show_info",this._toggleRHP,this)},template:function(){return this._template},render:function(){var e,i=(this.options.parcelModel.get("invitation"),new Image);return t.FullPreviewView.prototype.render.call(this),!this.$homeBtn||this.options.viewMode&&"plugin"===this.options.viewMode||this.options.parcelModel.get("enabled")!==!0||(this.$parcelBody.addClass("branded"),this.$fullPreviewHeader.addClass("has-branding"),this.$fullPreviewMain.addClass("has-branding"),this.$parcelBody.addClass("has-branding"),this.$fullPreviewSidebar.addClass("has-branding"),e=this.options.parcelModel.get("color"),this.$fullPreviewBrandingLogo.children().length<1&&this.$fullPreviewBrandingLogo.append(i)),this},_initWrappers:function(){t.FullPreviewView.prototype._initWrappers.call(this),this.$fullPreviewBrandingLogo=$(".full-preview .branding-logo"),this.$parcelContainerFullPreviewName=$(".parcel-container .full-preview-name"),this.$parcelBody=this.$(".full-preview-name-container"),this.$fullPreviewHeader=this.$(".full-preview-header"),this.$fullPreviewMain=this.$(".full-preview-main"),this.$fullPreviewName=this.$(".full-preview-name"),this.$fullPreviewSidebar=this.$(".full-preview-sidebar"),this.$fullPreviewHomeButtonWrapper=this.$(".full-preview-home-btn-wrapper"),this.$fullPreviewHomeButton=this.$(".full-preview-home-btn")},_renderHudView:function(){this._renderChildView("_fullPreviewHudView",i.FullPreviewTrackedSendHudView,this.$previewHud)},_toggleRHP:function(){var e;LOG("Toggle Right Hand Panel"),e=this.options.fullPreviewUiModel.get("show_info"),e?this.$fullPreviewSidebar.addClass("show"):this.$fullPreviewSidebar.removeClass("show")}})}),define("viewer/templates/parcel-asset-template.html",[],function(){return'<div class="parcel-asset-view spinner-icon" role="group" aria-labelledby="parcel-name-<%= viewId %>">        <div role="presentation" class="parcel-hover-preview parcel-asset-rendition-block">            <div role="presentation" class="hover-preview-page3 hover-preview-page small-shadow"></div>            <div role="presentation" class="hover-preview-page2 hover-preview-page small-shadow"></div>            <div role="presentation" class="hover-preview-page1 hover-preview-page small-shadow">                <img class="parcel-asset-rendition" alt="" src="<%= rendition_url %>" />                <div role="presentation" class="hover-preview-not-available-parcel">                    <div class="hover-preview-not-available-header"><%=PREVIEW_NOT_AVAILABLE%></div>                    <div class="hover-preview-not-available-desc">                        <%=PREVIEW_NOT_AVAILABLE_DESC%>                    </div>                </div>                <div role="presentation" class="hover-preview-hud">                    <button data-test-name="hover-preview-hud-prev"                            class="hover-preview-hud-prev                                   hover-preview-control                                   hover-preview-nav-btn disabled"                            title="<%= PREV_PAGE_TITLE %>"                            aria-label="<%= PREV_PAGE_TITLE %>" disabled>                        <div class="hover-preview-nav-btn-img hover-preview-img-prev"></div>                    </button>                    <button data-test-name="hover-preview-hud-next" class="hover-preview-hud-next                                   hover-preview-control                                   hover-preview-nav-btn"                            title="<%= NEXT_PAGE_TITLE %>"                            aria-label="<%= NEXT_PAGE_TITLE %>">                        <div class="hover-preview-nav-btn-img hover-preview-img-next"></div>                    </button>                </div>            </div>        </div>        <div role="presentation" class="parcel-asset-rendition-footer">            <button class="parcel-inline download-button" title="<%= DOWNLOAD %>" aria-label="<%= DOWNLOAD %>"></button><button class="parcel-inline parcel-name" id="parcel-name-<%= viewId %>"><%= filename %></button>        </div>    </div>'}),define("viewer/views/parcel-asset-view",["core/ac-core","viewer/ac-viewer","viewer/templates/parcel-asset-template.html","i18n!files/nls/ui-strings","i18n!core/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,t,i,s,o,n){t.ParcelAssetView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i),this._addKeyEventListener()},resetRendition:function(){var e=this.model.getRenditionUrl("tile",this.model.get("current_page"));this.$rendition.attr("src",e)},adjustHud:function(){0===this.model.get("current_page")?(this.$prevBtn.addClass("disabled").prop("disabled",!0),this.$nextBtn.removeClass("disabled").prop("disabled",!1)):this.model.get("current_page")===this.model.get("page_count")-1?(this.$prevBtn.removeClass("disabled").prop("disabled",!1),this.$nextBtn.addClass("disabled").prop("disabled",!0)):(this.$prevBtn.removeClass("disabled").prop("disabled",!1),this.$nextBtn.removeClass("disabled").prop("disabled",!1))},turnPage:function(e){e.stopPropagation();var t,i,s=e.data.direction,o=1,r="NextPg",a=this.options;"prev"===s&&(o=-1,r="PrevPg"),1===o&&this.$nextBtn.hasClass("disabled")||-1===o&&this.$prevBtn.hasClass("disabled")||(i=a.parcelAssetsCollection&&a.parcelAssetsCollection.length>1?n.MULTI:n.SINGLE,a.appApi.siteCatalystApi.logScEvent(a.viewMode&&"plugin"===a.viewMode?[n.PREVIEW,i,n.FILE,r]:[n.RECVIEW,i,n.FILE,r]),t=(this.model.get("current_page")||0)+o,this.model.set("current_page",t),this.resetRendition(),this.adjustHud())},download:function(t){t.stopPropagation();var i=this.model,s=_.extend({},this.options,{id:i.get("id"),content_type:i.get("content_type")});this._triggerViewEvent(e.ViewEvents.DOWNLOAD,s),this.options.appApi.siteCatalystApi.logScEvent([n.RECVIEW,n.MULTI,n.DOWNLOAD_ONE])},render:function(t,i){var n,r=this.model.id,a=1;return e.View.prototype.render.call(this),this.$item||(n=this._template({filename:this.model.get("name"),rendition_url:this.model.getRenditionUrl("tile",0),PREVIEW_NOT_AVAILABLE:o.PREVIEW_NOT_AVAILABLE,PREVIEW_NOT_AVAILABLE_DESC:o.PREVIEW_NOT_AVAILABLE_DESC,DOWNLOAD:o.DOWNLOAD,PREV_PAGE_TITLE:s.PREV_PAGE_TITLE,NEXT_PAGE_TITLE:s.NEXT_PAGE_TITLE,viewId:r}),t?t.replaceWith(n):this.$el.append(n),this.$item=this.$el.children().eq(i),this.$rendition=$(this.$item.find(".parcel-asset-rendition")),this.$hud=$(this.$item.find("div.hover-preview-hud")),this.$prev=this.$hud.find(".hover-preview-img-prev"),this.$next=this.$hud.find(".hover-preview-img-next"),this.$prevBtn=this.$hud.find(".hover-preview-hud-prev"),this.$nextBtn=this.$hud.find(".hover-preview-hud-next"),this.$download=this.$item.find(".download-button"),this.$norendition=this.$item.find(".hover-preview-not-available-parcel"),this.$rendition.on("error",{},_.bind(function(){this.$norendition.show(),this.$rendition.hide(),$(this.$item.find(".parcel-asset-rendition-block")).css("opacity",1),$(this.$item.find(".hover-preview-page")).css("margin-top",this.$norendition.height()/2-this.$norendition.height())},this)),this.$rendition.on("load",{},_.bind(function(){$(this.$item.find(".hover-preview-page")).css("margin-top",this.$rendition.height()/2-this.$rendition.height()),$(this.$item.find(".parcel-asset-rendition-block")).css("opacity",1),this.$item.removeClass("spinner-icon")},this)),a=parseInt(this.model.get("page_count"),10),a>1?(this.$rendition.on("load",{},_.bind(function(){var e=$(this.$item.find(".hover-preview-page"));e.css("width",this.$rendition.width()).css("height",this.$rendition.height()).css("margin-top",this.$rendition.height()/2-this.$rendition.height())},this)),this.$prevBtn.on("click",{direction:"prev"},_.bind(this.turnPage,this)),this.$nextBtn.on("click",{direction:"next"},_.bind(this.turnPage,this))):this.$hud.addClass("hidden"),this.$download.on("click",{},_.bind(this.download,this)),this.$norendition.find(".preview-download").on("click",{},_.bind(this.download,this))),this.$item.data("id",r),this._checkForReportAbuseFlow(),this},_checkForReportAbuseFlow:function(){"True"===this.options.parcelModel.get("reportabuse")&&($(".parcel-asset-rendition").hide(),$(".hover-preview-not-available-parcel").show())},_onKeyPress:function(e){var t,i=$(e.target),s=e.charCode||e.keyCode,o=!1,n=this.$prevBtn,r=this.$nextBtn,a=!1;return(13===s||32===s)&&(a=i.is(n),(a||i.is(r))&&(t=a?r:n,i.trigger("click"),o=!0,i.is(":disabled")&&t.focus())),o}})}),define("viewer/views/multi-file-view",["core/ac-core","viewer/ac-viewer","i18n!acplugins/tracked-send/js/nls/ui-strings","viewer/views/parcel-asset-view","core/views/view"],function(e,t,i){t.MultiFileView=e.View.extend({events:{"click .parcel-asset-view":"_onClickView"},initialize:function(){e.View.prototype.initialize.call(this)},render:function(){return e.View.prototype.render.call(this),this._renderChildViews(),$(".parcel-rendition-list").addClass("plugin"===this.options.viewMode?"plugin":"viewer"),this},_renderChildViews:function(){var e,t=this.$el.children(),s=t.length,o=0,n=this.options.parcelAssetsCollection;n.each(function(i){var n=this._getChildItemView(i);e=s>o?t.eq(o):void 0,n.render(e,o),o+=1},this),"plugin"!==this.options.viewMode&&0===$(".report-abuse").length&&this.$el.append('<div role="button" tabindex="0" class="report-abuse"><span class="report-abuse-label">'+i.REPORT_ABUSE+"</span></div>")},_getChildItemView:function(e){var i,s=this.options,o=e.id,n=this.$el;return i=this.getChildViewById(o),i?(i.$el!==n&&i.setElement(n),_.extend(i.model.attributes,e.attributes)):(s=_.extend({},s,{el:n,model:e}),i=new t.ParcelAssetView(s),this.addChildView(i,o)),i},_getEventTargetItem:function(e){return $(e.target).closest(".parcel-asset-view")},_getEventTargetView:function(e){var t,i=this._getEventTargetItem(e);return i&&(t=this.getChildViewById(i.data("id"))),t},_onClickView:function(e){var t,i,s,o=this.options;s=this._getEventTargetView(e),i=s.model,t=i.id,this._triggerViewEvent("viewer:preview-file",_.extend({},o,{id:t,itemModel:i}))}})}),define("viewer/templates/viewer-page-rhp-view-template",[],function(){return'<div class="ts-rhp-respond-back-multi"></div><div role="button" tabindex="0" class="report-abuse">    <span class="report-abuse-label"><%= reportAbuse %></span></div> '}),define("acplugins/tracked-send/js/viewer-rhp/templates/respond-back-view-template.html",[],function(){return'<div class="ts-rhp-respond-back-container">       <div class="ts-rhp-sender-title ts-rhp-title"><%= senderHeading %></div>       <div class="ts-rhp-sender-name"><%= senderName %></div>       <input type="button" class="button-light-blue-small ts-rhp-reply-button"           value="<%= replyBtn %>"/>       <div class="ts-rhp-message-title ts-rhp-title"><%- messageHeading %></div>       <div class="ts-rhp-email-subject ts-rhp-body-single" title="<%- emailSubject %>"><%- emailSubject %></div>       <div class="ts-rhp-email-message ts-rhp-body-multi"><%- emailMessage %></div>       <div class="ts-rhp-date-title ts-rhp-title"><%= dateTitle %></div>       <div class="ts-rhp-date-sent ts-rhp-body-single"><%= sentDate %></div>   </div>'}),define("acplugins/tracked-send/js/viewer-rhp/views/respond-back-view",["core/ac-core","acplugins/tracked-send/js/viewer-rhp/templates/respond-back-view-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/date-util","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,t,i,s,o){return e.View.extend({events:{"click .ts-rhp-reply-button":"_onReplyClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(t)},render:function(){var t=this.options.parcelModel,s=t.get("email_message"),o=t.get("sender_email"),n=t.get("sender_name"),r=t.get("email_subject");e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({messageHeading:i.SHARE_SUBJECT_MSG_HEADING,emailSubject:r,emailMessage:s,senderEmail:o,senderHeading:i.SENDER_NAME,senderName:n,replyBtn:i.REPLY,dateTitle:i.SENT_DATE,sentDate:this._formatDateSend()})),this._initWrappers()),s||o||n?(this.$respondBackContainer.parent().show(),o?this.$replyButton.show():this.$replyButton.hide(),r?this.$emailSubject.show():this.$emailSubject.hide(),s?this.$emailMessage.show():this.$emailMessage.hide(),r||s?this.$messageTitle.show():this.$messageTitle.hide()):this.$respondBackContainer.parent().hide()},_onReplyClick:function(){var e,t,s="mailto:",n=this.options.parcelModel;t=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?[o.RECVIEW,o.MULTI,o.PREVIEW,o.REPLY]:[o.RECVIEW,o.SINGLE,o.REPLY],this.options.appApi.siteCatalystApi.logScEvent(t),s+=n.get("sender_email"),e=_.template(i.EMAIL_REPLY_FORMAT,{emailSubject:encodeURIComponent(n.get("email_subject"))}),s+="?subject="+e,document.location.href=s},_initWrappers:function(){this.$respondBackContainer=this.$(".ts-rhp-respond-back-container"),this.$replyButton=this.$(".ts-rhp-reply-button"),this.$emailSubject=this.$(".ts-rhp-email-subject"),this.$emailMessage=this.$(".ts-rhp-email-message"),this.$messageTitle=this.$(".ts-rhp-message-title")},_formatDateSend:function(){var e,t=this.options.parcelModel;return e=t.get("date_sent"),t?s.formatDate(e||""):""}})}),define("viewer/views/viewer-page-rhp-view",["core/ac-core","viewer/ac-viewer","viewer/templates/viewer-page-rhp-view-template","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/viewer-rhp/views/respond-back-view","core/views/view"],function(e,t,i,s,o){t.ViewerPageRHPView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i),this._addModelEventListeners()},render:function(){var t=this.options.parcelModel;e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({reportAbuse:s.REPORT_ABUSE,sentBy:s.SENDER_NAME,senderName:t.get("sender_name")})),this._initWrappers()),this._renderChildViews()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$respondBack=$(".ts-rhp-respond-back")},_renderChildViews:function(){this._renderRespondBackView()},_renderRespondBackView:function(){this.$respondBack=$(".ts-rhp-respond-back-multi"),this._renderChildView("_respondBackView",o,this.$respondBack)}})}),define("viewer/views/viewer-page-view",["core/ac-core","files/ac-files","app/ac-app","viewer/ac-viewer","acplugins/tracked-send/js/tool/ac-tracked-send","core/utils/css-util","viewer/templates/viewer-page-template.html","i18n!files/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","viewer/views/page-header-view","viewer/views/full-preview-tracked-send-view","viewer/views/multi-file-view","viewer/views/viewer-page-rhp-view","app/views/modal-mask-view"],function(e,t,i,s,o,n,r,a,l,d){s.ViewerPageView=e.View.extend({events:{"click .ts-viewer-download-button":"_onDownloadClick","click .report-abuse":"_onReportAbuseClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(r),this._addUiModelEventListeners(),this._addModelEventListeners(),this._addAppApiCallbacks(),this._addKeyEventListener(),this.on("viewer:preview-file",this._onClickPreview,this)},render:function(){var t=this.$el,i=this.options.parcelModel,s=i.get("email_message"),o=i.get("sender_email"),n=i.get("sender_name");return e.View.prototype.render.call(this),(s||o||n)&&t.addClass("respondBack"),0===this.$el.children().length&&(this.$el.html(this._template({parcelSubject:this._getParcelSubject(),downloadAll:l.DOWNLOAD_ALL,forwardLabel:l.FORWARD,notifyMeWhenViewed:l.NOTIFY_ME_WHEN_VIEWED,viewedBy:l.VIEWED_BY,viewFullActivity:l.VIEW_FULL_ACTIVITY,unshare:l.UNSHARE,reportAbuse:l.REPORT_ABUSE,back:a.BACK})),1===this.options.parcelAssetsCollection.models.length&&"plugin"!==this.options.viewMode&&(this.$(".thumbnails").css("visibility","hidden"),this.$(".parcel-container").css("background-color","#f5f5f5")),this._initWrappers(),this._updateButtonStatus(),this._checkForReportAbuseFlow(),this._renderBrandingLogo()),this._renderChildViews(),this._updateName(),this},stopListening:function(t,i,s){e.View.prototype.stopListening.call(this,t,i,s)},teardown:function(){this._removeModelEventListeners()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){0!==this.$el.children().length&&this._updateButtonStatus()},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$header=this.$(".page-header"),this.$error=this.$(".page-error"),this.$pageBody=this.$(".page-body.thumbnails"),this.$fullPreview=this.$(".page-body.full-preview"),this.$thumbnails=this.$(".parcel-rendition-list"),this.$rightPanel=this.$(".parcel-rendition-list-rhp"),this.$viewedByList=this.$(".parcel-viewed-by-list"),this.$viewedByHead=this.$(".parcel-viewed-by-heading"),this.$notifyChbox=this.$(".parcel-notify-checkbox"),this.$notifyLable=this.$(".parcel-notify-checkbox-label"),this.$modalMask=$("#modal-mask"),this.$parcelBody=this.$(".page-body-container"),this.$parcelBodyHeader=this.$(".parcel-body-header"),this.$brandingLogo=this.$(".branding-logo"),this.$wrapBrandingLogo=this.$(".wrap-branding-logo"),this.$fullPreviewName=this.$(".full-preview-name"),this.$parcelActionBtns=this.$(".parcel-action-buttons"),this.$homeBtnWrapper=this.$(".full-preview-home-btn-wrapper"),this.$homeBtnWrapper.length||(this.$homeBtnWrapper=this.$(".full-preview-home-btn"))},_renderBrandingLogo:function(){var e,t=this.options.parcelModel.get("invitation"),i=new Image;1===this.options.parcelAssetsCollection.models.length||this.options.viewMode&&"plugin"===this.options.viewMode||this.options.parcelModel.get("enabled")!==!0||(this.$parcelBody.addClass("branded"),e=this.options.parcelModel.get("color"),$(i).load($.proxy(this.render,this)),i.src=this.options.itemModel.rootUrl+"a/invitation/"+t+"/asset/branding",this.$brandingLogo.append(i))},_renderChildViews:function(){return e.Features.isFeatureEnabled("ts_enable_eol_ie8and9")&&util.isIE9orBelow()?(this.$parcelBody.hide(),void this._renderUnsupportedBrowserView()):(this.$error.hide(),(this.options.parcelAssetsCollection.models.length>1||"plugin"===this.options.viewMode)&&this._renderPageHeaderView(),this._renderFullPreviewView(),this._renderModalMaskView(),(this.options.parcelAssetsCollection.models.length>1||"plugin"===this.options.viewMode)&&this._renderMultiFileView(),void this._renderRightHandPanel())},_renderUnsupportedBrowserView:function(){this.$error.show(),this._renderChildView("_unsupportedBrowserView",s.UnsupportedBrowserView,this.$error)},_renderPageHeaderView:function(){this._renderChildView("_pageHeaderView",s.PageHeaderView,this.$header)},_renderFullPreviewView:function(){this._renderChildView("_fullPreviewView",s.FullPreviewTrackedSendView,this.$fullPreview)},_renderModalMaskView:function(){var e=this.options.dialogsUiModel.getDialogCount();0===e&&this._renderChildView("_modalMaskView",s.ModalMaskView,this.$modalMask)._updateModal()},_renderMultiFileView:function(){this._renderChildView("_multiFileView",s.MultiFileView,this.$thumbnails)},_renderRightHandPanel:function(){this._renderChildView("_previewRHP",s.ViewerPageRHPView,this.$rightPanel)},_updateButtonStatus:function(){var e=this.options,t=this.$notifyChbox,i=this.$notifyLable,s=e.parcelModel.get("invitations"),o=s&&1===s.length&&"PARCEL_PUBLIC_SHARING"===s[0].recipient_email,r=!o&&e.parcelModel.get("delivery_receipts");r?(n.addClass(t,"selected"),t.prop("checked",!0)):(n.removeClass(t,"selected"),t.prop("checked",!1)),o?(n.addClass(t,"disabled"),n.addClass(i,"disabled"),t.prop("disabled",!0)):(n.removeClass(t,"disabled"),n.removeClass(i,"disabled"),t.prop("disabled",!1))},_addUiModelEventListeners:function(){var e=this.options,t=e.windowUiModel||e.appApi.windowApi.options.windowUiModel;t&&t.on("change:width",this._onWindowResize).on("change:height",this._onWindowResize)},_addAppApiCallbacks:function(){this.options.appApi.previewApi.addItemModelChangeCallback(this._onFullPreviewModelChange)},_onFullPreviewModelChange:function(e){this._toggleOverlay(e?!0:!1)},_toggleOverlay:function(e){var t=this.$pageBody,i="hidden";t&&t.length&&(e?t.addClass(i).attr("aria-hidden",!0):(t.removeClass(i).removeAttr("aria-hidden"),this.render()))},_onWindowResize:function(){if(!this._onDebouncedWindowResize){var e=this.options,t=e.windowUiModel||e.appApi.windowApi.options.windowUiModel;this._onDebouncedWindowResize=_.debounce(this.render,t.get("resize_debounce_delay"))}this._onDebouncedWindowResize()},_onDownloadClick:function(){var t={parentView:this,id:"all"};this.options.appApi.siteCatalystApi.logScEvent([d.RECVIEW,d.MULTI,d.DOWNLOAD_ALL]),this._triggerViewEvent(e.ViewEvents.DOWNLOAD,t)},_onClickPreview:function(i){var s,o,n,r=t.opFactory,a=i.fullPreviewUiModel,l={item_model:i.itemModel};o=i.itemModel.get("page_count"),n=a.get("scroll_pages_limit"),n||(n=1e3);try{e.Features.isFeatureEnabled("enable_ngsend")&&(l.enable_ngdoc=!0,l.view_type="ngdoc")}catch(d){LOG("enable_ngsend is not a feature flipper")}return l.view_format=o>n?"fit_page_width":"scroll_pages",a.set(l),this.options.appApi.siteCatalystApi.logScEvent(["RecView","Multi","Preview","Shown"]),s=r.create("OpeningFullPreviewOp",i),s.run()},_checkForReportAbuseFlow:function(){var e=this.options;"True"===e.parcelModel.get("reportabuse")&&_.defer(function(){$(".report-abuse").trigger("click")}),"plugin"===e.viewMode&&$(".report-abuse").hide()},_onReportAbuseClick:function(){var t,i={parentView:this};return this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?(t=[d.RECVIEW,d.MULTI,d.PREVIEW,d.REPORT_ABUSE],i.parcelId=this.options.parcelAssetsCollection.id):(t=[d.RECVIEW,d.SINGLE,d.REPORT_ABUSE],i.id=this.options.itemModel.id),this.options.appApi.siteCatalystApi.logScEvent(t),this._triggerViewEvent(e.ViewEvents.SHOW_REPORT_ABUSE_DLG,i),!1},_getParcelSubject:function(){return _.escape(this.options.parcelModel.get("email_subject"))},_getNameWidth:function(){var e=n.getFullWidth(this.$parcelBodyHeader)-n.getFullWidth(this.$wrapBrandingLogo)-n.getExtraWidth(this.$fullPreviewName)-n.getFullWidth(this.$homeBtnWrapper)-n.getFullWidth(this.$parcelActionBtns);return e},_updateName:function(){var e=this.$fullPreviewName;e&&e.length&&(this.$fullPreviewName.text(this._getParcelSubject()),this._truncateName())},_truncateName:function(){function t(){return truncate.getTextSize(s).width-i}var i=this._getNameWidth(),s=this.$fullPreviewName;"ja-jp"===e.Locale.getLocale()&&(i*=.85,i=Math.floor(i)),!isNaN(i)&&i>0&&truncate.truncateToFit(s,t)},_onKeyPress:function(e){var t=$(e.target),i=e.charCode||e.keyCode,s=!1;return 13!==i&&32!==i||!t.is("[role='button']:not([aria-disabled='true']):not(:disabled)")||(t.trigger("click"),s=!0),s}})}),define("acplugins/tracked-send/js/home-view/templates/parcel-preview-rhp-template",[],function(){return'    <div class="parcel-topic-message-heading" role="heading" level="2"><%= emailHeading %></div>   <div class="parcel-message"><%- emailMessage %></div>   <div role="grid">       <div role="row">           <div class="parcel-viewed-by-heading" role="columnheader">               <%= viewedBy %>           </div>           <div class="hidden-accessible" role="columnheader">               <%= views %>           </div>       </div>       <div role="presentation" class="parcel-viewed-by-list">       </div>   </div>   <div role="button" tabindex="0" class="parcel-activity-btn">       <span class="parcel-activity-btn-label"><%= viewFullActivity %></span>   </div>   <div class="parcel-notify">       <input type="checkbox" class="parcel-notify-checkbox core-checkbox"              id="parcel-notify-checkbox" />       <span class="parcel-notify-checkbox-checkmark" aria-hidden="true"></span>       <div class="parcel-notify-checkbox-label">           <label for="parcel-notify-checkbox"><%= notifyMeWhenViewed %></label>       </div>   </div> '
}),define("acplugins/tracked-send/js/home-view/templates/viewer-page-recipient-template.html",[],function(){return'<div role="row" class="parcel-viewed-by-item">        <div role="gridcell" class="parcel-viewed-by-email">            <%= email %>            <% if (typeof(url) != "undefined") { %><a href="<%= url %>" target="_blank"><% } %>            <% if (typeof(url) != "undefined") { %><%= openLink %><% } %>            <% if (typeof(url) != "undefined") { %></a><% } %>        </div>        <div role="gridcell" class="parcel-viewed-by-count"><%= count %></div>    </div>'}),define("acplugins/tracked-send/js/home-view/views/parcel-preview-rhp-view",["core/ac-core","app/ac-app","files/ac-files","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcel-preview-rhp-template","acplugins/tracked-send/js/home-view/templates/viewer-page-recipient-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/utils/css-util","core/utils/view-util","acplugins/tracked-send/js/utils/sc-constants"],function(e,t,i,s,o,n,r,a,l,d){s.ParcelPreviewRHPView=e.View.extend({events:{"click .parcel-notify-checkbox":"_onDeliveryReceiptsClick","click .parcel-notify-checkbox-label":"_onDeliveryReceiptsClick","click .parcel-activity-btn":"_onActivityBtnClick","keydown .parcel-activity-btn":"_onActivityBtnClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(o),this._recipientTemplate=_.template(n),this._addModelEventListeners()},render:function(){var t=this.options.parcelModel;e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({notifyMeWhenViewed:r.NOTIFY_ME_WHEN_VIEWED,viewedBy:r.VIEWED_BY,viewFullActivity:r.VIEW_FULL_ACTIVITY,publicLink:r.PARCEL_PUBLIC_SHARING,openLink:r.OPEN_LINK,emailHeading:r.MESSAGE_HEADING,emailTopic:t.get("email_subject"),emailMessage:t.get("email_message"),views:r.VIEWS})),this._initWrappers(),this._renderRightPanelItems()),this._updateButtonStatus()},_addModelEventListeners:function(){this.options.parcelModel.on("change",this._onParcelChange)},_onParcelChange:function(){this._updateButtonStatus()},_removeModelEventListeners:function(){this.options.parcelModel.off("change")},_initWrappers:function(){this.$viewedByList=this.$(".parcel-viewed-by-list"),this.$viewedByHead=this.$(".parcel-viewed-by-heading"),this.$notifyChbox=this.$(".parcel-notify-checkbox"),this.$notifyLable=this.$(".parcel-notify-checkbox-label"),this.$parcelTopicMessageHeading=this.$(".parcel-topic-message-heading"),this.$parcelMessage=this.$(".parcel-message")},_renderRightPanelItems:function(){var e,t,i,s,o=this.options.parcelModel,n=o.get("invitations"),a=[],l=!1;n=_.sortBy(n,function(e){return e.recipient_email}),_.each(n,function(o){e=o.event_counts.parcel_view||0,"PARCEL_PUBLIC_SHARING"===o.recipient_email?(s=o.preview_url,i=this._recipientTemplate({email:r.PARCEL_PUBLIC_SHARING,openLink:r.OPEN_LINK,count:e,url:s})):(l=!0,t=this._recipientTemplate({email:_.escape(o.recipient_email),count:e}),a.push(t))},this),i&&a.push(i),this.$viewedByList.append(a),l||(this.$parcelTopicMessageHeading.hide(),this.$parcelMessage.hide())},_updateButtonStatus:function(){var e=this.options,t=this.$notifyChbox,i=this.$notifyLable,s=e.parcelModel.get("invitations"),o=s&&1===s.length&&"PARCEL_PUBLIC_SHARING"===s[0].recipient_email,n=!o&&e.parcelModel.get("delivery_receipts");n?(a.addClass(t,"selected"),t.prop("checked",!0)):(a.removeClass(t,"selected"),t.prop("checked",!1)),l.enableInput(t,!o),o?a.addClass(i,"disabled"):a.removeClass(i,"disabled")},_onActivityBtnClick:function(e){var t,i,o,n=this.options;return"keydown"===e.type&&13!==e.which&&32!==e.which?!0:(i=_.extend(this.options,{parentView:this}),delete i.el,t=new s.ParcelActivityDlg(i),t.open(),o=n.parcelAssetsCollection&&n.parcelAssetsCollection.length>1?d.MULTI:d.SINGLE,void n.appApi.siteCatalystApi.logScEvent([d.PREVIEW,d.SHARED,o,d.VIEW_FULL_ACTIVITY]))},_onDeliveryReceiptsClick:function(){var e,t,i=this.options,o=i.parcelModel.get("invitations"),n=1===o.length&&"PARCEL_PUBLIC_SHARING"===o[0].recipient_email,r=!i.parcelModel.get("delivery_receipts");if(!n)return this._setCheckboxSelectionStatus(r),e=i.parcelAssetsCollection&&i.parcelAssetsCollection.length>1?d.MULTI:d.SINGLE,i.appApi.siteCatalystApi.logScEvent([d.PREVIEW,d.SHARED,e,d.NOTIFY_WHEN_VIEWED,r?d.CHECKED:d.UNCHECKED]),t=s.opFactory.create("SettingDeliveryReceiptsOp",{parcelModel:this.options.parcelModel,deliveryReceipts:r}),t.run().fail(_.bind(function(){this._setCheckboxSelectionStatus(!r)},this))},_setCheckboxSelectionStatus:function(e){var t=this.$(".parcel-notify-checkbox");e?(a.addClass(t,"selected"),t.prop("checked",!0)):(a.removeClass(t,"selected"),t.prop("checked",!1))}})}),define("acplugins/tracked-send/js/home-view/views/parcel-preview-view",["core/ac-core","app/ac-app","files/ac-files","acplugins/tracked-send/js/home-view/ac-tracked-send","viewer/ac-viewer","core/utils/view-util","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-parcel-op","acplugins/tracked-send/js/home-view/ops/manipulation/unshare-one-if-confirmed-op","acplugins/tracked-send/js/home-view/views/parcel-activity-dlg","viewer/views/viewer-page-view","viewer/collections/parcel-asset-collection","core/models/ui/error-ui-model","core/models/ui/full-preview-ui-model","core/models/ui/plugins-ui-model","app/models/ui/modal-mask-ui-model","acplugins/tracked-send/js/home-view/views/parcel-preview-rhp-view"],function(e,t,i,s,o,n,r){s.ParcelPreviewView=o.ViewerPageView.extend({events:{"click .parcel-preview-home-btn":"_onHomeBtnClick","click .tracked-send-forward-btn":"_onForwardClick","click .tracked-send-unshare-btn":"_onUnshareClick","click .parcel-viewed-by-email":"_onPublicLinkClick"},initialize:function(){this.options.viewMode="plugin",this.options.errorUiModel=e.uiModelFactory.create("ErrorUiModel"),this.options.fullPreviewUiModel=e.uiModelFactory.create("FullPreviewUiModel"),this.options.fullPreviewPluginsUiModel=e.uiModelFactory.create("PluginsUiModel"),this.options.fullPreviewOverlaysUiModel=e.uiModelFactory.create("PluginsUiModel"),this.options.modalMaskUiModel=t.uiModelFactory.create("ModalMaskUiModel"),this.options.fullPreviewUiModel.set({standalone:!1,read_only:!1}),o.ViewerPageView.prototype.initialize.call(this),this.on(i.ViewEvents.FULL_PREVIEW_CLOSE,this._onFullPreviewClose,this)},render:function(){var e=this.options.parcelModel.id,t=s.PLUGIN_ID+"/"+e;o.ViewerPageView.prototype.render.call(this),this.options.appApi.routerApi.navigate(t)},_renderChildViews:function(){this._renderPageHeaderView(),this._renderFullPreviewView(),this._renderModalMaskView(),this._renderMultiFileView(),this._renderRightHandPanel()},_renderRightHandPanel:function(){this._renderChildView("_previewRHP",s.ParcelPreviewRHPView,this.$rightPanel)},_onFullPreviewClose:function(){i.opFactory.create("ClosingFullPreviewOp",this.options).run()},closeWithoutResolving:function(){this.applyMethodRecursively("undelegateEvents"),this.applyMethodRecursively("stopListening"),this._triggerViewEvent("ParcelPreview_Close")},_initWrappers:function(){o.ViewerPageView.prototype._initWrappers.call(this),this.$unshareButton=this.$(".tracked-send-unshare-btn")},_updateButtonStatus:function(){o.ViewerPageView.prototype._updateButtonStatus.call(this),n.enableInput(this.$unshareButton,this.options.parcelModel.get("is_active"))},_onClickPreview:function(e){var t=e.itemModel;this.options.appApi.routerApi.navigate("/file/"+t.id,{trigger:!0}),this.closeWithoutResolving()},_onHomeBtnClick:function(e){e.preventDefault(),this.closeWithoutResolving(),this.options.appApi.routerApi.navigate(s.PLUGIN_ID)},_onForwardClick:function(){var e,t=this.options,i="/send/parcel/"+t.parcelModel.id;t.appApi.routerApi.navigate(i,{trigger:!0}),this.closeWithoutResolving(),e=t.parcelAssetsCollection&&t.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,t.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,e,r.PREVIEW,r.RHP,r.SHARE_FILE_BUTTON])},_onPublicLinkClick:function(){var e;e=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,e,r.PUBLIC_LINK])},_onUnshareClick:function(){var e,t,i;this.$unshareButton.hasClass("disabled")||(i=this.options.parcelAssetsCollection&&this.options.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,this.options.appApi.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,i,r.UNSHARE]),t=_.extend(this.options,{itemModel:this.options.parcelModel}),e=new s.UnshareOneIfConfirmedOp(t),e.run())}})}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-assets-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op","viewer/collections/parcel-asset-collection"],function(e,t,i){return t.GettingAssetsOp=e.Op.extend({run:function(){var e,s,o,n,r,a=this.options,l="GET";return r=a.model.getId(),"dummyId"===r||""===r?(n=$.Deferred(),n.reject({httpRespCode:404,httpRespBody:"The resource is no longer accessible"}),n):(this.dataMap=t.CachedData,void 0!==this.dataMap[r]&&this.dataMap[r].promise?this.dataMap[r].promise:(o=i.getRequestHeaders(l),o["Content-Type"]="application/json","ACTIVE"===a.model.attributes.send_track_info.state||a.isUnaccepted?(e=this.options.rootView._getSendUriTrimmed()+"preview/"+r+"/bootstrap",o.authorization="Bearer "+this.options.accessToken):(r=a.model.attributes.id,e=this.options.rootView._getSendUri()+"parcels/"+r,o.authorization="Bearer "+this.options.accessToken),s=JSON.stringify({value:!1}),n=$.ajax(e,{type:l,headers:o,dataType:"json",global:!1}),this.dataMap[r]={promise:n},n))}}),t.GettingAssetsOp}),define("acplugins/tracked-send/js/home-view/views/parcels-list-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","viewer/ac-viewer","core/utils/view-util","core/utils/http-util","core/utils/css-util","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/utils/ts-utils","core/models/workflow-status-strings","core/utils/sc-analytics","acplugins/tracked-send/js/home-view/models/ui/parcels-list-item-ui-model","acplugins/tracked-send/js/home-view/views/parcels-list-item-view","acplugins/tracked-send/js/home-view/views/parcels-list-item-view-review","acplugins/tracked-send/js/home-view/views/parcels-list-item-placeholder-view","acplugins/tracked-send/js/home-view/views/parcel-preview-view","acplugins/tracked-send/js/home-view/ops/getting/getting-assets-op"],function(e,t,i,s,o,n,r,a,l,d){t.ParcelsListView=e.View.extend({events:{"click .view-list-item":"_onItemClick","keyClick .view-list-item":"_onItemKeyClick","click .view-list-item-checkbox":"_onItemCheckboxClick","dblclick .view-list-item":"_onItemDblClick","dblclick .review-list-item":"_onItemDblClickAEPOrReview","click .review-list-item-info-container":"_onItemCollectionClickReview","click .review-list-item":"_onItemClickReview","keyClick .review-list-item":"_onItemKeyClickReview"},initialize:function(){e.View.prototype.initialize.call(this),this.listenTo(this.options.collectionsUiModel,"change:checkbox",_.bind(function(){this.render()},this)).listenTo(this.options.collectionsUiModel,"scrollSelectedItemIntoViewEvent",this._scrollSelectedItemIntoView).listenTo(this.options.collectionsUiModel,"change:view",this._scrollSelectedItemIntoView),this._addKeyEventListener(),this._addFocusEventListener(),this.bIsSingleClickEventWaiting=!1,this.fetchLoadThumbnailQeueue=[],this.fetchLoadThumbnailIndexMap=new Map,this.options.appApi.rnaApi.done(_.bind(function(e){e.registryAPI.getPaginationRegistry().then(_.bind(function(e){e&&(this.isPaginationEnabled=e)},this))},this))},render:function(t){return e.View.prototype.render.call(this),this._renderChildViews(t),e.Util.isCEF()||this._updateForVerticalScrollBar(),this},_updateForVerticalScrollBar:function(){setTimeout(_.bind(function(){this.$el.length&&this.options.collectionUiModel.set("has_vertical_scrollbar",s.isVerticalScrollBarPresent(this.$el))},this),50)},_getEventTargetItem:function(e,t){return $(e.target).closest(t)},_getEventTargetView:function(e,t){var i,s;return t||(t=".parcel-list-item"),s=this._getEventTargetItem(e,t),s&&(i=this.getChildViewById(s.data("id"))),i},_getEventTargetId:function(e,t){var i,s=this._getEventTargetItem(e,t);return s&&(i=s.data("id")),i},_getViewEventOptions:function(e){return{collectionItemsView:this,itemView:this._getEventTargetView(e,".parcel-list-item")}},_addKeyEventListener:function(){this.options.appApi.keyApi.pushKeyHandler(this)},_removeKeyEventListener:function(){this.options.appApi.keyApi.popKeyHandler(this)},_selectType:function(t){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,{collectionItemsView:this,selectType:t})},_onItemCheckboxClick:function(t){var i,s,o=this._getViewEventOptions(t),n=$(t.target);t.stopPropagation(),s=n.hasClass("selected"),i=t.shiftKey?e.SelectionUiModel.SELECT_EXTEND:s?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT,_.extend(o,{selectType:i}),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,o),this._logScSelectionEvent(n,s)},_onExpandClick:function(i){this.options.selectionUiModel.trigger("deleteParcelEvent");var s=this._getEventTargetView(i,".view-list-item");i.stopPropagation(),this.options.appApi.sessionApi.getPrimaryToken().length&&(s.options=_.extend({},{accessToken:this.options.appApi.sessionApi.getPrimaryToken()},s.options));var o=t.opFactory.create("GettingAssetsOp",s.options);o.run().then(_.bind(function(t){var i={WorkflowData:[]};void 0===t.meta_list&&(t=_.extend({},{meta_list:t.parcels[0].files,parcel_data:t.parcels[0]},t));for(var s=0;s<t.meta_list.length;s++)i.WorkflowData[s]=new e.ParcelModel({workflowType:"Send_And_Track"}),i.WorkflowData[s].setData({close_date:this.options.model.get("close_date"),create_date:this.options.model.get("create_date"),creator:this.options.model.get("creator"),id:this.options.model.get("id")+":"+t.meta_list[s].id,modify_date:this.options.model.get("modify_date"),asset_id:t.meta_list[s].id,participants:this.options.model.get("participants"),resources:[],send_track_info:this.options.model.getInfo(),thumbnailUrl:void 0,WorkflowType:"Send_And_Track"}),i.WorkflowData[s].attributes.resources[0]={asset_id:t.meta_list[s].id,attachments:[],id:"",modify_date:"",name:t.meta_list[s].name,size:"",type:t.meta_list[s].content_type},i.WorkflowData[s].getInfo().intro_message=t.parcel_data.email_message,i.WorkflowData[s].attributes.resources.length=1;this.collection.reset(),this.collection.pushData(i),this.options.collectionsUiModel.set("single_multi_view","multi"),this.options.isInSearchResultsView&&this.options.selectionUiModel.clearSelection()},s),_.bind(function(e){this.options.appApi.errorApi.enqueueAjaxError(e.status)},this))},_onItemClick:function(e){this.options.appApi.rnaApi.done(_.bind(function(e){void 0==this.sharedFileSelectWorkflowStartLogged&&(this.sharedFileSelectWorkflowStartLogged=!0,e.logPerformance("SharedTabFileSelect","start"))},this)),this.bIsSingleClickEventWaiting=!0,setTimeout(_.bind(function(){if(1==this.bIsSingleClickEventWaiting){{this._getEventTargetItem(e,".parcel-list-item")}this.bIsSingleClickEventWaiting=!1,this._selectItemRow(e),this._consumeEvent(e),this.options.isInSearchResultsView||this.options.collectionsUiModel.trigger("scrollSelectedItemIntoViewEvent"),this._selectionInProgress=!1}},this),500)},_onItemKeyClick:function(e){this._delayedKeyClickTimer&&clearTimeout(this._delayedKeyClickTimer),this._delayedKeyClickTimer=_.defer(_.bind(function(){this._getEventTargetItem(e,".parcel-list-item");this._selectItemRow(e),this._consumeEvent(e),this.options.collectionsUiModel.trigger("scrollSelectedItemIntoViewEvent")},this),e)},_onItemDblClick:function(e){this.options.appApi.rnaApi.done(function(e){e.logPerformance("OpeningFile","start")}),1==this.bIsSingleClickEventWaiting&&(this.bIsSingleClickEventWaiting=!1),this.$(".shared-workflow-list-item.selected").removeClass("selected");var t=this._getEventTargetView(e,".view-list-item");"single"==this.options.collectionsUiModel.get("single_multi_view")&&1===t.model.get("resources").length?this._doOpenSharedFile(t):"single"==this.options.collectionsUiModel.get("single_multi_view")&&t.model.get("resources").length>1?this._onExpandClick(e):"multi"==this.options.collectionsUiModel.get("single_multi_view")&&this._onAssetItemClick(e),this.$(".shared-workflow-list-item.selected").find(".shared-list-item-row").focus(),this._selectionInProgress=!1,this._consumeEvent(e)},_onAssetItemClick:function(e){e.stopPropagation();var t=this._getEventTargetView(e,".view-list-item"),i=t.model.get("resources");if(t.model.get("participants").length){var s=t.model.getInvitationId(),o=t.model.attributes.id.slice(0,t.model.attributes.id.length-i[0].asset_id.length-1),n={};n.invitationId=s,n.parcelId=o,n.assetId=i[0].asset_id,n.fileName=i[0].name,n.user_role=t.model.getInfo().user_role,n.status=t.model.getInfo().state,this._openSecondLevelAsset(n,i[0].type)}this._consumeEvent(e)},_doOpenFile:function(e){var t=this._getEventTargetView(e,".view-list-item");if(1===t.model.get("resources").length){var i=t.model.attributes.id;this._openParcelFile(t.model,i)}else this._onExpandClick(e)},_logParcelOpenDownloadEvent:function(e,t){if("sender"!==e){var i={};i.parcelid=t,i.SharingType="Can View",this.options.appApi.rnaApi.done(_.bind(function(e){var t={methodName:"logUnifiedShareReceiverData",methodArgs:[i]};e.stApi.invokeMethod(t)},this))}},_openParcelFile:function(e,i){var s="";"sender"!==e.getInfo().user_role&&e.get("participants").length&&(s=e.getInvitationId()),this._logParcelOpenDownloadEvent(e.getInfo().user_role,i);var o,n,r=e.get("resources");e.getInfo()&&(n=e.getInfo().state),1===r.length&&(o="asset-0","application/pdf"===r[0].type?this._triggerViewEvent(t.ViewEvents.SHOW_SINGLE_ASSET,{parentView:this,idToShow:o,invitationId:s,parcelId:i,fileName:r[0].name,status:n}):this._triggerViewEvent(t.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this,parcelIdToDownload:i,idToShow:"UNSHARED"===n?"all":"asset-0",invitationId:s,fileName:r[0].name,status:n}))},_openSecondLevelAsset:function(e,i){if(this._logParcelOpenDownloadEvent(e.user_role,e.parcelId),this.options.appApi.siteCatalystApi.logVirgoFileOpenEvent(d.VIRGO_SENDTRACK),"sender"===e.user_role&&(e.invitationId=""),"application/pdf"===i)this.options.appApi.rnaApi.done(function(t){t.assetApi({methodName:"openSNTFile",methodArgs:e})});else{var s="sender"===e.user_role?"":e.invitationId;this._triggerViewEvent(t.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this,parcelIdToDownload:e.parcelId,idToShow:e.assetId,invitationId:s,fileName:e.fileName,status:e.status})}},showParcelPreview:function(e){var s,o,n,l,d,c,h=this.options,p=h.appApi;s=p.displayApi.showFullOverlay(!0),l=this.options.appApi.baseFilesUrisApi.getSendApiUri(),l=a.extractRootUrl(l),h.parcelAssetsCollection=new i.ParcelAssetCollection([],{rootUrl:l,parcel_id:e.id,parcelModel:e}),this._parcelPreview&&this._parcelPreview.off(),o=_.extend({},h,{el:s,parcelModel:e}),n=new t.ParcelPreviewView(o),this._parcelPreview=n,n.on("ParcelPreview_Close",this._onParcelPreviewClose,this),c=t.opFactory.create("GettingAssetsOp",h),c.run().then(_.bind(function(){d=h.parcelAssetsCollection&&h.parcelAssetsCollection.length>1?r.MULTI:r.SINGLE,p.siteCatalystApi.logScEvent([r.PREVIEW,r.SHARED,d,r.SHOWN]),this.render()},n))},_handleModifiedClick:function(t){var i,s;s=t.shiftKey?e.SelectionUiModel.SELECT_EXTEND:t.ctrlKey||t.metaKey?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT,i=this._getViewEventOptions(t),_.extend(i,{selectType:s}),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,i)},_deselectAll:function(t){this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend(t,{selectType:e.SelectionUiModel.SELECT_NONE}))},_selectItemRow:function(t){var i,s=this._getEventTargetItem(t,".parcel-list-item"),o=s.hasClass("selected");i=o?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT;var n=this._getViewEventOptions(t);_.extend(n,{selectType:i}),this._consumeEvent(t),this.options.isInSearchResultsView&&"multi"==this.options.collectionsUiModel.get("single_multi_view")||this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n)},_selectItemRowForFocusIn:function(t){var i,s=this._getEventTargetItem(t,".parcel-list-item"),o=s.hasClass("selected");if(o)this._consumeEvent(t);else{i=e.SelectionUiModel.SELECT_SELECT;var n=this._getViewEventOptions(t);_.extend(n,{selectType:i}),this._consumeEvent(t),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n)}},_onParcelPreviewClose:function(){_.defer(_.bind(function(){var e=this._parcelPreview;e.off(),this.options.appApi.displayApi.showFullOverlay(!1),delete this._parcelPreview},this))},_escapeId:function(e){return e.length?e.replace(/(:|\.|\[|\]|,|=|@|\/)/g,"\\$1"):void 0},sendChildrenChangedAccNotifications:function(){var e,t,i=this.getChildViews();for(t=i.length-1;t>=0;t-=1)e=i[t],e&&e._adjustLayout()},_renderChildViews:function(e){this.collection.length;this._renderInProgress&&(this._deferredBeginRender&&this._deferredBeginRender.reject(),this._deferredAsyncRender&&this._deferredAsyncRender.reject(),this._deferredRender&&this._deferredRender.reject(),this._deferredEndRendering&&this._deferredEndRendering.reject()),this._renderInProgress=!0,this._deferredAsyncRender=$.Deferred(),this._deferredBeginRender=$.Deferred(),e||(e=0),e>this.$el.children().length&&(e=this.$el.children().length-1),0===this.$el.children().length&&(e=0),this._asyncBeginRenderingListItems(e).then(_.bind(this._asyncRenderListItems,this,e,this.collection.length,50)).then(_.bind(this._asyncEndRenderingListItems,this,e)).then(_.bind(function(){this._renderInProgress=!1,this.collection.length>0&&$("#parcels-no-parcels-prompt").hide(),this._fetchingHighlightWorkflowIdInProgress||(this._fetchingHighlightWorkflowIdInProgress=!0,this.options.appApi.rnaApi.done(_.bind(function(e){var t={};t.op="getHighlightWorkflowId",e.stApi.updateInAppDMStateAPI(t).done(_.bind(function(t){if(this._fetchingHighlightWorkflowIdInProgress=!1,!this._selectionInProgress){var i=t.highlightWorkflowId,s=t.highlightAssetId,o=t.sourcePlugin;if(""!=i){if("multi"==this.options.collectionsUiModel.get("single_multi_view"))return void this.options.appApi.pluginsApi.callPluginMethod(this.options.pluginId,"_refreshUI","header",this._getResolvedPromise(),!0);var n=this.$el.find("#review-list-item-filename-"+this._escapeId(i)),r=n.closest(".parcel-list-item");if(0===r.length&&(i=i.toLowerCase(),n=this.$el.find("#review-list-item-filename-"+this._escapeId(i)),r=n.closest(".parcel-list-item")),r&&r.length>0){var a={};if(a.op="setHighlightWorkflowId",a.workflowID="",a.assetID="",a.assetFileName="",a.assetWorkflowId="",e.stApi.updateInAppDMStateAPI(a),!r.hasClass("selected")){this._selectionInProgress=!0;var l=this.getChildViewById(i);n.trigger($.Event("click")),this._scrollItemIntoView(r),this._downloadItemInvoluntarily(l.model,i,o,s)}}else if("unifiedShare"!==o){var d=t.assetFileName;if(""!=d){var a={};a.op="setHighlightWorkflowId",a.workflowID="",a.assetID="",a.assetFileName="",a.assetWorkflowId="",e.stApi.updateInAppDMStateAPI(a);var c=t.assetWorkflowId;this._downloadItemInvoluntarilyWithoutItemSelection(d,c,i,s)}}}}},this))},this)))},this))},_downloadItemInvoluntarily:function(e,i,s,o){if("application/pdf"!==e.getSingleResource()[0].type&&"unifiedShare"!==s){var n=o&&""!=o?o:i,r=e.getInvitationId(),a=e.getSingleFileName(),l=e.getInfo().state;this._triggerViewEvent(t.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this,parcelIdToDownload:i,idToShow:n,invitationId:r,fileName:a,status:l})}},_downloadItemInvoluntarilyWithoutItemSelection:function(e,i,s,o){var n,r,a=o&&""!=o?o:s,l="ACTIVE";""!=i?(r=i,n=""!=s?s:a):(n=a,r=a),this._triggerViewEvent(t.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this,parcelIdToDownload:r,idToShow:a,invitationId:n,fileName:e,status:l})},_beginRenderingListItems:function(e){var t=this.getChildViews();e>0||_.each(t,_.bind(function(e){this.isCurrentViewPlaceholderView(e)||(e.options.remove=!0)},this))},_asyncBeginRenderingListItems:function(e){return this._beginRenderingListItems(e),this._deferredBeginRender.resolve(),this._deferredBeginRender.promise()},_startFetchingThumbnails:function(){for(;this.fetchLoadThumbnailQeueue.length&&this.fetchLoadThumbnailQeueue[0]>=this.collection.length;){var e=this.fetchLoadThumbnailQeueue.shift();this.fetchLoadThumbnailIndexMap.delete(e)}if(this.fetchLoadThumbnailQeueue.length){var t,e=this.fetchLoadThumbnailQeueue.shift(),i=this.collection.at(e);this.fetchLoadThumbnailIndexMap.delete(e),i&&(t=this.getChildViewById(i.getId())),t&&t._loadThumbnail(),this.debouncedFetchingThumbnail||(this.debouncedFetchingThumbnail=_.debounce(_.bind(function(){this._startFetchingThumbnails()},this),70)),this.debouncedFetchingThumbnail()}},_endRenderingListItems:function(e){var t,i,s,o,n=this.getChildViews(),r=this.$el.children(),a=!1,l=100;for(i=n.length-1;i>=0;i-=1)t=n[i],t.options.remove&&(t.$item.hasClass("selected")&&this._clearSelection(this.options),this.removeChildView(t));if(this.isPaginationEnabled){for(i=e;this.collection&&i<this.collection.length;i++)this.fetchLoadThumbnailIndexMap.has(i)||(this.fetchLoadThumbnailIndexMap.set(i,0),this.fetchLoadThumbnailQeueue.push(i));this._startFetchingThumbnails()}else this.collection.each(function(e,i){t=this.getChildViewById(e.getId()),t&&t._loadThumbnail(l>i?!1:!0)},this);for(r=this.$el.children(),s=this.collection.length-1,o=r.length-1,this.isPlaceholderItemVisible()&&(o-=1),o>s&&(a=!0),i=r.length-1;i>s;i-=1)r.eq(i).remove();a&&(this._scrollToTheRelevantView(),a=!1),this._setTabbableItem()},_asyncEndRenderingListItems:function(e){return this._deferredEndRendering=$.Deferred(),this._endRenderingListItems(e),this._deferredEndRendering.resolve(),this.options.rootView.bringSelectedItemInView&&this._scrollSelectedItemIntoView(),this.options.rootView.bringSelectedItemInView&&(this._scrollToTheTopOfList(),this.options.rootView.bringSelectedItemInView=!1),this._deferredEndRendering.promise()},_renderPlaceholderListItem:function(){var e,i=(this.$el.children(),this.options),s=this.$el,o="parcel-list-loader";e=this.getChildViewById(o),e?e.$el!==s&&e.setElement(s):(i=_.extend({},i,{el:s}),e=new t.ParcelsListItemPlaceholderView(i),this.addChildView(e,"parcel-list-loader")),e.render()},_renderSomeListItems:function(e,t){var i,s,o,n=this.$el.children(),r=n.length;for(o=e;t>o&&o<this.collection.length;o++){var a=this.collection.at(o);i=this._getChildItemView(a),s=r>o?n.eq(o):void 0,i.render(s,o),delete i.options.remove}},_asyncRenderSomeListItems:function(e,t){return this._deferredRender=$.Deferred(),this._renderSomeListItems(e,t),this._deferredRender.resolve(),this._deferredRender.promise()},_asyncRenderListItems:function(e,t,i){return t>e?this._asyncRenderSomeListItems(e,e+i).then(_.bind(this._asyncRenderListItems,this,e+i,this.collection.length,i)):this._deferredAsyncRender.resolve().promise()},isCurrentViewPlaceholderView:function(e){var t="parcel-list-loader",i=this.getChildViewById(t);return e===i},isPlaceholderItemVisible:function(){var e=this.$el,t=e.children(),i=t.length,s=t.eq(i-1),o="parcel-list-loader";return s.data("id")==o?!0:!1},removePlaceholderItemView:function(){var e=this.$el,t=e.children(),i=t.length,s=t.eq(i-1),o="parcel-list-loader";s.data("id")==o&&s.remove()},renderLoadingExperience:function(){this.isPlaceholderItemVisible()||this._renderPlaceholderListItem()},hideLoadingExperience:function(){this.isPlaceholderItemVisible()&&this.removePlaceholderItemView()},_getChildItemView:function(e){var i,s,o=this.options,n=e.getId(),r=this.$el;return i=this.getChildViewById(n),i?(i.$el!==r&&i.setElement(r),_.extend(i.model.attributes,e.attributes),i.options.checkbox=o.collectionsUiModel.get("checkbox")):(s=new t.ParcelsListItemUiModel,o=_.extend({},o,{el:r,checkbox:o.collectionsUiModel.get("checkbox"),model:e,itemUiModel:s}),i=new t.ParcelsListItemViewReview(o),this.addChildView(i,n)),i},_getContainingItem:function(e){return e.closest(".parcel-list-item")},_getContainingRowOrRowGroup:function(e){return e.closest(".shared-list-item-row")},_isItemSelected:function(e){return this._getContainingItem(e).hasClass("selected")},_logScSelectionEvent:function(e,t){var i;i=this._isItemSelected(e),i!==t&&this.options.appApi.siteCatalystApi.logScEvent([r.FILE_LIST,r.SENT_FILES,r.FILE_NAME,i?r.CHECKED:r.UNCHECKED])},_getChildViewHeight:function(){var e=this.$el.children();return e.length>0?n.getFullHeight(e.eq(0)):void 0},_getChildViewWidth:function(){var e=this.$el.children();return e.length>0?n.getFullWidth(e.eq(0)):void 0},_isListView:function(){return this.options.collectionsUiModel.isListView()},_isThumbnailView:function(){return this.options.collectionsUiModel.isThumbnailView()},_scrollSelectedItemIntoView:function(){for(var e=this.$el.children(),t=0;t<e.length;t++)if(e.eq(t).hasClass("selected"))return this._scrollItemIntoView(e.eq(t)),void(this.options.rootView.bringSelectedItemInView=!1)},_scrollToTheRelevantView:function(){for(var e=this.$el.children(),t=0;t<e.length;t+=1)if(e.eq(t).hasClass("selected"))return void this._scrollItemIntoView(e.eq(t),!0);this._scrollToTheTopOfList()},_scrollToTheTopOfList:function(){var e=this.$el.children();this._scrollItemIntoView(e.eq(0))},_scrollItemIntoView:function(e,t){function i(e){s.stop(!0,!0),s.animate({scrollTop:e},h.get("scroll_duration"))}var s,o,n,r,a,l,d,c,h=this.options.collectionsUiModel,p=this.collection.getNumberOfItems(),u=this.collection.length,_=!0,g=!1;e.length&&(s=this.$el,o=e.position().top,n=e.height(),r=s.height(),d=s.prop("scrollHeight"),this._isMouseWheel||(t?(0>o||o+n>r?(a=s.scrollTop(),l=o-(r-n)/2,c=Math.max(a+l,0),0>l&&(_=!1),g=!0):c=s.scrollTop(),_&&c+r+n/2>d&&p>u&&(c-=n/2,g=!0),g&&i(Math.max(c,0))):(0>o||o+n>r)&&(a=s.scrollTop(),l=o-(r-n)/2,i(Math.max(a+l,0)))))},_onFocusIn:function(e){var t,i,s,o=$(e.target);return t=this.$(".shared-list-item-row"),i=this._getContainingRowOrRowGroup(o),s=t.index(i),this._lastActiveRowIndex===s&&this._consumeEvent(e),0===i.length?!0:(t.attr("tabindex",-1),i.hasClass("focused")||(i.addClass("focused").attr("tabindex",0),o.attr("tabindex",0)),this._lastActiveRowIndex!=t.index(i)&&(this._lastActiveRowIndex=t.index(i)),this._consumeEvent(e),this.$el.scrollLeft(0),!0)},_onFocusOut:function(e){var t,i=$(e.target);return t=this._getContainingRowOrRowGroup(i),t.removeClass("focused").find("[role=checkbox]:tabbable, button:tabbable, a[href]:tabbable, [role=link]:tabbable").attr("tabindex",-1),!0},_setTabbableItem:function(){var e=this.$(".shared-list-item-row:focusable"),t=this.$(":tabbable");0===t.length&&e.attr("tabindex","0")},_getNextFocusableIndexForThumbnailView:function(e,t,i,s){var o=t,n=e.width()/$(".shared-thumb-view .parcel-list-item").outerWidth(!0)|0,r=Math.ceil(i/n),a=t/n|0,l=t%n;switch(s){case 39:t!=i-1&&(o=t+1);break;case 37:0!=t&&(o=t-1);break;case 38:0!=a&&(o=n*(a-1)+l);break;case 40:a!=r-1&&(o=n*(a+1)+l)}return o>i-1&&(o=t),o},_onKeyDown:function(t){function i(e){a.stop(!0,!0),a.animate({scrollTop:e},E.get("scroll_duration"))}var o,n,r=$(t.target),a=this.$el,l=a[0],o=this.options,d=o.appApi.selectionApi,c=t.which,h=a.height(),p=a.width(),u=a.scrollTop(),_=this._getChildViewHeight(),g=this._getChildViewWidth(),m=0,v=0===_?0:Math.floor(h/_),w=0===g?0:Math.floor(p/g),f=!1,E=this.options.collectionsUiModel,S=this.options.selectionUiModel,I=this.$(".shared-list-item-row"),A=this._getContainingRowOrRowGroup(r),C=A.find(".parcel-list-item-checkbox"),T=I.first(),b=I.last(),R=a.find(":tabbable").first(),N=r.is(A),k=!A.is(r),O=r.is("a[href], [role=link]"),y=r.is(".parcel-list-item-expand-hitarea,.parcel-list-item-expand-btn"),D=I.index(A),M=($.Event("click"),$.Event("dblclick")),V=$.Event("keyClick"),L=s.descendantHasFocus(".parcels-content"),P=s.descendantHasFocus(a),U=!P&&L,F=$(".sent-files-main-header").find(":focusable").index(r)==$(".sent-files-main-header").find(":focusable").length-1?!0:!1,x=0==$(".sent-list-header-info-container").find(":focusable").length?!1:!0,B=F&&!x?!0:!1,H=!1,W=A.hasClass("expanded"),j=A.find(".parcel-list-item-files"),G=this._isListView(),Y=this._isThumbnailView(),K=!1,z=r.is("body")&&H?!0:!1;
if(_&&(G?m=v:Y&&(m=v*w)),s.isElementHidden(a))return f;if(r.is(":focusable")&&!L&&!B)return f;switch(o=this._getViewEventOptions(t),V.shiftKey=t.shiftKey,c){case 9:if(0===S.getNumSelectedItems()&&N);else if(this._setTabbableItem(),U||B){var q=$(".sent-list-header-info-container").find(":tabbable"),Z=q.index(r);Z==q.length-1&&(n=0===S.getNumSelectedItems()?T:R?R:T,K=!0)}else z&&(n=R?R:T);break;case 32:P&&(O?(r.trigger(M),f=!0):r.hasClass("review-list-item-row")?(r.trigger(V),f=!0):y||((t.shiftKey?A:C).trigger(V),f=!0));break;case 13:P&&(e.Util.isCEF()?(1===S.getNumSelectedItems()&&r.trigger(M),this._consumeEvent(t)):(r.trigger(V),f=!0));break;case 27:!e.Util.isCEF()||d.isRunningInFileSelection()||this.options.isInSearchResultsView&&!S.isItemSelected()||(this._deselectAll(o),f=!0);break;case 33:P?(n=I.eq(Math.max(0,D-m)),K=!0):(i(u-h),f=!0);break;case 34:P?(n=I.eq(Math.min(I.length-1,D+m)),K=!0):(i(u+h),f=!0);break;case 35:i(l.scrollHeight),f=!0,A.is(b)||(n=b,K=!0);break;case 36:i(0),f=!0,A.is(T)||(n=T,K=!0);break;case 37:case 39:P&&(H=37===c,Y?(W&&k&&(n=s.getNextFocusableDescendant(j,!0)),n&&n.length||(k?n=A:N&&(n=I.eq(this._getNextFocusableIndexForThumbnailView(a,D,I.length,c)),K=!0,n.hasClass("expanded")&&(n=n.find(":focusable:last"))))):(t.ctrlKey||t.metaKey)&&A.is("[aria-expanded]")?(W&&H||!W&&!H)&&(A.find("button").trigger(V),f=!0):r.hasClass("parcel-list-item-file-name")||(n=s.getNextFocusableDescendant(A,H,!0,":not(.parcel-list-item-file-name)")));break;case 38:P?(W&&k&&(n=s.getNextFocusableDescendant(j,!0)),n&&n.length||(k?n=A:N&&(Y?(n=I.eq(this._getNextFocusableIndexForThumbnailView(a,D,I.length,c)),K=!0):D>0&&(n=I.eq(D-1),K=!0),n&&n.hasClass("expanded")&&(n=n.find(":focusable:last"))))):_&&!U&&(i(u-_),f=!0);break;case 40:P?(W&&(n=s.getNextFocusableDescendant(j)),n&&n.length||(Y?(K=!0,n=I.eq(this._getNextFocusableIndexForThumbnailView(a,D,I.length,c))):D<I.length-1&&(K=!0,n=I.eq(D+1)))):_&&!U&&(i(u+_),f=!0);break;case 65:(t.ctrlKey||t.metaKey)&&(t.shiftKey?this._clearSelection(o):this._selectAll(o),this._consumeEvent(t),f=!0);break;case 68:(t.ctrlKey||t.metaKey)&&(f=this._deleteIfSelected());break;case 127:case 46:f=this._deleteIfSelected()}return n&&n.length>0&&(f=!0,this._isItemSelected(A)&&t.shiftKey?n.trigger(V):1!=K||n.parent().hasClass("selected")||(this.$(".shared-workflow-list-item.selected").removeClass("selected"),n.trigger(V)),this.$(".shared-workflow-list-item.selected").removeClass("selected"),n.focus()),f},_selectAll:function(t){_.extend(t,{selectType:e.SelectionUiModel.SELECT_ALL}),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,t)},_clearSelection:function(t){this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION,t)},_deleteIfSelected:function(){var e,i=this.options;if(e=i.selectionUiModel.getNumSelectedItems()>0){var s=i.selectionUiModel.getSingleSelectedItemModel();s&&("sender"==s.getInfo().user_role?this._triggerViewEvent(t.ViewEvents.DELETE,{parentView:this,parcelModel:s}):s.getInfo().is_consented&&this.options.rootView._onRemoveLinkFromDCClickAction())}return e},_onItemDblClickAEPOrReview:function(e){this.options.appApi.rnaApi.done(function(e){e.logPerformance("OpeningFile","start")}),this.bIsSingleClickEventWaiting=!1,this.$(".shared-workflow-list-item.selected").removeClass("selected");var t=this._getEventTargetView(e,".review-list-item");t&&this._doOpenSharedFile(t),this.$(".shared-workflow-list-item.selected").find(".shared-list-item-row").focus(),this._selectionInProgress=!1,this._consumeEvent(e)},_doOpenSharedFile:function(e){if(e){var t=e.model;t&&(t.attributes.WorkflowType==l.SEND_TRACK&&"application/pdf"!==t.get("docType")?this._downloadSCDocument(t):this._openSharedDocument(t))}},_downloadSCDocument:function(e){if(e&&e.getInfo()&&e.attributes){var i="",s=e.attributes.aep_workflow_info.id,o=e.getInfo().state;"sender"!==e.getInfo().user_role&&(i=e.getInvitationId()),void 0==i&&(i=""),this._triggerViewEvent(t.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this,parcelIdToDownload:s,idToShow:"UNSHARED"===o?"all":"asset-0",invitationId:i,fileName:e.attributes.name,status:o})}},_getAssetId:function(e){if(e&&e.attributes){var t;return e.attributes.WorkflowType==l.CREATIVE_CLOUD?t=e.getId():e.attributes.WorkflowType==l.REVIEW?"sender"==e.getInfo().user_role?t=e.getId():"receiver"==e.getInfo().user_role&&(t=e.getInvitationId()):e.attributes.WorkflowType==l.SEND_TRACK&&e.getInfo()&&("sender"==e.getInfo().user_role?t=e.getId():"receiver"==e.getInfo().user_role&&(t=e.getInvitationId())),t}},_downloadAEPDocument:function(e){var i="";"owned"!==e.getInfo().user_role&&(i=e.getInvitationId()),this._updateLastAccessDate(e.getId()),this._triggerViewEvent(t.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this,parcelIdToDownload:e.getId(),idToShow:e.getId(),invitationId:i,fileName:e.get("name")})},_updateLastAccessDate:function(e){var t,i,s,n;t=Ac.discoveryUrisModel.getPutMetaDataUri(),t=t.replace("{+asset_id}",e),t=t.concat("/last_access"),i="PUT",s=o.getRequestHeaders(i),s["Content-Type"]=Ac.discoveryUrisModel.getPutMetaDataContentType(),n=JSON.stringify({last_access:""}),$.ajax(t,{dataType:"json",success:_.bind(function(){},this),error:_.bind(function(){},this),data:n,global:!1,headers:s,type:i})},_openSharedDocument:function(e){var t={};t.assetId=e.getId(),this.options.appApi.rnaApi.done(function(e){e.assetApi({methodName:"openSharedFile",methodArgs:t})})},_openReviewDocument:function(e){if(void 0!=e.attributes){var t={};if(t.reviewUrl=e.attributes.id,void 0!=e.attributes.resources&&1==e.attributes.resources.length){var i=e.attributes.resources[0].id?e.attributes.resources[0].id:e.attributes.resources[0].asset_id;t.invitationId=i,t.closeExistingDoc=!1,this.options.appApi.rnaApi.done(function(e){e.assetApi({methodName:"openEurekaFile",methodArgs:t})})}}this.options.appApi.siteCatalystApi.logVirgoFileOpenEvent(d.VIRGO_REVIEW)},_onItemClickReview:function(e){this.options.appApi.rnaApi.done(_.bind(function(e){void 0==this.sharedFileSelectWorkflowStartLogged&&(this.sharedFileSelectWorkflowStartLogged=!0,e.logPerformance("SharedTabFileSelect","start"))},this)),this.bIsSingleClickEventWaiting=!0,setTimeout(_.bind(function(){if(1==this.bIsSingleClickEventWaiting){var t=this._getEventTargetItem(e,".parcel-list-item");this.bIsSingleClickEventWaiting=!1,this._selectItemRowReview(e),this._consumeEvent(e),this.options.isInSearchResultsView||this._scrollItemIntoView(t),this._selectionInProgress=!1}},this),500)},_onItemKeyClickReview:function(e){this._delayedKeyClickTimer&&clearTimeout(this._delayedKeyClickTimer),this._delayedKeyClickTimer=_.defer(_.bind(function(){var t=this._getEventTargetItem(e,".parcel-list-item");this._selectItemRow(e),this._consumeEvent(e),this._scrollItemIntoView(t)},this),e)},_selectItemRowReview:function(t){var i,s=this._getEventTargetItem(t,".review-list-item"),o=s.hasClass("selected");i=o?e.SelectionUiModel.SELECT_TOGGLE:e.SelectionUiModel.SELECT_SELECT;var n=this._getViewEventOptions(t);_.extend(n,{selectType:i}),this._consumeEvent(t),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,n)}})}),define("acplugins/tracked-send/js/home-view/templates/selection-actions-template.html",[],function(){return'<div class="selection-action-checkbox"        title="<%= checkboxTitle %>"        role="checkbox" aria-checked="false" tabindex="0"></div>    <div class="selection-action-btns">        <button class="selection-action-btn view desktop-mode theme-hyperlink"             data-test-name="selection-action-view-btn"             title="<%= actionOpenTitle %>" tabindex="-1">            <div class="selection-action-label"            ><%= actionOpen %></div>        </button>        <button class="selection-action-btn saveAs desktop-mode theme-hyperlink"             data-test-name="selection-action-saveAs-btn"             title="<%= actionSaveAsTitle %>" tabindex="-1">            <div class="selection-action-label"            ><%= actionSaveAs %></div>        </button>        <button class="selection-action-btn track desktop-mode theme-hyperlink"             data-test-name="selection-action-track-btn"             title="<%= actionTrackTitle %>" tabindex="-1">            <div class="selection-action-label"            ><%= actionTrack %></div>        </button>        <button class="selection-action-btn unshare disabled theme-hyperlink"             data-test-name="selection-action-unshare-btn"             title="<%= actionUnshareTitle %>" disabled             tabindex="-1">            <div class="selection-action-label"            ><%= actionUnshare %></div>        </button>        <button class="selection-action-btn forward disabled theme-hyperlink"             data-test-name="selection-action-forward-btn"             title="<%= actionForwardTitle %>" disabled             tabindex="-1">            <div class="selection-action-label"            ><%= actionForward %></div>        </button>        <button class="selection-action-btn download disabled web-mode theme-hyperlink"             data-test-name="selection-action-download-btn"             title="<%= actionDownloadTitle %>" disabled             tabindex="-1">            <div class="selection-action-label"            ><%= actionDownload %>        </button>        <button class="selection-action-btn delete theme-hyperlink"             data-test-name="selection-action-delete-btn"             title="<%= actionRemoveTitle %>"             tabindex="-1">            <div class="selection-action-label delete"            ><%= actionRemove %></div>        </button>    </div>'}),define("acplugins/tracked-send/js/home-view/views/selection-actions-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/selection-actions-template.html","i18n!core/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","core/utils/css-util","core/utils/sc-analytics","core/utils/view-util","core/views/view","core/views/view-events"],function(e,t,i,s,o,n,r,a,l){t.SelectionActionsView=e.View.extend({events:{click:"_onClick","click .selection-action-checkbox":"_onCheckboxClick","click .selection-action-btn.unshare":"_onUnshareClick","click .selection-action-btn.delete":"_onDeleteClick","click .selection-action-btn.download":"_onDownloadClick","click .selection-action-btn.forward":"_onForwardClick","click .selection-action-btn.view":"_onViewClick","click .selection-action-btn.track":"_onTrackClick","click .selection-action-btn.saveAs":"_onSaveAsClick"},initialize:function(){e.View.prototype.initialize.call(this),this.template=_.template(i),this._addKeyEventListener(),this._addFocusEventListener(),this._addUiModelEventListeners()},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.empty().html(this.template({checkboxTitle:s.CLOSE,actionUnshare:o.UNSHARE,actionUnshareTitle:o.UNSHARE,actionUnshareElem:o.UNSHARE,actionForward:o.FORWARD,actionForwardTitle:o.FORWARD,actionForwardElem:o.FORWARD,actionDownload:o.DOWNLOAD,actionDownloadTitle:o.DOWNLOAD,actionDownloadElem:o.DOWNLOAD,actionRemove:s.REMOVE,actionRemoveTitle:s.REMOVE,actionRemoveElem:s.REMOVE,actionOpen:o.OPEN,actionOpenTitle:o.OPEN,actionOpenElem:o.OPEN,actionTrack:o.TRACK,actionTrackTitle:o.TRACK,actionTrackElem:o.TRACK,actionSaveAs:o.SAVEAS,actionSaveAsTitle:o.SAVEAS,actionSaveAsElem:o.SAVEAS})),this._initWrappers(),this._updateSelectionActions()),this._updateCheckbox(),this._updateButtons(),this.$(":tabbable").length||this.$(":focusable:first").attr("tabindex","0"),this},_initWrappers:function(){this.$checkbox=this.$(".selection-action-checkbox"),this.$btns=this.$(".selection-action-btns"),this.$unshareBtn=this.$(".selection-action-btn.unshare"),this.$deleteBtn=this.$(".selection-action-btn.delete"),this.$downloadBtn=this.$(".selection-action-btn.download"),this.$forwardBtn=this.$(".selection-action-btn.forward"),this.$viewBtn=this.$(".selection-action-btn.view"),this.$trackBtn=this.$(".selection-action-btn.track"),this.$saveAsBtn=this.$(".selection-action-btn.saveAs"),this.$selectors=this.$(".selection-action-btn"),this.$labels=this.$(".selection-action-label")},_getNumSelected:function(){var e=0,t=0,i=this.options,s=i.selectionUiModel.get("selected_item_models");return _.each(s,function(i){i.get("is_active")?e+=1:t+=1}),{numShared:e,numUnshared:t}},_isItemSelectable:function(){return!0},_getNumSelectable:function(){var e=0;return this.options.collection.each(_.bind(function(t){this._isItemSelectable(t)&&(e+=1)},this)),e},_updateCheckbox:function(){var t=this.$checkbox,i=this.options,s=i.selectionUiModel.getSelectionCount();this.options.collectionsUiModel.get("checkbox")?(t.removeClass("hidden dash check").removeAttr("aria-hidden"),this.$btns.removeClass("no-checkbox"),this.$btns.removeClass("unselectable"),t.removeClass("dash check"),s>0&&(s===this._getNumSelectable()?t.addClass("check").attr("aria-checked","true"):t.addClass("dash").attr("aria-checked","mixed"))):(t.addClass("hidden").attr("aria-hidden",!0),this.$btns.addClass("no-checkbox"),this.$btns.addClass("unselectable")),e.Util.isIE8()&&l.detachAndReattachElement(t)},_updateSelectionActions:function(){var e=this.options,t=e.collectionsUiModel.get("mode");"desktop"===t?($(".desktop-mode").show(),$(".web-mode").hide()):($(".desktop-mode").hide(),$(".web-mode").show())},_updateButtons:function(){var t=this.options,i=t.selectionUiModel,s=i.getSingleSelectedItemModel(),o=this._getNumSelected();s?(l.enableInput(this.$unshareBtn,s.get("is_active")),l.enableInput(this.$deleteBtn,!0),l.enableInput(this.$downloadBtn,!0),l.enableInput(this.$forwardBtn,!0),l.enableInput(this.$trackBtn,!0),e.Util.isCEF()&&(s.get("resources")&&1===s.get("resources").length?(l.enableInput(this.$viewBtn,!0),l.enableInput(this.$saveAsBtn,!0),"application/pdf"===s.get("resources")[0].content_type?(this.$viewBtn.show(),this.$saveAsBtn.hide()):(this.$viewBtn.hide(),this.$saveAsBtn.show())):(this.$viewBtn.hide(),this.$saveAsBtn.hide()))):(l.enableInput(this.$unshareBtn,o.numShared>0),e.Util.isCEF()&&(this.$viewBtn.hide(),this.$saveAsBtn.hide(),l.enableInput(this.$trackBtn,!1)),l.enableInput(this.$deleteBtn,!0),l.enableInput(this.$downloadBtn,!1),l.enableInput(this.$forwardBtn,!1)),e.Util.isCEF()&&(this.$unshareBtn.removeAttr("title"),this.$deleteBtn.removeAttr("title"),this.$forwardBtn.removeAttr("title"),this.$trackBtn.removeAttr("title"),this.$saveAsBtn.removeAttr("title"),this.$viewBtn.removeAttr("title"))},_onClick:function(t){e.Util.isCEF()&&(t.target!==this.$el.get(0)||this.options.collectionsUiModel.get("checkbox")||this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION))},_onCheckboxClick:function(){this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.SELECT_ALL]),this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION)},_onDeleteClick:function(){e.Util.isCEF()&&this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.TRASH]),this._triggerViewEvent(t.ViewEvents.DELETE,{parentView:this})},_onUnshareClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.UNSHARE]),this._triggerViewEvent(t.ViewEvents.UNSHARE,{parentView:this}))},_onDownloadClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.DOWNLOAD]),this._triggerViewEvent(t.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this}))},_onForwardClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.FORWARD]),this._triggerViewEvent(t.ViewEvents.FORWARD,{parentView:this}))},_onActivityBtnClick:function(e){if(!$(e.currentTarget).hasClass("disabled")){if("keydown"===e.type&&13!==e.which&&32!==e.which)return!0;var i,s;this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.FULL_ACTIVITY]),s=_.extend(this.options,{parentView:this,parcelModel:this.options.selectionUiModel.getSingleSelectedItemModel()}),delete s.el,i=new t.ParcelActivityDlg(s),i.open()}},_onViewClick:function(e){$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.VIEW]),this._triggerViewEvent(t.ViewEvents.SHOW_SINGLE_ASSET,{parentView:this}))},_onTrackClick:function(e){var i=this.options.collectionsUiModel.get("mode");$(e.target).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.TRACK]),"desktop"===i&&this.options.appApi.rnaApi?this._triggerViewEvent(t.ViewEvents.OPENBROWSER,{parentView:this,eventName:"trackObject"}):this._triggerViewEvent(t.ViewEvents.TRACK,{parentView:this}))},_onSaveAsClick:function(e){{var i,s;this.options.collectionsUiModel.get("mode")}$(e.currentTarget).hasClass("disabled")||(this._logNumSelectedItems(),this.options.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.ACTION,n.SAVE_AS]),i=this.options.selectionUiModel,s=i.getSingleSelectedItemModel(),this._triggerViewEvent(t.ViewEvents.SAVEAS_SINGLE_ASSET,{parentView:this}))},_onKeyDown:function(e){var t,i=this.$el,s=e.which,o=37===s,n=!1;if(!l.descendantHasFocus(i))return n;switch(s){case 13:case 32:this.$checkbox.is(e.target)&&(this.$checkbox.click(),n=!0);break;case 37:case 39:t=l.getNextFocusableDescendant(i,o,!0)}return t&&1===t.length&&(n=!0,t.focus()),n},_onFocusIn:function(e){var t=$(e.target);this.$(":focusable").not(t).attr("tabindex",-1),t.attr("tabindex",0)},_addUiModelEventListeners:function(){var e=this.options;e.selectionUiModel.on("change:selected_item_models",this._onSelectedItemModelsChange),e.collectionsUiModel.on("change:mode",this._updateSelectionActions)},_onSelectedItemModelsChange:function(){var t=this.options,i=this.$el;t.appApi.usersMeApi.isUserInCohort("bh-home20","enabled")||t.noSelectionActions||t.appApi.acrobatApi.isInAcrobat()||(t.selectionUiModel.getSelectionCount()>0?(i.hasClass("open")||i.addClass("open"),this.render(),e.Util.isIE8()&&_.defer(this.render)):i.removeClass("open"))},_logNumSelectedItems:function(){var e=this.options,t=e.selectionUiModel.getSelectionCount();e.appApi.siteCatalystApi.logScEvent([n.FILE_LIST,n.SENT_FILES,n.NUM_FILES_CHECKED,a.getCountCode(t)])}})}),define("acplugins/tracked-send/js/home-view/templates/parcels-list-header-template.html",[],function(){return'<div role="columnheader">    <div role="checkbox"         class="parcel-list-header-checkbox                parcel-list-item-checkbox"         title="<%=SELECT_ALL%>"         tabindex="0"         aria-checked="false"></div></div><div role="presentation" class="sent-list-header-info-container shared-list-header-info-container">   <div role="columnheader" class="sent-list-header-name shared-workflow-files-header-column name">       <button class="shared-workflow-files-header-column-title sent-list-header-name-title workflow-files-header-column-sort-text-theme name" tabindex="0" title="<%= NAME %>" aria-label = "<%= NAME %>"></button>       <div class="sent-list-header-name-sort virgo-sort ascending shared-workflow-files-header-column-sort name" tabindex="0" role="button"></div>   </div>   <div role="columnheader" class="sent-list-header-sharing shared-workflow-files-header-column workflow-files-header-column-no-sort-text-theme" title="<%= SHARING %>" aria-label = "<%= SHARING %>"></div>   <div role="columnheader" class="sent-list-header-recieved shared-workflow-files-header-column date">       <button class="shared-workflow-files-header-column-title sent-list-header-recieved-title workflow-files-header-column-sort-text-theme date" tabindex="0" title="<%= DATE_HEADER %>" aria-label = "<%= DATE_HEADER %>"></button>       <div class="sent-list-header-recieved-sort virgo-sort descending shared-workflow-files-header-column-sort date" tabindex="0" role="button"></div>   </div>   <div class="sent-files-sort-menu shared-files-sort-menu menu ui-theme dropdown-background-theme dropdown-border-theme" role="menu" aria-label="<%= SORT_BY_DROPDOWN %>">           <div class="shared-files-sort-menu-title cb-text-theme"><%= SORT_BY %></div>           <div class="shared-files-sort-menu-items drop-down-text-theme theme-list-item-row name" aria-label="<%= NAME_S %>" title="<%= NAME_S %>" tabindex="-1">               <div class="shared-files-sort-menu-name"><%= NAME_S %></div>               <div class="shared-files-sort-menu-items-tick-icon name-tick-icon"></div>           </div>           <div class="shared-files-sort-menu-items drop-down-text-theme theme-list-item-row date" title="<%= DATE_HEADER_S %>" aria-label = "<%= DATE_HEADER_S %>" tabindex="-1">               <div class="shared-files-sort-menu-name"><%= DATE_HEADER_S %></div>               <div class="shared-files-sort-menu-items-tick-icon date-tick-icon"></div>           </div>    </div></div>'}),define("acplugins/tracked-send/js/home-view/views/parcels-list-header-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcels-list-header-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!acplugins/reviews/js/nls/ui-strings","core/utils/truncate","core/utils/view-util","acplugins/tracked-send/js/utils/sc-constants","core/models/workflow-status-strings","i18n!core/nls/ui-strings","core/utils/event-util","core/utils/sc-analytics"],function(e,t,i,s,o,n,r,a,l,d,c,h){t.ParcelsListHeaderView=e.View.extend({events:{"click .parcel-list-header-checkbox":"_onCheckboxClick","click .sent-list-header-info-container":"_onHeaderClick","click .sent-files-sort-menu":"_onSortMenuClick","dblclick .sent-list-header-info-container":"_onHeaderClick","dblclick .sent-files-sort-menu":"_onSortMenuClick"},_addMenuEventListeners:function(){this._addKeyEventListener(),c.addDomEventListener(document.body,"click",this._onBodyClick,!0)},initialize:function(){e.View.prototype.initialize.call(this),this._addUiModelEventListeners(),this._addMenuEventListeners()},_onBodyClick:function(e){var t=$(e.target);t.hasClass("shared-workflow-files-header-column-title")||this._hideSortMenu()},_hideSortMenu:function(){this.$sortMenu.hide(),this.$dateTitle.removeClass("selected"),this.$nameTitle.removeClass("selected")},render:function(){var t,n,r=this.$el;this._isMultiAssetParcelView="multi"==this.options.collectionsUiModel.get("single_multi_view"),e.View.prototype.render.call(this);var a,l;return"sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?(a=d.LAST_ACTIVITY,l=s.LAST_ACTIVITY):(a=s.DATE_SHARED_S,l=s.DATE_SHARED),0===r.children().length&&(r.html(_.template(i)({SELECT_ALL:s.SELECT_ALL,SORT_BY:d.SORT_BY,CREATE_DATE:s.DATE_LAST_ACTIVITY,NAME_S:d.NAME_S,NAME:s.NAME,DATE_HEADER:l,DATE_HEADER_S:a,SHARING:s.SHARING,SORT_BY_DROPDOWN:o.SORT_BY_DROPDOWN})),this._initWrappers()),t=this.options.collectionUiModel,t.get("has_vertical_scrollbar")?(n=this._getScrollBarWidth(),this.$header.css({right:n+"px"})):this.$header.css({right:0}),this._updateCheckbox(),this.$nameTitle.text(s.NAME),this.$dateTitle.text("sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?s.LAST_ACTIVITY:s.DATE_SHARED),this.$sharing.text(s.SHARING),this._isMultiAssetParcelView?(this.$dateTitle.removeClass("workflow-files-header-column-sort-text-theme"),this.$nameTitle.removeClass("workflow-files-header-column-sort-text-theme"),this.$dateTitle.hasClass("workflow-files-header-column-no-sort-text-theme")||this.$dateTitle.addClass("workflow-files-header-column-no-sort-text-theme"),this.$nameTitle.hasClass("workflow-files-header-column-no-sort-text-theme")||this.$nameTitle.addClass("workflow-files-header-column-no-sort-text-theme")):(this.$dateTitle.removeClass("workflow-files-header-column-no-sort-text-theme"),this.$nameTitle.removeClass("workflow-files-header-column-no-sort-text-theme"),this.$dateTitle.hasClass("workflow-files-header-column-sort-text-theme")||this.$dateTitle.addClass("workflow-files-header-column-sort-text-theme"),this.$nameTitle.hasClass("workflow-files-header-column-sort-text-theme")||this.$nameTitle.addClass("workflow-files-header-column-sort-text-theme")),this._updateFields(),this._adjustLayout(),this},_initWrappers:function(){this.$checkbox=this.$(".parcel-list-header-checkbox"),this.$header=this.$(".sent-list-header-info-container"),this.$name=this.$(".sent-list-header-name"),this.$nameTitle=this.$(".sent-list-header-name-title"),this.$nameSort=this.$(".sent-list-header-name-sort"),this.$date=this.$(".sent-list-header-recieved"),this.$dateTitle=this.$(".sent-list-header-recieved-title"),this.$dateSort=this.$(".sent-list-header-recieved-sort"),this.$sharing=this.$(".sent-list-header-sharing"),this.$sortMenu=this.$(".sent-files-sort-menu"),this.$sortMenuOwnerOption=this.$(".shared-files-sort-menu-items.initiator")},_onSortMenuClick:function(e){var t=$(e.target);t.hasClass("shared-files-sort-menu-items")&&(this.$sortMenu.hide(),this._sortOnColumn(t)),this._consumeEvent(e)},_onHeaderClick:function(e){if(!this._isMultiAssetParcelView){var t=$(e.target);t.is(this.$sharing)||(!this.options.isInSearchResultsView&&t.hasClass("shared-workflow-files-header-column-title")&&t.hasClass("currently_sorted")?t.hasClass("selected")?(t.removeClass("selected"),this.$sortMenu.hide()):(t.addClass("selected"),this.$sortMenu.show(),t.parent().position().left+this.$sortMenu.width()<this.$header.width()||t.is(this.$nameTitle)?this.$sortMenu.css("left",t.parent().position().left):this.$sortMenu.css("left",t.parent().position().left+t.outerWidth()-this.$sortMenu.width())):(t.hasClass("shared-workflow-files-header-column-title")||t.hasClass("shared-workflow-files-header-column-sort"))&&(this.$sortMenu.hide(),this._sortOnColumn(t)),this._consumeEvent(e))}},_getLogColumnName:function(e){var t="";switch(e){case l.LAST_ACTIVITY_DATE:t=h.VIRGO_SORT_LAST_ACTIVITY;break;case l.VIRGO_SORT_DATE_SENT:t=h.VIRGO_SORT_DATE_SENT}return t},_getDefaultSortOrder:function(e){var t=l.DESC;return e.hasClass("date")?t=l.DESC:e.hasClass("initiator")?t=l.ASC:e.hasClass("name")&&(t=l.ASC),t},_sortOnColumn:function(e){var t="",i=this._getDefaultSortOrder(e);e.hasClass("date")?t="sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?l.LAST_ACTIVITY_DATE:l.SHARED_DATE:e.hasClass("initiator")?t=l.INITIATOR:e.hasClass("name")&&(t=l.FILENAME),e.hasClass("shared-workflow-files-header-column-sort")&&(i=e.hasClass("descending")?l.ASC:l.DESC),this.options.appApi.siteCatalystApi.logVirgoSortEvent(h.VIRGO_SENDTRACK,this._getLogColumnName(t),i==l.DESC),this.options.collectionsUiModel.trigger("SortItems",{sort_key:t,sort_order:i})},_updateFields:function(){if(this.$dateSort.hide(),this.$dateTitle.removeClass("currently_sorted selected"),this.$nameSort.hide(),this.$nameTitle.removeClass("currently_sorted selected"),this.$sortMenu.hide(),this.$(".shared-files-sort-menu-items.date").removeClass("selected"),this.$(".shared-files-sort-menu-items.initiator").removeClass("selected"),this.$(".shared-files-sort-menu-items.name").removeClass("selected"),this.$(".shared-files-sort-menu-name").css("width","100%"),this.$(".name-tick-icon").hide(),this.$(".date-tick-icon").hide(),this.$(".initiator-tick-icon").hide(),!this._isMultiAssetParcelView){var e=this.options.collectionsUiModel;e.get("sort_key")==l.SHARED_DATE||e.get("sort_key")==l.LAST_ACTIVITY_DATE||e.get("sort_key")==l.MODIFIED_DATE||e.get("sort_key")==l.CREATE_DATE?(this.$dateSort.show(),this.$dateTitle.addClass("currently_sorted"),e.get("sort_order")==l.ASC?(this.$dateSort.removeClass("descending"),this.$dateSort.attr("aria-label",s.ASCENDING),this.$dateSort.attr("title",s.ASCENDING)):(this.$dateSort.addClass("descending"),this.$dateSort.attr("aria-label",s.DESCENDING),this.$dateSort.attr("title",s.DESCENDING)),this.$(".shared-files-sort-menu-items.date").addClass("selected"),this.$(".shared-files-sort-menu-items.date").find(".shared-files-sort-menu-name").css("width","90%"),this.$(".date-tick-icon").show()):e.get("sort_key")==l.INITIATOR?(this.$ownerSort.show(),this.$ownerTitle.addClass("currently_sorted"),e.get("sort_order")==l.ASC?(this.$ownerSort.removeClass("descending"),this.$ownerSort.attr("aria-label",s.ASCENDING),this.$ownerSort.attr("title",s.ASCENDING)):(this.$ownerSort.addClass("descending"),this.$ownerSort.attr("aria-label",s.DESCENDING),this.$ownerSort.attr("title",s.DESCENDING)),this.$(".shared-files-sort-menu-items.initiator").addClass("selected"),this.$(".shared-files-sort-menu-items.initiator").find(".shared-files-sort-menu-name").css("width","90%"),this.$(".initiator-tick-icon").show()):e.get("sort_key")==l.FILENAME&&(this.$nameSort.show(),this.$nameTitle.addClass("currently_sorted"),e.get("sort_order")==l.ASC?(this.$nameSort.removeClass("descending"),this.$nameSort.attr("aria-label",s.ASCENDING),this.$nameSort.attr("title",s.ASCENDING)):(this.$nameSort.addClass("descending"),this.$nameSort.attr("aria-label",s.DESCENDING),this.$nameSort.attr("title",s.DESCENDING)),this.$(".shared-files-sort-menu-items.name").addClass("selected"),this.$(".shared-files-sort-menu-items.name").find(".shared-files-sort-menu-name").css("width","90%"),this.$(".name-tick-icon").show())}},_isItemSelectable:function(){return!0},_getNumSelectable:function(){var e=0;return this.options.collection.each(_.bind(function(t){this._isItemSelectable(t)&&(e+=1)},this)),e},_getNumSelected:function(){return this.options.selectionUiModel.getSelectionCount()},_getScrollBarWidth:function(){var e=this._scrollBarWidth;return void 0===e&&(e=r.getScrollBarWidth(),this._scrollBarWidth=e),e},_updateCheckbox:function(){var t=this.$checkbox,i=this.options,s=i.selectionUiModel.getSelectionCount();this.options.collectionsUiModel.get("checkbox")?(t.removeClass("hidden dash selected").removeAttr("aria-hidden"),this.$header.removeClass("no-checkbox"),s>0&&(s===this._getNumSelectable()?t.addClass("selected").attr("aria-checked","true"):t.addClass("dash").attr("aria-checked","mixed"))):(t.addClass("hidden").attr("aria-hidden",!0),this.$header.addClass("no-checkbox")),e.Util.isIE8()&&r.detachAndReattachElement(t)},_onCheckboxClick:function(){this._getNumSelected()>0?this._triggerViewEvent(e.ViewEvents.CLEAR_SELECTION):(this.options.collection.length>0&&this.options.appApi.siteCatalystApi.logScEvent([a.FILE_LIST,a.SENT_FILES,a.ACTION,a.SELECT_ALL]),this._triggerViewEvent(e.ViewEvents.SELECT_ITEM,_.extend({},this.options,{selectType:e.SelectionUiModel.SELECT_ALL})))},getCurrentSortedColumn:function(){var e,t=this.$sortMenu.find(".selected");return t.length&&(t.hasClass("date")?e=this.$dateTitle:t.hasClass("initiator")?e=this.$ownerTitle:t.hasClass("name")&&(e=this.$nameTitle)),e},_onKeyDown:function(e){var t,i=!1,s=$(e.target),o=e.shiftKey;if(!r.descendantHasFocus(this.$el))return i;switch(e.which){case 9:r.isElementDisplayed(this.$sortMenu)&&this._hideSortMenu(),t=r.getNextFocusableDescendant(this.$header,e.shiftKey);break;case 27:r.isElementDisplayed(this.$sortMenu)&&(this._hideSortMenu(),i=!0);break;case 13:case 32:s.click(),s.hasClass("shared-files-sort-menu-items")&&(t=this.getCurrentSortedColumn()),i=!0;break;case 37:case 39:i=!0;break;case 38:o=!0;case 40:r.isElementDisplayed(this.$sortMenu)&&(t=r.getNextFocusableDescendant(this.$sortMenu,o,!0)),i=!0}return t&&t.length>0&&(t.focus(),i=!0),i},_addUiModelEventListeners:function(){var e=this.options;e.collectionUiModel.on("change:has_vertical_scrollbar",this._onHasVerticalScrollbarChange),e.collectionsUiModel.on("change:checkbox",this.render),e.selectionUiModel.on("change:selected_item_models",this._updateCheckbox),this.listenTo(this.options.collectionsUiModel,"change:rhpShown",this._adjustLayout),this.listenTo(e.collectionsUiModel,"change:view",this._adjustLayout),this.options.appApi.windowApi.addWindowResizeCallback(_.bind(this._adjustLayout))
},_onHasVerticalScrollbarChange:function(){this.render()},_updateVisibilityOfColumns:function(e,t){var i=t.colMargin,s=this.$name.position().left,o=t.totalVisibleCols,n=e-s,r=n-i*o,a=t.totalFluidCols,l=r/a;if(1==t.name.visibility){var d=t.name.end-t.name.start+1;this.$name.css("width",l*d+"px"),this.$name.css("margin-right",i+"px"),this.$nameSort.css("left",this.$nameTitle.outerWidth()),this.$name.show(),this.$nameTitle.hasClass("currently_sorted")&&this.$sortMenu.css("left",this.$name.position().left)}else this.$name.hide();if(1==t.date.visibility){var d=t.date.end-t.date.start+1,c=t.date.colNumber;this.$date.css("left",s+l*(t.date.start-1)+i*c+"px"),this.$date.css("width",l*d+"px"),this.$date.css("margin-right",i+"px"),this.$date.show(),this.$dateSort.css("left",this.$dateTitle.outerWidth()),this.$dateTitle.hasClass("currently_sorted")&&(this.$date.position().left+this.$sortMenu.width()<this.$header.width()?this.$sortMenu.css("left",this.$date.position().left):this.$sortMenu.css("left",this.$date.position().left+this.$dateTitle.outerWidth()-this.$sortMenu.width()))}else this.$date.hide();if(1==t.sharing.visibility){var d=t.sharing.end-t.sharing.start+1,c=t.sharing.colNumber;this.$sharing.css("left",s+l*(t.sharing.start-1)+i*c+"px"),this.$sharing.css("width",l*d+"px"),this.$sharing.css("margin-right",i+"px"),this.$sharing.show()}else this.$sharing.hide()},_adjustLayout:function(){var e=this.options.collectionsUiModel.get("view");if(this.$name.removeAttr("style"),this.$date.removeAttr("style"),this.$sharing.removeAttr("style"),"list"==e){var t=this.$header.width();"sentfiles"===this.options.pluginId||"receivedfiles"===this.options.pluginId?t=this.$header.width():("sentfiles_search"===this.options.pluginId||"reviews_search"===this.options.pluginId)&&(t=this.$header.parent().width()),this.$el.hasClass("sticky-search-header")&&(this.$el.removeClass("sticky-search-header"),t=this.$header.width(),this.$el.addClass("sticky-search-header")),100>=t?this._updateVisibilityOfColumns(t,{name:{visibility:!1},date:{visibility:!1},sharing:{visibility:!1},totalFluidCols:0,totalVisibleCols:0,colMargin:24}):t>100&&300>=t?this._updateVisibilityOfColumns(t,{name:{visibility:!0,colNumber:0,start:1,end:1},date:{visibility:!1},sharing:{visibility:!1},totalFluidCols:1,totalVisibleCols:1,colMargin:24}):t>300&&500>=t?this._updateVisibilityOfColumns(t,{name:{visibility:!0,colNumber:0,start:1,end:3},date:{visibility:!0,colNumber:1,start:4,end:5},sharing:{visibility:!1},totalFluidCols:5,totalVisibleCols:2,colMargin:24}):t>500&&700>=t?this._updateVisibilityOfColumns(t,{name:{visibility:!0,colNumber:0,start:1,end:5},date:{visibility:!0,colNumber:1,start:6,end:7},sharing:{visibility:!1},totalFluidCols:7,totalVisibleCols:2,colMargin:32}):this._updateVisibilityOfColumns(t,{name:{visibility:!0,colNumber:0,start:1,end:5},sharing:{visibility:!0,colNumber:1,start:6,end:7},date:{visibility:!0,colNumber:2,start:8,end:9},totalFluidCols:9,totalVisibleCols:3,colMargin:32})}else this.$sharing.hide(),this.$nameTitle.hasClass("currently_sorted")?(this.$name.show(),this.$name.css("left","0px"),this.$name.css("width",this.$header.width()),this.$sortMenu.css("left",this.$name.position().left),this.$nameSort.css("left",this.$nameTitle.outerWidth())):this.$name.hide(),this.$dateTitle.hasClass("currently_sorted")?(this.$date.show(),this.$date.css("left","0px"),this.$date.css("width",this.$header.width()),this.$sortMenu.css("left",this.$date.position().left),this.$dateSort.css("left",this.$dateTitle.outerWidth())):this.$date.hide()}})}),define("acplugins/tracked-send/js/home-view/views/parcels-collection-view",["core/ac-core","files/ac-files","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcels-collection-template.html","core/utils/view-util","core/models/workflow-status-strings","acplugins/tracked-send/js/home-view/views/parcels-list-view","acplugins/tracked-send/js/home-view/views/selection-actions-view","acplugins/tracked-send/js/home-view/views/parcels-list-header-view"],function(e,t,i,s,o,n){i.ParcelsCollectionView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(s),this._addKeyEventListener(),this._addCollectionEventListeners(),this._addUiModelEventListeners(),this.deferUssCall=!1,this.options.appApi.rnaApi.done(_.bind(function(e){e.registryAPI.getPaginationRegistry().then(_.bind(function(e){this.isPaginationEnabled=e},this))},this))},render:function(){var t=this.$el,i=this.options,s=i.appApi.pluginsApi,o=i.pluginId;return e.View.prototype.render.call(this),0===t.children().length&&(t.html(this._template({pluginSelectorId:s.getPluginSelectorId(o)})),this._initWrappers()),this._renderChildViews(),this._onViewChange(this.options.collectionsUiModel),this.adjustItemsHeight(),this},_initWrappers:function(){this.$header=this.$(".sent-files-header"),this.$selectionActions=this.$(".selection-actions"),this.$items=this.$(".sent-files-items"),this.options.isInSearchResultsView?(this.$items.addClass("uss-search-active"),this.$header.addClass("uss-search-active"),this.$search_content=$(".search-views-content"),this.$search_content.scroll(this._onScrollSearchResults),this._StickyHeaderTop=$(".search-results-header").outerHeight(!0)+this.$header.outerHeight(!0)):this.$items.on("scroll",this._onItemScroll)},_onItemScroll:function(){var t=this.$items,i=this.options.parcelCollection,s=i.length,o=i.getNumberOfItems();this._gettingNextPageInProgress=!1,e.Util.isMac()&&this._renderHeaderView(),this.isPaginationEnabled?t.outerHeight()+t.scrollTop()+t.children().eq(0).outerHeight()/2>=t.prop("scrollHeight")&&o>s&&t.children().length===s&&(this._itemsView.renderLoadingExperience(),this.options.rootView._getMergedWorkflowDataAsync(n.SEND_TRACK,s).then(_.bind(function(){this._gettingNextPageInProgress=!0},this),_.bind(function(){this._gettingNextPageInProgress=!1},this))):2*t.height()+t.scrollTop()>t.prop("scrollHeight")&&o>s&&this._gettingNextPageInProgress===!1&&(this._gettingNextPageInProgress=!0,this.options.appApi.rnaApi.done(_.bind(function(e){this._nextPageIndex===s?(this.options.rootView.updateSenderNameFromCache(this._nextPageWorkflowData).then(_.bind(function(e){this.options.parcelCollection.add(e.WorkflowData,{silent:!0,merge:!0,sort:!1}),this._itemsView.render(e.dataRange.from),this.options.rootView.updateSenderNameFromBehanceAPI(e).then(_.bind(function(e){this.options.parcelCollection.add(e.WorkflowData,{silent:!0,merge:!0,sort:!1}),this._itemsView.render(e.dataRange.from)},this),_.bind(function(){},this))},this),_.bind(function(){},this)),e.rnaFileAPI.getWorkflowData(n.SEND_TRACK,this._nextPageIndex+this._nextPageWorkflowData.WorkflowData.length).done(_.bind(function(e){this._nextPageIndex=e.dataRange.from,this._nextPageWorkflowData=e,this._gettingNextPageInProgress=!1},this)).fail(_.bind(function(){this._gettingNextPageInProgress=!1},this))):e.rnaFileAPI.getWorkflowData(n.SEND_TRACK,s).done(_.bind(function(t){t.WorkflowData.length&&this.options.parcelCollection.length===t.dataRange.from&&(this.options.rootView.updateSenderNameFromCache(t).then(_.bind(function(e){this.options.parcelCollection.add(e.WorkflowData,{silent:!0,merge:!0,sort:!1}),this._itemsView.render(e.dataRange.from),this.options.rootView.updateSenderNameFromBehanceAPI(e).then(_.bind(function(e){this.options.parcelCollection.add(e.WorkflowData,{silent:!0,merge:!0,sort:!1}),this._itemsView.render(e.dataRange.from)},this),_.bind(function(){},this))},this),_.bind(function(){},this)),e.rnaFileAPI.getWorkflowData(n.SEND_TRACK,t.dataRange.from+t.WorkflowData.length).done(_.bind(function(e){this._nextPageIndex=e.dataRange.from,this._nextPageWorkflowData=e,this._gettingNextPageInProgress=!1},this)).fail(_.bind(function(){this._gettingNextPageInProgress=!1},this)))},this)).fail(_.bind(function(){this._gettingNextPageInProgress=!1},this))},this)).fail(_.bind(function(){this._gettingNextPageInProgress=!1},this))),e.Util.isMac()&&this._sendChildrenChangedAccNotificationForItemsView()},_onScrollSearchResults:function(){if(this.$el.is(":visible")){var e=this.$items.offset().top,i=this.$items.offset().top+this.$items.outerHeight(!0);if(this._StickyHeaderTop>e&&this._StickyHeaderTop<i){if(this.$header.hasClass("sticky-search-header")||this.$header.addClass("sticky-search-header"),this.$search_content.hasClass("with-sticky-search-header")||this.$search_content.addClass("with-sticky-search-header"),this.options.selectionUiModel.getNumSelectedItems()?this.$header.addClass("active-context-board"):this.$header.removeClass("active-context-board"),this._contentBottom=this._StickyHeaderTop+this.$search_content.outerHeight(!0),i<this._contentBottom&&!this.deferUssCall&&this.collection.length<this.options.searchModel.getSearchResultCount()){var s,o=this.options;this.deferUssCall=!0,"sentfiles_search"===o.pluginId?s="parcel":"reviews_search"===o.pluginId&&(s="review"),_.extend(o,{search_scope:[s],noSearchReset:!0,useCacheToUpdate:!0}),this.options.appApi.displayApi.showSpinner(!0),t.opFactory.create("USSSearchingOp",o).run().always(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1),setTimeout(_.bind(this.enableUssCall,this),200)},this))}}else this.$header.hasClass("sticky-search-header")&&this.$header.removeClass("sticky-search-header"),this.$search_content.hasClass("with-sticky-search-header")&&this.$search_content.removeClass("with-sticky-search-header")}},enableUssCall:function(){this.deferUssCall=!1},_renderChildViews:function(){this._renderItemsView(),this._renderHeaderView()},_sendChildrenChangedAccNotificationForItemsView:function(){this._itemsView.sendChildrenChangedAccNotifications()},_renderItemsView:function(){this._renderChildView("_itemsView",i.ParcelsListView,this.$items)},_renderHeaderView:function(){this._renderChildView("_headerView",i.ParcelsListHeaderView,this.$header,{collectionItemsView:this._itemsView})},_renderSelectionActionsView:function(){this._renderChildView("_selectionActionsView",i.SelectionActionsView,this.$selectionActions)},_setFocusToChildView:function(e,t){var i=t?"[role=checkbox]:focusable":":tabbable:first",s=e.find(i);return s.length?(s.focus(),!0):!1},_onKeyDown:function(e){var t=!1;switch(e.which){case 38:o.descendantHasFocus(this.$items)&&(this.setFocusToHeaderView(!0)||this.setFocusToSelectionActionsView(),t=!0);break;case 40:(o.descendantHasFocus(this.$header)||o.descendantHasFocus(this.$selectionActions))&&(this.setFocusToCollectionItemsView(),t=!0)}return t&&this._consumeEvent(e),t},setFocusToHeaderView:function(e){var t=this._setFocusToChildView(this.$header,e);return t},setFocusToSelectionActionsView:function(e){var t=this._setFocusToChildView(this.$selectionActions,e);return t},setFocusToCollectionItemsView:function(){var e=this._setFocusToChildView(this.$items);return e},_correctFocusOnSelectionChange:function(t,i){var s=this.$header,o=s.find("[role=checkbox]"),n=this.$selectionActions,r=!1,a=!1;t&&(r=t.is(s),a=t.is(n)),this._hideOrShowHeaderCheckbox(),r&&i.selectType===e.SelectionUiModel.SELECT_ALL?this.setFocusToSelectionActionsView(!0):a&&(o.is(":focusable")?this.setFocusToHeaderView(!0):this.setFocusToCollectionItemsView())},_hideOrShowHeaderCheckbox:function(){var t=this.$header.find("[role=checkbox]"),i=this.$selectionActions;i.hasClass("open")||e.Util.isCEF()?t.hide():t.show()},renderNextPageData:function(e){this._itemsView.hideLoadingExperience(),this._itemsView.render(e)},_addCollectionEventListeners:function(){var e,t,i=this.options,s=i.collectionsUiModel,o=i.collectionUiModel,n=this.collection;e=s.get("debounced_render_delay"),t=_.debounce(_.bind(function(){this.invalidateViewsRecursively(),this.render(),o.set("show_empty",0===n.length)},this),e),n.on("add change remove sort reset",function(){t()}),n.on("update_ui_with_next_page_data",this.renderNextPageData)},_onViewEvent:function(t,i){switch(t){case e.ViewEvents.SELECT_ITEM:this._onSelectItem(i);break;case e.ViewEvents.CLEAR_SELECTION:this._onClearSelection(i)}e.View.prototype._onViewEvent.call(this,t,i)},_onSelectItem:function(e){var t,i=o.descendantHasFocus(this.$header),s=o.descendantHasFocus(this.$selectionActions);i?t=this.$header:s&&(t=this.$selectionActions),_.delay(this._correctFocusOnSelectionChange,this.options.collectionsUiModel.get("scroll_render_delay"),t,e)},_onClearSelection:function(e){this._onSelectItem(e)},_addUiModelEventListeners:function(){var e=this.options;this.listenTo(e.collectionsUiModel,"change:view",this._onViewChange)},_setHeaderVisibility:function(){this.options.collection&&(0==this.options.collection.length?this.$header.hide():this.$header.show())},adjustItemsHeight:function(){1===this.options.parcelCollection.length?this.$items.find(".parcel-list-item").first().addClass("only-parcel"):this.$items.find(".parcel-list-item").first().removeClass("only-parcel")},_onViewChange:function(e){var t=e.get("view");"list"==t?(this.$items.removeClass("shared-thumb-view"),this.$items.removeClass("cb-theme-text"),this.$el.removeClass("shared-item-thumb-view"),this.$el.removeClass("collection-thumb-view"),this._setHeaderVisibility()):"thumbnail"==t&&(this.$items.addClass("shared-thumb-view"),this.$items.addClass("cb-theme-text"),this.$el.addClass("shared-item-thumb-view"),this.$el.addClass("collection-thumb-view"),this._setHeaderVisibility())}})}),define("acplugins/tracked-send/js/home-view/templates/no-parcels-collection-template.html",[],function(){return'<div id="parcels-no-parcels-prompt" class="shared-no-parcels shown"><div class="shared-empty-state-icon view-review-empty-state-icon"></div><div class="shared-on-sign-out-prompt theme-text"><%=NO_PARCELS_SEND_PROMPT%></div><div class="shared-on-sign-out-subprompt theme-text theme-text"><%=NO_PARCELS_SEND_SUBPROMPT%></div><div class="shared-on-sign-out-button control-button theme-button theme-button-label on-send-for-share" role="button"aria-label="<%= NO_PARCELS_SEND_PROMPT %><%= NO_PARCELS_SEND_SUBPROMPT %><%= NO_PARCELS_SEND_BTN %>"tabindex="0"><%= NO_PARCELS_SEND_BTN %></div></div>'}),define("acplugins/tracked-send/js/home-view/views/no-parcels-collection-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/no-parcels-collection-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","acplugins/tracked-send/js/utils/sc-constants","core/views/view"],function(e,t,i,s,o){return t.NoParcelsCollectionView=e.View.extend({events:{"click .learn-about-sending-files-link":"_onLearnLinkClick","click .on-send-for-share":"_onSendForShareClick"},initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i),this._addUiModelEventListeners(),this._addCollectionEventListeners(),this.$(".on-send-for-share").hide()},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({NO_PARCELS_SEND_PROMPT:s.NO_SHARED_FILE,NO_PARCELS_SEND_SUBPROMPT:this._getNoParcelsSubpromt(),NO_PARCELS_S_T_BTN:s.NO_PARCELS_S_T_BTN,NO_PARCELS_SEND_BTN:s.CTA_SHARE_A_FILE})),this._initWrappers()),this._updateVisibility(),this},_initWrappers:function(){this.$noParcelsSendPrompt=this.$("#parcels-no-parcels-prompt"),this.$shareButton=this.$(".on-send-for-share")},_onLearnLinkClick:function(){this.options.appApi.rnaApi.done(_.bind(function(e){e.openDecoratedUrl(s.LEARN_MORE_ST_GO_URL)},this))},_onSendForShareClick:function(){var t,i=this.options;i.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.NO_PARCELS,o.SHARE_BUTTON,o.CLICKED]),e.Util.isCEF()?this.options.appApi.rnaApi.done(_.bind(function(e){e.stApi.launchShareApp()},this)):(t="send",i.appApi.routerApi.navigate(t,{trigger:!0}))},_addUiModelEventListeners:function(){this.listenTo(this.options.collectionUiModel,"change:show_empty",this._onShowEmptyChange),this.options.collectionsUiModel.on("change:CanShowNoFileView",this._onShowEmptyChange)},_addCollectionEventListeners:function(){var e,t,i=this.options,s=i.collectionsUiModel,o=i.collectionUiModel,n=this.collection;e=s.get("debounced_render_delay"),t=_.debounce(_.bind(function(){this.invalidateViewsRecursively(),this.render(),o.set("show_empty",0===n.length)},this),e),n.on("add change remove sort reset",function(){t()})},_onShowEmptyChange:function(){this.render()},_getNoParcelsSubpromt:function(){return"sentfiles_search"===this.options.pluginId||"sentfiles"===this.options.pluginId?s.NO_SENT_PARCELS_REVIEW_SUBPROMPT:s.NO_RECEIVED_PARCELS_REVIEW_SUBPROMPT},_updateVisibility:function(){this.options.collectionUiModel.get("show_empty")&&this.options.collectionsUiModel.get("CanShowNoFileView")?(this.options.appApi.displayApi.clearSpinnerRefs(),this.options.appApi.displayApi.showSpinner(!1),this.$noParcelsSendPrompt.show(),"sentfiles_search"===this.options.pluginId||"sentfiles"===this.options.pluginId?this.$shareButton.show():this.$shareButton.hide()):this.options.collectionUiModel.get("show_empty")&&!this.options.collectionsUiModel.get("CanShowNoFileView")?(this.options.appApi.displayApi.showSpinner(!0),this.$noParcelsSendPrompt.hide(),this.$shareButton.hide()):this.options.collectionUiModel.get("show_empty")||(this.options.appApi.displayApi.clearSpinnerRefs(),this.$noParcelsSendPrompt.hide(),this.$shareButton.hide())}}),t.NoParcelsCollectionView}),define("acplugins/tracked-send/js/home-view/views/parcels-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/parcels-template.html","acplugins/tracked-send/js/home-view/views/parcels-collection-view","acplugins/tracked-send/js/home-view/views/no-parcels-collection-view"],function(e,t,i){t.ParcelsView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$parcelsContent=this.$(".parcels-content"),this.$parcelsNoContent=this.$(".parcels-no-content")},_renderChildViews:function(){var t=this._collectionUiModel;e.Util.isCEF()&&_.isUndefined(this.options.parcelCollection)||(t||(t=this._collectionUiModel=e.uiModelFactory.create("CollectionUiModel"),t.set("show_empty",0===this.options.parcelCollection.length)),0!=this.options.parcelCollection.length||this.options.isInSearchResultsView?(this.$parcelsContent.show(),this.$parcelsNoContent.hide(),this._renderParcelsContentView(t)):(this.$parcelsContent.hide(),this.$parcelsNoContent.show(),this._renderParcelsNoContentView(t)))},_resetParcelCollectionIfRequired:function(){var e=this.options.collectionsUiModel.get("user_role"),t="",i=this.options.parcelCollection.models,s=i.length;0!=s&&""!=e&&("Send_And_Track"===i[0].attributes.WorkflowType?t=i[0].attributes.send_track_info.user_role:"Review"===i[0].attributes.WorkflowType&&(t=i[0].attributes.review_info.user_role),e!==t&&this.options.parcelCollection.reset())},_renderParcelsNoContentView:function(e){this._renderChildView("_noParcelsContentView",t.NoParcelsCollectionView,this.$parcelsNoContent,{collection:this.options.parcelCollection,collectionUiModel:e})},_renderParcelsContentView:function(e){this._renderChildView("_parcelsContentView",t.ParcelsCollectionView,this.$parcelsContent,{collection:this.options.parcelCollection,collectionUiModel:e})}})}),define("acplugins/tracked-send/js/home-view/views/sent-files-body-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/sent-files-body-template.html","acplugins/tracked-send/js/home-view/views/parcels-view"],function(e,t,i){t.SentFilesBodyView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(i)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template()),this._initWrappers()),this._renderChildViews(),this},_initWrappers:function(){this.$parcels=this.$(".parcels"),this.$searchResults=this.$(".parcels-search-results")},_renderChildViews:function(){var e=!0;e&&this._renderParcelsView()},_renderParcelsView:function(){this._renderChildView("_parcelsView",t.ParcelsView,this.$parcels)}})}),define("acplugins/tracked-send/js/home-view/templates/files-rhp-template",[],function(){return'<div class="rhp-error-view"></div><div class="rhp-preview"></div><div class="rhp-properties"></div><div class="rhp-intro-message"></div><div class="rhp-participants-accodian"></div> <div class="shared-rhp-primary-actions"/> <div class="shared-rhp-secondary-actions"/>'}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-assets-tracked-op",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/utils/http-util","core/ops/op","viewer/collections/parcel-asset-collection"],function(e,t,i){return t.GettingAssetsTrackedOp=e.Op.extend({run:function(){var e,s,o,n,r=this.options,a="GET",l=$.Deferred();return n=r.model.getId(),"dummyId"===n||""===n?(l.reject({httpRespCode:404,httpRespBody:"The resource is no longer accessible"}),l):(this.invitationId=n,this.dataMap=t.CachedData,void 0!=this.dataMap[n]?_.isUndefined(this.dataMap[n].data)?this.dataMap[n].promise:(l.resolve(this.dataMap[n].data),l):(this.dataMap[n]={promise:l},o=i.getRequestHeaders(a),o["Content-Type"]="application/json","ACTIVE"===r.model.attributes.aep_workflow_info.state||r.isUnaccepted?(e=this.options.rootView._getSendUriTrimmed()+"preview/"+n+"/bootstrap?shareinfo=true",o.authorization="Bearer "+this.options.accessToken):(n=r.model.attributes.id,e=this.options.rootView._getSendUri()+"parcels/"+n,o.authorization="Bearer "+this.options.accessToken),s=JSON.stringify({value:!1}),$.ajax(e,{type:a,headers:o,dataType:"json",global:!1,success:_.bind(function(e,t,i){if("ACTIVE"===r.model.attributes.aep_workflow_info.state||r.isUnaccepted){var s,o;if(_.isUndefined(e)||_.isUndefined(e.meta_list)||!e.meta_list.length||_.isUndefined(e.meta_list[0].commenting_urn)||(s=e.meta_list[0].commenting_urn),_.isUndefined(e)||_.isUndefined(e.meta_list)||!e.meta_list.length||_.isUndefined(e.meta_list[0].asset_urn)||(o=e.meta_list[0].asset_urn),void 0===e||void 0===e.parcel_data||void 0===e.parcel_data.email_message)l.reject({httpRespCode:i.status,httpRespBody:i.responseText});else{var n=!1;void 0!==e.is_original_shared&&(n=e.is_original_shared),this.dataMap[this.invitationId].data={email_message:e.parcel_data.email_message,preview_url:e.parcel_data.preview_url,is_original_shared:n,commenting_urn:s,asset_id:o,is_legacy_asset:e.is_legacy_asset},l.resolve(this.dataMap[this.invitationId].data)}}else if(_.isUndefined(e)||_.isUndefined(e.parcels)||0===e.parcels.length)l.reject({httpRespCode:i.status,httpRespBody:i.responseText});else{var a,d,s,o,n=!1;a=e.parcels[0].email_message,e.parcels[0].invitations&&e.parcels[0].invitations.length&&(d=e.parcels[0].invitations[0].preview_url),s=void 0,e.parcels[0].files&&e.parcels[0].files.length&&(o=e.parcels[0].files[0].id),this.dataMap[this.invitationId].data={email_message:a,preview_url:d,is_original_shared:n,commenting_urn:s,asset_id:o,is_legacy_asset:e.is_legacy_asset},l.resolve(this.dataMap[this.invitationId].data)}},this),error:_.bind(function(e){e&&423==e.status&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"triggerMigrationInProgressError",methodArgs:{}})},this)),l.reject({httpRespCode:e.status,httpRespBody:e.responseText})},this)}),l))}}),t.GettingAssetsTrackedOp}),define("acplugins/tracked-send/js/home-view/views/files-rhp-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/files-rhp-template","core/models/workflow-status-strings","i18n!core/nls/ui-strings","core/utils/sc-analytics","core/utils/view-util","core/views/rhp/shared-rhp-preview-view","core/views/rhp/shared-rhp-properties-view","core/views/rhp/shared-rhp-intro-message-view","core/views/rhp/sentfiles/rhp-participants-view","core/views/rhp/sentfiles/primary-actions-view","core/views/rhp/sentfiles/secondary-actions-view","core/views/rhp/sentfiles/activity-accodian-view","core/views/rhp/shared-rhp-error-view","core/views/view","acplugins/tracked-send/js/home-view/ops/getting/getting-assets-tracked-op"],function(e,t,i,s,o,n,r){return t.SentFilesRhpView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this.cbViewModel=e.modelFactory.create("ContextBoardModel"),_.extend(this.options,{cbViewModel:this.cbViewModel}),this._addKeyEventListener()},render:function(){var t;e.View.prototype.render.call(this),t=this.$el,t.html(_.template(i)({removeFromTracking:o.REMOVE_FROM_TRACKING})),this._initWrappers(),this.options.runningInRHP&&(this.options.rootView._pluginOptions&&this.options.rootView._pluginOptions.isCBView&&"Tracking"!=this.options.rootView._pluginOptions.requestAgent&&"recent"!=this.options.rootView._pluginOptions.requestAgent?this.options.appApi.siteCatalystApi.logEvent("Viewer","ContextBoard",n.VIRGO_SENDTRACK):this.options.appApi.siteCatalystApi.logVirgoRHPOpenedEvent(n.VIRGO_SENDTRACK_CB));var r=this.cbViewModel.getSingleSelectedItemModel();if(!r||this.options.isInSearchResultsView&&r.attributes.WorkflowType!==s.SEND_TRACK&&!r.isAEPViewFile())this.isBootstrapCallFailed!==!0||this.options.isDocView?t.hide():(t.show(),this._renderChildViews());else{t.show();{this.options.appApi.usersMeApi.options.usersMeIdentityModel}this._renderChildViews(),this._updateFields()}return this},_initWrappers:function(){this.$errorView=this.$(".rhp-error-view"),this.$preview=this.$(".rhp-preview"),this.$properties=this.$(".rhp-properties"),this.$introMessage=this.$(".rhp-intro-message"),this.$participants=this.$(".rhp-participants-accodian"),this.$primaryActions=this.$(".shared-rhp-primary-actions"),this.$secondaryActions=this.$(".shared-rhp-secondary-actions"),this.options.cbViewModel=this.cbViewModel},_renderChildViews:function(){if(this.isBootstrapCallFailed===!0&&!this.options.isDocView)return this.$preview.hide(),this.$properties.hide(),this.$introMessage.hide(),this.$participants.hide(),this.$primaryActions.hide(),this.$secondaryActions.hide(),this.$errorView.show(),void this._renderChildView("_errorView",e.SharedRHPErrorView,this.$errorView);if(this.$errorView.hide(),this.options.isDocView||this._renderChildView("_previewView",e.SharedRhpPreviewView,this.$preview),this._renderChildView("_propertiesView",e.SharedRhpPropertiesView,this.$properties),this.options.isDocView)this._renderChildViewPostBootstrap();else{var t=this._fetchBootstrapData();t.then(_.bind(this._renderChildViewPostBootstrap,this))}this._renderChildView("_primaryActionsView",e.SentFilesRhpPrimaryActionsView,this.$primaryActions)},_updatePreviewUrl:function(){if(!("receivedfiles"!=this.options.pluginId&&this.options.hidePreview&&this.options.hidePreview===!0||this.sendTrackMessageFetchInProgress)){var e=this.cbViewModel.getSingleSelectedItemModel();if(e&&e.attributes&&e.attributes.send_track_info&&"receiver"==e.attributes.send_track_info.user_role||e.attributes.aep_workflow_info&&"shared_with_me"==e.attributes.aep_workflow_info.user_role){var i=e.getPreviewUrl();if(i)return;if(e.get("bootstrap"))return;var s;this.options.appApi.sessionApi.getPrimaryToken().length&&(s=_.extend({},{accessToken:this.options.appApi.sessionApi.getPrimaryToken(),model:this.cbViewModel.getSingleSelectedItemModel()},this.options));var o=t.opFactory.create("GettingAssetsTrackedOp",s).run();o&&(this.sendTrackMessageFetchInProgress=!0,o.then(_.bind(function(e){e&&(e.email_message&&this.cbViewModel.getSingleSelectedItemModel().setIntroMessage(e.email_message),e.preview_url&&this.cbViewModel.getSingleSelectedItemModel().setPreviewUrl(e.preview_url),_.isUndefined(e.is_original_shared)||this.cbViewModel.getSingleSelectedItemModel().setOriginalShared(e.is_original_shared),e.commenting_urn&&this.cbViewModel.getSingleSelectedItemModel().setCommentingUrn(e.commenting_urn),e.asset_id&&this.cbViewModel.getSingleSelectedItemModel().setAssetId(e.asset_id),this.cbViewModel.getSingleSelectedItemModel().set("bootstrap",e,{silent:!0})),this.sendTrackMessageFetchInProgress=!1},this),_.bind(function(){this.sendTrackMessageFetchInProgress=!1},this)))}}},_updateFields:function(){this.options.hidePreview?this.$preview.hide():this.$preview.show()},_setModel:function(e,t){var i,o=this.cbViewModel,n="",r=!1,a=void 0,l=void 0,d=void 0,c=void 0;this.isBootstrapCallFailed=!1,this.cbViewModel.getSingleSelectedItemModel()&&(i=this.cbViewModel.getSingleSelectedItemModel().id,a=this.cbViewModel.getSingleSelectedItemModel().getCollaborators(),(o.attributes.WorkflowType===s.SEND_TRACK||this.cbViewModel.getSingleSelectedItemModel()&&this.cbViewModel.getSingleSelectedItemModel().get("WorkflowType")===s.SEND_TRACK)&&(n=this.cbViewModel.getSingleSelectedItemModel().getInfo().intro_message,c=this.cbViewModel.getSingleSelectedItemModel().CTAClicked,this.options.isDocView&&(d=this.cbViewModel.getSingleSelectedItemModel().get("bootstrap"),this.cbViewModel.getSingleSelectedItemModel().getInfo()&&(l=this.cbViewModel.getSingleSelectedItemModel().getInfo().is_consented))),r=e[i]||e&&e.id&&i&&e.id.toLowerCase()==i.toLowerCase()?!0:!1),o.clearSelection(),r&&e&&e.getInfo()&&e.getInfo().is_consented!=l&&(r=!1),t?o.addItem(e):_.each(_.values(e),function(e){o.addItem(e)}),r?(o.attributes.WorkflowType===s.SEND_TRACK||this.cbViewModel.getSingleSelectedItemModel()&&this.cbViewModel.getSingleSelectedItemModel().get("WorkflowType")===s.SEND_TRACK)&&(o.getSingleSelectedItemModel().CTAClicked=c,""==o.getSingleSelectedItemModel().getInfo().intro_message&&(o.getSingleSelectedItemModel().getInfo().intro_message=n),d&&(o.getSingleSelectedItemModel().set("bootstrap",d,{silent:!0}),d.asset_id?o.getSingleSelectedItemModel().setAssetId(d.asset_id):d.meta_list&&d.meta_list.length&&d.meta_list[0].asset_urn&&o.getSingleSelectedItemModel().setAssetId(d.meta_list[0].asset_urn))):(o.trigger("change:cb_item_model"),o.getSingleSelectedItemModel().CTAClicked=void 0),r&&a&&_.isUndefined(o.getSingleSelectedItemModel().getCollaborators())&&o.getSingleSelectedItemModel().setCollaborators(a),this.render()},_setBootstrapErrorMessage:function(){this.isBootstrapCallFailed=!0,this.render()},_getSiteCatalystContext:function(){return o.RHP},_onKeyDown:function(e){var t=($(e.target),e.which),i=!1,s=e.shiftKey,o=e.ctrlKey;if(117!=t)return i;var n=$(".shared-files-rhp");if(0!=n.length)return i;if(n=$(".context-board-rhp:visible"),!this.$el.is(n))return i;var a,l=n.hasClass("hidden")?!1:!0,d=r.descendantHasFocus(this.$el),c=n.find(":focusable");(!d||o)&&(l&&(s||c&&c.length>0&&(a=c.first().attr("tabindex",0))),a&&a.length>0&&(i=!0,a.focus()));var h={};return h.isF6Consumed=i,h.shift=s,this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaServicesAPI.f6KeyHandled(h)},this)),i},_fetchBootstrapData:function(){var e=$.Deferred();if(!this.cbViewModel||!this.cbViewModel.getSingleSelectedItemModel())return e.resolve();var i;if(this.options.appApi.sessionApi.getPrimaryToken().length&&(i=_.extend({},{accessToken:this.options.appApi.sessionApi.getPrimaryToken(),model:this.cbViewModel.getSingleSelectedItemModel()},this.options)),this.cbViewModel.getSingleSelectedItemModel().get("bootstrap"))e.resolve();else if(this.sendTrackMessageFetchInProgress){var s=this.cbViewModel.getSingleSelectedItemModel().get("fetchBootstrapPromise");if(s)return s}else{var o=t.opFactory.create("GettingAssetsTrackedOp",i).run();this.cbViewModel.getSingleSelectedItemModel().set("fetchBootstrapPromise",e.promise()),o&&(this.sendTrackMessageFetchInProgress=!0,o.then(_.bind(function(t){t&&(this.cbViewModel.getSingleSelectedItemModel().setIntroMessage(t.email_message?t.email_message:""),t.preview_url&&this.cbViewModel.getSingleSelectedItemModel().setPreviewUrl(t.preview_url),_.isUndefined(t.is_original_shared)||this.cbViewModel.getSingleSelectedItemModel().setOriginalShared(t.is_original_shared),t.commenting_urn&&this.cbViewModel.getSingleSelectedItemModel().setCommentingUrn(t.commenting_urn),t.asset_id&&this.cbViewModel.getSingleSelectedItemModel().setAssetId(t.asset_id),this.cbViewModel.getSingleSelectedItemModel().set("bootstrap",t,{silent:!0}),this.cbViewModel.getSingleSelectedItemModel().set("fetchBootstrapPromise",void 0)),this.sendTrackMessageFetchInProgress=!1,e.resolve()
},this),_.bind(function(){this.sendTrackMessageFetchInProgress=!1,e.resolve()},this)))}return e.promise()},_renderChildViewPostBootstrap:function(){this.options.isDocView||this._updatePreviewUrl(),this._renderChildView("_introMessageView",e.SharedRhpIntroMsgView,this.$introMessage),this._renderChildView("_participantsView",e.SharedRhpParticipantsView,this.$participants)}}),t.SentFilesRhpView}),define("acplugins/tracked-send/js/home-view/templates/files-rhp-template-review",[],function(){return'<div class="rhp-error-view"></div><div class="rhp-preview"></div><div class="rhp-properties"></div><div class="rhp-intro-message"></div><div class="rhp-workflow-deadline"></div><div class="rhp-participants-accodian"></div><div class="rhp-primary-actions"/></div>'}),define("acplugins/tracked-send/js/home-view/views/files-rhp-view-review",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","i18n!core/nls/ui-strings","acplugins/tracked-send/js/home-view/templates/files-rhp-template-review","core/models/workflow-status-strings","core/utils/sc-analytics","core/utils/view-util","core/views/rhp/shared-rhp-preview-view","core/views/rhp/shared-rhp-properties-view","core/views/rhp/shared-rhp-intro-message-view","core/views/rhp/shared-rhp-deadline-view","core/views/rhp/review/primary-actions-view","core/views/rhp/review/rhp-participants-view","core/views/rhp/shared-rhp-error-view","core/views/view","core/views/view","core/models/context-board-model"],function(e,t,i,s,o,n,r){return t.ReviewFilesRhpView=e.View.extend({events:{"click    #context-board-cross":"_onCrossClick"},_onCrossClick:function(){this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("ShowCommentsList",{}).done(_.bind(function(){},this))},this))},initialize:function(){e.View.prototype.initialize.call(this),this.cbViewModel=e.modelFactory.create("ContextBoardModel"),_.extend(this.options,{cbViewModel:this.cbViewModel}),this._addKeyEventListener()},render:function(){var t;e.View.prototype.render.call(this),t=this.$el,t.html(_.template(s)({removeFromTracking:i.REMOVE_FROM_TRACKING})),this._initWrappers(),this.options.runningInRHP&&(this.options.rootView._pluginOptions&&this.options.rootView._pluginOptions.isCBView&&"Tracking"!=this.options.rootView._pluginOptions.requestAgent&&"recent"!=this.options.rootView._pluginOptions.requestAgent?this.options.appApi.siteCatalystApi.logEvent("Viewer","ContextBoard",n.VIRGO_REVIEW):this.options.appApi.siteCatalystApi.logVirgoRHPOpenedEvent(n.VIRGO_REVIEW_CB));var r=this.cbViewModel.getSingleSelectedItemModel(),a=this.options.selectionUiModel.getSingleSelectedItemModel();if(r&&(!_.isUndefined(this.options.isInSearchResultsView)&&!this.options.isInSearchResultsView||r.attributes.WorkflowType===o.REVIEW&&a&&a.attributes.WorkflowType===o.REVIEW||r.isAEPReviewFile()))if(this.options.rootView._pluginOptions&&this.options.rootView._pluginOptions.isCBView&&"Tracking"!=this.options.rootView._pluginOptions.requestAgent&&"recent"!=this.options.rootView._pluginOptions.requestAgent){var l=this.options.appApi.usersMeApi.options.usersMeIdentityModel;l.get("email")?this._doRenderPostGetUserIdentity():this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("ReviewGetLoggedInUserInfo").always(_.bind(function(e){e&&this.options.appApi.usersMeApi.options.usersMeIdentityModel.set("email",e),this._doRenderPostGetUserIdentity()},this))},this))}else this._doRenderPostGetUserIdentity();else this.isBootstrapCallFailed!==!0||this.options.isDocView?t.hide():(t.show(),this._renderChildViews());return this._doManageContextBoardCrossIconVisibility(),this},_doManageContextBoardCrossIconVisibility:function(){var e=!1;this.options.appApi.rnaApi.done(_.bind(function(t){t._reviewAPI.invoke("ShouldShowCloseIcon",{}).done(_.bind(function(t){e=t;var i=document.getElementById("context-board-menu"),s=document.getElementById("context-board-cross");i&&s&&(e?(i.style.width="85%",s.style.width="12%",s.style.visibility="visible"):(i.style.width="97%",s.style.width="0%",s.style.visibility="hidden"))},this))},this))},_doRenderPostGetUserIdentity:function(){this.$el.show(),this._renderChildViews(),this._updateFields()},_initWrappers:function(){this.$errorView=this.$(".rhp-error-view"),this.$preview=this.$(".rhp-preview"),this.$properties=this.$(".rhp-properties"),this.$introMessage=this.$(".rhp-intro-message"),this.$deadline=this.$(".rhp-workflow-deadline"),this.$reviewParticipants=this.$(".rhp-participants-accodian"),this.$reviewPrimaryActions=this.$(".rhp-primary-actions"),this.$closeButton=this.$("#context-board-cross"),this.options.cbViewModel=this.cbViewModel},_renderChildViews:function(){return this.isBootstrapCallFailed!==!0||this.options.isDocView?(this.$errorView.hide(),this._renderChildView("_previewView",e.SharedRhpPreviewView,this.$preview),this._renderChildView("_propertiesView",e.SharedRhpPropertiesView,this.$properties),this._renderChildView("_introMessageView",e.SharedRhpIntroMsgView,this.$introMessage),this._renderChildView("_deadlineView",e.SharedRhpDeadlineView,this.$deadline),this.options.isUnaccepted?this.$reviewParticipants.hide():(this._renderChildView("_reviewParticipantsView",e.ReviewRhpParticipantsView,this.$reviewParticipants),this.$reviewParticipants.show()),void this._renderChildView("_reviewPrimaryActionsView",e.RhpReviewPrimaryActionsView,this.$reviewPrimaryActions)):(this.$preview.hide(),this.$properties.hide(),this.$introMessage.hide(),this.$deadline.hide(),this.$reviewParticipants.hide(),this.$reviewPrimaryActions.hide(),this.$closeButton.hide(),this.$errorView.show(),void this._renderChildView("_errorView",e.SharedRHPErrorView,this.$errorView))},_updateFields:function(){this.options.hidePreview?this.$preview.hide():this.$preview.show()},_setModel:function(e,t){var i,s=this.cbViewModel,o=!1,n=void 0,r=void 0;this.cbViewModel.getSingleSelectedItemModel()&&(i=this.cbViewModel.getSingleSelectedItemModel().id,n=this.cbViewModel.getSingleSelectedItemModel().getCollaborators(),r=this.cbViewModel.getSingleSelectedItemModel().CTAClicked,o=e[i]||e&&e.id&&i&&e.id.toLowerCase()==i.toLowerCase()?!0:!1),this.isBootstrapCallFailed=!1,s.clearSelection(),t?s.addItem(e):_.each(_.values(e),function(e){s.addItem(e)}),o?(s.getSingleSelectedItemModel().CTAClicked=r,n&&_.isUndefined(s.getSingleSelectedItemModel().getCollaborators())&&s.getSingleSelectedItemModel().setCollaborators(n)):(s.trigger("change:cb_item_model"),s.getSingleSelectedItemModel().CTAClicked=void 0),this.render()},_setBootstrapErrorMessage:function(){this.isBootstrapCallFailed=!0,this.render()},_getSiteCatalystContext:function(){return i.RHP},_onKeyDown:function(e){var t=($(e.target),e.which),i=!1,s=e.shiftKey,o=e.ctrlKey;if(117!=t)return i;var n=$(".shared-files-rhp");if(0!=n.length)return i;if(n=$(".context-board-rhp:visible"),!this.$el.is(n))return i;var a,l=n.hasClass("hidden")?!1:!0,d=r.descendantHasFocus(this.$el),c=n.find(":focusable");(!d||o)&&(l&&(s||c&&c.length>0&&(a=c.first().attr("tabindex",0))),a&&a.length>0&&(i=!0,a.focus()));var h={};return h.isF6Consumed=i,h.shift=s,this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaServicesAPI.f6KeyHandled(h)},this)),i}}),t.ReviewFilesRhpView}),define("acplugins/tracked-send/js/home-view/views/on-signed-in-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","core/models/workflow-status-strings","acplugins/tracked-send/js/home-view/templates/on-signed-in-template.html","core/utils/util","core/utils/css-util","core/utils/sc-analytics","core/utils/view-util","acplugins/tracked-send/js/home-view/views/sent-files-header-view","acplugins/tracked-send/js/home-view/views/sent-files-body-view","acplugins/tracked-send/js/home-view/views/files-rhp-view","acplugins/tracked-send/js/home-view/views/files-rhp-view-review"],function(e,t,i,s,o,n,r,a){return t.OnSignedInView=e.View.extend({initialize:function(){e.View.prototype.initialize.call(this),this._template=_.template(s),this._addKeyEventListener()},render:function(){var t=this.$el;return e.View.prototype.render.call(this),0===t.children().length&&(t.html(_.template(s)),this._initWrappers(),this._addUiModelEventListeners()),this._updateDesktopView(),this._renderChildViews(),this},_initWrappers:function(){if(this.$header=this.$(".sent-files-header"),this.$body=this.$(".sent-files-body"),this.$rhp=this.$(".sent-files-rhp"),this.$rhpReview=this.$(".review-sent-files-rhp"),this.$plugin=$("receivedfiles"===this.options.pluginId?"#receivedfiles-plugin":"#sentfiles-plugin"),this.options.isInSearchResultsView){this.$body.addClass("uss-search-active"),this.$searchContextBoard=$(".search-context-board");var e="sentfiles_search-rhpId",t="reviews_search-rhpId";if(this.$rhp=this.$searchContextBoard.find("#"+e),0==this.$rhp.length){var i=_.template('<div class="sent-files-rhp ui-theme theme-container" id="'+e+'">');this.$searchContextBoard.append(i()),this.$rhp=this.$searchContextBoard.find("#"+e)}if(this.$rhpReview=this.$searchContextBoard.find("#"+t),0==this.$rhpReview.length){var s=_.template('<div class="review-sent-files-rhp ui-theme theme-container" id="'+t+'">');this.$searchContextBoard.append(s()),this.$rhpReview=this.$searchContextBoard.find("#"+t)}}},_addUiModelEventListeners:function(){var e=this.options;e.selectionUiModel&&(e.selectionUiModel.off("deleteParcelEvent",this._hideContextBoardView).on("deleteParcelEvent",this._hideContextBoardView),this.listenTo(e.selectionUiModel,"change:selected_item_models",this._onSelectedItemModelsChange))},_hideContextBoardView:function(){var e=this.$header,t=this.$body,i=this.$rhp;e.hasClass("with-rhp")&&(e.removeClass("with-rhp"),t.removeClass("with-rhp"),i.addClass("hidden"),this.$(".sent-files-main-header").removeClass("with-rhp"),this.options.collectionsUiModel.set("rhpShown",!1)),this.render()},_updateDesktopView:function(){"desktop"===this.options.collectionsUiModel.get("mode")?(o.isCEF()&&this.options.appApi.rnaApi.done(_.bind(function(e){e.esApi.isSendForSignEnabled()&&this.$body.addClass("desktop")},this)),$(".page-main-container").addClass("sent-files-container")):this.$body.removeClass("desktop")},_renderChildViews:function(){this._renderSentFilesHeaderView(),this._renderSentFilesBodyView(),this._renderSentFilesRhpView(),this._renderReviewFilesRhpView()},_renderSentFilesHeaderView:function(){this._renderChildView("_sentFilesHeaderView",t.SentFilesHeaderView,this.$header)},_renderSentFilesBodyView:function(){this._renderChildView("_sentFilesBodyView",t.SentFilesBodyView,this.$body)},_renderSentFilesRhpView:function(){this.rhpView=this._renderChildView("_sentFilesRhpView",t.SentFilesRhpView,this.$rhp)},_renderReviewFilesRhpView:function(){this.rhpReviewView=this._renderChildView("_reviewFilesRhpView",t.ReviewFilesRhpView,this.$rhpReview)},_onSelectedItemModelsChange:function(e){var t=this.options,s=this.$header,o=this.$body,r=this.$rhp,a=t.appApi;if(!t.noSelectionActions&&!a.acrobatApi.isInAcrobat()){if(e.isItemSelected()){e.getSingleSelectedItemModel()&&(e.getSingleSelectedItemModel().CTAClicked=void 0);var l=e.getSingleSelectedItemModel();if(l&&(l.attributes.WorkflowType==i.REVIEW||l.attributes.WorkflowType==i.SEND_TRACK||l.attributes.WorkflowType==i.CREATIVE_CLOUD))return void this._onSelectedItemModelsChangeToAEP(e)}else s.hasClass("with-rhp")&&(s.removeClass("with-rhp"),o.removeClass("with-rhp"),r.addClass("hidden"),this.$rhpReview.addClass("hidden"),r.hide(),this.$rhpReview.hide(),_.defer(_.bind(function(){s.hasClass("with-rhp")||this.options.collectionsUiModel.set("rhpShown",!1)},this)));n.addTransitionEndCallback(o,"right",_.bind(function(){s.removeClass("animating"),n.removeTransitionEndCallbacks(r),s.hasClass("with-rhp")||(e.getSingleSelectedItemModel().attributes.WorkflowType==i.REVIEW?r.addClass("invisible"):this.$rhpReview.addClass("invisible"))},this))}},_onSelectedItemModelsChangeToAEP:function(t){var s=this.options,o=this.$header,r=this.$body,a=this.$rhp,l=s.appApi;if(!s.noSelectionActions&&!l.acrobatApi.isInAcrobat())if(t.isItemSelected()){var d,c=t.getSelectedItemModels(),h=t.getSingleSelectedItemModel(),p=h.getId(),u=h.get("bootstrap");if(u)d=$.Deferred(),d.resolve(u);else{var g=e.opFactory.create("FireBootstrapApiOp",_.extend(s,{id:p,share_info:!0}));d=g.run()}d.then(_.bind(function(e){if(p===t.getSingleSelectedItemModel().getId()&&e){var s=e.meta_list[0]?e.meta_list[0].commenting_urn:void 0;h.set("bootstrap",e,{silent:!0}),h.setCommentingUrn(s),h.setIntroMessage(e.parcel_data.email_message),h.setOriginalShared(e.is_original_shared),h.setPreviewUrl(e.parcel_data.preview_url),h.setParcelId(e.parcel_data.id),h.setInvitationId(e.parcel_data.invitation),h.setAssetId(e.meta_list[0]?e.meta_list[0].asset_urn:""),e.parcel_data.can_make_comments===!1?(h.workflowType=i.SEND_TRACK,this.rhpView._setModel(c)):(h.workflowType=i.REVIEW,this.rhpReviewView._setModel(c)),o.hasClass("with-rhp")||(o.addClass("with-rhp"),r.addClass("with-rhp"),h.isAEPReviewFile()?(this.$rhpReview.removeClass("hidden").removeClass("invisible"),a.addClass("hidden").addClass("invisible"),this.$rhpReview.show(),a.hide()):h.isAEPViewFile()?(this.$rhpReview.addClass("hidden").addClass("invisible"),a.removeClass("hidden").removeClass("invisible"),this.$rhpReview.hide(),a.show()):(a.addClass("hidden").addClass("invisible"),this.$rhpReview.addClass("hidden").addClass("invisible"),a.hide(),this.$rhpReview.hide()),this.options.collectionsUiModel.set("rhpShown",!0)),n.addTransitionEndCallback(r,"right",_.bind(function(){o.removeClass("animating"),n.removeTransitionEndCallbacks(a),o.hasClass("with-rhp")||(t.getSingleSelectedItemModel().isAEPReviewFile()?a.addClass("invisible"):this.$rhpReview.addClass("invisible")),this.render()},this))}},this),_.bind(function(){o.hasClass("with-rhp")||(o.addClass("with-rhp"),r.addClass("with-rhp"),this.$rhpReview.addClass("hidden").addClass("invisible"),a.removeClass("hidden").removeClass("invisible"),this.$rhpReview.hide(),a.show()),this.options.collectionsUiModel.set("rhpShown",!0),this.rhpView._setBootstrapErrorMessage()},this))}else o.hasClass("with-rhp")&&(o.removeClass("with-rhp"),r.removeClass("with-rhp"),a.addClass("hidden"),this.$rhpReview.addClass("hidden"),a.hide(),this.$rhpReview.hide(),_.defer(_.bind(function(){o.hasClass("with-rhp")||this.options.collectionsUiModel.set("rhpShown",!1)},this)))},_onKeyDown:function(e){var t=$(e.target),i=e.which,s=!1,o=e.shiftKey;if(!a.isElementDisplayed(this.$plugin))return!1;if(117!=i||!a.descendantHasFocus(this.$el))return s;var n,r=this.$rhp.hasClass("hidden")?!1:!0,l=!((t.closest(this.$rhp).length?0:1)&&(t.closest(this.$rhpReview).length?0:1)),d=this.$rhp.find(":focusable"),c=this.$body.find(".parcel-list-item.selected>.shared-list-item-row"),h=this.$el.find(":tabbable"),p=e.altKey,u=e.ctrlKey;t.hasClass("review-list-item-row")&&(r=this.$rhpReview.hasClass("hidden")?!1:!0,d=this.$rhpReview.find(":focusable")),p||!r&&u?n=c.length>0?c:h.first().attr("tabindex",0):u?n=d.first().attr("tabindex",0):l?(o&&(n=c),d.attr("tabindex",-1)):r&&(o||d&&d.length>0&&(n=d.first().attr("tabindex",0))),n&&n.length>0&&(s=!0,n.focus());var g={};return g.isF6Consumed=s,g.shift=o,this.options.appApi.rnaApi.done(_.bind(function(e){e.rnaServicesAPI.f6KeyHandled(g)},this)),s}}),t.OnSignedInView}),define("acplugins/tracked-send/js/home-view/templates/on-signed-out-template.html",[],function(){return'<div class="sent-workflow-name shared-workflow-heading shared-files-main-header-empty-state theme-page-header" title="<%= workflowName %>" ><%= workflowName %></div><div class="shared-offline-icon view-review-offline-icon"></div><div class="shared-on-sign-out-prompt theme-text"><%=ON_SIGN_OUT_PROMPT%></div><div class="shared-on-sign-out-subprompt theme-text"><%=ON_SIGN_OUT_SUBPROMPT%></div><div class="sign-in-btn control-button theme-button theme-button-label" role="button" aria-label="<%= SIGN_IN_BUTTON_LABEL %>" tabindex = "0"><%=SIGN_IN_BUTTON%></div>'}),define("acplugins/tracked-send/js/home-view/views/on-signed-out-view",["core/ac-core","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/templates/on-signed-out-template.html","i18n!acplugins/tracked-send/js/nls/ui-strings","core/views/view"],function(e,t,i,s){return t.OnSignedOutView=e.View.extend({events:{"click .sign-in-btn":"_onSignInClick"},initialize:function(){e.View.prototype.initialize.call(this),this._addKeyEventListener(),this._template=_.template(i)},render:function(){return e.View.prototype.render.call(this),0===this.$el.children().length&&(this.$el.html(this._template({workflowName:s.SEND_TRACK_LABEL,ON_SIGN_OUT_PROMPT:s.ON_SIGN_OUT_PROMPT,ON_SIGN_OUT_SUBPROMPT:this._getSignedOutSubprompt(),SIGN_IN_BUTTON:s.SIGN_IN_BUTTON,SIGN_IN_BUTTON_LABEL:this._getSignInButtonAriaLabel()})),this._initWrappers()),this.$headerName.text(this._getHeaderText()),this},_initWrappers:function(){this.$onSignOutPrompt=this.$(".on-sign-out-prompt"),this.$onSignOutSubprompt=this.$(".on-sign-out-subprompt"),this.$signInBtn=this.$(".sign-in-btn"),this.$headerName=this.$(".sent-workflow-name"),this.$headerName.addClass(this.options.pluginId+"workflow-name")},_onKeyDown:function(e){return 32===e.which||13===e.which?($(e.target).click(),!0):!1},_onSignInClick:function(e){this._consumeEvent(e),this.$el.hide(),this.options.appApi.displayApi.showSpinner(!0),this.options.appApi.sessionApi.ensureSignedIn(void 0,"ShareSheet").then(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1)},this),_.bind(function(){this.options.appApi.displayApi.showSpinner(!1),this.$el.show()},this))},_getSignInButtonAriaLabel:function(){return _.template(s.GENERIC_ARIA_LABEL_STRING,{prefix:s.ON_SIGN_OUT_PROMPT,suffix:s.SIGN_IN_BUTTON})},_getHeaderText:function(){return"sentfiles_search"===this.options.pluginId||"sentfiles"===this.options.pluginId?s.SENT_FILES_HEADER:s.RECEIVED_FILES_HEADER},_getSignedOutSubprompt:function(){return"sentfiles_search"===this.options.pluginId||"sentfiles"===this.options.pluginId?s.ON_SIGN_OUT_SUBPROMPT_SENT_FILES:s.ON_SIGN_OUT_SUBPROMPT_RECEIVED_FILES}}),t.OnSignedOutView}),define("acplugins/tracked-send/js/home-view/ops/getting/getting-send-track-file-list",["core/ac-core","core/utils/util","core/utils/http-util","core/constants/cef-constants","acplugins/tracked-send/js/home-view/ac-tracked-send","core/ops/op"],function(e,t,i,s,o){return o.GetSendTrackFilesListOp=e.Op.extend({run:function(e){const t={ServiceTypeNone:0,Recents_k:1,SharedByOthers_k:2,SharedByYou_k:3,DocumentCloud_k:4,Favorites_k:5,ServiceTypeLast_k:6},i=["api:metadata/peruser#mine$$shell:lastAccessDate","name","modify_date","api:metadata/peruser#mine$$shell:lastAccessDate","create_date","api:metadata/peruser#mine$$shell:lastAccessDate","api:metadata/peruser#mine$$shell:lastAccessDate","shared_date","api:metadata/application$$shell:lastActivity$$date"],s=["desc","asc","desc"];var o=$.Deferred(),n=this.options,r={};r.authorization="Bearer "+n.appApi.sessionApi.getPrimaryToken(),r["x-api-key"]="AdobeAcrobat9",r["Content-Type"]="application/vnd.adobe.search-request+json",r["x-product"]="acrobat.adobe.com",r["x-product-location"]="parcel search input";var a=JSON.parse(e.request);"shared_date"==a.sortBy&&(a.sortBy="create_date"),"last_activity_date"==a.sortBy&&(a.sortBy="modify_date");var l=e.search_uri;if(l&&l.length){var d=1e3,c=0,h=!1,p=_.isEmpty(a.sortBy)?"create_date":a.sortBy,u=_.isEmpty(a.sortOrder)?"desc":a.sortOrder;a.pageInfo&&a.pageInfo.from<a.pageInfo.to?(c=a.pageInfo.from,d=a.pageInfo.to-a.pageInfo.from,h=!0,p=_.isUndefined(a.sortBy)?"create_date":i[a.sortBy],u=_.isUndefined(a.sortOrder)?"desc":s[a.sortOrder]):a.pageDataSize&&(d=a.pageDataSize);var g={fetch_fields:{includes:["asset_list","participant_list"]},scope:["parcel"],subscope:["document_cloud"],sort_orderby:p,sort_order:u,limit:d};1==h&&(_.extend(g,{start_index:c}),t.SharedByYou_k==a.ServiceType?_.extend(g,{ownership_types:"sender"}):t.SharedByOthers_k==a.ServiceType&&_.extend(g,{ownership_types:"receiver"}));var m=JSON.stringify(g);$.ajax({url:l,data:m,headers:r,contentType:"application/json",type:"POST",dataType:"json",timeout:8e3,success:_.bind(function(e,t,i){var s=i.responseJSON||{};s.status_code=i.status,o.resolve(s)},this),error:_.bind(function(e){401===e.status&&this.options.appApi.sessionApi.refreshAccessToken();var t=e.responseJSON||{};t.status_code=e.status||400,o.reject(t)},this)})}return o.promise()}}),e.GetSendTrackFilesListOp}),define("acplugins/tracked-send/js/home-view/views/tracked-send-home-view-view",["core/ac-core","files/ac-files","plugins-common/ac-plugins","acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/utils/sc-constants","acplugins/tracked-send/js/home-view/templates/tracked-send-template.html","acplugins/tracked-send/js/tool/models/version-model","acplugins/tracked-send/js/utils/sharing","acplugins/tracked-send/js/utils/ts-utils","core/models/workflow-status-strings","i18n!acplugins/reviews/js/nls/ui-strings","i18n!acplugins/tracked-send/js/nls/ui-strings","i18n!core/nls/ui-strings","core/utils/sc-analytics","core/constants/thumbnail-constants","acplugins/tracked-send/js/home-view/models/ui/parcel-preview-ui-model","core/views/home-view-view","acplugins/tracked-send/js/home-view/ops/showing/parcel-preview-op","acplugins/tracked-send/js/home-view/ops/getting/getting-snt-history-op","acplugins/tracked-send/js/home-view/views/on-signed-in-view","acplugins/tracked-send/js/home-view/views/on-signed-out-view","acplugins/tracked-send/js/home-view/ops/getting/getting-send-track-file-list","acplugins/tracked-send/js/home-view/views/parcel-activity-dlg"],function(e,t,i,s,o,n,r,a,l,d,c,h,p,u){var g=!1;const m={ServiceTypeNone:0,Recents_k:1,SharedByOthers_k:2,SharedByYou_k:3,DocumentCloud_k:4,Favorites_k:5,ServiceTypeLast_k:6};return s.HomeViewView=e.PluginContentView.extend({initialize:function(){e.PluginContentView.prototype.initialize.call(this),e.Util.isCEF()&&(require(["files/views/files-offline-view"],function(){}),require(["files/views/files-no-access-view"],function(){})),s.plugin=this;var t="create_date";("sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId)&&(t="last_access"),this.options.parcelCollection=new e.ParcelCollection([],{wfType:d.SEND_TRACK,sortAscending:!1,sortField:t}),this.options.participantAvatarMap={},this.senderNameFetchInProgressPromises={},this.senderNameResolvedFromBehance={},this.currentRequestInProgress=void 0},_addUiModelEventListeners:function(){var e=this.options;e.collectionsUiModel.on("SortItems",this._sortItems),e.collectionsUiModel.on("change:single_multi_view",_.bind(function(){"multi"==this.options.collectionsUiModel.get("single_multi_view")&&(this.mergedWorkflowData=void 0)},this))},_sortSearchResults:function(i,s){var o,n,r,a,l,p=this.options.parcelCollection,u=this.options,g=s===e.SortUiModel.ORDER_ASCENDING?1:-1,m=this.options.collectionsUiModel.get("single_multi_view"),v=this.options.isInSearchResultsView;if("sentfiles_search"===this.options.pluginId?a="parcel":"reviews_search"===this.options.pluginId&&(a="review"),l=this.options.ussSearchModel.getGlobalSearchModel(a),i===d.FILENAME)r=function(e,t){return o=e._getParcelName(m,h.SENT_FILES_NUM_FILES,v).toLowerCase(),n=t._getParcelName(m,h.SENT_FILES_NUM_FILES,v).toLowerCase(),o>n?1*g:n>o?-1*g:0};else if(i===d.INITIATOR){var w=this.options.appApi.usersMeApi.getUserIdentity().email.toLowerCase();r=function(e,t){return o=w===e.getSenderEmail().toLowerCase()?c.YOU:e.getSenderName().toLowerCase(),n=w===t.getSenderEmail().toLowerCase()?c.YOU:t.getSenderName().toLowerCase(),o>n?1*g:n>o?-1*g:0}}else r=function(e,t){var s,o;return"last_access_date"==i?(s=e.getLastAccessDate(),o=t.getLastAccessDate()):(s=e.get(i),o=t.get(i)),s>o?1*g:o>s?-1*g:0};p.comparator=r,p.sort(),l.get("parcelCollection").comparator=r,l.get("parcelCollection").sort(),_.extend(u,{search_scope:[a],noSearchReset:!1,useCacheToUpdate:!0}),this.options.appApi.displayApi.showSpinner(!0),t.opFactory.create("USSSearchingOp",u).run().always(_.bind(function(){this.options.appApi.displayApi.showSpinner(!1),this.render()},this)),this.options.collectionsUiModel.set("sort_key",i),this.options.collectionsUiModel.set("sort_order",s)},_sortItems:function(e){this.options.isInSearchResultsView?this._sortSearchResults(e.sort_key,e.sort_order):(this.options.appApi.rnaApi.done(_.bind(function(e){e.registryAPI.getPaginationRegistry().then(_.bind(function(e){e&&(this.options.appApi.displayApi.showModal(!0),this.options.appApi.displayApi.showSpinner(!0))},this))},this)),this._requestWorkflowData(e?{sortField:e.sort_key,sortOrder:e.sort_order,RefreshList:"SORT"}:{RefreshList:"SORT"})),this.bringSelectedItemInView=!0},_getParticipantsListForReview:function(e){var t=$.Deferred();return s.opFactory.create("FetchingReviewParticipantOp",this.options).run(e.ReviewId).done(_.bind(function(e){t.resolve(e)},this)).fail(_.bind(function(e){t.reject(e)},this)),t},_cacheParticipantAvatar:function(e,t,i){i&&(e?this.options.participantAvatarMap[e]=i:t&&(this.options.participantAvatarMap[t]=i))},_getParticipantAvatar:function(e,t){var i="";return this.options.participantAvatarMap[e]?i=this.options.participantAvatarMap[e]:this.options.participantAvatarMap[t]&&(i=this.options.participantAvatarMap[t]),i},getReviewIntroMessage:function(e){return s.opFactory.create("FetchIntroMessageOp",this.options).run(e)},updateTotalItemsInList:function(e){_.isUndefined(e)||e.paginatedLastPage&&this.options.parcelCollection.getNumberOfItems()>this.options.parcelCollection.length&&this.options.parcelCollection.setNumberOfItems(this.options.parcelCollection.length)},updateNextPageData:function(e){if(e&&!_.isUndefined(e)){this.checkAndRemoveFlagForCurrentRequestInProgress(e.dataRange.from,e.requestAfterRefresh);var t=this.options.parcelCollection;if(0===e.dataRange.from)return this.options.appApi.displayApi.showModal(!1),this.options.appApi.displayApi.showSpinner(!1),void this._updateWorkFlowDataToCollectionEx(e,!0);"sentfiles"==this.options.pluginId&&e.serviceType===m.SharedByYou_k&&e.dataRange.from===t.length&&(t.add(e.WorkflowData,{silent:!0,merge:!0,sort:!1}),this.updateTotalItemsInList(e),this.triggerViewEventForNextPageData(e.dataRange.from)),"receivedfiles"==this.options.pluginId&&e.serviceType===m.SharedByOthers_k&&e.dataRange.from===t.length&&this.updateSenderNameFromCache(e).then(_.bind(function(i){t.add(i.WorkflowData,{silent:!0,merge:!0,sort:!1}),this.updateTotalItemsInList(i),this.triggerViewEventForNextPageData(e.dataRange.from),this.updateSenderNameFromBehanceAPI(i).then(_.bind(function(i){t.add(i.WorkflowData,{silent:!0,merge:!0,sort:!1}),this.updateTotalItemsInList(i),this.triggerViewEventForNextPageData(e.dataRange.from)},this),_.bind(function(){},this))},this),_.bind(function(){t.add(e.WorkflowData,{silent:!0,merge:!0,sort:!1}),this.updateTotalItemsInList(e),this.triggerViewEventForNextPageData(e.dataRange.from)},this))}},triggerViewEventForNextPageData:function(e){this.options.parcelCollection.trigger("update_ui_with_next_page_data",e)},_requestWorkflowData:function(e){if(!this.options.isInSearchResultsView){var t="",i="",s="";e&&e.sortField?t=e.sortField:this.options.collectionsUiModel.get("sort_key")?t=this.options.collectionsUiModel.get("sort_key"):this.firstTimeRequest=!0,e&&e.sortOrder?i=e.sortOrder:this.options.collectionsUiModel.get("sort_order")&&(i=this.options.collectionsUiModel.get("sort_order")),e&&e.RefreshList&&(s=e.RefreshList),this.options.appApi.rnaApi.done(_.bind(function(e){if("sentfiles"==this.options.pluginId){var o=void 0;Ac.discoveryUrisModel&&(o=Ac.discoveryUrisModel.getUSSUrlsAndUserInfo());var n=void 0;if(!o)return;n=o.isACPUser,n?e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:d.CREATIVE_CLOUD,ServiceType:m.SharedByYou_k,SortField:t,SortOrder:i,RefreshList:s}}):e.rnaServicesAPI.isParcelHidden()||(e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:d.SEND_TRACK,ServiceType:m.SharedByYou_k,SortField:t,SortOrder:i,RefreshList:s}}).done(_.bind(function(){},this)),e.registryAPI.getPaginationRegistry().then(_.bind(function(o){o||e.rnaServicesAPI.isReviewHidden()||e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:d.REVIEW,ServiceType:m.SharedByYou_k,SortField:t,SortOrder:i,RefreshList:s}}).done(_.bind(function(){},this))},this)))}else e.registryAPI.getPaginationRegistry().then(_.bind(function(o){o||e.rnaServicesAPI.isParcelHidden()||(e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:d.SEND_TRACK,ServiceType:m.SharedByOthers_k,SortField:t,SortOrder:i,RefreshList:s}}).done(_.bind(function(){},this)),e.rnaServicesAPI.isReviewHidden()||e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:d.REVIEW,ServiceType:m.SharedByOthers_k,SortField:t,SortOrder:i,RefreshList:s}}).done(_.bind(function(){},this)))},this)),e.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:d.CREATIVE_CLOUD,ServiceType:m.SharedByOthers_k,SortField:t,SortOrder:i,RefreshList:s}})},this))}},render:function(){var t=this.$el;e.PluginContentView.prototype.render.call(this),this._pluginOptions&&this._pluginOptions.isCBView&&(0===t.children().length&&(t.html(_.template(n)),this._initWrappers()),this._renderChildViews(),this.options.appApi.rnaApi.done("Tracking"==this._pluginOptions.requestAgent||"recent"==this._pluginOptions.requestAgent?_.bind(function(e){var t={workflowId:this._pluginOptions.workflowID,workflowType:this._pluginOptions.workflowType,isUnaccepted:this._pluginOptions.isUnaccepted?"true":"false",bootstrap:this._pluginOptions.bootstrap};e.fileApi({methodName:"getTrackingWorkflowData",methodArgs:t}).done(_.bind(function(){},this))},this):_.bind(function(e){e.fileApi({methodName:"getSingleWorkflowData",methodArgs:this._pluginOptions.workflowID}).done(_.bind(function(){},this))},this))),this._processRouterArgs().then(_.bind(function(){0===t.children().length&&(t.html(_.template(n)),this._initWrappers()),!this.options.isInSearchResultsView&&!this._isSelected||t.closest(".hidden").length||(this.options.isInSearchResultsView&&this.options.searchModel&&this.options.searchModel.get("total_hits")!=this.options.parcelCollection.length&&this._refreshUI(),this._renderChildViews())},this))},initPlugin:function(){var t=this.options,i=t.appApi.pluginsApi,o=e.modelFactory,n=e.uiModelFactory;return _.extend(t,{sessionModel:o.create("SessionModel"),collectionsUiModel:new s.CollectionsUiModel,dialogsUiModel:n.create("DialogsUiModel"),rhpPreviewUiModel:n.create("RhpPreviewUiModel"),itemUiModel:n.create("CollectionItemUiModel"),parcelPreviewUiModel:new s.ParcelPreviewUiModel}),i.isPluginOfThisType(t.pluginId,"search_views")?_.extend(t,{isInSearchResultsView:!0}):_.extend(t,{selectionUiModel:n.create("SelectionUiModel")}),e.Util.isCEF()&&this._changeModeToDesktop(),t.appApi.siteCatalystApi.register("sharing",a),t.collectionsUiModel.on("change:mode",this._onModeChange),t.isInSearchResultsView?(t.collectionsUiModel.set("checkbox",!1),"sentfiles"===this.options.pluginId||"sentfiles_search"===this.options.pluginId?t.collectionsUiModel.set("sort_key",d.LAST_ACCESS):t.collectionsUiModel.set("sort_key",d.CREATE_DATE),t.collectionsUiModel.set("sort_order",d.DESC)):this._onModeChange(),this._isSelected=!1,this._addUiModelEventListeners(),this._getResolvedPromise()},selectPlugin:function(t){if(this.options.logNumFilesAnalytic=!0,this.fetchedParcelInfoFromNative=!1,this.options.parcelCollection)for(;this.options.parcelCollection.length>100;)this.options.parcelCollection.pop();return _.delay(_.bind(function(t){var i,n,r=this.options,a=r.appApi.networkConnectivityApi,l=this.options.appApi.routerApi.parseQueryParams(window.location.href.slice(window.location.href.indexOf("?")));if(this._pluginOptions=this._pluginOptions||{},t&&_.extend(this._pluginOptions,t),t&&r.isInSearchResultsView&&(r.searchModel=t.searchModel,r.searchUiModel=t.searchUiModel,r.selectionUiModel=t.selectionUiModel,r.ussSearchModel=t.ussSearchModel,r.selectionUiModel.set("multiple_selection",!1),r.collectionsUiModel.set("checkbox",!r.selectionUiModel.isSingleSelectionMode())),r.searchModel&&(this.options.collectionsUiModel.set("single_multi_view","single"),r.parcelCollection.reset(r.searchModel.get("parcelCollection").models),_.delay(_.bind(function(){this.senderNameResolvedFromBehance={},this.updateSenderNameFromCacheForCollectionModels(r.searchModel.get("parcelCollection").models).always(_.bind(function(e){r.parcelCollection.reset(e),this.render(),this.updateSenderNameFromBehanceAPIForCollectionModels(e).then(_.bind(function(e){r.parcelCollection.reset(e),this.render()
},this))},this))},this),2e3)),t&&(n=t.noHistoryEffect),n||(i=r.appApi.routerApi,i.navigate(s.PLUGIN_ID)),e.Util.isCEF()){if("sentfiles"==this.options.pluginId?this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SHARED_BY_YOU,o.CLICKED]):"receivedfiles"==this.options.pluginId&&this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SHARED_BY_OTHERS,o.CLICKED]),this._isSelected&&_.isUndefined(this.options.parcelCollection))return this._renderForStartup(),this._getResolvedPromise();this.updateUserRoleToModel().always(_.bind(function(){this.options.appApi.displayApi.applyUIThemeStyles(this.$el).always(_.bind(function(){this.render()},this))},this))}if("desktop"===r.collectionsUiModel.get("mode")){if(this._pluginOptions||(this._pluginOptions={}),l.isCBView&&(this._pluginOptions.isCBView="true"==l.isCBView?!0:!1),l.workflowID&&(this._pluginOptions.workflowID=l.workflowID),l.requestAgent&&(this._pluginOptions.requestAgent=l.requestAgent),l.isUnaccepted&&(this._pluginOptions.isUnaccepted=l.isUnaccepted),l.workflowType&&(this._pluginOptions.workflowType=l.workflowType),l.bootstrap&&(this._pluginOptions.bootstrap=l.bootstrap),l.fileName&&(this._pluginOptions.fileName=l.fileName),a.removeNetworkConnectivtyChangeCallback(this._onConnectionChanged),a.addNetworkConnectivtyChangeCallback(this._onConnectionChanged),r.appApi.networkConnectivityApi.isOnline())return r.appApi.sessionApi.isSignedInReader()?(this.$onSignedOut&&this.$onSignedOut.hide(),this.$offlineView&&this.$offlineView.hide(),r.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){return this._isSelected=!0,this._startPlugin()},this),_.bind(function(e){return r.appApi.displayApi.showSpinner(!1),this._isSelected=!0,this._startPlugin(),e&&"NoAccessToPdfServices"===e.errorString?(this._addAppApiCallbacks(),this._renderForStartup(),this._getResolvedPromise()):void(0===this.$el.children().length&&r.appApi.pluginsApi.handleServerOutageFailure())},this)),this._getResolvedPromise()):(this._isSelected=!0,this._addAppApiCallbacks(),this._renderForStartup(),this._getResolvedPromise());this.$onSignedOut&&this.$onSignedOut.hide(),this.$offlineView&&this.$offlineView.hide(),this._isSelected=!0;var d=this.options.appApi.usersMeApi.options.usersMeIdentityModel;return d.get("email")||this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("ReviewGetLoggedInUserInfo").done(_.bind(function(e){e?this.options.appApi.usersMeApi.options.usersMeIdentityModel.set("email",e):console.log("Offline Reviews : Couldn't Fetch Logged In User Ifno.")},this))},this)),this._startPlugin(),this._getResolvedPromise()}return this._isSelected=!0,this._startPlugin()},this),200,t),this._getResolvedPromise()},updateUserRoleToModel:function(){var e=$.Deferred();if(this.options.isInSearchResultsView){var t=this.options.appApi.pluginsApi.getSelectedPluginId("search_views");"sentfiles_search"==t?this.options.collectionsUiModel.set("user_role","sender"):"reviews_search"==t&&this.options.collectionsUiModel.set("user_role","receiver"),e.resolve()}else this.options.appApi.rnaApi.done(_.bind(function(t){t.fileApi({methodName:"getSharedDocsUserRole",methodArgs:{}}).then(_.bind(function(t){this.options.collectionsUiModel.set("user_role",t),e.resolve()},this),_.bind(function(){e.reject()},this))},this));return e},getSendTrackFileList:function(e){this.getViewParcelsList(e)},getViewParcelsList:function(t){this.options.appApi.sessionApi.ensureSignedIn().done(_.bind(function(){var i=s.opFactory.create("GetSendTrackFilesListOp",this.options).run(t);i.done(_.bind(function(i){this.response=i,this.response.request=t.request;var s=this.options;s.appApi.rnaApi.done(_.bind(function(){var t=e.opFactory.create("SendChunkDataToNative",s);t.run(JSON.stringify(this.response),"ViewUSS")},this))},this)).fail(_.bind(function(i){if(this.options.appApi.inactivityApi.isIdle())this.options.appApi.inactivityApi.setIsActive();else{this.response=i,this.response&&(this.response.request=t.request);var s=this.options;s.appApi.rnaApi.done(_.bind(function(){var t=e.opFactory.create("SendChunkDataToNative",s);t.run(JSON.stringify(this.response),"ViewUSS")},this))}},this))},this)).fail(_.bind(function(){this.options.appApi.inactivityApi.isIdle()&&this.options.appApi.inactivityApi.setIsActive()},this))},getReviewFileList:function(t){this.options.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){if(""===t.search_uri){var i=e.opFactory.create("DCDiscoveryAPIOp",_.extend(this.options)).run({});i.always(_.bind(function(e){void 0!=e&&this.fetchFileListFromUSS(e.templates.search_uri,t.request)},this))}else this.fetchFileListFromUSS(t.search_uri,t.request)},this))},fetchFileListFromUSS:function(t,i){this.options.search_uri=t;var s=e.opFactory.create("USSReviewOp",_.extend(this.options)).run(i);s.done(_.bind(function(t){this.response=t,this.response.request=i;var s=this.options;s.appApi.rnaApi.done(_.bind(function(){var t=e.opFactory.create("SendChunkDataToNative",s);t.run(JSON.stringify(this.response),"ReviewUSS")},this))},this)).fail(_.bind(function(t){if(this.options.appApi.inactivityApi.isIdle())this.options.appApi.inactivityApi.setIsActive();else{this.response=t,this.response.request=i;var s=this.options;s.appApi.rnaApi.done(_.bind(function(){var t=e.opFactory.create("SendChunkDataToNative",s);t.run(JSON.stringify(this.response),"ReviewUSS")},this))}},this))},deselectPlugin:function(){e.Util.isCEF()&&$(".page-main-container").removeClass("sent-files-container"),e.PluginContentView.prototype.deselectPlugin.call(this),this._isSelected=!1},releasePlugin:function(){delete this._startingPluginPromise,e.PluginContentView.prototype.releasePlugin.call(this)},clickedOutsideAiCview:function(){if(e.Util.isCEF()){this.options.selectionUiModel.clearSelection();var t=this.$(".sent-files-sort-menu");t.length>0&&"none"!==t.css("display")&&(t.hide(),this.$(".sent-list-header-recieved-title").removeClass("selected"),this.$(".sent-list-header-owner-title").removeClass("selected"),this.$(".sent-list-header-name-title").removeClass("selected"))}return this._getResolvedPromise()},getSiteCatalystName:function(){return o.SENT_FILES},getPluginVersionList:function(){var e=this.options,t=[],i=$.Deferred(),s=this._versionModel;return s||(s=this._versionModel=new r(e)),s.get("version")?(t.push(s.get("version")),i.resolve()):s.fetch().then(function(){t.push(s.get("version")),i.resolve()}),i.promise(t)},getAppApiVersion:function(){return void 0==Ac.Plugins.groups.send?"dev":Ac.Plugins.groups.send.FRAMEWORK_VERSION},getSendTrackThumbnail:function(e){return s.opFactory.create("FetchingThumbnailForTrackedSendOp",this.options).run(e.invitationId,"asset-0",0,e.ThumbnailType,e.NeedIDInResponse,e.ItemID)},_initWrappers:function(){this.$onSignedIn=this.$(".on-signed-in"),this.$onSignedOut=this.$(".on-signed-out"),this.$offlineView=this.$(".files-offline-view"),this.$noAccessView=this.$(".files-no-access-view"),this.$contextBoard=this.$(".context-board-view")},_renderChildViews:function(){var e=this.options.collectionsUiModel.get("mode");if("desktop"===e){if(this._pluginOptions&&this._pluginOptions.isCBView)return this._renderContextBoardView(),this.$offlineView.hide(),this.$onSignedIn.hide(),this.$onSignedOut.hide(),this.$noAccessView.hide(),void this.$contextBoard.show();this.$contextBoard.hide(),this.options.appApi.networkConnectivityApi.isOnline()?this.options.appApi.sessionApi.isSignedInReader()||this.options.appApi.sessionApi.isSignedInReaderQuick()?this.options.appApi.sessionApi.ensureSignedIn().then(_.bind(function(){this.$onSignedIn.show(),this.$onSignedOut.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedInView()},this),_.bind(function(e){e&&"NoAccessToPdfServices"===e.errorString&&(this.$noAccessView.show(),this.$onSignedIn.hide(),this.$onSignedOut.hide(),this.$offlineView.hide(),this._renderNoAccessView())},this)):(this.$onSignedOut.show(),this.$onSignedOut.addClass("unselectable"),this.$onSignedIn.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedOutView()):(this.$noAccessView.hide(),this.$onSignedOut.hide(),this.options.parcelCollection.length>0?(this.$onSignedIn.show(),this.$offlineView.hide(),this._renderOnSignedInView()):(this.$onSignedIn.hide(),this.$offlineView.show(),this._renderOfflineView()))}else this.$onSignedIn.show(),this.$onSignedOut.hide(),this.$offlineView.hide(),this.$noAccessView.hide(),this._renderOnSignedInView()},_renderOnSignedInView:function(){this._renderChildView("_onSignedInView",s.OnSignedInView,this.$onSignedIn)},_renderOnSignedOutView:function(){this._renderChildView("_onSignedOutView",s.OnSignedOutView,this.$onSignedOut)},_renderOfflineView:function(){var e={workflowName:this._getHeaderText()};this._renderChildView("_filesOfflineView",t.FilesOfflineView,this.$offlineView,e)},_renderNoAccessView:function(){this._renderChildView("_filesNoAccessView",t.FilesNoAccessView,this.$noAccessView)},_renderContextBoardView:function(){var e=!1,t=!1,i=!0,o=!1,n=!1,r=null;this._pluginOptions&&"Tracking"==this._pluginOptions.requestAgent?(e=!1,o=this._pluginOptions.isUnaccepted):this._pluginOptions&&"recent"==this._pluginOptions.requestAgent?(e=!1,t=!1):this._pluginOptions&&"Document"==this._pluginOptions.requestAgent&&(e=!0,n=!0,this._pluginOptions.fileName&&(r=this._pluginOptions.fileName)),this.$cbView=this._renderChildView("_sentFilesRhpView",s.SentFilesRhpView,this.$contextBoard,{hidePreview:e,showRemoveFromTracking:t,hideActivity:i,isUnaccepted:o,isDocView:n,fileName:r})},_showDCAPIResponse:function(){this.options.appApi.sessionApi.isSignedIn()&&this.options.appApi.rnaApi.done(_.bind(function(e){e.invokeMethod({methodName:"obtainDCApiResponse",methodArgs:""}).done(_.bind(function(e){e.length||this.options.appApi.errorApi.enqueueAjaxError(400)},this))},this))},_setContextBoardModel:function(e,t){if(t||(t=0),this.$cbView&&e.model){_.extend(this._pluginOptions,e.pluginOptions);var i=!1,s=!1,o=!0,n=!1;"Tracking"==this._pluginOptions.requestAgent?n=this._pluginOptions.isUnaccepted:"recent"==this._pluginOptions.requestAgent?s=!1:i=!0;var r={hidePreview:i,showRemoveFromTracking:s,expandParticipantsAccodian:o,isUnaccepted:n};_.extend(this.$cbView.options,r),_.each(this.$cbView.getChildViews(),function(e){_.extend(e.options,r)}),this.options.selectionUiModel.clearSelection(),this.options.selectionUiModel.updateSelectedItemModel(e.model,!1),this.$cbView._setModel(e.model,!0)}else 3>t&&setTimeout(this._setContextBoardModel,100,e,t+1)},_whenSignedInFunction:function(){var e=this.options;this._requestWorkflowData({RefreshList:"SIGNIN"}),e.collectionsUiModel.initializeFromCohorts(e.appApi.usersMeApi.getUserCohorts())},_addParticipant:function(e){this.options.appApi.rnaApi.done(_.bind(function(t){t.stApi.updateInAppDMStateAPI(e)},this))},_sendDataModelRefreshCommand:function(e,t,i,s){if(this.options.isInSearchResultsView){var o,n=void 0;Ac.discoveryUrisModel&&(o=Ac.discoveryUrisModel.getUSSUrlsAndUserInfo()),o&&(n=o.isACPUser),n?this.options.searchUiModel.trigger("refresh_search_category","creative_cloud"):"sentfiles_search"===this.options.pluginId&&(this.options.searchUiModel.trigger("refresh_search_category","document_cloud"),this.options.searchUiModel.trigger("refresh_search_category","parcel")),"sentfiles_search"!==this.options.pluginId&&this.options.searchUiModel.trigger("refresh_search_category","review")}else{var r={};r.op=e,r.workflowID=t,r.isReceivedFile=i?!0:!1,r.requestAgent=s,this.options.appApi.rnaApi.done(_.bind(function(e){e.stApi.updateInAppDMStateAPI(r)},this))}},_startPlugin:function(){var e=this._startingPluginPromise,t=this.options.collectionsUiModel.get("mode");return this._pluginOptions&&this._pluginOptions.isCBView?void this._renderForStartup():(e?("desktop"===t&&this._requestWorkflowData({RefreshList:"START"}),this._renderForStartup()):(this._whenSignedInFunction(),e=this._startingPluginPromise=s.opFactory.create("StartingPluginOp",this.options).run().then(_.bind(function(){"desktop"===t&&this._addAppApiCallbacks(),this._renderForStartup()},this))),e)},_addAppApiCallbacks:function(){var e=(this.options,this.options.appApi),t=e.sessionApi;t.removeSignedInChangeCallback(this._onSignedInChange),t.addSignedInChangeCallback(this._onSignedInChange)},_onSignedInChange:function(e,t){t?this._isSelected&&(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):($(".page-main-container").removeClass("sent-files-container"),this.options.selectionUiModel.clearSelection(),this.releasePlugin(),this._renderForStartup())},_onConnectionChanged:function(e,t){t?(this.deselectPlugin(),this.selectPlugin(this._pluginOptions)):($(".page-main-container").removeClass("sent-files-container"),this._renderForStartup())},_renderForStartup:function(){var t=this.options.selectionUiModel;e.Util.isCEF()||t.clearSelection(),this.render(),this.options.appApi.displayApi.showSpinner(!1)},_processRouterArgs:function(){var e,t,i,o=s.selector.routerArgs,n=this.options,r=$.Deferred();return o?(e=o.parcelID,this._startingPluginPromise.then(_.bind(function(){var o;i=n.appApi.baseFilesUrisApi.getSendApiUri(),i=l.extractRootUrl(i),t=new s.ParcelModel({parcel_id:e},{rootUrl:i}),t.fetch().then(_.bind(function(e){o=_.extend({},n,{},{parcelModel:e})},this,t))},this))):r.resolve(),delete s.selector.routerArgs,r.promise()},_changeModeToDesktop:function(){var e=this.options,t=e.collectionsUiModel.get("mode");"web"===t&&e.collectionsUiModel.set("mode","desktop")},_onModeChange:function(){var e=this.options,t=e.collectionsUiModel,i=e.selectionUiModel,s=t.get("mode");"desktop"===s?(t.set("checkbox",!1),i.set("multiple_selection",!0)):"web"===s&&(t.set("checkbox",!0),i.set("multiple_selection",!0))},_onViewEvent:function(t,i){"ParcelPreview_Close"===t&&this._renderChildViews(),e.View.prototype._onViewEvent.call(this,t,i)},_refreshUI:function(e){return"multi"!=this.options.collectionsUiModel.get("single_multi_view")||"header"==e?this.options.isInSearchResultsView?(this.options.collectionsUiModel.set("single_multi_view","single"),void(this.options.searchModel&&this.options.parcelCollection.reset(this.options.searchModel.get("parcelCollection").models))):void this.options.appApi.rnaApi.done(_.bind(function(e){e.registryAPI.getPaginationRegistry().then(_.bind(function(e){if(!e){var t=this._getMergedWorkflowData();t.then(_.bind(function(e){this._updateWorkFlowDataToCollectionEx(e)},this))}},this))},this)):void 0},_getViewWorkflowData:function(){var e=$.Deferred();return this.options.appApi.rnaApi.done(_.bind(function(t){t.rnaFileAPI.getWorkflowData(d.SEND_TRACK).done(_.bind(function(t){t&&(this._workflow_status_code!=t.status_code&&(this._workflow_status_code=t.status_code,200!=this._workflow_status_code&&this.options.appApi.pluginsApi.isPluginSelected(this.options.pluginId)&&!this.options.appApi.pluginsApi.isNativeViewSelected()&&this.options.appApi.networkConnectivityApi.isOnline()&&this.options.appApi.errorApi.enqueueAjaxError({status:t.status_code,responseText:t.status_message})),e.resolve(t))},this))},this)),e},_getReviewWorkflowData:function(){var e=$.Deferred();return this.options.appApi.rnaApi.done(_.bind(function(t){t.rnaFileAPI.getWorkflowData(d.REVIEW).done(_.bind(function(t){t&&(this.review_workflow_status_code!=t.status_code&&(this.review_workflow_status_code=t.status_code,200!=this.review_workflow_status_code&&this.options.appApi.pluginsApi.isPluginSelected(this.options.pluginId)&&!this.options.appApi.pluginsApi.isNativeViewSelected()&&this.options.appApi.networkConnectivityApi.isOnline()&&this.options.appApi.errorApi.enqueueAjaxError({status:t.status_code,responseText:t.status_message})),e.resolve(t))},this))},this)),e},_getMergedWorkflowData:function(){var e=$.Deferred();return this.options.appApi.rnaApi.done(_.bind(function(t){t.rnaFileAPI.getWorkflowData(d.SEND_TRACK).done(_.bind(function(t){t&&(this._workflow_status_code!=t.status_code&&(this._workflow_status_code=t.status_code,200!=this._workflow_status_code&&this.options.appApi.pluginsApi.isPluginSelected(this.options.pluginId)&&!this.options.appApi.pluginsApi.isNativeViewSelected()&&this.options.appApi.networkConnectivityApi.isOnline()&&this.options.appApi.errorApi.enqueueAjaxError({status:t.status_code,responseText:t.status_message})),e.resolve(t))},this))},this)),e},checkAndRemoveFlagForCurrentRequestInProgress:function(e,t){_.isUndefined(this.currentRequestInProgress)||_.isUndefined(this.currentRequestInProgress.startIndex)||(e===this.currentRequestInProgress.startIndex||t)&&(this.currentRequestInProgress=void 0)},isAnyRequestForWorkflowDataInProgress:function(){var e;return _.isUndefined(this.currentRequestInProgress)||_.isUndefined(this.currentRequestInProgress.startTime)?!1:(e=Date.now()-this.currentRequestInProgress.startTime,e>5e3?(this.currentRequestInProgress=void 0,!1):!0)},_getMergedWorkflowDataAsync:function(e,t,i){var s=$.Deferred();return this.isAnyRequestForWorkflowDataInProgress()?s.reject():this.options.appApi.rnaApi.done(_.bind(function(o){o.rnaFileAPI.getWorkflowDataAsync(e,t,i).then(_.bind(function(){this.currentRequestInProgress={pluginId:this.options.pluginId,startIndex:_.isUndefined(t)?0:t,startTime:Date.now()},s.resolve()},this),_.bind(function(){this.currentRequestInProgress=void 0,s.reject()},this))},this),_.bind(function(){this.currentRequestInProgress=void 0,s.reject()},this)),s.promise()},_updateWorkFlowDataToCollectionEx:function(e,t){if(t){if("sentfiles"==this.options.pluginId&&e&&e.serviceType==m.SharedByOthers_k)return void(this.firstTimeRequest&&""===this.options.collectionsUiModel.attributes.sort_key&&(this.firstTimeRequest=!1,this._sortItems()));if("receivedfiles"==this.options.pluginId&&e&&e.serviceType==m.SharedByYou_k)return void(this.firstTimeRequest&&""===this.options.collectionsUiModel.attributes.sort_key&&(this.firstTimeRequest=!1,this._sortItems()))}else{if("sentfiles"==this.options.pluginId&&e&&e.sortBy==d.SHARED_DATE){if(this.firstTimeRequest&&""===this.options.collectionsUiModel.attributes.sort_key){this.firstTimeRequest=!1;var i={sort_key:d.LAST_ACTIVITY_DATE,sort_order:e.sortOrder};this._sortItems(i)}return}if("receivedfiles"==this.options.pluginId&&e&&e.sortBy==d.LAST_ACTIVITY_DATE){if(this.firstTimeRequest&&""===this.options.collectionsUiModel.attributes.sort_key){this.firstTimeRequest=!1;var i={sort_key:d.SHARED_DATE,sort_order:e.sortOrder};this._sortItems(i)}return}}this.options.collectionsUiModel.set("single_multi_view","single"),this.options.collectionsUiModel.set("sort_key",e.sortBy),this.options.collectionsUiModel.set("sort_order",e.sortOrder),!_.isUndefined(this.options.logNumFilesAnalytic)&&this.options.logNumFilesAnalytic&&("sentfiles"==this.options.pluginId?(_.isUndefined(this.mergedWorkflowData)||_.isUndefined(this.mergedWorkflowData.numberOfViewsSent)||(this.options.logNumFilesAnalytic=!1,this.options.appApi.siteCatalystApi.logScEvent([o.SHARED_BY_YOU,o.VIEW_FILES,this.mergedWorkflowData.numberOfViewsSent])),_.isUndefined(this.mergedWorkflowData)||_.isUndefined(this.mergedWorkflowData.numberOfReviewsSent)||(this.options.logNumFilesAnalytic=!1,this.options.appApi.siteCatalystApi.logScEvent([o.SHARED_BY_YOU,o.REVIEW_FILES,this.mergedWorkflowData.numberOfReviewsSent]))):"receivedfiles"==this.options.pluginId&&(_.isUndefined(this.mergedWorkflowData)||_.isUndefined(this.mergedWorkflowData.numberOfViewsReceived)||(this.options.logNumFilesAnalytic=!1,this.options.appApi.siteCatalystApi.logScEvent([o.SHARED_BY_OTHERS,o.VIEW_FILES,this.mergedWorkflowData.numberOfViewsReceived])),_.isUndefined(this.mergedWorkflowData)||_.isUndefined(this.mergedWorkflowData.numberOfReviewsReceived)||(this.options.logNumFilesAnalytic=!1,this.options.appApi.siteCatalystApi.logScEvent([o.SHARED_BY_OTHERS,o.REVIEW_FILES,this.mergedWorkflowData.numberOfReviewsReceived])))),0!=e.WorkflowData.length||_.isUndefined(this.options.collectionsUiModel)||this.fetchedParcelInfoFromNative||(this.fetchedParcelInfoFromNative=!0,this.options.collectionsUiModel.set("CanShowNoFileView",!0));var s=e.requestAfterRefresh;if(e.requestAfterRefresh=this.mergedWorkflowData?this.mergedWorkflowData.requestAfterRefresh:void 0,this._pluginOptions&&"recent"==this._pluginOptions.requestAgent||!this.compareMergedWorkflowData(e,this.mergedWorkflowData))this.mergedWorkflowData=e,"sentfiles"==this.options.pluginId||"sentfiles_search"==this.options.pluginId?(this.options.parcelCollection.reset(),this.options.parcelCollection.pushData(this.mergedWorkflowData),this.updateTotalItemsInList(this.mergedWorkflowData),this.render()):(this.senderNameResolvedFromBehance={},this.updateSenderNameFromCache(e).always(_.bind(function(e){this.options.parcelCollection.reset(),this.options.parcelCollection.pushData(e),this.updateTotalItemsInList(e),this.render(),window.location.href.includes("task_handler")||this.updateSenderNameFromBehanceAPI(e).then(_.bind(function(e){this.options.parcelCollection.reset(),this.options.parcelCollection.pushData(e),this.updateTotalItemsInList(e),this.render()},this))},this)));else if(t&&s){for(var n=this.options.parcelCollection;n.length>100;)n.pop();this.mergedWorkflowData=e,this.mergedWorkflowData.requestAfterRefresh=void 0,this.render()}},compareMergedWorkflowData:function(e,t){if(void 0==e&&void 0==t)return!0;if(void 0==e||void 0==t)return!1;var i=[],s=[];_.each(e.WorkflowData,function(e){if(e.WorkflowType==d.CREATIVE_CLOUD){var t=e.aep_workflow_info;void 0!=t&&(i.push(t.creator),t.creator={})}}),_.each(t.WorkflowData,function(e){if(e.WorkflowType==d.CREATIVE_CLOUD){var t=e.aep_workflow_info;void 0!=t&&(s.push(t.creator),t.creator={})}});for(var o=JSON.stringify(e)===JSON.stringify(t),n=e.WorkflowData,r=0,a=0;a<n.length;a++)if(n[a].WorkflowType==d.CREATIVE_CLOUD){var l=n[a].aep_workflow_info;l&&(l.creator=i[r],r+=1)}n=t.WorkflowData,r=0;for(var a=0;a<n.length;a++)if(n[a].WorkflowType==d.CREATIVE_CLOUD){var l=n[a].aep_workflow_info;l&&(l.creator=s[r],r+=1)}return o},updateSenderNameFromCacheForCollectionModels:function(t){var i=$.Deferred(),s=e.opFactory.create("FetchingPublicProfileInfoOp",_.extend({},this.options,{global:!0})),o=new Set;return _.each(t,function(e){if(e.attributes.WorkflowType==d.CREATIVE_CLOUD){var t=e.attributes.aep_workflow_info;("receiver"==t.user_role||"shared_with_me"==t.user_role||"participant"==t.user_role)&&t.creator&&_.isString(t.creator)&&o.add(t.creator)}}),s.getCachedDataFromNative(Array.from(o)).then(_.bind(function(e){var s=e.nonCooldownGUIDs.length>0?new Set(e.nonCooldownGUIDs):new Set;_.each(t,_.bind(function(t){if(t.attributes.WorkflowType==d.CREATIVE_CLOUD){var i,o=t.attributes.aep_workflow_info;("receiver"==o.user_role||"shared_with_me"==o.user_role||"participant"==o.user_role)&&o.creator&&o.creator.length>0&&(i=o.creator,e.cachedData[i]&&(s.has(i)||(this.senderNameResolvedFromBehance[i]=!0),o.creatorName=e.cachedData[i].displayName,o.creatorEmail=e.cachedData[i].email))}},this)),i.resolve(t)},this),_.bind(function(){i.resolve(t)},this)),i},updateSenderNameFromCache:function(t){var i=$.Deferred(),s=e.opFactory.create("FetchingPublicProfileInfoOp",_.extend({},this.options,{global:!0})),o=new Set;return _.each(t.WorkflowData,function(e){if(e.WorkflowType==d.CREATIVE_CLOUD){var t=e.aep_workflow_info;("receiver"==t.user_role||"shared_with_me"==t.user_role||"participant"==t.user_role)&&t.creator&&_.isString(t.creator)&&o.add(t.creator)}}),s.getCachedDataFromNative(Array.from(o)).then(_.bind(function(e){var s=e.nonCooldownGUIDs.length>0?new Set(e.nonCooldownGUIDs):new Set;_.each(t.WorkflowData,_.bind(function(t){if(t.WorkflowType==d.CREATIVE_CLOUD){var i,o=t.aep_workflow_info;("receiver"==o.user_role||"shared_with_me"==o.user_role||"participant"==o.user_role)&&o.creator&&o.creator.length>0&&(i=o.creator,e.cachedData[i]&&(s.has(i)||(this.senderNameResolvedFromBehance[i]=!0),o.creatorName=e.cachedData[i].displayName,o.creatorEmail=e.cachedData[i].email))}},this)),i.resolve(t)},this),_.bind(function(){i.resolve(t)},this)),i},updateSenderNameFromBehanceAPIForCollectionModels:function(t){var i=$.Deferred(),s=e.opFactory.create("FetchingPublicProfileInfoOp",_.extend({},this.options,{global:!1})),o=new Set;return _.each(t,_.bind(function(e){if(e.attributes.WorkflowType==d.CREATIVE_CLOUD){var t=e.attributes.aep_workflow_info;if("receiver"==t.user_role||"shared_with_me"==t.user_role||"participant"==t.user_role)if(_.isUndefined(t.creatorName)||""==t.creatorEmail&&""==t.creatorName){var i=t.creator;1!=this.senderNameResolvedFromBehance[i]&&o.add(i),void 0==this.senderNameResolvedFromBehance[i]&&(this.senderNameResolvedFromBehance[i]=!1)}else this.senderNameResolvedFromBehance[i]=!0}},this)),0==o.size?(i.reject(t),i):(s.run(Array.from(o)).then(_.bind(function(e){_.each(t,_.bind(function(t){if(t.attributes.WorkflowType==d.CREATIVE_CLOUD){var i,s=t.attributes.aep_workflow_info;("receiver"==s.user_role||"shared_with_me"==s.user_role||"participant"==s.user_role)&&s.creator&&s.creator.length>0&&(i=s.creator,this.senderNameResolvedFromBehance[i]=!0,e[i]&&e[i].displayName&&e[i].displayName.length>0&&(s.creatorName=e[i].displayName,s.creatorEmail=e[i].email))}},this)),i.resolve(t)},this),_.bind(function(){i.resolve(t)},this)),i)},updateSenderNameFromBehanceAPI:function(t){console.log("behance start "+t.dataRange.from);var i=$.Deferred(),s=e.opFactory.create("FetchingPublicProfileInfoOp",_.extend({},this.options,{global:!1})),o=new Set;return _.each(t.WorkflowData,_.bind(function(e){if(e.WorkflowType==d.CREATIVE_CLOUD){var t=e.aep_workflow_info;if("receiver"==t.user_role||"shared_with_me"==t.user_role||"participant"==t.user_role)if(_.isUndefined(t.creatorName)||""==t.creatorEmail&&""==t.creatorName){var i=t.creator;1!=this.senderNameResolvedFromBehance[i]&&o.add(i),void 0==this.senderNameResolvedFromBehance[i]&&(this.senderNameResolvedFromBehance[i]=!1)}else this.senderNameResolvedFromBehance[i]=!0}},this)),0==o.size?(i.reject(t),i):(s.run(Array.from(o)).then(_.bind(function(e){_.each(t.WorkflowData,_.bind(function(t){if(t.WorkflowType==d.CREATIVE_CLOUD){var i,s=t.aep_workflow_info;("receiver"==s.user_role||"shared_with_me"==s.user_role||"participant"==s.user_role)&&s.creator&&s.creator.length>0&&(i=t.aep_workflow_info.creator,this.senderNameResolvedFromBehance[i]=!0,e[i]&&e[i].displayName&&e[i].displayName.length>0&&(s.creatorName=e[i].displayName,s.creatorEmail=e[i].email))}},this)),i.resolve(t)},this),_.bind(function(){i.resolve(t)},this)),i)},getSenderNameFromSntAPI:function(t,i){var s=this.senderNameFetchInProgressPromises[i];if(s)return s;if(1!=this.senderNameResolvedFromBehance[i]){var o=$.Deferred();return o.reject(),o}var n=e.opFactory.create("GettingSNTProfileInfoOp",_.extend({},this.options,{global:!0}));return s=n.run(t,i),this.senderNameFetchInProgressPromises[i]=s,s},_hideCB:function(){this.options.selectionUiModel.trigger("deleteParcelEvent")},_onUnshareClickAction:function(){this._triggerViewEvent(s.ViewEvents.UNSHARE,{parentView:this})},_onActivityBtnClick:function(){var e,t;this.options.appApi.siteCatalystApi.logScEvent([o.FILE_LIST,o.SENT_FILES,o.ACTION,o.FULL_ACTIVITY]),t=_.extend(this.options,{parentView:this,parcelModel:this.options.selectionUiModel.getSingleSelectedItemModel()}),delete t.el,e=new s.ParcelActivityDlg(t),e.open()},_showToastForCopyShareLink:function(t){this.options.toastArgumentString=t,this.options.FadeOutTime=3e3;var i=this.$el;this.$toastPlaceholderDIV=i.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),i.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options})},_showCustomizeToastForCopyShareLink:function(t){if(!_.isUndefined(t)&&!_.isUndefined(t.argsString)){this.options.toastArgumentString=t.argsString,this.options.FadeOutTime=3e3,t.fadeTimeout&&(this.options.FadeOutTime=t.fadeTimeout);var i=this.$el;if(this.$toastPlaceholderDIV=i.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),i.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options}),t.hideIcon){var s=i.find(".toast-icon");s&&(s.hide(),this._rhpToast.$toastAction.css("display","block"))}}},_onDownloadClickAction:function(){this._triggerViewEvent(s.ViewEvents.DOWNLOAD_PARCEL_ASSETS,{parentView:this,status:this.options.selectionUiModel.getSingleSelectedItemModel().attributes.send_track_info.state})},_onDeleteClickAction:function(){this._triggerViewEvent(s.ViewEvents.DELETE,{parentView:this,parcelModel:this.options.selectionUiModel.getSingleSelectedItemModel()})},_onReportAbuseClickAction:function(){var t=this.options.selectionUiModel.getSingleSelectedItemModel(),i=t.getInfo(),s=i&&i.invitationUrn&&""!=i.invitationUrn?i.invitationUrn:"";""==s&&(s=t.getInvitationId());var o=e.getDocumentCloudBaseUrl()+"link/reportabuse/track?uri="+s;this.options.appApi.rnaApi.done(_.bind(function(e){e.openDecoratedUrl(o)},this))},_invokeConsentAPI:function(e){var t=this.options.selectionUiModel.getSingleSelectedItemModel(),i=t.getInvitationId(),s={};s.invitationId=i;var o=this._getParcelId(t);s.parcelId=o,s.initiatorName=t.getSenderName(),s.method=e,s.isDoc=!1,"Document"==this._pluginOptions.requestAgent&&(s.isDoc=!0);var n=this.options;n.appApi.rnaApi.done(_.bind(function(e){e.stApi.invokeSendTrackConsentAPI(s)},this))},_onSaveLinkToDCClickAction:function(){this._invokeConsentAPI("GET")},__onRemoveFromRecentClickAction:function(e){var t=e.cbViewModel.getSingleSelectedItemModel(),i={};t.attributes&&t.attributes.asset_id&&(i.assetId=t.attributes.asset_id),this.options.appApi.rnaApi.done(_.bind(function(e){e._recentFilesAPI.invoke("removeFileFromRecent",i)},this))},_onRemoveLinkFromDCClickAction:function(){var e=this.options.appApi.dialogApi,t=h.REMOVE_LINK_DC_TITLE,i=h.REMOVE_LINK_DC_CONTENT,o=t+" "+p.DIALOG+" "+i+" "+h.REMOVE_LINK_DC_BUTTON+" "+p.BUTTON+" "+p.TO_ACTIVATE_PRESS_SPACE_BAR;e.displayTextAlert(e.SEVERITY_NEUTRAL,t,i,h.REMOVE_LINK_DC_BUTTON,p.CANCEL,this.options,o).then(_.bind(function(){this.options.appApi.rnaApi.done(function(e){e.logPerformance("RemoveMe","start")});var e=this.options.selectionUiModel.getSingleSelectedItemModel(),t=e.getId(),i=e.attributes.aep_workflow_info?e.attributes.aep_workflow_info.isReceivedFile:!1,o=e.attributes.WorkflowType;s.opFactory.create("RemoveMeOp",this.options).run(t).then(_.bind(function(){this.options.appApi.rnaApi.done(_.bind(function(e){e._reviewAPI.invoke("removeMe",[t,o])},this));var s=e.getAssetId();this.options.rootView._sendDataModelRefreshCommand("delete",s,i,"sharedTab"),this.options.appApi.rnaApi.done(function(e){e.logPerformance("RemoveMe","end")})},this)),"multi"==this.options.collectionsUiModel.get("single_multi_view")&&this._refreshUI("header"),this.options.selectionUiModel.trigger("deleteParcelEvent");var n=this.options.rootView&&this.options.rootView._pluginOptions&&"Document"==this.options.rootView._pluginOptions.requestAgent;n?this.options.appApi.siteCatalystApi.logVirgoViewerEvent(u.VIRGO_SENDTRACK_CB,"RemoveLinkFromDC:Success:SingleFile"):this.options.appApi.siteCatalystApi.logVirgoEvent(u.VIRGO_SENDTRACK_CB,"RemoveLinkFromDC:Success:SingleFile")},this))},_getParticipantsList:function(t){var i=$.Deferred();_.isUndefined(t.Id)&&i.reject();var s=e.opFactory.create("GettingCollaborationMetadatapOp",_.extend({},this.options,{global:!0}));return s.run(t.Id).then(_.bind(function(e){i.resolve(e)},this),_.bind(function(e){i.reject(e)},this)),i},_getSentFilesActivityList:function(e){return s.opFactory.create("GettingSendTrackHistoryOp",this.options).run({parcelModel:e})},_getBootstrapData:function(e){var t;this.options.appApi.sessionApi.getPrimaryToken().length&&(t=_.extend({},{accessToken:this.options.appApi.sessionApi.getPrimaryToken(),model:e.cbViewModel.getSingleSelectedItemModel()},e));var i=s.opFactory.create("GettingAssetsOp",t).run();return i},_startListenForViewEvents:function(){if(!g){g=!0;
var e=s.opFactory.create("ListeningForViewEventsOp",this.options);e.run()}},_getParcelId:function(e){var t=e?e:this.options.selectionUiModel.getSingleSelectedItemModel();return t?t.getId():void 0},_getSendUri:function(){var e=this.options.appApi.baseFilesUrisApi.getSendApiUri();return e},_getSendUriTrimmed:function(){var e=this.options.appApi.baseFilesUrisApi.getSendApiUri(),t=e.lastIndexOf("api");return e=e.substring(0,t)},_ClickUnshareButton:function(t){var i=this.options,s={};s.Title=p.CONFIRM_UNSHARE_TITLE,s.Message=p.CONFIRM_UNSHARE_MSG,s.ActionButtonName=p.CONFIRM_UNSHARE_BUTTON,s.RejectButtonName=c.CANCEL_ACTION_BUTTON,s.Source="Unshare",i.appApi.rnaApi.done(_.bind(function(i){i._reviewAPI.invoke("EurekaAlertDialog",s).done(_.bind(function(s){if(i.logPerformance("UnshareFile","start"),"false"===s)this.options.selectionUiModel.trigger("enableUnshareReviewAction");else{if(this.options.isDocView=s.isDocView,s.isDocView)_.isUndefined(t.isOriginalShared)&&(t.isOriginalShared=s.isOriginalShared),t.isOriginalShared?((_.isUndefined(t.commentingUrn)||""===t.commentingUrn)&&(t.commentingUrn=s.commentingUrn),this.options.commenting_uri=_.isUndefined(t.commentingUrn)||""===t.commentingUrn?"false":s.commentingBaseUri+t.commentingUrn):this.options.commenting_uri="false";else{if(_.isUndefined(t.isOriginalShared)||t.isOriginalShared&&_.isUndefined(t.commentingUrn))return;_.isUndefined(t.isOriginalShared)||t.isOriginalShared||(this.options.commenting_uri="false"),_.isUndefined(t.isOriginalShared)||!t.isOriginalShared||_.isUndefined(t.commentingUrn)||(this.options.commenting_uri=s.commentingBaseUri+t.commentingUrn)}e.opFactory.create("UnshareReviewOp",this.options).run(t.ParcelId).then(_.bind(function(){try{i._reviewAPI.invoke("EurekaReviewRefreshAppModel",t);var e="Unshare";void 0!==t.isOriginalShared&&t.isOriginalShared&&(e+=u.VIRGO_ORIGINAL_SHARE),i._reviewAPI.invoke("logEurekaEventAndDataGroup",["Eureka:Review success","Success",e,"EurekaActions",t.ParcelId,t.role])}catch(o){}i._reviewAPI.invoke("unshareReview",[t.ParcelId,t.workflowType,t.isOriginalShared]),this.showToastForReviewAction(p.UNSHARED_STRING);var n=t.workflowType;this._UpdateFileList(n);var r={};r.InvitationId=t.InvitationId,r.ParcelId=t.ParcelId,r.Unshare=!0,t.AssetId&&(r.assetId=t.AssetId,r.sharedStatus=!1),s.isDocView?i._reviewAPI.invoke("AVEurekaDocClose",r):i._reviewAPI.invoke("AVCloseUnsharedDoc",r),this.options.selectionUiModel.trigger("unshareReviewEvent"),this.options.appApi.rnaApi.done(function(e){e.logPerformance("UnshareFile","end")})},this),_.bind(function(){this.options.selectionUiModel.trigger("enableUnshareReviewAction"),this.options.appApi.rnaApi.done(function(e){e.logPerformance("UnshareFile","end")})},this))}},this))},this))},showToastForReviewAction:function(t){this.options.toastArgumentString=t,this.options.FadeOutTime=3e3;var i=this.$el;this.$toastPlaceholderDIV=i.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),i.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options})},showToastForReviewActionNoIcon:function(t){if(!_.isUndefined(t)&&!_.isUndefined(t.argsString)){this.options.toastArgumentString=t.argsString,this.options.FadeOutTime=3e3,t.fadeTimeout&&(this.options.FadeOutTime=t.fadeTimeout);var i=this.$el;this.$toastPlaceholderDIV=i.find(".rhp-action-toast-placeholder"),0==this.$toastPlaceholderDIV.length&&(this.$toastPlaceholderDIV=$('<div class="rhp-action-toast-placeholder"></div>'),i.append(this.$toastPlaceholderDIV)),this._renderChildView("_rhpToast",e.RhpActionsToast,this.$toastPlaceholderDIV,{options:this.options});var s=i.find(".toast-icon");s&&(s.hide(),this._rhpToast.$toastAction.css("display","block"))}},_ClickDeleteButton:function(e){var t=this.options,i={},o={};e.status&&e.status.toLowerCase()==d.UNSHARED_STRING.toLowerCase()?(i.Title=p.CONFIRM_DELETE_FILE_TITLE,i.Message=p.CONFIRM_DELETE_MSG_ONE_ITEM,e.filename&&(i.Message=_.template(p.CONFIRM_DELETE_FILE_MSG,{filename:e.filename})),i.ActionButtonName=p.CONFIRM_DELETE_FILE_BUTTON):e.isOriginalShared?(i.Title=p.CONFIRM_DELETE_SHARED_FILE_TITLE_NO_COPY_MODEL,i.Message=p.CONFIRM_DELETE_SHARED_FILE_MSG_NO_COPY_MODEL,i.ActionButtonName=p.CONFIRM_DELETE_SHARED_FILE_BUTTON_NO_COPY_MODEL):(i.Title=p.CONFIRM_DELETE_SHARED_FILE_TITLE_COPY_MODEL,i.Message=p.CONFIRM_DELETE_SHARED_FILE_MSG_COPY_MODEL,i.ActionButtonName=p.CONFIRM_DELETE_SHARED_FILE_BUTTON_COPY_MODEL),i.RejectButtonName=p.CANCEL,o.InvitationId=e.InvitationId,t.appApi.rnaApi.done(_.bind(function(t){t._reviewAPI.invoke("EurekaAlertDialog",i).done(_.bind(function(i){i===!0&&s.opFactory.create("DeletingReviewOp",this.options).run(e.ParcelId).then(_.bind(function(){try{var i="Delete";void 0!==e.isOriginalShared&&e.isOriginalShared&&(i+=u.VIRGO_ORIGINAL_SHARE),i+=" Review",t._reviewAPI.invoke("logEurekaEventAndDataGroup",["Eureka:Review success","Success",i,"EurekaActions",e.ParcelId,e.role])}catch(s){}t._reviewAPI.invoke("deleteReview",[e.ParcelId,e.InvitationId]),this.showToastForReviewAction(c.DELETED_STRING);var n={};n.workflowType=e.workflowType,n.RefreshList="SBY",this._RefreshDataModel(n),t._reviewAPI.invoke("AVEurekaDocClose",o),this.options.selectionUiModel.trigger("deleteReviewEvent"),t._reviewAPI.invoke("DeleteEurekaCache",o)},this))},this))},this))},_ClickRemoveMeButton:function(e){var t=this.options,i={},o={};i.Message=c.REMOVE_ME_MESSAGE,i.ActionButtonName=c.REMOVEME_ACTION_BUTTON,i.RejectButtonName=c.CANCEL_ACTION_BUTTON,o.InvitationId=e.InvitationId,t.appApi.rnaApi.done(_.bind(function(t){t._reviewAPI.invoke("EurekaAlertDialog",i).done(_.bind(function(i){t.logPerformance("RemoveMe","start"),i===!0&&s.opFactory.create("RemoveMeOp",this.options).run(e.InvitationId).then(_.bind(function(){try{t._reviewAPI.invoke("logEurekaEventAndDataGroup",["Eureka:Manage","Use","Remove me","EurekaActions",e.ParcelId,e.role])}catch(i){}t._reviewAPI.invoke("removeMe",[e.InvitationId,e.workflowType]),this.showToastForReviewAction(c.REMOVEME_STRING);var s={};s.workflowType=e.workflowType,s.RefreshList="SBO",this._RefreshDataModel(s),t._reviewAPI.invoke("AVEurekaDocClose",o),this.options.selectionUiModel.trigger("removeMeReviewEvent"),this.options.appApi.rnaApi.done(function(e){e.logPerformance("RemoveMe","end")})},this))},this))},this))},_ClickReportAbuseButton:function(t){var i=e.getDocumentCloudBaseUrl()+"link/reportabuse/review?uri="+t.InvitationUrn;this.options.appApi.rnaApi.done(_.bind(function(e){e.openDecoratedUrl(i)},this))},_UpdateFileList:function(e){this.options.isInSearchResultsView?(e==d.CREATIVE_CLOUD?this.options.searchUiModel.trigger("refresh_search_category","creative_cloud"):"sentfiles_search"===this.options.pluginId&&(this.options.searchUiModel.trigger("refresh_search_category","document_cloud"),this.options.searchUiModel.trigger("refresh_search_category","parcel")),"sentfiles_search"!==this.options.pluginId&&this.options.searchUiModel.trigger("refresh_search_category","review")):this.options.appApi.rnaApi.done(_.bind(function(t){var i={WorkflowType:e,SortField:"none",SortOrder:"none"};t.fileApi({methodName:"updateFileList",methodArgs:i}).done(_.bind(function(){},this))},this))},_RefreshACPUSSData:function(e,t){var i;i="sentfiles_search"===this.options.pluginId||"sentfiles"===this.options.pluginId?{WorkflowType:"Creative_Cloud",ServiceType:m.SharedByYou_k,SortField:"none",SortOrder:"none",RefreshList:e}:{WorkflowType:"Creative_Cloud",ServiceType:m.SharedByOthers_k,SortField:"none",SortOrder:"none",RefreshList:e},t.fileApi({methodName:"requestWorkflowData",methodArgs:i}).done(_.bind(function(){},this))},_RefreshSCReviewUSSData:function(e,t){t.fileApi({methodName:"requestWorkflowData",methodArgs:{WorkflowType:d.REVIEW,SortField:"none",SortOrder:"none",RefreshList:e}}).done(_.bind(function(){},this))},_RefreshDataModel:function(e){if(this.options.isInSearchResultsView){var t,i=void 0;Ac.discoveryUrisModel&&(t=Ac.discoveryUrisModel.getUSSUrlsAndUserInfo()),t&&(i=t.isACPUser),i?this.options.searchUiModel.trigger("refresh_search_category","creative_cloud"):"sentfiles_search"===this.options.pluginId&&(this.options.searchUiModel.trigger("refresh_search_category","document_cloud"),this.options.searchUiModel.trigger("refresh_search_category","parcel")),"sentfiles_search"!==this.options.pluginId&&this.options.searchUiModel.trigger("refresh_search_category","review")}else this.options.appApi.rnaApi.done(_.bind(function(t){var i="";e.RefreshList&&(i=e.RefreshList),e.workflowType&&""!=e.workflowType?"Creative_Cloud"==e.workflowType?this._RefreshACPUSSData(i,t):this._RefreshSCReviewUSSData(i,t):(this._RefreshACPUSSData(i,t),this._RefreshSCReviewUSSData(i,t))},this))},_getHeaderText:function(){return"sentfiles_search"===this.options.pluginId||"sentfiles"===this.options.pluginId?h.SENT_FILES_HEADER:h.RECEIVED_FILES_HEADER}}),s.HomeViewView}),define("acplugins/tracked-send/js/home-view/tracked-send",["acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/ops/op-factory","acplugins/tracked-send/js/home-view/views/tracked-send-home-view-view"],function(e){_.extend(e,{init:function(){e.opFactory=new e.OpFactory}})}),define("acplugins/tracked-send/js/home-view/plugin",["acplugins/tracked-send/js/home-view/ac-tracked-send","acplugins/tracked-send/js/home-view/tracked-send"],function(e){e.init()});