(self["webpackJsonp-desktop-app"]=self["webpackJsonp-desktop-app"]||[]).push([[3516],{Wihi:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>dropins_CCXDropin,loadTranslations:()=>loadTranslations});var n,o=i("YWiy"),r=i("Zm2D"),a=i("plsW"),s=i("GWyE");!function(e){e.NETWORK="network",e.GENERIC="generic",e.NONE="none"}(n||(n={}));const c=n;var l=i("QI6u");const d={[c.NETWORK]:{header:"error.network.offline.header",content:"error.network.offline.content",cta:"error.cta"},[c.GENERIC]:{header:"error.generic.header",content:"error.generic.content",cta:"error.cta"}},getAlertVariant=e=>{switch(e){case c.NETWORK:return"warning";case c.GENERIC:return"error";default:return}},u=(0,r.injectIntl)((e=>{let{dialogType:t,action:i,intl:n}=e;if(t===c.NONE)return o.createElement(o.Fragment,null);const r=d[t];return o.createElement(l.DialogContainer,{onDismiss:i},o.createElement(l.AlertDialog,{variant:getAlertVariant(t),title:n.formatMessage({id:r.header}),primaryActionLabel:n.formatMessage({id:r.cta}),onPrimaryAction:i,autoFocusButton:"primary"},n.formatMessage({id:r.content})))}));var h=i("lXyy"),__awaiter=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function fulfilled(e){try{step(n.next(e))}catch(e){r(e)}}function rejected(e){try{step(n.throw(e))}catch(e){r(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};class CCXCallbacks{constructor(e,t,i,n,o){this.ccxAPI=void 0,this.ccxTask="",this.ccxTouchpoint="",this.loadStartTimeStamp=null,this.editorLoadTimeStamp=null,this.publishStartTimeStamp=null,this.numRetries=0,this.jumpTime=-1,this.editorLoadTime=-1,this.templateLoadTime=-1,this.ccxTask=e,this.ccxTouchpoint=t,this.setErrorCallback=i,this.setLoadStartCallback=n,this.retryTrigger=o,this.startTimeStamp=new Date}getCCXAPI(){return __awaiter(this,void 0,void 0,(function*(){if(!this.ccxAPI){if(!a.providers["native-api"])throw new Error("Native API unavailable");const e=yield a.providers["native-api"]();this.ccxAPI=yield e.ccxAPI()}return this.ccxAPI}))}cancel(){let e="Cancel";-1===this.editorLoadTime&&(e="CancelCross"),(0,h.ZP)("CCX",`Action_${this.ccxTouchpoint}_${this.ccxTask}`,e),(()=>{__awaiter(this,void 0,void 0,(function*(){(yield this.getCCXAPI()).closeCCXModal(!0)}))})()}loadStart(){this.loadStartTimeStamp=new Date,this.jumpTime=this.loadStartTimeStamp.getTime()-this.startTimeStamp.getTime(),(0,h.ZP)("CCX",`JumpTime_${this.ccxTouchpoint}_${this.ccxTask}`,this.jumpTime.toString()),console.log(`Task: ${this.ccxTask}, Jump Time: ${this.jumpTime}`),this.setLoadStartCallback&&this.setLoadStartCallback()}load(){-1===this.editorLoadTime&&(this.loadStartTimeStamp&&(this.editorLoadTimeStamp=new Date,this.editorLoadTime=this.editorLoadTimeStamp.getTime()-this.loadStartTimeStamp.getTime(),(0,h.ZP)("CCX",`EditorLoadTime_${this.ccxTouchpoint}_${this.ccxTask}`,this.editorLoadTime.toString()),console.log(`Task: ${this.ccxTask}, Load Time: ${this.editorLoadTime}`)),(()=>{__awaiter(this,void 0,void 0,(function*(){"function"==typeof window.resetFrameRate&&window.resetFrameRate();(yield this.getCCXAPI()).ccxModalSetCloseOnESC(!1)}))})())}publishStart(){this.publishStartTimeStamp=new Date,(0,h.ZP)("CCX",`Action_${this.ccxTouchpoint}_${this.ccxTask}`,"Save")}publish(e){if(this.publishStartTimeStamp){const e=(new Date).getTime()-this.publishStartTimeStamp.getTime();(0,h.ZP)("CCX",`PublishTime_${this.ccxTouchpoint}_${this.ccxTask}`,e.toString()),console.log(`Task: ${this.ccxTask}, Publish Time: ${e}`)}(()=>{__awaiter(this,void 0,void 0,(function*(){if(!a.providers["native-api"])return;const t=yield a.providers["native-api"]();(yield t.largeDataAPI()).sendDataToNative(JSON.stringify(e),this.ccxTask)}))})()}onEvent(e){if(e&&"TEMPLATE_BATCH_LOADED"===e.type){if(-1!==this.templateLoadTime)return;if(this.editorLoadTimeStamp){const e=new Date;this.templateLoadTime=e.getTime()-this.editorLoadTimeStamp.getTime(),(0,h.ZP)("CCX",`TemplateLoadTime_${this.ccxTouchpoint}_${this.ccxTask}`,this.templateLoadTime.toString()),console.log(`Templates Load time: ${this.templateLoadTime}`),(()=>{__awaiter(this,void 0,void 0,(function*(){"function"==typeof window.resetFrameRate&&window.resetFrameRate();const e=yield this.getCCXAPI();e.recordCCXStats([this.jumpTime,this.editorLoadTime,this.templateLoadTime]),e.markCCXLoaded()}))})()}}}error(e){console.error(`SDK Error: ${e.toString()}`);const t=e.toData();if(t&&t.code){(0,h.ZP)("CCX",`SDK_Error_${this.ccxTouchpoint}_${this.ccxTask}`,t.code.toString());const e=["VALIDATE_TOKEN_FAILED","INVALID_TOKEN","LOGIN_ERROR"];this.numRetries<1&&e.includes(t.code)?(console.log(`Retrying after error: ${t.code}`),(0,h.ZP)("CCX",`Retry_${this.ccxTouchpoint}_${this.ccxTask}`,t.code.toString()),this.numRetries+=1,setTimeout((()=>this.retryTrigger()),1)):this.setErrorCallback&&this.setErrorCallback(c.GENERIC)}}getCallbacks(){return{onLoadStart:this.loadStart.bind(this),onLoad:this.load.bind(this),onCancel:this.cancel.bind(this),onPublish:this.publish.bind(this),onPublishStart:this.publishStart.bind(this),onError:this.error.bind(this),onEvent:this.onEvent.bind(this)}}}var CCXProvider_awaiter=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function fulfilled(e){try{step(n.next(e))}catch(e){r(e)}}function rejected(e){try{step(n.throw(e))}catch(e){r(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};class CCXProvider{constructor(){this.callbacks=null}ready(){return Promise.resolve(this)}downloadSDK(e){return CCXProvider_awaiter(this,void 0,void 0,(function*(){return new Promise(((t,i)=>{((e,n)=>{const o=e.createElement("script");o.src=n,o.onload=()=>{window.CCEverywhere||i(),t(window.CCEverywhere)},o.onerror=()=>{i()},e.body.appendChild(o)})(document,"stage"===e?"https://sdk-1p-stage.cc-embed.adobe.com/v1/CCEverywhere.js":"https://sdk-1p.cc-embed.adobe.com/v2/CCEverywhere.js")}))}))}initialize(e,t,i){return CCXProvider_awaiter(this,void 0,void 0,(function*(){if(this.ccEverywhere)return;const n=a.locale2.getLocale().replace("-","_").replace("GB","US").replace("zh_CN","zh_Hans_CN").replace("zh_TW","zh_Hant_TW"),o=yield this.getAuthInfo(),r=yield this.getUserInfo();let s=null;try{s=yield this.downloadSDK(i)}catch(e){throw new Error("SDK NOT DOWNLOADED!")}this.ccEverywhere=yield s.initialize(e,{preCacheTarget:t,locale:n,env:"stage"===i?"stage":"prod"},r,o),this.ccEverywhere.preCacheTarget()}))}getAccessToken(){return CCXProvider_awaiter(this,void 0,void 0,(function*(){if(!a.providers["native-api"])return"";const e=yield a.providers["native-api"]();return(yield e.SessionAPI()).GetAccessToken()}))}getUserId(){return CCXProvider_awaiter(this,void 0,void 0,(function*(){if(!a.providers["native-api"])return"";const e=yield a.providers["native-api"]();return(yield e.SessionAPI()).GetUserId()}))}getAuthInfo(){return CCXProvider_awaiter(this,void 0,void 0,(function*(){return{accessToken:yield this.getAccessToken(),useJumpUrl:!0}}))}getUserInfo(){return CCXProvider_awaiter(this,void 0,void 0,(function*(){return{profile:{userId:yield this.getUserId(),serviceCode:null,serviceLevel:null}}}))}createDesign(e){return CCXProvider_awaiter(this,void 0,void 0,(function*(){const{hostInfo:t,createDesignParams:i,editorTitle:n,publishLabel:o,publishModalTitle:r,environment:a}=e;this.ccEverywhere||(yield this.initialize(t,!1,a));try{this.ccEverywhere&&this.ccEverywhere.createDesign(Object.assign({modalParams:{padding:0,borderRadius:0,loadTimeout:9e4,parentElementId:"ccx-container",showLoader:!1,editorTitle:n,publishLabel:o,publishModalTitle:r}},i),yield this.getUserInfo(),yield this.getAuthInfo())}catch(e){console.error("Create design failed",e)}}))}editDesign(e){return CCXProvider_awaiter(this,void 0,void 0,(function*(){const{hostInfo:t,editDesignParams:i,editorTitle:n,publishLabel:o,publishModalTitle:r,environment:a}=e;this.ccEverywhere||(yield this.initialize(t,!1,a));try{this.ccEverywhere&&this.ccEverywhere.editDesign(Object.assign({modalParams:{padding:0,borderRadius:0,loadTimeout:9e4,parentElementId:"ccx-container",showLoader:!1,editorTitle:n,publishLabel:o,publishModalTitle:r}},i),yield this.getUserInfo(),yield this.getAuthInfo())}catch(e){console.error("Edit design failed",e)}}))}launchCCXiFrame(e){return CCXProvider_awaiter(this,void 0,void 0,(function*(){const{pageType:t,pageHeight:i,pageWidth:n,task:o,touchpoint:r,projectId:s,setErrorCallback:c,editorTitle:l,publishLabel:d,publishModalTitle:u,environment:h,setLoadStartedCallback:p}=e;if(this.callbacks||(this.callbacks=new CCXCallbacks(o,r,c,p,this.launchCCXiFrame.bind(this,e))),!a.providers["native-api"])throw new Error("Native API unavailable");const f=yield a.providers["native-api"](),m={clientId:"AdobeAcrobat9",appName:"Acrobat",appVersion:(yield f.ccxAPI()).getProductVersion(),platformCategory:"desktop"};if("InsertCCXPage"===o){const e={templateType:"landscape"===t?"Presentation_Graphic":"Book_Cover"};e.canvasSize=i&&n?{width:parseFloat(n),height:parseFloat(i),unit:"in"}:"Letter";const o={hostInfo:m,createDesignParams:{inputParams:e,outputParams:{fileType:"pdf"},callbacks:this.callbacks.getCallbacks()},editorTitle:l,publishLabel:d,publishModalTitle:u,environment:h};this.createDesign(o)}else if("EditCCXPage"===o){const e={hostInfo:m,editDesignParams:{inputParams:{projectId:s},outputParams:{fileType:"pdf"},callbacks:this.callbacks.getCallbacks()},editorTitle:l,publishLabel:d,publishModalTitle:u,environment:h};this.editDesign(e)}}))}}CCXProvider.getInstance=a.providerUtil.getSingletonFunction(CCXProvider);var p=i("Jbo2"),f=i.n(p),CCXContainer_awaiter=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function fulfilled(e){try{step(n.next(e))}catch(e){r(e)}}function rejected(e){try{step(n.throw(e))}catch(e){r(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const m={InsertCCXPage:{editorTitle:"ccx.editor.title",cta:"ccx.publishcta.insert.label",modalTitle:"ccx.publishModal.title"},EditCCXPage:{editorTitle:"ccx.editor.title",cta:"ccx.publishcta.edit.label",modalTitle:"ccx.publishModal.title"}},v=(0,r.injectIntl)((e=>{const[t,i]=(0,o.useState)(c.NONE),[n,r]=(0,o.useState)(!1),l=(0,o.useCallback)((e=>i(e)),[]),d=(0,o.useCallback)((()=>r(!0)),[]);(0,o.useEffect)((()=>{console.log("CCX drop-in effect",performance.now(),(new Date).getTime());const{viewData:t,env:n}=e;if(document.title="CCX Spare Renderer",!t&&window.navigator.onLine){if(!a.providers["native-api"])return;CCXContainer_awaiter(void 0,void 0,void 0,(function*(){const e=yield a.providers["native-api"](),t=yield e.ccxAPI(),o=yield CCXProvider.getInstance(),r={clientId:"AdobeAcrobat9",appName:"Acrobat",appVersion:t.getProductVersion(),platformCategory:"desktop"};try{yield o.initialize(r,!0,n),console.log("sdk initialised properly")}catch(e){i(c.GENERIC),console.log("error while initializing the sdk : ",e)}}))}}),[]),(0,o.useEffect)((()=>{if(t!==c.NONE){if(!a.providers["native-api"])return;CCXContainer_awaiter(void 0,void 0,void 0,(function*(){const e=yield a.providers["native-api"](),t=yield e.ccxAPI();yield t.ccxModalSetCloseOnESC(!1)}))}}),[t]),(0,o.useEffect)((()=>{const{viewData:t,env:n,intl:o}=e;t&&(document.title="CCX Renderer",window.navigator.onLine?CCXContainer_awaiter(void 0,void 0,void 0,(function*(){const e=yield CCXProvider.getInstance(),i=m[t.task];e.launchCCXiFrame(Object.assign(Object.assign({},t),{setErrorCallback:l,editorTitle:o.formatMessage({id:i.editorTitle}),publishLabel:o.formatMessage({id:i.cta}),publishModalTitle:o.formatMessage({id:i.modalTitle}),environment:n,setLoadStartedCallback:d}))})):i(c.NETWORK))}),[e]);const h=(0,o.useCallback)((()=>CCXContainer_awaiter(void 0,void 0,void 0,(function*(){if(!a.providers["native-api"])return;const e=yield a.providers["native-api"](),t=yield e.ccxAPI();yield t.closeCCXModal(!1)}))),[]),p=(0,o.useMemo)((()=>t===c.NONE&&n),[t,n]);return o.createElement(s.View,{width:"100%",height:"100%"},o.createElement(u,{dialogType:t,action:h}),o.createElement(s.View,{id:"ccx-container",UNSAFE_style:{display:p?void 0:"none"},UNSAFE_className:f().ccxContainer}))})),loadTranslations=e=>(i.p=a.discovery.dropins["desktop-ccx"].public_path,i("NclD")(`./${e}.json`)),T=a.locale2.withTranslations((e=>{let{locale:t,messages:i,props:n}=e;return o.createElement(r.IntlProvider,{locale:t,messages:i},o.createElement(v,Object.assign({},n)))}),loadTranslations),dropins_CCXDropin=e=>{let{props:t}=e;return o.createElement(T,{props:t})}},lXyy:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>__WEBPACK_DEFAULT_EXPORT__});var n=i("plsW"),__awaiter=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function fulfilled(e){try{step(n.next(e))}catch(e){r(e)}}function rejected(e){try{step(n.throw(e))}catch(e){r(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof i?e:new i((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))};const __WEBPACK_DEFAULT_EXPORT__=(e,t,i)=>__awaiter(void 0,void 0,void 0,(function*(){if(!n.providers["native-api"])return;const o=yield n.providers["native-api"]();(yield o.analyticsAPI()).logEvent(e,t,i)}))},AXyZ:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function toString(){return this.map((function(t){var i=function cssWithMappingToString(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var o=function toComment(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t);return"/*# ".concat(i," */")}(n),r=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[i].concat(r).concat([o]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);n&&o[c[0]]||(i&&(c[2]?c[2]="".concat(i," and ").concat(c[2]):c[2]=i),t.push(c))}},t}},HNnk:(e,t,i)=>{(t=i("AXyZ")(!1)).push([e.id,".Style__ccxContainer___XknsC{width:100vw;height:100vh;background-color:#fff}",""]),t.locals={ccxContainer:"Style__ccxContainer___XknsC"},e.exports=t},Jbo2:(e,t,i)=>{var n=i("2KPK"),o=i("HNnk");"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);var r={insert:"head",singleton:!1};n(o,r);e.exports=o.locals||{}},"2KPK":(e,t,i)=>{"use strict";var n=function isOldIE(){var e;return function memorize(){return void 0===e&&(e=Boolean(window&&document&&document.all&&!window.atob)),e}}(),o=function getTarget(){var e={};return function memorize(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),r=[];function getIndexByIdentifier(e){for(var t=-1,i=0;i<r.length;i++)if(r[i].identifier===e){t=i;break}return t}function modulesToDom(e,t){for(var i={},n=[],o=0;o<e.length;o++){var a=e[o],s=t.base?a[0]+t.base:a[0],c=i[s]||0,l="".concat(s," ").concat(c);i[s]=c+1;var d=getIndexByIdentifier(l),u={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(r[d].references++,r[d].updater(u)):r.push({identifier:l,updater:addStyle(u,t),references:1}),n.push(l)}return n}function insertStyleElement(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var r=i.nc;r&&(n.nonce=r)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var a=function replaceText(){var e=[];return function replace(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}();function applyToSingletonTag(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=a(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function applyToTag(e,t,i){var n=i.css,o=i.media,r=i.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var s=null,c=0;function addStyle(e,t){var i,n,o;if(t.singleton){var r=c++;i=s||(s=insertStyleElement(t)),n=applyToSingletonTag.bind(null,i,r,!1),o=applyToSingletonTag.bind(null,i,r,!0)}else i=insertStyleElement(t),n=applyToTag.bind(null,i,t),o=function remove(){!function removeStyleElement(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function updateStyle(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=n());var i=modulesToDom(e=e||[],t);return function update(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var o=getIndexByIdentifier(i[n]);r[o].references--}for(var a=modulesToDom(e,t),s=0;s<i.length;s++){var c=getIndexByIdentifier(i[s]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}i=a}}}},NclD:(e,t,i)=>{var n={"./ca-ES.json":["pYm7",4735],"./cs-CZ.json":["YZ1g",6650],"./da-DK.json":["7gHE",1507],"./de-DE.json":["fZDq",2472],"./en-AE.json":["XGun",4482],"./en-IL.json":["mOn7",114],"./en-US.json":["L8HS",7818],"./es-ES.json":["yYEy",1178],"./eu-ES.json":["I+QJ",8937],"./fi-FI.json":["K0FT",6128],"./fr-FR.json":["Dafc",7560],"./fr-MA.json":["oygw",6848],"./hr-HR.json":["OgUm",5563],"./hu-HU.json":["IHbk",781],"./it-IT.json":["Qbxz",1723],"./ja-JP.json":["wlCj",1834],"./ko-KR.json":["s35V",2959],"./nb-NO.json":["Kion",748],"./nl-NL.json":["uBzR",4550],"./pl-PL.json":["7ZB5",1494],"./pt-BR.json":["7P0v",633],"./ro-RO.json":["hFC7",813],"./ru-RU.json":["yOPA",2299],"./sk-SK.json":["ily9",8908],"./sl-SI.json":["vef3",9273],"./sv-SE.json":["JdsO",8690],"./tr-TR.json":["FcR4",8013],"./uk-UA.json":["RLVF",8215],"./zh-CN.json":["WVuS",4887],"./zh-TW.json":["xX2E",2218]};function webpackAsyncContext(e){if(!i.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return i.e(t[1]).then((()=>i.t(o,19)))}webpackAsyncContext.keys=()=>Object.keys(n),webpackAsyncContext.id="NclD",e.exports=webpackAsyncContext},YWiy:(e,t,i)=>{e.exports=i("2pFd")("GiK3")},Zm2D:(e,t,i)=>{e.exports=i("2pFd")("L4Le")},GWyE:(e,t,i)=>{e.exports=i("SEmX")("OzsN")},plsW:(e,t,i)=>{e.exports=i("2pFd")("o4sN")},QI6u:(e,t,i)=>{e.exports=i("SEmX")("vmwo")}}]);
//# sourceMappingURL=private/desktop-ccx-chunk.js.map